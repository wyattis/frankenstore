/*! For license information please see bundle.15fe07f68de62750cd60.js.LICENSE */
!function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=1460)}([function(module,exports){function getProperty(definition,k,isClassDescriptor){var def=isClassDescriptor?definition[k]:Object.getOwnPropertyDescriptor(definition,k);return!isClassDescriptor&&def.value&&"object"==typeof def.value&&(def=def.value),!(!def||!function(def){return!!def.get&&"function"==typeof def.get||!!def.set&&"function"==typeof def.set}(def))&&(void 0===def.enumerable&&(def.enumerable=!0),void 0===def.configurable&&(def.configurable=!0),def)}function hasNonConfigurable(obj,k){var prop=Object.getOwnPropertyDescriptor(obj,k);return!!prop&&(prop.value&&"object"==typeof prop.value&&(prop=prop.value),!1===prop.configurable)}function extend(ctor,definition,isClassDescriptor,extend){for(var k in definition)if(definition.hasOwnProperty(k)){var def=getProperty(definition,k,isClassDescriptor);if(!1!==def){if(hasNonConfigurable((extend||ctor).prototype,k)){if(Class.ignoreFinals)continue;throw new Error("cannot override final property '"+k+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(ctor.prototype,k,def)}else ctor.prototype[k]=definition[k]}}function mixin(myClass,mixins){if(mixins){Array.isArray(mixins)||(mixins=[mixins]);for(var i=0;i<mixins.length;i++)extend(myClass,mixins[i].prototype||mixins[i])}}function Class(definition){var initialize,Extends;if(definition||(definition={}),definition.initialize){if("function"!=typeof definition.initialize)throw new Error("initialize must be a function");initialize=definition.initialize,delete definition.initialize}else if(definition.Extends){var base=definition.Extends;initialize=function(){base.apply(this,arguments)}}else initialize=function(){};definition.Extends?(initialize.prototype=Object.create(definition.Extends.prototype),initialize.prototype.constructor=initialize,Extends=definition.Extends,delete definition.Extends):initialize.prototype.constructor=initialize;var mixins=null;return definition.Mixins&&(mixins=definition.Mixins,delete definition.Mixins),mixin(initialize,mixins),extend(initialize,definition,!0,Extends),initialize}Class.extend=extend,Class.mixin=mixin,Class.ignoreFinals=!1,module.exports=Class},function(module,exports){module.exports=function(source,key,defaultValue){var t=typeof source;return source&&"number"!==t&&"string"!==t&&source.hasOwnProperty(key)&&void 0!==source[key]?source[key]:defaultValue}},function(module,exports){module.exports=function(){}},function(module,exports,__webpack_require__){var Vector2=new(__webpack_require__(0))({initialize:function(x,y){this.x=0,this.y=0,"object"==typeof x?(this.x=x.x||0,this.y=x.y||0):(void 0===y&&(y=x),this.x=x||0,this.y=y||0)},clone:function(){return new Vector2(this.x,this.y)},copy:function(src){return this.x=src.x||0,this.y=src.y||0,this},setFromObject:function(obj){return this.x=obj.x||0,this.y=obj.y||0,this},set:function(x,y){return void 0===y&&(y=x),this.x=x,this.y=y,this},setTo:function(x,y){return this.set(x,y)},setToPolar:function(azimuth,radius){return null==radius&&(radius=1),this.x=Math.cos(azimuth)*radius,this.y=Math.sin(azimuth)*radius,this},equals:function(v){return this.x===v.x&&this.y===v.y},angle:function(){var angle=Math.atan2(this.y,this.x);return angle<0&&(angle+=2*Math.PI),angle},add:function(src){return this.x+=src.x,this.y+=src.y,this},subtract:function(src){return this.x-=src.x,this.y-=src.y,this},multiply:function(src){return this.x*=src.x,this.y*=src.y,this},scale:function(value){return isFinite(value)?(this.x*=value,this.y*=value):(this.x=0,this.y=0),this},divide:function(src){return this.x/=src.x,this.y/=src.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(src){var dx=src.x-this.x,dy=src.y-this.y;return Math.sqrt(dx*dx+dy*dy)},distanceSq:function(src){var dx=src.x-this.x,dy=src.y-this.y;return dx*dx+dy*dy},length:function(){var x=this.x,y=this.y;return Math.sqrt(x*x+y*y)},lengthSq:function(){var x=this.x,y=this.y;return x*x+y*y},normalize:function(){var x=this.x,y=this.y,len=x*x+y*y;return len>0&&(len=1/Math.sqrt(len),this.x=x*len,this.y=y*len),this},normalizeRightHand:function(){var x=this.x;return this.x=-1*this.y,this.y=x,this},dot:function(src){return this.x*src.x+this.y*src.y},cross:function(src){return this.x*src.y-this.y*src.x},lerp:function(src,t){void 0===t&&(t=0);var ax=this.x,ay=this.y;return this.x=ax+t*(src.x-ax),this.y=ay+t*(src.y-ay),this},transformMat3:function(mat){var x=this.x,y=this.y,m=mat.val;return this.x=m[0]*x+m[3]*y+m[6],this.y=m[1]*x+m[4]*y+m[7],this},transformMat4:function(mat){var x=this.x,y=this.y,m=mat.val;return this.x=m[0]*x+m[4]*y+m[12],this.y=m[1]*x+m[5]*y+m[13],this},reset:function(){return this.x=0,this.y=0,this}});Vector2.ZERO=new Vector2,Vector2.RIGHT=new Vector2(1,0),Vector2.LEFT=new Vector2(-1,0),Vector2.UP=new Vector2(0,-1),Vector2.DOWN=new Vector2(0,1),Vector2.ONE=new Vector2(1,1),module.exports=Vector2},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),GEOM_CONST=__webpack_require__(53),Point=new Class({initialize:function(x,y){void 0===x&&(x=0),void 0===y&&(y=x),this.type=GEOM_CONST.POINT,this.x=x,this.y=y},setTo:function(x,y){return void 0===x&&(x=0),void 0===y&&(y=x),this.x=x,this.y=y,this}});module.exports=Point},function(module,exports){module.exports=function(source,key,defaultValue){if(source&&"number"!=typeof source){if(source.hasOwnProperty(key))return source[key];if(-1!==key.indexOf(".")){for(var keys=key.split("."),parent=source,value=defaultValue,i=0;i<keys.length;i++){if(!parent.hasOwnProperty(keys[i])){value=defaultValue;break}value=parent[keys[i]],parent=parent[keys[i]]}return value}return defaultValue}return defaultValue}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),PluginCache=__webpack_require__(18),SceneEvents=__webpack_require__(20),GameObjectFactory=new Class({initialize:function(scene){this.scene=scene,this.systems=scene.sys,this.displayList,this.updateList,scene.sys.events.once(SceneEvents.BOOT,this.boot,this),scene.sys.events.on(SceneEvents.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.systems.events.once(SceneEvents.DESTROY,this.destroy,this)},start:function(){this.systems.events.once(SceneEvents.SHUTDOWN,this.shutdown,this)},existing:function(child){return(child.renderCanvas||child.renderWebGL)&&this.displayList.add(child),child.preUpdate&&this.updateList.add(child),child},shutdown:function(){this.systems.events.off(SceneEvents.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(SceneEvents.START,this.start,this),this.scene=null,this.systems=null,this.displayList=null,this.updateList=null}});GameObjectFactory.register=function(factoryType,factoryFunction){GameObjectFactory.prototype.hasOwnProperty(factoryType)||(GameObjectFactory.prototype[factoryType]=factoryFunction)},GameObjectFactory.remove=function(factoryType){GameObjectFactory.prototype.hasOwnProperty(factoryType)&&delete GameObjectFactory.prototype[factoryType]},PluginCache.register("GameObjectFactory",GameObjectFactory,"add"),module.exports=GameObjectFactory},function(module,exports){module.exports=function(obj){if("object"!=typeof obj||obj.nodeType||obj===obj.window)return!1;try{if(obj.constructor&&!{}.hasOwnProperty.call(obj.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0}},function(module,exports){var types={},FileTypesManager={install:function(loader){for(var key in types)loader[key]=types[key]},register:function(key,factoryFunction){types[key]=factoryFunction},destroy:function(){types={}}};module.exports=FileTypesManager},function(module,exports,__webpack_require__){"use strict";var has=Object.prototype.hasOwnProperty,prefix="~";function Events(){}function EE(fn,context,once){this.fn=fn,this.context=context,this.once=once||!1}function addListener(emitter,event,fn,context,once){if("function"!=typeof fn)throw new TypeError("The listener must be a function");var listener=new EE(fn,context||emitter,once),evt=prefix?prefix+event:event;return emitter._events[evt]?emitter._events[evt].fn?emitter._events[evt]=[emitter._events[evt],listener]:emitter._events[evt].push(listener):(emitter._events[evt]=listener,emitter._eventsCount++),emitter}function clearEvent(emitter,evt){0==--emitter._eventsCount?emitter._events=new Events:delete emitter._events[evt]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(prefix=!1)),EventEmitter.prototype.eventNames=function(){var events,name,names=[];if(0===this._eventsCount)return names;for(name in events=this._events)has.call(events,name)&&names.push(prefix?name.slice(1):name);return Object.getOwnPropertySymbols?names.concat(Object.getOwnPropertySymbols(events)):names},EventEmitter.prototype.listeners=function(event){var evt=prefix?prefix+event:event,handlers=this._events[evt];if(!handlers)return[];if(handlers.fn)return[handlers.fn];for(var i=0,l=handlers.length,ee=new Array(l);i<l;i++)ee[i]=handlers[i].fn;return ee},EventEmitter.prototype.listenerCount=function(event){var evt=prefix?prefix+event:event,listeners=this._events[evt];return listeners?listeners.fn?1:listeners.length:0},EventEmitter.prototype.emit=function(event,a1,a2,a3,a4,a5){var evt=prefix?prefix+event:event;if(!this._events[evt])return!1;var args,i,listeners=this._events[evt],len=arguments.length;if(listeners.fn){switch(listeners.once&&this.removeListener(event,listeners.fn,void 0,!0),len){case 1:return listeners.fn.call(listeners.context),!0;case 2:return listeners.fn.call(listeners.context,a1),!0;case 3:return listeners.fn.call(listeners.context,a1,a2),!0;case 4:return listeners.fn.call(listeners.context,a1,a2,a3),!0;case 5:return listeners.fn.call(listeners.context,a1,a2,a3,a4),!0;case 6:return listeners.fn.call(listeners.context,a1,a2,a3,a4,a5),!0}for(i=1,args=new Array(len-1);i<len;i++)args[i-1]=arguments[i];listeners.fn.apply(listeners.context,args)}else{var j,length=listeners.length;for(i=0;i<length;i++)switch(listeners[i].once&&this.removeListener(event,listeners[i].fn,void 0,!0),len){case 1:listeners[i].fn.call(listeners[i].context);break;case 2:listeners[i].fn.call(listeners[i].context,a1);break;case 3:listeners[i].fn.call(listeners[i].context,a1,a2);break;case 4:listeners[i].fn.call(listeners[i].context,a1,a2,a3);break;default:if(!args)for(j=1,args=new Array(len-1);j<len;j++)args[j-1]=arguments[j];listeners[i].fn.apply(listeners[i].context,args)}}return!0},EventEmitter.prototype.on=function(event,fn,context){return addListener(this,event,fn,context,!1)},EventEmitter.prototype.once=function(event,fn,context){return addListener(this,event,fn,context,!0)},EventEmitter.prototype.removeListener=function(event,fn,context,once){var evt=prefix?prefix+event:event;if(!this._events[evt])return this;if(!fn)return clearEvent(this,evt),this;var listeners=this._events[evt];if(listeners.fn)listeners.fn!==fn||once&&!listeners.once||context&&listeners.context!==context||clearEvent(this,evt);else{for(var i=0,events=[],length=listeners.length;i<length;i++)(listeners[i].fn!==fn||once&&!listeners[i].once||context&&listeners[i].context!==context)&&events.push(listeners[i]);events.length?this._events[evt]=1===events.length?events[0]:events:clearEvent(this,evt)}return this},EventEmitter.prototype.removeAllListeners=function(event){var evt;return event?(evt=prefix?prefix+event:event,this._events[evt]&&clearEvent(this,evt)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=prefix,EventEmitter.EventEmitter=EventEmitter,module.exports=EventEmitter},function(module,exports){module.exports={getTintFromFloats:function(r,g,b,a){return((255&(255*a|0))<<24|(255&(255*r|0))<<16|(255&(255*g|0))<<8|255&(255*b|0))>>>0},getTintAppendFloatAlpha:function(rgb,a){return((255&(255*a|0))<<24|rgb)>>>0},getTintAppendFloatAlphaAndSwap:function(rgb,a){return((255&(255*a|0))<<24|(255&(0|rgb))<<16|(255&(rgb>>8|0))<<8|255&(rgb>>16|0))>>>0},getFloatsFromUintRGB:function(rgb){return[(255&(rgb>>16|0))/255,(255&(rgb>>8|0))/255,(255&(0|rgb))/255]},getComponentCount:function(attributes,glContext){for(var count=0,index=0;index<attributes.length;++index){var element=attributes[index];element.type===glContext.FLOAT?count+=element.size:count+=1}return count}}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Contains=__webpack_require__(54),GetPoint=__webpack_require__(163),GetPoints=__webpack_require__(277),GEOM_CONST=__webpack_require__(53),Line=__webpack_require__(62),Random=__webpack_require__(166),Rectangle=new Class({initialize:function(x,y,width,height){void 0===x&&(x=0),void 0===y&&(y=0),void 0===width&&(width=0),void 0===height&&(height=0),this.type=GEOM_CONST.RECTANGLE,this.x=x,this.y=y,this.width=width,this.height=height},contains:function(x,y){return Contains(this,x,y)},getPoint:function(position,output){return GetPoint(this,position,output)},getPoints:function(quantity,stepRate,output){return GetPoints(this,quantity,stepRate,output)},getRandomPoint:function(point){return Random(this,point)},setTo:function(x,y,width,height){return this.x=x,this.y=y,this.width=width,this.height=height,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(x,y){return void 0===y&&(y=x),this.x=x,this.y=y,this},setSize:function(width,height){return void 0===height&&(height=width),this.width=width,this.height=height,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(line){return void 0===line&&(line=new Line),line.setTo(this.x,this.y,this.right,this.y),line},getLineB:function(line){return void 0===line&&(line=new Line),line.setTo(this.right,this.y,this.right,this.bottom),line},getLineC:function(line){return void 0===line&&(line=new Line),line.setTo(this.right,this.bottom,this.x,this.bottom),line},getLineD:function(line){return void 0===line&&(line=new Line),line.setTo(this.x,this.bottom,this.x,this.y),line},left:{get:function(){return this.x},set:function(value){value>=this.right?this.width=0:this.width=this.right-value,this.x=value}},right:{get:function(){return this.x+this.width},set:function(value){value<=this.x?this.width=0:this.width=value-this.x}},top:{get:function(){return this.y},set:function(value){value>=this.bottom?this.height=0:this.height=this.bottom-value,this.y=value}},bottom:{get:function(){return this.y+this.height},set:function(value){value<=this.y?this.height=0:this.height=value-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(value){this.x=value-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(value){this.y=value-this.height/2}}});module.exports=Rectangle},function(module,exports,__webpack_require__){module.exports={Alpha:__webpack_require__(271),Animation:__webpack_require__(272),BlendMode:__webpack_require__(275),ComputedSize:__webpack_require__(565),Crop:__webpack_require__(566),Depth:__webpack_require__(276),Flip:__webpack_require__(567),GetBounds:__webpack_require__(568),Mask:__webpack_require__(280),Origin:__webpack_require__(585),PathFollower:__webpack_require__(586),Pipeline:__webpack_require__(121),ScrollFactor:__webpack_require__(283),Size:__webpack_require__(587),Texture:__webpack_require__(588),TextureCrop:__webpack_require__(589),Tint:__webpack_require__(590),ToJSON:__webpack_require__(284),Transform:__webpack_require__(285),TransformMatrix:__webpack_require__(36),Visible:__webpack_require__(286)}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),ComponentsToJSON=__webpack_require__(284),DataManager=__webpack_require__(103),EventEmitter=__webpack_require__(9),Events=__webpack_require__(122),GameObject=new Class({Extends:EventEmitter,initialize:function(scene,type){EventEmitter.call(this),this.scene=scene,this.type=type,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,scene.sys.queueDepthSort()},setActive:function(value){return this.active=value,this},setName:function(value){return this.name=value,this},setState:function(value){return this.state=value,this},setDataEnabled:function(){return this.data||(this.data=new DataManager(this)),this},setData:function(key,value){return this.data||(this.data=new DataManager(this)),this.data.set(key,value),this},getData:function(key){return this.data||(this.data=new DataManager(this)),this.data.get(key)},setInteractive:function(shape,callback,dropZone){return this.scene.sys.input.enable(this,shape,callback,dropZone),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},update:function(){},toJSON:function(){return ComponentsToJSON(this)},willRender:function(camera){return!(GameObject.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&camera.id)},getIndexList:function(){for(var child=this,parent=this.parentContainer,indexes=[];parent&&(indexes.unshift(parent.getIndex(child)),child=parent,parent.parentContainer);)parent=parent.parentContainer;return indexes.unshift(this.scene.sys.displayList.getIndex(child)),indexes},destroy:function(fromScene){if(void 0===fromScene&&(fromScene=!1),this.scene&&!this.ignoreDestroy){this.preDestroy&&this.preDestroy.call(this),this.emit(Events.DESTROY,this);var sys=this.scene.sys;fromScene||(sys.displayList.remove(this),sys.updateList.remove(this)),this.input&&(sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),fromScene||sys.queueDepthSort(),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0,this.removeAllListeners()}}});GameObject.RENDER_MASK=15,module.exports=GameObject},function(module,exports,__webpack_require__){var MATH=__webpack_require__(182),GetValue=__webpack_require__(5);module.exports=function(source,key,defaultValue){var value=GetValue(source,key,null);if(null===value)return defaultValue;if(Array.isArray(value))return MATH.RND.pick(value);if("object"==typeof value){if(value.hasOwnProperty("randInt"))return MATH.RND.integerInRange(value.randInt[0],value.randInt[1]);if(value.hasOwnProperty("randFloat"))return MATH.RND.realInRange(value.randFloat[0],value.randFloat[1])}else if("function"==typeof value)return value(key);return value}},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(__webpack_require__(1431)),__export(__webpack_require__(531)),__export(__webpack_require__(1432)),__export(__webpack_require__(1433))},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),PluginCache=__webpack_require__(18),SceneEvents=__webpack_require__(20),GameObjectCreator=new Class({initialize:function(scene){this.scene=scene,this.systems=scene.sys,this.displayList,this.updateList,scene.sys.events.once(SceneEvents.BOOT,this.boot,this),scene.sys.events.on(SceneEvents.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.systems.events.once(SceneEvents.DESTROY,this.destroy,this)},start:function(){this.systems.events.once(SceneEvents.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(SceneEvents.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(SceneEvents.START,this.start,this),this.scene=null,this.systems=null,this.displayList=null,this.updateList=null}});GameObjectCreator.register=function(factoryType,factoryFunction){GameObjectCreator.prototype.hasOwnProperty(factoryType)||(GameObjectCreator.prototype[factoryType]=factoryFunction)},GameObjectCreator.remove=function(factoryType){GameObjectCreator.prototype.hasOwnProperty(factoryType)&&delete GameObjectCreator.prototype[factoryType]},PluginCache.register("GameObjectCreator",GameObjectCreator,"make"),module.exports=GameObjectCreator},function(module,exports,__webpack_require__){var IsPlainObject=__webpack_require__(7),Extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;for("boolean"==typeof target&&(deep=target,target=arguments[1]||{},i=2),length===i&&(target=this,--i);i<length;i++)if(null!=(options=arguments[i]))for(name in options)src=target[name],target!==(copy=options[name])&&(deep&&copy&&(IsPlainObject(copy)||(copyIsArray=Array.isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&Array.isArray(src)?src:[]):clone=src&&IsPlainObject(src)?src:{},target[name]=Extend(deep,clone,copy)):void 0!==copy&&(target[name]=copy));return target};module.exports=Extend},function(module,exports){var corePlugins={},customPlugins={},PluginCache={register:function(key,plugin,mapping,custom){void 0===custom&&(custom=!1),corePlugins[key]={plugin:plugin,mapping:mapping,custom:custom}},registerCustom:function(key,plugin,mapping,data){customPlugins[key]={plugin:plugin,mapping:mapping,data:data}},hasCore:function(key){return corePlugins.hasOwnProperty(key)},hasCustom:function(key){return customPlugins.hasOwnProperty(key)},getCore:function(key){return corePlugins[key]},getCustom:function(key){return customPlugins[key]},getCustomClass:function(key){return customPlugins.hasOwnProperty(key)?customPlugins[key].plugin:null},remove:function(key){corePlugins.hasOwnProperty(key)&&delete corePlugins[key]},removeCustom:function(key){customPlugins.hasOwnProperty(key)&&delete customPlugins[key]},destroyCorePlugins:function(){for(var key in corePlugins)corePlugins.hasOwnProperty(key)&&delete corePlugins[key]},destroyCustomPlugins:function(){for(var key in customPlugins)customPlugins.hasOwnProperty(key)&&delete customPlugins[key]}};module.exports=PluginCache},function(module,exports,__webpack_require__){(function(global){var Common={};module.exports=Common,function(){Common._nextId=0,Common._seed=0,Common._nowStartTime=+new Date,Common.extend=function(obj,deep){var argsStart,deepClone;"boolean"==typeof deep?(argsStart=2,deepClone=deep):(argsStart=1,deepClone=!0);for(var i=argsStart;i<arguments.length;i++){var source=arguments[i];if(source)for(var prop in source)deepClone&&source[prop]&&source[prop].constructor===Object?obj[prop]&&obj[prop].constructor!==Object?obj[prop]=source[prop]:(obj[prop]=obj[prop]||{},Common.extend(obj[prop],deepClone,source[prop])):obj[prop]=source[prop]}return obj},Common.clone=function(obj,deep){return Common.extend({},deep,obj)},Common.keys=function(obj){if(Object.keys)return Object.keys(obj);var keys=[];for(var key in obj)keys.push(key);return keys},Common.values=function(obj){var values=[];if(Object.keys){for(var keys=Object.keys(obj),i=0;i<keys.length;i++)values.push(obj[keys[i]]);return values}for(var key in obj)values.push(obj[key]);return values},Common.get=function(obj,path,begin,end){path=path.split(".").slice(begin,end);for(var i=0;i<path.length;i+=1)obj=obj[path[i]];return obj},Common.set=function(obj,path,val,begin,end){var parts=path.split(".").slice(begin,end);return Common.get(obj,path,0,-1)[parts[parts.length-1]]=val,val},Common.shuffle=function(array){for(var i=array.length-1;i>0;i--){var j=Math.floor(Common.random()*(i+1)),temp=array[i];array[i]=array[j],array[j]=temp}return array},Common.choose=function(choices){return choices[Math.floor(Common.random()*choices.length)]},Common.isElement=function(obj){return"undefined"!=typeof HTMLElement?obj instanceof HTMLElement:!!(obj&&obj.nodeType&&obj.nodeName)},Common.isArray=function(obj){return"[object Array]"===Object.prototype.toString.call(obj)},Common.isFunction=function(obj){return"function"==typeof obj},Common.isPlainObject=function(obj){return"object"==typeof obj&&obj.constructor===Object},Common.isString=function(obj){return"[object String]"===toString.call(obj)},Common.clamp=function(value,min,max){return value<min?min:value>max?max:value},Common.sign=function(value){return value<0?-1:1},Common.now=function(){if(window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-Common._nowStartTime},Common.random=function(min,max){return max=void 0!==max?max:1,(min=void 0!==min?min:0)+_seededRandom()*(max-min)};var _seededRandom=function(){return Common._seed=(9301*Common._seed+49297)%233280,Common._seed/233280};Common.colorToNumber=function(colorString){return 3==(colorString=colorString.replace("#","")).length&&(colorString=colorString.charAt(0)+colorString.charAt(0)+colorString.charAt(1)+colorString.charAt(1)+colorString.charAt(2)+colorString.charAt(2)),parseInt(colorString,16)},Common.logLevel=1,Common.log=function(){console&&Common.logLevel>0&&Common.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},Common.info=function(){console&&Common.logLevel>0&&Common.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},Common.warn=function(){console&&Common.logLevel>0&&Common.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},Common.nextId=function(){return Common._nextId++},Common.indexOf=function(haystack,needle){if(haystack.indexOf)return haystack.indexOf(needle);for(var i=0;i<haystack.length;i++)if(haystack[i]===needle)return i;return-1},Common.map=function(list,func){if(list.map)return list.map(func);for(var mapped=[],i=0;i<list.length;i+=1)mapped.push(func(list[i]));return mapped},Common.topologicalSort=function(graph){var result=[],visited=[],temp=[];for(var node in graph)visited[node]||temp[node]||Common._topologicalSort(node,visited,temp,graph,result);return result},Common._topologicalSort=function(node,visited,temp,graph,result){var neighbors=graph[node]||[];temp[node]=!0;for(var i=0;i<neighbors.length;i+=1){var neighbor=neighbors[i];temp[neighbor]||(visited[neighbor]||Common._topologicalSort(neighbor,visited,temp,graph,result))}temp[node]=!1,visited[node]=!0,result.push(node)},Common.chain=function(){for(var funcs=[],i=0;i<arguments.length;i+=1){var func=arguments[i];func._chained?funcs.push.apply(funcs,func._chained):funcs.push(func)}var chain=function(){for(var lastResult,args=new Array(arguments.length),i=0,l=arguments.length;i<l;i++)args[i]=arguments[i];for(i=0;i<funcs.length;i+=1){var result=funcs[i].apply(lastResult,args);void 0!==result&&(lastResult=result)}return lastResult};return chain._chained=funcs,chain},Common.chainPathBefore=function(base,path,func){return Common.set(base,path,Common.chain(func,Common.get(base,path)))},Common.chainPathAfter=function(base,path,func){return Common.set(base,path,Common.chain(Common.get(base,path),func))},Common._requireGlobal=function(globalName,moduleName){return"undefined"!=typeof window?window[globalName]:void 0!==global?global[globalName]:null}}()}).call(this,__webpack_require__(158))},function(module,exports,__webpack_require__){module.exports={BOOT:__webpack_require__(706),CREATE:__webpack_require__(707),DESTROY:__webpack_require__(708),PAUSE:__webpack_require__(709),POST_UPDATE:__webpack_require__(710),PRE_UPDATE:__webpack_require__(711),READY:__webpack_require__(712),RENDER:__webpack_require__(713),RESUME:__webpack_require__(714),SHUTDOWN:__webpack_require__(715),SLEEP:__webpack_require__(716),START:__webpack_require__(717),TRANSITION_COMPLETE:__webpack_require__(718),TRANSITION_INIT:__webpack_require__(719),TRANSITION_OUT:__webpack_require__(720),TRANSITION_START:__webpack_require__(721),TRANSITION_WAKE:__webpack_require__(722),UPDATE:__webpack_require__(723),WAKE:__webpack_require__(724)}},function(module,exports){module.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19}},function(module,exports){var MATH_CONST={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null};module.exports=MATH_CONST},function(module,exports,__webpack_require__){module.exports={BLUR:__webpack_require__(569),BOOT:__webpack_require__(570),CONTEXT_LOST:__webpack_require__(571),CONTEXT_RESTORED:__webpack_require__(572),DESTROY:__webpack_require__(573),FOCUS:__webpack_require__(574),HIDDEN:__webpack_require__(575),PAUSE:__webpack_require__(576),POST_RENDER:__webpack_require__(577),POST_STEP:__webpack_require__(578),PRE_RENDER:__webpack_require__(579),PRE_STEP:__webpack_require__(580),READY:__webpack_require__(581),RESUME:__webpack_require__(582),STEP:__webpack_require__(583),VISIBLE:__webpack_require__(584)}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),CONST=__webpack_require__(21),Events=__webpack_require__(88),GetFastValue=__webpack_require__(1),GetURL=__webpack_require__(227),MergeXHRSettings=__webpack_require__(228),XHRLoader=__webpack_require__(463),XHRSettings=__webpack_require__(146),File=new Class({initialize:function(loader,fileConfig){this.loader=loader,this.cache=GetFastValue(fileConfig,"cache",!1),this.type=GetFastValue(fileConfig,"type",!1),this.key=GetFastValue(fileConfig,"key",!1);var loadKey=this.key;if(loader.prefix&&""!==loader.prefix&&(this.key=loader.prefix+loadKey),!this.type||!this.key)throw new Error("Error calling 'Loader."+this.type+"' invalid key provided.");this.url=GetFastValue(fileConfig,"url"),void 0===this.url?this.url=loader.path+loadKey+"."+GetFastValue(fileConfig,"extension",""):"function"!=typeof this.url&&(this.url=loader.path+this.url),this.src="",this.xhrSettings=XHRSettings(GetFastValue(fileConfig,"responseType",void 0)),GetFastValue(fileConfig,"xhrSettings",!1)&&(this.xhrSettings=MergeXHRSettings(this.xhrSettings,GetFastValue(fileConfig,"xhrSettings",{}))),this.xhrLoader=null,this.state="function"==typeof this.url?CONST.FILE_POPULATED:CONST.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=GetFastValue(fileConfig,"config",{}),this.multiFile,this.linkFile},setLink:function(fileB){this.linkFile=fileB,fileB.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===CONST.FILE_POPULATED?this.loader.nextFile(this,!0):(this.src=GetURL(this,this.loader.baseURL),0===this.src.indexOf("data:")?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=XHRLoader(this,this.loader.xhr))},onLoad:function(xhr,event){var localFileOk=xhr.responseURL&&0===xhr.responseURL.indexOf("file://")&&0===event.target.status,success=!(event.target&&200!==event.target.status)||localFileOk;4===xhr.readyState&&xhr.status>=400&&xhr.status<=599&&(success=!1),this.resetXHR(),this.loader.nextFile(this,success)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(event){event.lengthComputable&&(this.bytesLoaded=event.loaded,this.bytesTotal=event.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(Events.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=CONST.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=CONST.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=CONST.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(data){void 0===data&&(data=this.data);var key=this.key,type=this.type;this.loader.emit(Events.FILE_COMPLETE,key,type,data),this.loader.emit(Events.FILE_KEY_COMPLETE+type+"-"+key,key,type,data),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});File.createObjectURL=function(image,blob,defaultType){if("function"==typeof URL)image.src=URL.createObjectURL(blob);else{var reader=new FileReader;reader.onload=function(){image.removeAttribute("crossOrigin"),image.src="data:"+(blob.type||defaultType)+";base64,"+reader.result.split(",")[1]},reader.onerror=image.onerror,reader.readAsDataURL(blob)}},File.revokeObjectURL=function(image){"function"==typeof URL&&URL.revokeObjectURL(image.src)},module.exports=File},function(module,exports){module.exports=function(value,min,max){return Math.max(min,Math.min(max,value))}},function(module,exports,__webpack_require__){var Body={};module.exports=Body;var Vertices=__webpack_require__(32),Vector=__webpack_require__(38),Sleeping=__webpack_require__(113),Common=__webpack_require__(19),Bounds=__webpack_require__(39),Axes=__webpack_require__(234);!function(){Body._inertiaScale=4,Body._nextCollidingGroupId=1,Body._nextNonCollidingGroupId=-1,Body._nextCategory=1,Body.create=function(options){var defaults={id:Common.nextId(),type:"body",label:"Body",gameObject:null,parts:[],plugin:{},angle:0,vertices:Vertices.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},previousPositionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,ignoreGravity:!1,ignorePointer:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0},lineWidth:0},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},body=Common.extend(defaults,options);return _initProperties(body,options),body},Body.nextGroup=function(isNonColliding){return isNonColliding?Body._nextNonCollidingGroupId--:Body._nextCollidingGroupId++},Body.nextCategory=function(){return Body._nextCategory=Body._nextCategory<<1,Body._nextCategory};var _initProperties=function(body,options){options=options||{},Body.set(body,{bounds:body.bounds||Bounds.create(body.vertices),positionPrev:body.positionPrev||Vector.clone(body.position),anglePrev:body.anglePrev||body.angle,vertices:body.vertices,parts:body.parts||[body],isStatic:body.isStatic,isSleeping:body.isSleeping,parent:body.parent||body}),Vertices.rotate(body.vertices,body.angle,body.position),Axes.rotate(body.axes,body.angle),Bounds.update(body.bounds,body.vertices,body.velocity),Body.set(body,{axes:options.axes||body.axes,area:options.area||body.area,mass:options.mass||body.mass,inertia:options.inertia||body.inertia});var defaultFillStyle=body.isStatic?"#2e2b44":Common.choose(["#006BA6","#0496FF","#FFBC42","#D81159","#8F2D56"]);body.render.fillStyle=body.render.fillStyle||defaultFillStyle,body.render.strokeStyle=body.render.strokeStyle||"#000",body.render.sprite.xOffset+=-(body.bounds.min.x-body.position.x)/(body.bounds.max.x-body.bounds.min.x),body.render.sprite.yOffset+=-(body.bounds.min.y-body.position.y)/(body.bounds.max.y-body.bounds.min.y)};Body.set=function(body,settings,value){var property;for(property in"string"==typeof settings&&(property=settings,(settings={})[property]=value),settings)if(settings.hasOwnProperty(property))switch(value=settings[property],property){case"isStatic":Body.setStatic(body,value);break;case"isSleeping":Sleeping.set(body,value);break;case"mass":Body.setMass(body,value);break;case"density":Body.setDensity(body,value);break;case"inertia":Body.setInertia(body,value);break;case"vertices":Body.setVertices(body,value);break;case"position":Body.setPosition(body,value);break;case"angle":Body.setAngle(body,value);break;case"velocity":Body.setVelocity(body,value);break;case"angularVelocity":Body.setAngularVelocity(body,value);break;case"parts":Body.setParts(body,value);break;default:body[property]=value}},Body.setStatic=function(body,isStatic){for(var i=0;i<body.parts.length;i++){var part=body.parts[i];part.isStatic=isStatic,isStatic?(part._original={restitution:part.restitution,friction:part.friction,mass:part.mass,inertia:part.inertia,density:part.density,inverseMass:part.inverseMass,inverseInertia:part.inverseInertia},part.restitution=0,part.friction=1,part.mass=part.inertia=part.density=1/0,part.inverseMass=part.inverseInertia=0,part.positionPrev.x=part.position.x,part.positionPrev.y=part.position.y,part.anglePrev=part.angle,part.angularVelocity=0,part.speed=0,part.angularSpeed=0,part.motion=0):part._original&&(part.restitution=part._original.restitution,part.friction=part._original.friction,part.mass=part._original.mass,part.inertia=part._original.inertia,part.density=part._original.density,part.inverseMass=part._original.inverseMass,part.inverseInertia=part._original.inverseInertia,part._original=null)}},Body.setMass=function(body,mass){var moment=body.inertia/(body.mass/6);body.inertia=moment*(mass/6),body.inverseInertia=1/body.inertia,body.mass=mass,body.inverseMass=1/body.mass,body.density=body.mass/body.area},Body.setDensity=function(body,density){Body.setMass(body,density*body.area),body.density=density},Body.setInertia=function(body,inertia){body.inertia=inertia,body.inverseInertia=1/body.inertia},Body.setVertices=function(body,vertices){vertices[0].body===body?body.vertices=vertices:body.vertices=Vertices.create(vertices,body),body.axes=Axes.fromVertices(body.vertices),body.area=Vertices.area(body.vertices),Body.setMass(body,body.density*body.area);var centre=Vertices.centre(body.vertices);Vertices.translate(body.vertices,centre,-1),Body.setInertia(body,Body._inertiaScale*Vertices.inertia(body.vertices,body.mass)),Vertices.translate(body.vertices,body.position),Bounds.update(body.bounds,body.vertices,body.velocity)},Body.setParts=function(body,parts,autoHull){var i;for(parts=parts.slice(0),body.parts.length=0,body.parts.push(body),body.parent=body,i=0;i<parts.length;i++){var part=parts[i];part!==body&&(part.parent=body,body.parts.push(part))}if(1!==body.parts.length){if(autoHull=void 0===autoHull||autoHull){var vertices=[];for(i=0;i<parts.length;i++)vertices=vertices.concat(parts[i].vertices);Vertices.clockwiseSort(vertices);var hull=Vertices.hull(vertices),hullCentre=Vertices.centre(hull);Body.setVertices(body,hull),Vertices.translate(body.vertices,hullCentre)}var total=Body._totalProperties(body);body.area=total.area,body.parent=body,body.position.x=total.centre.x,body.position.y=total.centre.y,body.positionPrev.x=total.centre.x,body.positionPrev.y=total.centre.y,Body.setMass(body,total.mass),Body.setInertia(body,total.inertia),Body.setPosition(body,total.centre)}},Body.setPosition=function(body,position){var delta=Vector.sub(position,body.position);body.positionPrev.x+=delta.x,body.positionPrev.y+=delta.y;for(var i=0;i<body.parts.length;i++){var part=body.parts[i];part.position.x+=delta.x,part.position.y+=delta.y,Vertices.translate(part.vertices,delta),Bounds.update(part.bounds,part.vertices,body.velocity)}},Body.setAngle=function(body,angle){var delta=angle-body.angle;body.anglePrev+=delta;for(var i=0;i<body.parts.length;i++){var part=body.parts[i];part.angle+=delta,Vertices.rotate(part.vertices,delta,body.position),Axes.rotate(part.axes,delta),Bounds.update(part.bounds,part.vertices,body.velocity),i>0&&Vector.rotateAbout(part.position,delta,body.position,part.position)}},Body.setVelocity=function(body,velocity){body.positionPrev.x=body.position.x-velocity.x,body.positionPrev.y=body.position.y-velocity.y,body.velocity.x=velocity.x,body.velocity.y=velocity.y,body.speed=Vector.magnitude(body.velocity)},Body.setAngularVelocity=function(body,velocity){body.anglePrev=body.angle-velocity,body.angularVelocity=velocity,body.angularSpeed=Math.abs(body.angularVelocity)},Body.translate=function(body,translation){Body.setPosition(body,Vector.add(body.position,translation))},Body.rotate=function(body,rotation,point){if(point){var cos=Math.cos(rotation),sin=Math.sin(rotation),dx=body.position.x-point.x,dy=body.position.y-point.y;Body.setPosition(body,{x:point.x+(dx*cos-dy*sin),y:point.y+(dx*sin+dy*cos)}),Body.setAngle(body,body.angle+rotation)}else Body.setAngle(body,body.angle+rotation)},Body.scale=function(body,scaleX,scaleY,point){var totalArea=0,totalInertia=0;point=point||body.position;for(var i=0;i<body.parts.length;i++){var part=body.parts[i];Vertices.scale(part.vertices,scaleX,scaleY,point),part.axes=Axes.fromVertices(part.vertices),part.area=Vertices.area(part.vertices),Body.setMass(part,body.density*part.area),Vertices.translate(part.vertices,{x:-part.position.x,y:-part.position.y}),Body.setInertia(part,Body._inertiaScale*Vertices.inertia(part.vertices,part.mass)),Vertices.translate(part.vertices,{x:part.position.x,y:part.position.y}),i>0&&(totalArea+=part.area,totalInertia+=part.inertia),part.position.x=point.x+(part.position.x-point.x)*scaleX,part.position.y=point.y+(part.position.y-point.y)*scaleY,Bounds.update(part.bounds,part.vertices,body.velocity)}body.parts.length>1&&(body.area=totalArea,body.isStatic||(Body.setMass(body,body.density*totalArea),Body.setInertia(body,totalInertia))),body.circleRadius&&(scaleX===scaleY?body.circleRadius*=scaleX:body.circleRadius=null)},Body.update=function(body,deltaTime,timeScale,correction){var deltaTimeSquared=Math.pow(deltaTime*timeScale*body.timeScale,2),frictionAir=1-body.frictionAir*timeScale*body.timeScale,velocityPrevX=body.position.x-body.positionPrev.x,velocityPrevY=body.position.y-body.positionPrev.y;body.velocity.x=velocityPrevX*frictionAir*correction+body.force.x/body.mass*deltaTimeSquared,body.velocity.y=velocityPrevY*frictionAir*correction+body.force.y/body.mass*deltaTimeSquared,body.positionPrev.x=body.position.x,body.positionPrev.y=body.position.y,body.position.x+=body.velocity.x,body.position.y+=body.velocity.y,body.angularVelocity=(body.angle-body.anglePrev)*frictionAir*correction+body.torque/body.inertia*deltaTimeSquared,body.anglePrev=body.angle,body.angle+=body.angularVelocity,body.speed=Vector.magnitude(body.velocity),body.angularSpeed=Math.abs(body.angularVelocity);for(var i=0;i<body.parts.length;i++){var part=body.parts[i];Vertices.translate(part.vertices,body.velocity),i>0&&(part.position.x+=body.velocity.x,part.position.y+=body.velocity.y),0!==body.angularVelocity&&(Vertices.rotate(part.vertices,body.angularVelocity,body.position),Axes.rotate(part.axes,body.angularVelocity),i>0&&Vector.rotateAbout(part.position,body.angularVelocity,body.position,part.position)),Bounds.update(part.bounds,part.vertices,body.velocity)}},Body.applyForce=function(body,position,force){body.force.x+=force.x,body.force.y+=force.y;var offset_x=position.x-body.position.x,offset_y=position.y-body.position.y;body.torque+=offset_x*force.y-offset_y*force.x},Body._totalProperties=function(body){for(var properties={mass:0,area:0,inertia:0,centre:{x:0,y:0}},i=1===body.parts.length?0:1;i<body.parts.length;i++){var part=body.parts[i],mass=part.mass!==1/0?part.mass:1;properties.mass+=mass,properties.area+=part.area,properties.inertia+=part.inertia,properties.centre=Vector.add(properties.centre,Vector.mult(part.position,mass))}return properties.centre=Vector.div(properties.centre,properties.mass),properties}}()},function(module,exports,__webpack_require__){var GetFastValue=__webpack_require__(1);module.exports=function(tileX,tileY,width,height,filteringOptions,layer){void 0===tileX&&(tileX=0),void 0===tileY&&(tileY=0),void 0===width&&(width=layer.width),void 0===height&&(height=layer.height);var isNotEmpty=GetFastValue(filteringOptions,"isNotEmpty",!1),isColliding=GetFastValue(filteringOptions,"isColliding",!1),hasInterestingFace=GetFastValue(filteringOptions,"hasInterestingFace",!1);tileX<0&&(width+=tileX,tileX=0),tileY<0&&(height+=tileY,tileY=0),tileX+width>layer.width&&(width=Math.max(layer.width-tileX,0)),tileY+height>layer.height&&(height=Math.max(layer.height-tileY,0));for(var results=[],ty=tileY;ty<tileY+height;ty++)for(var tx=tileX;tx<tileX+width;tx++){var tile=layer.data[ty][tx];if(null!==tile){if(isNotEmpty&&-1===tile.index)continue;if(isColliding&&!tile.collides)continue;if(hasInterestingFace&&!tile.hasInterestingFace)continue;results.push(tile)}}return results}},function(module,exports,__webpack_require__){var create,first,total,CONST=__webpack_require__(35),Smoothing=__webpack_require__(125),pool=[],_disableContextSmoothing=!1;module.exports=(total=function(){var c=0;return pool.forEach((function(container){container.parent&&c++})),c},{create2D:function(parent,width,height){return create(parent,width,height,CONST.CANVAS)},create:create=function(parent,width,height,canvasType,selfParent){var canvas;void 0===width&&(width=1),void 0===height&&(height=1),void 0===canvasType&&(canvasType=CONST.CANVAS),void 0===selfParent&&(selfParent=!1);var container=first(canvasType);return null===container?(container={parent:parent,canvas:document.createElement("canvas"),type:canvasType},canvasType===CONST.CANVAS&&pool.push(container),canvas=container.canvas):(container.parent=parent,canvas=container.canvas),selfParent&&(container.parent=canvas),canvas.width=width,canvas.height=height,_disableContextSmoothing&&canvasType===CONST.CANVAS&&Smoothing.disable(canvas.getContext("2d")),canvas},createWebGL:function(parent,width,height){return create(parent,width,height,CONST.WEBGL)},disableSmoothing:function(){_disableContextSmoothing=!0},enableSmoothing:function(){_disableContextSmoothing=!1},first:first=function(canvasType){if(void 0===canvasType&&(canvasType=CONST.CANVAS),canvasType===CONST.WEBGL)return null;for(var i=0;i<pool.length;i++){var container=pool[i];if(!container.parent&&container.type===canvasType)return container}return null},free:function(){return pool.length-total()},pool:pool,remove:function(parent){var isCanvas=parent instanceof HTMLCanvasElement;pool.forEach((function(container){(isCanvas&&container.canvas===parent||!isCanvas&&container.parent===parent)&&(container.parent=null,container.canvas.width=1,container.canvas.height=1)}))},total:total})},function(module,exports){module.exports=function(renderer,ctx,src,camera,parentMatrix){var alpha=camera.alpha*src.alpha;if(alpha<=0)return!1;var camMatrix=renderer._tempMatrix1.copyFromArray(camera.matrix.matrix),gameObjectMatrix=renderer._tempMatrix2.applyITRS(src.x,src.y,src.rotation,src.scaleX,src.scaleY),calcMatrix=renderer._tempMatrix3;return parentMatrix?(camMatrix.multiplyWithOffset(parentMatrix,-camera.scrollX*src.scrollFactorX,-camera.scrollY*src.scrollFactorY),gameObjectMatrix.e=src.x,gameObjectMatrix.f=src.y,camMatrix.multiply(gameObjectMatrix,calcMatrix)):(gameObjectMatrix.e-=camera.scrollX*src.scrollFactorX,gameObjectMatrix.f-=camera.scrollY*src.scrollFactorY,camMatrix.multiply(gameObjectMatrix,calcMatrix)),ctx.globalCompositeOperation=renderer.blendModes[src.blendMode],ctx.globalAlpha=alpha,ctx.save(),calcMatrix.setToContext(ctx),!0}},function(module,exports,__webpack_require__){var BlendModes=__webpack_require__(43),GetAdvancedValue=__webpack_require__(14),ScaleModes=__webpack_require__(99);module.exports=function(scene,gameObject,config){gameObject.x=GetAdvancedValue(config,"x",0),gameObject.y=GetAdvancedValue(config,"y",0),gameObject.depth=GetAdvancedValue(config,"depth",0),gameObject.flipX=GetAdvancedValue(config,"flipX",!1),gameObject.flipY=GetAdvancedValue(config,"flipY",!1);var scale=GetAdvancedValue(config,"scale",null);"number"==typeof scale?gameObject.setScale(scale):null!==scale&&(gameObject.scaleX=GetAdvancedValue(scale,"x",1),gameObject.scaleY=GetAdvancedValue(scale,"y",1));var scrollFactor=GetAdvancedValue(config,"scrollFactor",null);"number"==typeof scrollFactor?gameObject.setScrollFactor(scrollFactor):null!==scrollFactor&&(gameObject.scrollFactorX=GetAdvancedValue(scrollFactor,"x",1),gameObject.scrollFactorY=GetAdvancedValue(scrollFactor,"y",1)),gameObject.rotation=GetAdvancedValue(config,"rotation",0);var angle=GetAdvancedValue(config,"angle",null);null!==angle&&(gameObject.angle=angle),gameObject.alpha=GetAdvancedValue(config,"alpha",1);var origin=GetAdvancedValue(config,"origin",null);if("number"==typeof origin)gameObject.setOrigin(origin);else if(null!==origin){var ox=GetAdvancedValue(origin,"x",.5),oy=GetAdvancedValue(origin,"y",.5);gameObject.setOrigin(ox,oy)}return gameObject.scaleMode=GetAdvancedValue(config,"scaleMode",ScaleModes.DEFAULT),gameObject.blendMode=GetAdvancedValue(config,"blendMode",BlendModes.NORMAL),gameObject.visible=GetAdvancedValue(config,"visible",!0),GetAdvancedValue(config,"add",!0)&&scene.sys.displayList.add(gameObject),gameObject.preUpdate&&scene.sys.updateList.add(gameObject),gameObject}},function(module,exports){module.exports=function(items,key,value,step,index,direction){var i;void 0===step&&(step=0),void 0===index&&(index=0),void 0===direction&&(direction=1);var t=0,end=items.length;if(1===direction)for(i=index;i<end;i++)items[i][key]=value+t*step,t++;else for(i=index;i>=0;i--)items[i][key]=value+t*step,t++;return items}},function(module,exports,__webpack_require__){var Vertices={};module.exports=Vertices;var Vector=__webpack_require__(38),Common=__webpack_require__(19);Vertices.create=function(points,body){for(var vertices=[],i=0;i<points.length;i++){var point=points[i],vertex={x:point.x,y:point.y,index:i,body:body,isInternal:!1,contact:null};vertex.contact={vertex:vertex,normalImpulse:0,tangentImpulse:0},vertices.push(vertex)}return vertices},Vertices.fromPath=function(path,body){var points=[];return path.replace(/L?\s*([\-\d\.e]+)[\s,]*([\-\d\.e]+)*/gi,(function(match,x,y){points.push({x:parseFloat(x),y:parseFloat(y)})})),Vertices.create(points,body)},Vertices.centre=function(vertices){for(var cross,temp,j,area=Vertices.area(vertices,!0),centre={x:0,y:0},i=0;i<vertices.length;i++)j=(i+1)%vertices.length,cross=Vector.cross(vertices[i],vertices[j]),temp=Vector.mult(Vector.add(vertices[i],vertices[j]),cross),centre=Vector.add(centre,temp);return Vector.div(centre,6*area)},Vertices.mean=function(vertices){for(var average={x:0,y:0},i=0;i<vertices.length;i++)average.x+=vertices[i].x,average.y+=vertices[i].y;return Vector.div(average,vertices.length)},Vertices.area=function(vertices,signed){for(var area=0,j=vertices.length-1,i=0;i<vertices.length;i++)area+=(vertices[j].x-vertices[i].x)*(vertices[j].y+vertices[i].y),j=i;return signed?area/2:Math.abs(area)/2},Vertices.inertia=function(vertices,mass){for(var cross,j,numerator=0,denominator=0,v=vertices,n=0;n<v.length;n++)j=(n+1)%v.length,numerator+=(cross=Math.abs(Vector.cross(v[j],v[n])))*(Vector.dot(v[j],v[j])+Vector.dot(v[j],v[n])+Vector.dot(v[n],v[n])),denominator+=cross;return mass/6*(numerator/denominator)},Vertices.translate=function(vertices,vector,scalar){var i;if(scalar)for(i=0;i<vertices.length;i++)vertices[i].x+=vector.x*scalar,vertices[i].y+=vector.y*scalar;else for(i=0;i<vertices.length;i++)vertices[i].x+=vector.x,vertices[i].y+=vector.y;return vertices},Vertices.rotate=function(vertices,angle,point){if(0!==angle){for(var cos=Math.cos(angle),sin=Math.sin(angle),i=0;i<vertices.length;i++){var vertice=vertices[i],dx=vertice.x-point.x,dy=vertice.y-point.y;vertice.x=point.x+(dx*cos-dy*sin),vertice.y=point.y+(dx*sin+dy*cos)}return vertices}},Vertices.contains=function(vertices,point){for(var i=0;i<vertices.length;i++){var vertice=vertices[i],nextVertice=vertices[(i+1)%vertices.length];if((point.x-vertice.x)*(nextVertice.y-vertice.y)+(point.y-vertice.y)*(vertice.x-nextVertice.x)>0)return!1}return!0},Vertices.scale=function(vertices,scaleX,scaleY,point){if(1===scaleX&&1===scaleY)return vertices;var vertex,delta;point=point||Vertices.centre(vertices);for(var i=0;i<vertices.length;i++)vertex=vertices[i],delta=Vector.sub(vertex,point),vertices[i].x=point.x+delta.x*scaleX,vertices[i].y=point.y+delta.y*scaleY;return vertices},Vertices.chamfer=function(vertices,radius,quality,qualityMin,qualityMax){radius="number"==typeof radius?[radius]:radius||[8],quality=void 0!==quality?quality:-1,qualityMin=qualityMin||2,qualityMax=qualityMax||14;for(var newVertices=[],i=0;i<vertices.length;i++){var prevVertex=vertices[i-1>=0?i-1:vertices.length-1],vertex=vertices[i],nextVertex=vertices[(i+1)%vertices.length],currentRadius=radius[i<radius.length?i:radius.length-1];if(0!==currentRadius){var prevNormal=Vector.normalise({x:vertex.y-prevVertex.y,y:prevVertex.x-vertex.x}),nextNormal=Vector.normalise({x:nextVertex.y-vertex.y,y:vertex.x-nextVertex.x}),diagonalRadius=Math.sqrt(2*Math.pow(currentRadius,2)),radiusVector=Vector.mult(Common.clone(prevNormal),currentRadius),midNormal=Vector.normalise(Vector.mult(Vector.add(prevNormal,nextNormal),.5)),scaledVertex=Vector.sub(vertex,Vector.mult(midNormal,diagonalRadius)),precision=quality;-1===quality&&(precision=1.75*Math.pow(currentRadius,.32)),(precision=Common.clamp(precision,qualityMin,qualityMax))%2==1&&(precision+=1);for(var theta=Math.acos(Vector.dot(prevNormal,nextNormal))/precision,j=0;j<precision;j++)newVertices.push(Vector.add(Vector.rotate(radiusVector,theta*j),scaledVertex))}else newVertices.push(vertex)}return newVertices},Vertices.clockwiseSort=function(vertices){var centre=Vertices.mean(vertices);return vertices.sort((function(vertexA,vertexB){return Vector.angle(centre,vertexA)-Vector.angle(centre,vertexB)})),vertices},Vertices.isConvex=function(vertices){var i,j,k,z,flag=0,n=vertices.length;if(n<3)return null;for(i=0;i<n;i++)if(k=(i+2)%n,z=(vertices[j=(i+1)%n].x-vertices[i].x)*(vertices[k].y-vertices[j].y),(z-=(vertices[j].y-vertices[i].y)*(vertices[k].x-vertices[j].x))<0?flag|=1:z>0&&(flag|=2),3===flag)return!1;return 0!==flag||null},Vertices.hull=function(vertices){var vertex,i,upper=[],lower=[];for((vertices=vertices.slice(0)).sort((function(vertexA,vertexB){var dx=vertexA.x-vertexB.x;return 0!==dx?dx:vertexA.y-vertexB.y})),i=0;i<vertices.length;i+=1){for(vertex=vertices[i];lower.length>=2&&Vector.cross3(lower[lower.length-2],lower[lower.length-1],vertex)<=0;)lower.pop();lower.push(vertex)}for(i=vertices.length-1;i>=0;i-=1){for(vertex=vertices[i];upper.length>=2&&Vector.cross3(upper[upper.length-2],upper[upper.length-1],vertex)<=0;)upper.pop();upper.push(vertex)}return upper.pop(),lower.pop(),upper.concat(lower)}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Components=__webpack_require__(12),GameObject=__webpack_require__(13),Line=__webpack_require__(62),Shape=new Class({Extends:GameObject,Mixins:[Components.Alpha,Components.BlendMode,Components.ComputedSize,Components.Depth,Components.GetBounds,Components.Mask,Components.Origin,Components.Pipeline,Components.ScrollFactor,Components.Transform,Components.Visible],initialize:function(scene,type,data){void 0===type&&(type="Shape"),GameObject.call(this,scene,type),this.geom=data,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new Line,this.initPipeline()},setFillStyle:function(color,alpha){return void 0===alpha&&(alpha=1),void 0===color?this.isFilled=!1:(this.fillColor=color,this.fillAlpha=alpha,this.isFilled=!0),this},setStrokeStyle:function(lineWidth,color,alpha){return void 0===alpha&&(alpha=1),void 0===lineWidth?this.isStroked=!1:(this.lineWidth=lineWidth,this.strokeColor=color,this.strokeAlpha=alpha,this.isStroked=!0),this},setClosePath:function(value){return this.closePath=value,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]}});module.exports=Shape},function(module,exports){module.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},function(module,exports,__webpack_require__){var CONST={VERSION:"3.19.0",BlendModes:__webpack_require__(43),ScaleModes:__webpack_require__(99),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};module.exports=CONST},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),MATH_CONST=__webpack_require__(22),Vector2=__webpack_require__(3),TransformMatrix=new Class({initialize:function(a,b,c,d,tx,ty){void 0===a&&(a=1),void 0===b&&(b=0),void 0===c&&(c=0),void 0===d&&(d=1),void 0===tx&&(tx=0),void 0===ty&&(ty=0),this.matrix=new Float32Array([a,b,c,d,tx,ty,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(value){this.matrix[0]=value}},b:{get:function(){return this.matrix[1]},set:function(value){this.matrix[1]=value}},c:{get:function(){return this.matrix[2]},set:function(value){this.matrix[2]=value}},d:{get:function(){return this.matrix[3]},set:function(value){this.matrix[3]=value}},e:{get:function(){return this.matrix[4]},set:function(value){this.matrix[4]=value}},f:{get:function(){return this.matrix[5]},set:function(value){this.matrix[5]=value}},tx:{get:function(){return this.matrix[4]},set:function(value){this.matrix[4]=value}},ty:{get:function(){return this.matrix[5]},set:function(value){this.matrix[5]=value}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var matrix=this.matrix,a=matrix[0],b=matrix[1],c=matrix[2],d=matrix[3];return a||b?b>0?Math.acos(a/this.scaleX):-Math.acos(a/this.scaleX):c||d?MATH_CONST.TAU-(d>0?Math.acos(-c/this.scaleY):-Math.acos(c/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var matrix=this.matrix;return matrix[0]=1,matrix[1]=0,matrix[2]=0,matrix[3]=1,matrix[4]=0,matrix[5]=0,this},translate:function(x,y){var matrix=this.matrix;return matrix[4]=matrix[0]*x+matrix[2]*y+matrix[4],matrix[5]=matrix[1]*x+matrix[3]*y+matrix[5],this},scale:function(x,y){var matrix=this.matrix;return matrix[0]*=x,matrix[1]*=x,matrix[2]*=y,matrix[3]*=y,this},rotate:function(angle){var sin=Math.sin(angle),cos=Math.cos(angle),matrix=this.matrix,a=matrix[0],b=matrix[1],c=matrix[2],d=matrix[3];return matrix[0]=a*cos+c*sin,matrix[1]=b*cos+d*sin,matrix[2]=a*-sin+c*cos,matrix[3]=b*-sin+d*cos,this},multiply:function(rhs,out){var matrix=this.matrix,source=rhs.matrix,localA=matrix[0],localB=matrix[1],localC=matrix[2],localD=matrix[3],localE=matrix[4],localF=matrix[5],sourceA=source[0],sourceB=source[1],sourceC=source[2],sourceD=source[3],sourceE=source[4],sourceF=source[5],destinationMatrix=void 0===out?this:out;return destinationMatrix.a=sourceA*localA+sourceB*localC,destinationMatrix.b=sourceA*localB+sourceB*localD,destinationMatrix.c=sourceC*localA+sourceD*localC,destinationMatrix.d=sourceC*localB+sourceD*localD,destinationMatrix.e=sourceE*localA+sourceF*localC+localE,destinationMatrix.f=sourceE*localB+sourceF*localD+localF,destinationMatrix},multiplyWithOffset:function(src,offsetX,offsetY){var matrix=this.matrix,otherMatrix=src.matrix,a0=matrix[0],b0=matrix[1],c0=matrix[2],d0=matrix[3],pse=offsetX*a0+offsetY*c0+matrix[4],psf=offsetX*b0+offsetY*d0+matrix[5],a1=otherMatrix[0],b1=otherMatrix[1],c1=otherMatrix[2],d1=otherMatrix[3],tx1=otherMatrix[4],ty1=otherMatrix[5];return matrix[0]=a1*a0+b1*c0,matrix[1]=a1*b0+b1*d0,matrix[2]=c1*a0+d1*c0,matrix[3]=c1*b0+d1*d0,matrix[4]=tx1*a0+ty1*c0+pse,matrix[5]=tx1*b0+ty1*d0+psf,this},transform:function(a,b,c,d,tx,ty){var matrix=this.matrix,a0=matrix[0],b0=matrix[1],c0=matrix[2],d0=matrix[3],tx0=matrix[4],ty0=matrix[5];return matrix[0]=a*a0+b*c0,matrix[1]=a*b0+b*d0,matrix[2]=c*a0+d*c0,matrix[3]=c*b0+d*d0,matrix[4]=tx*a0+ty*c0+tx0,matrix[5]=tx*b0+ty*d0+ty0,this},transformPoint:function(x,y,point){void 0===point&&(point={x:0,y:0});var matrix=this.matrix,a=matrix[0],b=matrix[1],c=matrix[2],d=matrix[3],tx=matrix[4],ty=matrix[5];return point.x=x*a+y*c+tx,point.y=x*b+y*d+ty,point},invert:function(){var matrix=this.matrix,a=matrix[0],b=matrix[1],c=matrix[2],d=matrix[3],tx=matrix[4],ty=matrix[5],n=a*d-b*c;return matrix[0]=d/n,matrix[1]=-b/n,matrix[2]=-c/n,matrix[3]=a/n,matrix[4]=(c*ty-d*tx)/n,matrix[5]=-(a*ty-b*tx)/n,this},copyFrom:function(src){var matrix=this.matrix;return matrix[0]=src.a,matrix[1]=src.b,matrix[2]=src.c,matrix[3]=src.d,matrix[4]=src.e,matrix[5]=src.f,this},copyFromArray:function(src){var matrix=this.matrix;return matrix[0]=src[0],matrix[1]=src[1],matrix[2]=src[2],matrix[3]=src[3],matrix[4]=src[4],matrix[5]=src[5],this},copyToContext:function(ctx){var matrix=this.matrix;return ctx.transform(matrix[0],matrix[1],matrix[2],matrix[3],matrix[4],matrix[5]),ctx},setToContext:function(ctx){var matrix=this.matrix;return ctx.setTransform(matrix[0],matrix[1],matrix[2],matrix[3],matrix[4],matrix[5]),ctx},copyToArray:function(out){var matrix=this.matrix;return void 0===out?out=[matrix[0],matrix[1],matrix[2],matrix[3],matrix[4],matrix[5]]:(out[0]=matrix[0],out[1]=matrix[1],out[2]=matrix[2],out[3]=matrix[3],out[4]=matrix[4],out[5]=matrix[5]),out},setTransform:function(a,b,c,d,tx,ty){var matrix=this.matrix;return matrix[0]=a,matrix[1]=b,matrix[2]=c,matrix[3]=d,matrix[4]=tx,matrix[5]=ty,this},decomposeMatrix:function(){var decomposedMatrix=this.decomposedMatrix,matrix=this.matrix,a=matrix[0],b=matrix[1],c=matrix[2],d=matrix[3],determ=a*d-b*c;if(decomposedMatrix.translateX=matrix[4],decomposedMatrix.translateY=matrix[5],a||b){var r=Math.sqrt(a*a+b*b);decomposedMatrix.rotation=b>0?Math.acos(a/r):-Math.acos(a/r),decomposedMatrix.scaleX=r,decomposedMatrix.scaleY=determ/r}else if(c||d){var s=Math.sqrt(c*c+d*d);decomposedMatrix.rotation=.5*Math.PI-(d>0?Math.acos(-c/s):-Math.acos(c/s)),decomposedMatrix.scaleX=determ/s,decomposedMatrix.scaleY=s}else decomposedMatrix.rotation=0,decomposedMatrix.scaleX=0,decomposedMatrix.scaleY=0;return decomposedMatrix},applyITRS:function(x,y,rotation,scaleX,scaleY){var matrix=this.matrix,radianSin=Math.sin(rotation),radianCos=Math.cos(rotation);return matrix[4]=x,matrix[5]=y,matrix[0]=radianCos*scaleX,matrix[1]=radianSin*scaleX,matrix[2]=-radianSin*scaleY,matrix[3]=radianCos*scaleY,this},applyInverse:function(x,y,output){void 0===output&&(output=new Vector2);var matrix=this.matrix,a=matrix[0],b=matrix[1],c=matrix[2],d=matrix[3],tx=matrix[4],ty=matrix[5],id=1/(a*d+c*-b);return output.x=d*id*x+-c*id*y+(ty*c-tx*d)*id,output.y=a*id*y+-b*id*x+(-ty*a+tx*b)*id,output},getX:function(x,y){return x*this.a+y*this.c+this.e},getY:function(x,y){return x*this.b+y*this.d+this.f},getCSSMatrix:function(){var m=this.matrix;return"matrix("+m[0]+","+m[1]+","+m[2]+","+m[3]+","+m[4]+","+m[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});module.exports=TransformMatrix},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),GetColor=__webpack_require__(177),GetColor32=__webpack_require__(298),HSVToRGB=__webpack_require__(178),RGBToHSV=__webpack_require__(299),Color=new Class({initialize:function(red,green,blue,alpha){void 0===red&&(red=0),void 0===green&&(green=0),void 0===blue&&(blue=0),void 0===alpha&&(alpha=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(red,green,blue,alpha)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(red,green,blue,alpha,updateHSV){return void 0===alpha&&(alpha=255),void 0===updateHSV&&(updateHSV=!0),this._locked=!0,this.red=red,this.green=green,this.blue=blue,this.alpha=alpha,this._locked=!1,this.update(updateHSV)},setGLTo:function(red,green,blue,alpha){return void 0===alpha&&(alpha=1),this._locked=!0,this.redGL=red,this.greenGL=green,this.blueGL=blue,this.alphaGL=alpha,this._locked=!1,this.update(!0)},setFromRGB:function(color){return this._locked=!0,this.red=color.r,this.green=color.g,this.blue=color.b,color.hasOwnProperty("a")&&(this.alpha=color.a),this._locked=!1,this.update(!0)},setFromHSV:function(h,s,v){return HSVToRGB(h,s,v,this)},update:function(updateHSV){if(void 0===updateHSV&&(updateHSV=!1),this._locked)return this;var r=this.r,g=this.g,b=this.b,a=this.a;return this._color=GetColor(r,g,b),this._color32=GetColor32(r,g,b,a),this._rgba="rgba("+r+","+g+","+b+","+a/255+")",updateHSV&&RGBToHSV(r,g,b,this),this},updateHSV:function(){var r=this.r,g=this.g,b=this.b;return RGBToHSV(r,g,b,this),this},clone:function(){return new Color(this.r,this.g,this.b,this.a)},gray:function(shade){return this.setTo(shade,shade,shade)},random:function(min,max){void 0===min&&(min=0),void 0===max&&(max=255);var r=Math.floor(min+Math.random()*(max-min)),g=Math.floor(min+Math.random()*(max-min)),b=Math.floor(min+Math.random()*(max-min));return this.setTo(r,g,b)},randomGray:function(min,max){void 0===min&&(min=0),void 0===max&&(max=255);var s=Math.floor(min+Math.random()*(max-min));return this.setTo(s,s,s)},saturate:function(amount){return this.s+=amount/100,this},desaturate:function(amount){return this.s-=amount/100,this},lighten:function(amount){return this.v+=amount/100,this},darken:function(amount){return this.v-=amount/100,this},brighten:function(amount){var r=this.r,g=this.g,b=this.b;return r=Math.max(0,Math.min(255,r-Math.round(-amount/100*255))),g=Math.max(0,Math.min(255,g-Math.round(-amount/100*255))),b=Math.max(0,Math.min(255,b-Math.round(-amount/100*255))),this.setTo(r,g,b)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(value){this.gl[0]=Math.min(Math.abs(value),1),this.r=Math.floor(255*this.gl[0]),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(value){this.gl[1]=Math.min(Math.abs(value),1),this.g=Math.floor(255*this.gl[1]),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(value){this.gl[2]=Math.min(Math.abs(value),1),this.b=Math.floor(255*this.gl[2]),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(value){this.gl[3]=Math.min(Math.abs(value),1),this.a=Math.floor(255*this.gl[3]),this.update()}},red:{get:function(){return this.r},set:function(value){value=Math.floor(Math.abs(value)),this.r=Math.min(value,255),this.gl[0]=value/255,this.update(!0)}},green:{get:function(){return this.g},set:function(value){value=Math.floor(Math.abs(value)),this.g=Math.min(value,255),this.gl[1]=value/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(value){value=Math.floor(Math.abs(value)),this.b=Math.min(value,255),this.gl[2]=value/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(value){value=Math.floor(Math.abs(value)),this.a=Math.min(value,255),this.gl[3]=value/255,this.update()}},h:{get:function(){return this._h},set:function(value){this._h=value,HSVToRGB(value,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(value){this._s=value,HSVToRGB(this._h,value,this._v,this)}},v:{get:function(){return this._v},set:function(value){this._v=value,HSVToRGB(this._h,this._s,value,this)}}});module.exports=Color},function(module,exports){var Vector={};module.exports=Vector,Vector.create=function(x,y){return{x:x||0,y:y||0}},Vector.clone=function(vector){return{x:vector.x,y:vector.y}},Vector.magnitude=function(vector){return Math.sqrt(vector.x*vector.x+vector.y*vector.y)},Vector.magnitudeSquared=function(vector){return vector.x*vector.x+vector.y*vector.y},Vector.rotate=function(vector,angle,output){var cos=Math.cos(angle),sin=Math.sin(angle);output||(output={});var x=vector.x*cos-vector.y*sin;return output.y=vector.x*sin+vector.y*cos,output.x=x,output},Vector.rotateAbout=function(vector,angle,point,output){var cos=Math.cos(angle),sin=Math.sin(angle);output||(output={});var x=point.x+((vector.x-point.x)*cos-(vector.y-point.y)*sin);return output.y=point.y+((vector.x-point.x)*sin+(vector.y-point.y)*cos),output.x=x,output},Vector.normalise=function(vector){var magnitude=Vector.magnitude(vector);return 0===magnitude?{x:0,y:0}:{x:vector.x/magnitude,y:vector.y/magnitude}},Vector.dot=function(vectorA,vectorB){return vectorA.x*vectorB.x+vectorA.y*vectorB.y},Vector.cross=function(vectorA,vectorB){return vectorA.x*vectorB.y-vectorA.y*vectorB.x},Vector.cross3=function(vectorA,vectorB,vectorC){return(vectorB.x-vectorA.x)*(vectorC.y-vectorA.y)-(vectorB.y-vectorA.y)*(vectorC.x-vectorA.x)},Vector.add=function(vectorA,vectorB,output){return output||(output={}),output.x=vectorA.x+vectorB.x,output.y=vectorA.y+vectorB.y,output},Vector.sub=function(vectorA,vectorB,output){return output||(output={}),output.x=vectorA.x-vectorB.x,output.y=vectorA.y-vectorB.y,output},Vector.mult=function(vector,scalar){return{x:vector.x*scalar,y:vector.y*scalar}},Vector.div=function(vector,scalar){return{x:vector.x/scalar,y:vector.y/scalar}},Vector.perp=function(vector,negate){return{x:(negate=!0===negate?-1:1)*-vector.y,y:negate*vector.x}},Vector.neg=function(vector){return{x:-vector.x,y:-vector.y}},Vector.angle=function(vectorA,vectorB){return Math.atan2(vectorB.y-vectorA.y,vectorB.x-vectorA.x)},Vector._temp=[Vector.create(),Vector.create(),Vector.create(),Vector.create(),Vector.create(),Vector.create()]},function(module,exports){var Bounds={};module.exports=Bounds,Bounds.create=function(vertices){var bounds={min:{x:0,y:0},max:{x:0,y:0}};return vertices&&Bounds.update(bounds,vertices),bounds},Bounds.update=function(bounds,vertices,velocity){bounds.min.x=1/0,bounds.max.x=-1/0,bounds.min.y=1/0,bounds.max.y=-1/0;for(var i=0;i<vertices.length;i++){var vertex=vertices[i];vertex.x>bounds.max.x&&(bounds.max.x=vertex.x),vertex.x<bounds.min.x&&(bounds.min.x=vertex.x),vertex.y>bounds.max.y&&(bounds.max.y=vertex.y),vertex.y<bounds.min.y&&(bounds.min.y=vertex.y)}velocity&&(velocity.x>0?bounds.max.x+=velocity.x:bounds.min.x+=velocity.x,velocity.y>0?bounds.max.y+=velocity.y:bounds.min.y+=velocity.y)},Bounds.contains=function(bounds,point){return point.x>=bounds.min.x&&point.x<=bounds.max.x&&point.y>=bounds.min.y&&point.y<=bounds.max.y},Bounds.overlaps=function(boundsA,boundsB){return boundsA.min.x<=boundsB.max.x&&boundsA.max.x>=boundsB.min.x&&boundsA.max.y>=boundsB.min.y&&boundsA.min.y<=boundsB.max.y},Bounds.translate=function(bounds,vector){bounds.min.x+=vector.x,bounds.max.x+=vector.x,bounds.min.y+=vector.y,bounds.max.y+=vector.y},Bounds.shift=function(bounds,position){var deltaX=bounds.max.x-bounds.min.x,deltaY=bounds.max.y-bounds.min.y;bounds.min.x=position.x,bounds.max.x=position.x+deltaX,bounds.min.y=position.y,bounds.max.y=position.y+deltaY}},function(module,exports){module.exports=function(items,key,value,step,index,direction){var i;void 0===step&&(step=0),void 0===index&&(index=0),void 0===direction&&(direction=1);var t=0,end=items.length;if(1===direction)for(i=index;i<end;i++)items[i][key]+=value+t*step,t++;else for(i=index;i>=0;i--)items[i][key]+=value+t*step,t++;return items}},function(module,exports,__webpack_require__){var CONST=__webpack_require__(22);module.exports=function(degrees){return degrees*CONST.DEG_TO_RAD}},function(module,exports){module.exports=function(ctx,src,altColor,altAlpha){var fillColor=altColor||src.fillColor,fillAlpha=altAlpha||src.fillAlpha,red=(16711680&fillColor)>>>16,green=(65280&fillColor)>>>8,blue=255&fillColor;ctx.fillStyle="rgba("+red+","+green+","+blue+","+fillAlpha+")"}},function(module,exports){module.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(module,exports){module.exports=function(gameObject){return gameObject.y+gameObject.height-gameObject.height*gameObject.originY}},function(module,exports){module.exports=function(gameObject,value){return gameObject.y=value-gameObject.height+gameObject.height*gameObject.originY,gameObject}},function(module,exports){module.exports=function(gameObject){return gameObject.x-gameObject.width*gameObject.originX}},function(module,exports){module.exports=function(gameObject,value){return gameObject.x=value+gameObject.width*gameObject.originX,gameObject}},function(module,exports){module.exports=function(gameObject){return gameObject.x+gameObject.width-gameObject.width*gameObject.originX}},function(module,exports){module.exports=function(gameObject,value){return gameObject.x=value-gameObject.width+gameObject.width*gameObject.originX,gameObject}},function(module,exports){module.exports=function(gameObject){return gameObject.y-gameObject.height*gameObject.originY}},function(module,exports){module.exports=function(gameObject,value){return gameObject.y=value+gameObject.height*gameObject.originY,gameObject}},function(module,exports){module.exports=function(circle,x,y){return circle.radius>0&&x>=circle.left&&x<=circle.right&&y>=circle.top&&y<=circle.bottom&&(circle.x-x)*(circle.x-x)+(circle.y-y)*(circle.y-y)<=circle.radius*circle.radius}},function(module,exports){module.exports={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6}},function(module,exports){module.exports=function(rect,x,y){return!(rect.width<=0||rect.height<=0)&&(rect.x<=x&&rect.x+rect.width>=x&&rect.y<=y&&rect.y+rect.height>=y)}},function(module,exports,__webpack_require__){module.exports={DESTROY:__webpack_require__(647),FADE_IN_COMPLETE:__webpack_require__(648),FADE_IN_START:__webpack_require__(649),FADE_OUT_COMPLETE:__webpack_require__(650),FADE_OUT_START:__webpack_require__(651),FLASH_COMPLETE:__webpack_require__(652),FLASH_START:__webpack_require__(653),PAN_COMPLETE:__webpack_require__(654),PAN_START:__webpack_require__(655),POST_RENDER:__webpack_require__(656),PRE_RENDER:__webpack_require__(657),SHAKE_COMPLETE:__webpack_require__(658),SHAKE_START:__webpack_require__(659),ZOOM_COMPLETE:__webpack_require__(660),ZOOM_START:__webpack_require__(661)}},function(module,exports,__webpack_require__){module.exports={BOOT:__webpack_require__(825),DESTROY:__webpack_require__(826),DRAG_END:__webpack_require__(827),DRAG_ENTER:__webpack_require__(828),DRAG:__webpack_require__(829),DRAG_LEAVE:__webpack_require__(830),DRAG_OVER:__webpack_require__(831),DRAG_START:__webpack_require__(832),DROP:__webpack_require__(833),GAME_OUT:__webpack_require__(834),GAME_OVER:__webpack_require__(835),GAMEOBJECT_DOWN:__webpack_require__(836),GAMEOBJECT_DRAG_END:__webpack_require__(837),GAMEOBJECT_DRAG_ENTER:__webpack_require__(838),GAMEOBJECT_DRAG:__webpack_require__(839),GAMEOBJECT_DRAG_LEAVE:__webpack_require__(840),GAMEOBJECT_DRAG_OVER:__webpack_require__(841),GAMEOBJECT_DRAG_START:__webpack_require__(842),GAMEOBJECT_DROP:__webpack_require__(843),GAMEOBJECT_MOVE:__webpack_require__(844),GAMEOBJECT_OUT:__webpack_require__(845),GAMEOBJECT_OVER:__webpack_require__(846),GAMEOBJECT_POINTER_DOWN:__webpack_require__(847),GAMEOBJECT_POINTER_MOVE:__webpack_require__(848),GAMEOBJECT_POINTER_OUT:__webpack_require__(849),GAMEOBJECT_POINTER_OVER:__webpack_require__(850),GAMEOBJECT_POINTER_UP:__webpack_require__(851),GAMEOBJECT_POINTER_WHEEL:__webpack_require__(852),GAMEOBJECT_UP:__webpack_require__(853),GAMEOBJECT_WHEEL:__webpack_require__(854),MANAGER_BOOT:__webpack_require__(855),MANAGER_PROCESS:__webpack_require__(856),MANAGER_UPDATE:__webpack_require__(857),POINTER_DOWN:__webpack_require__(858),POINTER_DOWN_OUTSIDE:__webpack_require__(859),POINTER_MOVE:__webpack_require__(860),POINTER_OUT:__webpack_require__(861),POINTER_OVER:__webpack_require__(862),POINTER_UP:__webpack_require__(863),POINTER_UP_OUTSIDE:__webpack_require__(864),POINTER_WHEEL:__webpack_require__(865),POINTERLOCK_CHANGE:__webpack_require__(866),PRE_UPDATE:__webpack_require__(867),SHUTDOWN:__webpack_require__(868),START:__webpack_require__(869),UPDATE:__webpack_require__(870)}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Components=__webpack_require__(12),GameObject=__webpack_require__(13),SpriteRender=__webpack_require__(973),Sprite=new Class({Extends:GameObject,Mixins:[Components.Alpha,Components.BlendMode,Components.Depth,Components.Flip,Components.GetBounds,Components.Mask,Components.Origin,Components.Pipeline,Components.ScrollFactor,Components.Size,Components.TextureCrop,Components.Tint,Components.Transform,Components.Visible,SpriteRender],initialize:function(scene,x,y,texture,frame){GameObject.call(this,scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new Components.Animation(this),this.setTexture(texture,frame),this.setPosition(x,y),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},preUpdate:function(time,delta){this.anims.update(time,delta)},play:function(key,ignoreIfPlaying,startFrame){return this.anims.play(key,ignoreIfPlaying,startFrame),this},toJSON:function(){return Components.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});module.exports=Sprite},function(module,exports){module.exports=function(ctx,src,altColor,altAlpha){var strokeColor=altColor||src.strokeColor,strokeAlpha=altAlpha||src.strokeAlpha,red=(16711680&strokeColor)>>>16,green=(65280&strokeColor)>>>8,blue=255&strokeColor;ctx.strokeStyle="rgba("+red+","+green+","+blue+","+strokeAlpha+")",ctx.lineWidth=src.lineWidth}},function(module,exports){module.exports={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14}},function(module,exports,__webpack_require__){var Bodies={};module.exports=Bodies;var Vertices=__webpack_require__(32),Common=__webpack_require__(19),Body=__webpack_require__(26),Bounds=__webpack_require__(39),Vector=__webpack_require__(38),decomp=__webpack_require__(489);Bodies.rectangle=function(x,y,width,height,options){options=options||{};var rectangle={label:"Rectangle Body",position:{x:x,y:y},vertices:Vertices.fromPath("L 0 0 L "+width+" 0 L "+width+" "+height+" L 0 "+height)};if(options.chamfer){var chamfer=options.chamfer;rectangle.vertices=Vertices.chamfer(rectangle.vertices,chamfer.radius,chamfer.quality,chamfer.qualityMin,chamfer.qualityMax),delete options.chamfer}return Body.create(Common.extend({},rectangle,options))},Bodies.trapezoid=function(x,y,width,height,slope,options){options=options||{};var verticesPath,x1=width*(slope*=.5),x2=x1+(1-2*slope)*width,x3=x2+x1;verticesPath=slope<.5?"L 0 0 L "+x1+" "+-height+" L "+x2+" "+-height+" L "+x3+" 0":"L 0 0 L "+x2+" "+-height+" L "+x3+" 0";var trapezoid={label:"Trapezoid Body",position:{x:x,y:y},vertices:Vertices.fromPath(verticesPath)};if(options.chamfer){var chamfer=options.chamfer;trapezoid.vertices=Vertices.chamfer(trapezoid.vertices,chamfer.radius,chamfer.quality,chamfer.qualityMin,chamfer.qualityMax),delete options.chamfer}return Body.create(Common.extend({},trapezoid,options))},Bodies.circle=function(x,y,radius,options,maxSides){options=options||{};var circle={label:"Circle Body",circleRadius:radius};maxSides=maxSides||25;var sides=Math.ceil(Math.max(10,Math.min(maxSides,radius)));return sides%2==1&&(sides+=1),Bodies.polygon(x,y,sides,radius,Common.extend({},circle,options))},Bodies.polygon=function(x,y,sides,radius,options){if(options=options||{},sides<3)return Bodies.circle(x,y,radius,options);for(var theta=2*Math.PI/sides,path="",offset=.5*theta,i=0;i<sides;i+=1){var angle=offset+i*theta,xx=Math.cos(angle)*radius,yy=Math.sin(angle)*radius;path+="L "+xx.toFixed(3)+" "+yy.toFixed(3)+" "}var polygon={label:"Polygon Body",position:{x:x,y:y},vertices:Vertices.fromPath(path)};if(options.chamfer){var chamfer=options.chamfer;polygon.vertices=Vertices.chamfer(polygon.vertices,chamfer.radius,chamfer.quality,chamfer.qualityMin,chamfer.qualityMax),delete options.chamfer}return Body.create(Common.extend({},polygon,options))},Bodies.fromVertices=function(x,y,vertexSets,options,flagInternal,removeCollinear,minimumArea){var body,parts,isConvex,vertices,i,j,k,v,z;for(options=options||{},parts=[],flagInternal=void 0!==flagInternal&&flagInternal,removeCollinear=void 0!==removeCollinear?removeCollinear:.01,minimumArea=void 0!==minimumArea?minimumArea:10,decomp||Common.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),Common.isArray(vertexSets[0])||(vertexSets=[vertexSets]),v=0;v<vertexSets.length;v+=1)if(vertices=vertexSets[v],(isConvex=Vertices.isConvex(vertices))||!decomp)vertices=isConvex?Vertices.clockwiseSort(vertices):Vertices.hull(vertices),parts.push({position:{x:x,y:y},vertices:vertices});else{var concave=vertices.map((function(vertex){return[vertex.x,vertex.y]}));decomp.makeCCW(concave),!1!==removeCollinear&&decomp.removeCollinearPoints(concave,removeCollinear);var decomposed=decomp.quickDecomp(concave);for(i=0;i<decomposed.length;i++){var chunkVertices=decomposed[i].map((function(vertices){return{x:vertices[0],y:vertices[1]}}));minimumArea>0&&Vertices.area(chunkVertices)<minimumArea||parts.push({position:Vertices.centre(chunkVertices),vertices:chunkVertices})}}for(i=0;i<parts.length;i++)parts[i]=Body.create(Common.extend(parts[i],options));if(flagInternal)for(i=0;i<parts.length;i++){var partA=parts[i];for(j=i+1;j<parts.length;j++){var partB=parts[j];if(Bounds.overlaps(partA.bounds,partB.bounds)){var pav=partA.vertices,pbv=partB.vertices;for(k=0;k<partA.vertices.length;k++)for(z=0;z<partB.vertices.length;z++){var da=Vector.magnitudeSquared(Vector.sub(pav[(k+1)%pav.length],pbv[z])),db=Vector.magnitudeSquared(Vector.sub(pav[k],pbv[(z+1)%pbv.length]));da<5&&db<5&&(pav[k].isInternal=!0,pbv[z].isInternal=!0)}}}}return parts.length>1?(body=Body.create(Common.extend({parts:parts.slice(0)},options)),Body.setPosition(body,{x:x,y:y}),body):parts[0]}},function(module,exports,__webpack_require__){var GetTileAt=__webpack_require__(151),GetTilesWithin=__webpack_require__(27);module.exports=function(tileX,tileY,width,height,layer){for(var above=null,below=null,left=null,right=null,tiles=GetTilesWithin(tileX,tileY,width,height,null,layer),i=0;i<tiles.length;i++){var tile=tiles[i];tile&&(tile.collides?(above=GetTileAt(tile.x,tile.y-1,!0,layer),below=GetTileAt(tile.x,tile.y+1,!0,layer),left=GetTileAt(tile.x-1,tile.y,!0,layer),right=GetTileAt(tile.x+1,tile.y,!0,layer),tile.faceTop=!above||!above.collides,tile.faceBottom=!below||!below.collides,tile.faceLeft=!left||!left.collides,tile.faceRight=!right||!right.collides):tile.resetFaces())}}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),GetPoint=__webpack_require__(278),GetPoints=__webpack_require__(164),GEOM_CONST=__webpack_require__(53),Random=__webpack_require__(165),Vector2=__webpack_require__(3),Line=new Class({initialize:function(x1,y1,x2,y2){void 0===x1&&(x1=0),void 0===y1&&(y1=0),void 0===x2&&(x2=0),void 0===y2&&(y2=0),this.type=GEOM_CONST.LINE,this.x1=x1,this.y1=y1,this.x2=x2,this.y2=y2},getPoint:function(position,output){return GetPoint(this,position,output)},getPoints:function(quantity,stepRate,output){return GetPoints(this,quantity,stepRate,output)},getRandomPoint:function(point){return Random(this,point)},setTo:function(x1,y1,x2,y2){return void 0===x1&&(x1=0),void 0===y1&&(y1=0),void 0===x2&&(x2=0),void 0===y2&&(y2=0),this.x1=x1,this.y1=y1,this.x2=x2,this.y2=y2,this},getPointA:function(vec2){return void 0===vec2&&(vec2=new Vector2),vec2.set(this.x1,this.y1),vec2},getPointB:function(vec2){return void 0===vec2&&(vec2=new Vector2),vec2.set(this.x2,this.y2),vec2},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(value){this.x1<=this.x2?this.x1=value:this.x2=value}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(value){this.x1>this.x2?this.x1=value:this.x2=value}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(value){this.y1<=this.y2?this.y1=value:this.y2=value}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(value){this.y1>this.y2?this.y1=value:this.y2=value}}});module.exports=Line},function(module,exports){module.exports=function(line){return Math.sqrt((line.x2-line.x1)*(line.x2-line.x1)+(line.y2-line.y1)*(line.y2-line.y1))}},function(module,exports){module.exports=function(value,min,max){var range=max-min;return min+((value-min)%range+range)%range}},function(module,exports){module.exports=function(x1,y1,x2,y2){var dx=x1-x2,dy=y1-y2;return Math.sqrt(dx*dx+dy*dy)}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),CONST=__webpack_require__(21),File=__webpack_require__(24),FileTypesManager=__webpack_require__(8),GetFastValue=__webpack_require__(1),GetValue=__webpack_require__(5),IsPlainObject=__webpack_require__(7),JSONFile=new Class({Extends:File,initialize:function(loader,key,url,xhrSettings,dataKey){var extension="json";if(IsPlainObject(key)){var config=key;key=GetFastValue(config,"key"),url=GetFastValue(config,"url"),xhrSettings=GetFastValue(config,"xhrSettings"),extension=GetFastValue(config,"extension",extension),dataKey=GetFastValue(config,"dataKey",dataKey)}var fileConfig={type:"json",cache:loader.cacheManager.json,extension:extension,responseType:"text",key:key,url:url,xhrSettings:xhrSettings,config:dataKey};File.call(this,loader,fileConfig),IsPlainObject(url)&&(this.data=dataKey?GetValue(url,dataKey):url,this.state=CONST.FILE_POPULATED)},onProcess:function(){if(this.state!==CONST.FILE_POPULATED){this.state=CONST.FILE_PROCESSING;var json=JSON.parse(this.xhrLoader.responseText),key=this.config;this.data="string"==typeof key?GetValue(json,key,json):json}this.onProcessComplete()}});FileTypesManager.register("json",(function(key,url,dataKey,xhrSettings){if(Array.isArray(key))for(var i=0;i<key.length;i++)this.addFile(new JSONFile(this,key[i]));else this.addFile(new JSONFile(this,key,url,xhrSettings,dataKey));return this})),module.exports=JSONFile},function(module,exports,__webpack_require__){var MultiFile=new(__webpack_require__(0))({initialize:function(loader,type,key,files){this.loader=loader,this.type=type,this.key=key,this.files=files,this.complete=!1,this.pending=files.length,this.failed=0,this.config={};for(var i=0;i<files.length;i++)files[i].multiFile=this},isReadyToProcess:function(){return 0===this.pending&&0===this.failed&&!this.complete},addToMultiFile:function(file){return this.files.push(file),file.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(file){-1!==this.files.indexOf(file)&&this.pending--},onFileFailed:function(file){-1!==this.files.indexOf(file)&&this.failed++}});module.exports=MultiFile},function(module,exports){module.exports=function(worldX,snapToFloor,camera,layer){void 0===snapToFloor&&(snapToFloor=!0);var tileWidth=layer.baseTileWidth,tilemapLayer=layer.tilemapLayer;return tilemapLayer&&(void 0===camera&&(camera=tilemapLayer.scene.cameras.main),worldX-=tilemapLayer.x+camera.scrollX*(1-tilemapLayer.scrollFactorX),tileWidth*=tilemapLayer.scaleX),snapToFloor?Math.floor(worldX/tileWidth):worldX/tileWidth}},function(module,exports){module.exports=function(worldY,snapToFloor,camera,layer){void 0===snapToFloor&&(snapToFloor=!0);var tileHeight=layer.baseTileHeight,tilemapLayer=layer.tilemapLayer;return tilemapLayer&&(void 0===camera&&(camera=tilemapLayer.scene.cameras.main),worldY-=tilemapLayer.y+camera.scrollY*(1-tilemapLayer.scrollFactorY),tileHeight*=tilemapLayer.scaleY),snapToFloor?Math.floor(worldY/tileHeight):worldY/tileHeight}},function(module,exports,__webpack_require__){"use strict";function earcut(data,holeIndices,dim){dim=dim||2;var minX,minY,maxX,maxY,x,y,invSize,hasHoles=holeIndices&&holeIndices.length,outerLen=hasHoles?holeIndices[0]*dim:data.length,outerNode=linkedList(data,0,outerLen,dim,!0),triangles=[];if(!outerNode||outerNode.next===outerNode.prev)return triangles;if(hasHoles&&(outerNode=function(data,holeIndices,outerNode,dim){var i,len,start,end,list,queue=[];for(i=0,len=holeIndices.length;i<len;i++)start=holeIndices[i]*dim,end=i<len-1?holeIndices[i+1]*dim:data.length,(list=linkedList(data,start,end,dim,!1))===list.next&&(list.steiner=!0),queue.push(getLeftmost(list));for(queue.sort(compareX),i=0;i<queue.length;i++)eliminateHole(queue[i],outerNode),outerNode=filterPoints(outerNode,outerNode.next);return outerNode}(data,holeIndices,outerNode,dim)),data.length>80*dim){minX=maxX=data[0],minY=maxY=data[1];for(var i=dim;i<outerLen;i+=dim)(x=data[i])<minX&&(minX=x),(y=data[i+1])<minY&&(minY=y),x>maxX&&(maxX=x),y>maxY&&(maxY=y);invSize=0!==(invSize=Math.max(maxX-minX,maxY-minY))?1/invSize:0}return earcutLinked(outerNode,triangles,dim,minX,minY,invSize),triangles}function linkedList(data,start,end,dim,clockwise){var i,last;if(clockwise===signedArea(data,start,end,dim)>0)for(i=start;i<end;i+=dim)last=insertNode(i,data[i],data[i+1],last);else for(i=end-dim;i>=start;i-=dim)last=insertNode(i,data[i],data[i+1],last);return last&&equals(last,last.next)&&(removeNode(last),last=last.next),last}function filterPoints(start,end){if(!start)return start;end||(end=start);var again,p=start;do{if(again=!1,p.steiner||!equals(p,p.next)&&0!==area(p.prev,p,p.next))p=p.next;else{if(removeNode(p),(p=end=p.prev)===p.next)break;again=!0}}while(again||p!==end);return end}function earcutLinked(ear,triangles,dim,minX,minY,invSize,pass){if(ear){!pass&&invSize&&function(start,minX,minY,invSize){var p=start;do{null===p.z&&(p.z=zOrder(p.x,p.y,minX,minY,invSize)),p.prevZ=p.prev,p.nextZ=p.next,p=p.next}while(p!==start);p.prevZ.nextZ=null,p.prevZ=null,function(list){var i,p,q,e,tail,numMerges,pSize,qSize,inSize=1;do{for(p=list,list=null,tail=null,numMerges=0;p;){for(numMerges++,q=p,pSize=0,i=0;i<inSize&&(pSize++,q=q.nextZ);i++);for(qSize=inSize;pSize>0||qSize>0&&q;)0!==pSize&&(0===qSize||!q||p.z<=q.z)?(e=p,p=p.nextZ,pSize--):(e=q,q=q.nextZ,qSize--),tail?tail.nextZ=e:list=e,e.prevZ=tail,tail=e;p=q}tail.nextZ=null,inSize*=2}while(numMerges>1)}(p)}(ear,minX,minY,invSize);for(var prev,next,stop=ear;ear.prev!==ear.next;)if(prev=ear.prev,next=ear.next,invSize?isEarHashed(ear,minX,minY,invSize):isEar(ear))triangles.push(prev.i/dim),triangles.push(ear.i/dim),triangles.push(next.i/dim),removeNode(ear),ear=next.next,stop=next.next;else if((ear=next)===stop){pass?1===pass?earcutLinked(ear=cureLocalIntersections(ear,triangles,dim),triangles,dim,minX,minY,invSize,2):2===pass&&splitEarcut(ear,triangles,dim,minX,minY,invSize):earcutLinked(filterPoints(ear),triangles,dim,minX,minY,invSize,1);break}}}function isEar(ear){var a=ear.prev,b=ear,c=ear.next;if(area(a,b,c)>=0)return!1;for(var p=ear.next.next;p!==ear.prev;){if(pointInTriangle(a.x,a.y,b.x,b.y,c.x,c.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function isEarHashed(ear,minX,minY,invSize){var a=ear.prev,b=ear,c=ear.next;if(area(a,b,c)>=0)return!1;for(var minTX=a.x<b.x?a.x<c.x?a.x:c.x:b.x<c.x?b.x:c.x,minTY=a.y<b.y?a.y<c.y?a.y:c.y:b.y<c.y?b.y:c.y,maxTX=a.x>b.x?a.x>c.x?a.x:c.x:b.x>c.x?b.x:c.x,maxTY=a.y>b.y?a.y>c.y?a.y:c.y:b.y>c.y?b.y:c.y,minZ=zOrder(minTX,minTY,minX,minY,invSize),maxZ=zOrder(maxTX,maxTY,minX,minY,invSize),p=ear.prevZ,n=ear.nextZ;p&&p.z>=minZ&&n&&n.z<=maxZ;){if(p!==ear.prev&&p!==ear.next&&pointInTriangle(a.x,a.y,b.x,b.y,c.x,c.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,n!==ear.prev&&n!==ear.next&&pointInTriangle(a.x,a.y,b.x,b.y,c.x,c.y,n.x,n.y)&&area(n.prev,n,n.next)>=0)return!1;n=n.nextZ}for(;p&&p.z>=minZ;){if(p!==ear.prev&&p!==ear.next&&pointInTriangle(a.x,a.y,b.x,b.y,c.x,c.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;n&&n.z<=maxZ;){if(n!==ear.prev&&n!==ear.next&&pointInTriangle(a.x,a.y,b.x,b.y,c.x,c.y,n.x,n.y)&&area(n.prev,n,n.next)>=0)return!1;n=n.nextZ}return!0}function cureLocalIntersections(start,triangles,dim){var p=start;do{var a=p.prev,b=p.next.next;!equals(a,b)&&intersects(a,p,p.next,b)&&locallyInside(a,b)&&locallyInside(b,a)&&(triangles.push(a.i/dim),triangles.push(p.i/dim),triangles.push(b.i/dim),removeNode(p),removeNode(p.next),p=start=b),p=p.next}while(p!==start);return p}function splitEarcut(start,triangles,dim,minX,minY,invSize){var a=start;do{for(var b=a.next.next;b!==a.prev;){if(a.i!==b.i&&isValidDiagonal(a,b)){var c=splitPolygon(a,b);return a=filterPoints(a,a.next),c=filterPoints(c,c.next),earcutLinked(a,triangles,dim,minX,minY,invSize),void earcutLinked(c,triangles,dim,minX,minY,invSize)}b=b.next}a=a.next}while(a!==start)}function compareX(a,b){return a.x-b.x}function eliminateHole(hole,outerNode){if(outerNode=function(hole,outerNode){var m,p=outerNode,hx=hole.x,hy=hole.y,qx=-1/0;do{if(hy<=p.y&&hy>=p.next.y&&p.next.y!==p.y){var x=p.x+(hy-p.y)*(p.next.x-p.x)/(p.next.y-p.y);if(x<=hx&&x>qx){if(qx=x,x===hx){if(hy===p.y)return p;if(hy===p.next.y)return p.next}m=p.x<p.next.x?p:p.next}}p=p.next}while(p!==outerNode);if(!m)return null;if(hx===qx)return m.prev;var tan,stop=m,mx=m.x,my=m.y,tanMin=1/0;p=m.next;for(;p!==stop;)hx>=p.x&&p.x>=mx&&hx!==p.x&&pointInTriangle(hy<my?hx:qx,hy,mx,my,hy<my?qx:hx,hy,p.x,p.y)&&((tan=Math.abs(hy-p.y)/(hx-p.x))<tanMin||tan===tanMin&&p.x>m.x)&&locallyInside(p,hole)&&(m=p,tanMin=tan),p=p.next;return m}(hole,outerNode)){var b=splitPolygon(outerNode,hole);filterPoints(b,b.next)}}function zOrder(x,y,minX,minY,invSize){return(x=1431655765&((x=858993459&((x=252645135&((x=16711935&((x=32767*(x-minX)*invSize)|x<<8))|x<<4))|x<<2))|x<<1))|(y=1431655765&((y=858993459&((y=252645135&((y=16711935&((y=32767*(y-minY)*invSize)|y<<8))|y<<4))|y<<2))|y<<1))<<1}function getLeftmost(start){var p=start,leftmost=start;do{p.x<leftmost.x&&(leftmost=p),p=p.next}while(p!==start);return leftmost}function pointInTriangle(ax,ay,bx,by,cx,cy,px,py){return(cx-px)*(ay-py)-(ax-px)*(cy-py)>=0&&(ax-px)*(by-py)-(bx-px)*(ay-py)>=0&&(bx-px)*(cy-py)-(cx-px)*(by-py)>=0}function isValidDiagonal(a,b){return a.next.i!==b.i&&a.prev.i!==b.i&&!function(a,b){var p=a;do{if(p.i!==a.i&&p.next.i!==a.i&&p.i!==b.i&&p.next.i!==b.i&&intersects(p,p.next,a,b))return!0;p=p.next}while(p!==a);return!1}(a,b)&&locallyInside(a,b)&&locallyInside(b,a)&&function(a,b){var p=a,inside=!1,px=(a.x+b.x)/2,py=(a.y+b.y)/2;do{p.y>py!=p.next.y>py&&p.next.y!==p.y&&px<(p.next.x-p.x)*(py-p.y)/(p.next.y-p.y)+p.x&&(inside=!inside),p=p.next}while(p!==a);return inside}(a,b)}function area(p,q,r){return(q.y-p.y)*(r.x-q.x)-(q.x-p.x)*(r.y-q.y)}function equals(p1,p2){return p1.x===p2.x&&p1.y===p2.y}function intersects(p1,q1,p2,q2){return!!(equals(p1,q1)&&equals(p2,q2)||equals(p1,q2)&&equals(p2,q1))||area(p1,q1,p2)>0!=area(p1,q1,q2)>0&&area(p2,q2,p1)>0!=area(p2,q2,q1)>0}function locallyInside(a,b){return area(a.prev,a,a.next)<0?area(a,b,a.next)>=0&&area(a,a.prev,b)>=0:area(a,b,a.prev)<0||area(a,a.next,b)<0}function splitPolygon(a,b){var a2=new Node(a.i,a.x,a.y),b2=new Node(b.i,b.x,b.y),an=a.next,bp=b.prev;return a.next=b,b.prev=a,a2.next=an,an.prev=a2,b2.next=a2,a2.prev=b2,bp.next=b2,b2.prev=bp,b2}function insertNode(i,x,y,last){var p=new Node(i,x,y);return last?(p.next=last.next,p.prev=last,last.next.prev=p,last.next=p):(p.prev=p,p.next=p),p}function removeNode(p){p.next.prev=p.prev,p.prev.next=p.next,p.prevZ&&(p.prevZ.nextZ=p.nextZ),p.nextZ&&(p.nextZ.prevZ=p.prevZ)}function Node(i,x,y){this.i=i,this.x=x,this.y=y,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(data,start,end,dim){for(var sum=0,i=start,j=end-dim;i<end;i+=dim)sum+=(data[j]-data[i])*(data[i+1]+data[j+1]),j=i;return sum}module.exports=earcut,earcut.deviation=function(data,holeIndices,dim,triangles){var hasHoles=holeIndices&&holeIndices.length,outerLen=hasHoles?holeIndices[0]*dim:data.length,polygonArea=Math.abs(signedArea(data,0,outerLen,dim));if(hasHoles)for(var i=0,len=holeIndices.length;i<len;i++){var start=holeIndices[i]*dim,end=i<len-1?holeIndices[i+1]*dim:data.length;polygonArea-=Math.abs(signedArea(data,start,end,dim))}var trianglesArea=0;for(i=0;i<triangles.length;i+=3){var a=triangles[i]*dim,b=triangles[i+1]*dim,c=triangles[i+2]*dim;trianglesArea+=Math.abs((data[a]-data[c])*(data[b+1]-data[a+1])-(data[a]-data[b])*(data[c+1]-data[a+1]))}return 0===polygonArea&&0===trianglesArea?0:Math.abs((trianglesArea-polygonArea)/polygonArea)},earcut.flatten=function(data){for(var dim=data[0][0].length,result={vertices:[],holes:[],dimensions:dim},holeIndex=0,i=0;i<data.length;i++){for(var j=0;j<data[i].length;j++)for(var d=0;d<dim;d++)result.vertices.push(data[i][j][d]);i>0&&(holeIndex+=data[i-1].length,result.holes.push(holeIndex))}return result}},function(module,exports){module.exports=function(obj){var clone={};for(var key in obj)Array.isArray(obj[key])?clone[key]=obj[key].slice(0):clone[key]=obj[key];return clone}},function(module,exports,__webpack_require__){module.exports={COMPLETE:__webpack_require__(893),DECODED:__webpack_require__(894),DECODED_ALL:__webpack_require__(895),DESTROY:__webpack_require__(896),DETUNE:__webpack_require__(897),GLOBAL_DETUNE:__webpack_require__(898),GLOBAL_MUTE:__webpack_require__(899),GLOBAL_RATE:__webpack_require__(900),GLOBAL_VOLUME:__webpack_require__(901),LOOP:__webpack_require__(902),LOOPED:__webpack_require__(903),MUTE:__webpack_require__(904),PAUSE_ALL:__webpack_require__(905),PAUSE:__webpack_require__(906),PLAY:__webpack_require__(907),RATE:__webpack_require__(908),RESUME_ALL:__webpack_require__(909),RESUME:__webpack_require__(910),SEEK:__webpack_require__(911),STOP_ALL:__webpack_require__(912),STOP:__webpack_require__(913),UNLOCKED:__webpack_require__(914),VOLUME:__webpack_require__(915)}},function(module,exports){module.exports=function(array,startIndex,endIndex,throwError){var len=array.length;if(startIndex<0||startIndex>len||startIndex>=endIndex||endIndex>len||startIndex+endIndex>len){if(throwError)throw new Error("Range Error: Values outside acceptable range");return!1}return!0}},function(module,exports,__webpack_require__){var Utils=__webpack_require__(10);module.exports=function(pipeline,src,alpha,dx,dy){var strokeTint=pipeline.strokeTint,strokeTintColor=Utils.getTintAppendFloatAlphaAndSwap(src.strokeColor,src.strokeAlpha*alpha);strokeTint.TL=strokeTintColor,strokeTint.TR=strokeTintColor,strokeTint.BL=strokeTintColor,strokeTint.BR=strokeTintColor;var path=src.pathData,pathLength=path.length-1,lineWidth=src.lineWidth,halfLineWidth=lineWidth/2,px1=path[0]-dx,py1=path[1]-dy;src.closePath||(pathLength-=2);for(var i=2;i<pathLength;i+=2){var px2=path[i]-dx,py2=path[i+1]-dy;pipeline.setTexture2D(),pipeline.batchLine(px1,py1,px2,py2,halfLineWidth,halfLineWidth,lineWidth,i-2,!!src.closePath&&i===pathLength-1),px1=px2,py1=py2}}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Contains=__webpack_require__(94),GetPoint=__webpack_require__(431),GetPoints=__webpack_require__(432),GEOM_CONST=__webpack_require__(53),Line=__webpack_require__(62),Random=__webpack_require__(170),Triangle=new Class({initialize:function(x1,y1,x2,y2,x3,y3){void 0===x1&&(x1=0),void 0===y1&&(y1=0),void 0===x2&&(x2=0),void 0===y2&&(y2=0),void 0===x3&&(x3=0),void 0===y3&&(y3=0),this.type=GEOM_CONST.TRIANGLE,this.x1=x1,this.y1=y1,this.x2=x2,this.y2=y2,this.x3=x3,this.y3=y3},contains:function(x,y){return Contains(this,x,y)},getPoint:function(position,output){return GetPoint(this,position,output)},getPoints:function(quantity,stepRate,output){return GetPoints(this,quantity,stepRate,output)},getRandomPoint:function(point){return Random(this,point)},setTo:function(x1,y1,x2,y2,x3,y3){return void 0===x1&&(x1=0),void 0===y1&&(y1=0),void 0===x2&&(x2=0),void 0===y2&&(y2=0),void 0===x3&&(x3=0),void 0===y3&&(y3=0),this.x1=x1,this.y1=y1,this.x2=x2,this.y2=y2,this.x3=x3,this.y3=y3,this},getLineA:function(line){return void 0===line&&(line=new Line),line.setTo(this.x1,this.y1,this.x2,this.y2),line},getLineB:function(line){return void 0===line&&(line=new Line),line.setTo(this.x2,this.y2,this.x3,this.y3),line},getLineC:function(line){return void 0===line&&(line=new Line),line.setTo(this.x3,this.y3,this.x1,this.y1),line},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(value){var diff=0;diff=this.x1<=this.x2&&this.x1<=this.x3?this.x1-value:this.x2<=this.x1&&this.x2<=this.x3?this.x2-value:this.x3-value,this.x1-=diff,this.x2-=diff,this.x3-=diff}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(value){var diff=0;diff=this.x1>=this.x2&&this.x1>=this.x3?this.x1-value:this.x2>=this.x1&&this.x2>=this.x3?this.x2-value:this.x3-value,this.x1-=diff,this.x2-=diff,this.x3-=diff}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(value){var diff=0;diff=this.y1<=this.y2&&this.y1<=this.y3?this.y1-value:this.y2<=this.y1&&this.y2<=this.y3?this.y2-value:this.y3-value,this.y1-=diff,this.y2-=diff,this.y3-=diff}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(value){var diff=0;diff=this.y1>=this.y2&&this.y1>=this.y3?this.y1-value:this.y2>=this.y1&&this.y2>=this.y3?this.y2-value:this.y3-value,this.y1-=diff,this.y2-=diff,this.y3-=diff}}});module.exports=Triangle},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),CONST=__webpack_require__(21),File=__webpack_require__(24),FileTypesManager=__webpack_require__(8),GetFastValue=__webpack_require__(1),IsPlainObject=__webpack_require__(7),ImageFile=new Class({Extends:File,initialize:function ImageFile(loader,key,url,xhrSettings,frameConfig){var normalMapURL,extension="png";if(IsPlainObject(key)){var config=key;key=GetFastValue(config,"key"),url=GetFastValue(config,"url"),normalMapURL=GetFastValue(config,"normalMap"),xhrSettings=GetFastValue(config,"xhrSettings"),extension=GetFastValue(config,"extension",extension),frameConfig=GetFastValue(config,"frameConfig")}Array.isArray(url)&&(normalMapURL=url[1],url=url[0]);var fileConfig={type:"image",cache:loader.textureManager,extension:extension,responseType:"blob",key:key,url:url,xhrSettings:xhrSettings,config:frameConfig};if(File.call(this,loader,fileConfig),normalMapURL){var normalMap=new ImageFile(loader,this.key,normalMapURL,xhrSettings,frameConfig);normalMap.type="normalMap",this.setLink(normalMap),loader.addFile(normalMap)}},onProcess:function(){this.state=CONST.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var _this=this;this.data.onload=function(){File.revokeObjectURL(_this.data),_this.onProcessComplete()},this.data.onerror=function(){File.revokeObjectURL(_this.data),_this.onProcessError()},File.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var texture,linkFile=this.linkFile;linkFile&&linkFile.state===CONST.FILE_COMPLETE?(texture="image"===this.type?this.cache.addImage(this.key,this.data,linkFile.data):this.cache.addImage(linkFile.key,linkFile.data,this.data),this.pendingDestroy(texture),linkFile.pendingDestroy(texture)):linkFile||(texture=this.cache.addImage(this.key,this.data),this.pendingDestroy(texture))}});FileTypesManager.register("image",(function(key,url,xhrSettings){if(Array.isArray(key))for(var i=0;i<key.length;i++)this.addFile(new ImageFile(this,key[i]));else this.addFile(new ImageFile(this,key,url,xhrSettings));return this})),module.exports=ImageFile},function(module,exports,__webpack_require__){var Composite={};module.exports=Composite;var Events=__webpack_require__(97),Common=__webpack_require__(19),Bounds=__webpack_require__(39),Body=__webpack_require__(26);Composite.create=function(options){return Common.extend({id:Common.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},options)},Composite.setModified=function(composite,isModified,updateParents,updateChildren){if(composite.isModified=isModified,updateParents&&composite.parent&&Composite.setModified(composite.parent,isModified,updateParents,updateChildren),updateChildren)for(var i=0;i<composite.composites.length;i++){var childComposite=composite.composites[i];Composite.setModified(childComposite,isModified,updateParents,updateChildren)}},Composite.add=function(composite,object){var objects=[].concat(object);Events.trigger(composite,"beforeAdd",{object:object});for(var i=0;i<objects.length;i++){var obj=objects[i];switch(obj.type){case"body":if(obj.parent!==obj){Common.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}Composite.addBody(composite,obj);break;case"constraint":Composite.addConstraint(composite,obj);break;case"composite":Composite.addComposite(composite,obj);break;case"mouseConstraint":Composite.addConstraint(composite,obj.constraint)}}return Events.trigger(composite,"afterAdd",{object:object}),composite},Composite.remove=function(composite,object,deep){var objects=[].concat(object);Events.trigger(composite,"beforeRemove",{object:object});for(var i=0;i<objects.length;i++){var obj=objects[i];switch(obj.type){case"body":Composite.removeBody(composite,obj,deep);break;case"constraint":Composite.removeConstraint(composite,obj,deep);break;case"composite":Composite.removeComposite(composite,obj,deep);break;case"mouseConstraint":Composite.removeConstraint(composite,obj.constraint)}}return Events.trigger(composite,"afterRemove",{object:object}),composite},Composite.addComposite=function(compositeA,compositeB){return compositeA.composites.push(compositeB),compositeB.parent=compositeA,Composite.setModified(compositeA,!0,!0,!1),compositeA},Composite.removeComposite=function(compositeA,compositeB,deep){var position=compositeA.composites.indexOf(compositeB);if(-1!==position&&(Composite.removeCompositeAt(compositeA,position),Composite.setModified(compositeA,!0,!0,!1)),deep)for(var i=0;i<compositeA.composites.length;i++)Composite.removeComposite(compositeA.composites[i],compositeB,!0);return compositeA},Composite.removeCompositeAt=function(composite,position){return composite.composites.splice(position,1),Composite.setModified(composite,!0,!0,!1),composite},Composite.addBody=function(composite,body){return composite.bodies.push(body),Composite.setModified(composite,!0,!0,!1),composite},Composite.removeBody=function(composite,body,deep){var position=composite.bodies.indexOf(body);if(-1!==position&&(Composite.removeBodyAt(composite,position),Composite.setModified(composite,!0,!0,!1)),deep)for(var i=0;i<composite.composites.length;i++)Composite.removeBody(composite.composites[i],body,!0);return composite},Composite.removeBodyAt=function(composite,position){return composite.bodies.splice(position,1),Composite.setModified(composite,!0,!0,!1),composite},Composite.addConstraint=function(composite,constraint){return composite.constraints.push(constraint),Composite.setModified(composite,!0,!0,!1),composite},Composite.removeConstraint=function(composite,constraint,deep){var position=composite.constraints.indexOf(constraint);if(-1!==position&&Composite.removeConstraintAt(composite,position),deep)for(var i=0;i<composite.composites.length;i++)Composite.removeConstraint(composite.composites[i],constraint,!0);return composite},Composite.removeConstraintAt=function(composite,position){return composite.constraints.splice(position,1),Composite.setModified(composite,!0,!0,!1),composite},Composite.clear=function(composite,keepStatic,deep){if(deep)for(var i=0;i<composite.composites.length;i++)Composite.clear(composite.composites[i],keepStatic,!0);return keepStatic?composite.bodies=composite.bodies.filter((function(body){return body.isStatic})):composite.bodies.length=0,composite.constraints.length=0,composite.composites.length=0,Composite.setModified(composite,!0,!0,!1),composite},Composite.allBodies=function(composite){for(var bodies=[].concat(composite.bodies),i=0;i<composite.composites.length;i++)bodies=bodies.concat(Composite.allBodies(composite.composites[i]));return bodies},Composite.allConstraints=function(composite){for(var constraints=[].concat(composite.constraints),i=0;i<composite.composites.length;i++)constraints=constraints.concat(Composite.allConstraints(composite.composites[i]));return constraints},Composite.allComposites=function(composite){for(var composites=[].concat(composite.composites),i=0;i<composite.composites.length;i++)composites=composites.concat(Composite.allComposites(composite.composites[i]));return composites},Composite.get=function(composite,id,type){var objects,object;switch(type){case"body":objects=Composite.allBodies(composite);break;case"constraint":objects=Composite.allConstraints(composite);break;case"composite":objects=Composite.allComposites(composite).concat(composite)}return objects?0===(object=objects.filter((function(object){return object.id.toString()===id.toString()}))).length?null:object[0]:null},Composite.move=function(compositeA,objects,compositeB){return Composite.remove(compositeA,objects),Composite.add(compositeB,objects),compositeA},Composite.rebase=function(composite){for(var objects=Composite.allBodies(composite).concat(Composite.allConstraints(composite)).concat(Composite.allComposites(composite)),i=0;i<objects.length;i++)objects[i].id=Common.nextId();return Composite.setModified(composite,!0,!0,!1),composite},Composite.translate=function(composite,translation,recursive){for(var bodies=recursive?Composite.allBodies(composite):composite.bodies,i=0;i<bodies.length;i++)Body.translate(bodies[i],translation);return Composite.setModified(composite,!0,!0,!1),composite},Composite.rotate=function(composite,rotation,point,recursive){for(var cos=Math.cos(rotation),sin=Math.sin(rotation),bodies=recursive?Composite.allBodies(composite):composite.bodies,i=0;i<bodies.length;i++){var body=bodies[i],dx=body.position.x-point.x,dy=body.position.y-point.y;Body.setPosition(body,{x:point.x+(dx*cos-dy*sin),y:point.y+(dx*sin+dy*cos)}),Body.rotate(body,rotation)}return Composite.setModified(composite,!0,!0,!1),composite},Composite.scale=function(composite,scaleX,scaleY,point,recursive){for(var bodies=recursive?Composite.allBodies(composite):composite.bodies,i=0;i<bodies.length;i++){var body=bodies[i],dx=body.position.x-point.x,dy=body.position.y-point.y;Body.setPosition(body,{x:point.x+dx*scaleX,y:point.y+dy*scaleY}),Body.scale(body,scaleX,scaleY)}return Composite.setModified(composite,!0,!0,!1),composite},Composite.bounds=function(composite){for(var bodies=Composite.allBodies(composite),vertices=[],i=0;i<bodies.length;i+=1){var body=bodies[i];vertices.push(body.bounds.min,body.bounds.max)}return Bounds.create(vertices)}},function(module,exports){module.exports=function(tile,collides){collides?tile.setCollision(!0,!0,!0,!0,!1):tile.resetCollision(!1)}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Components=__webpack_require__(12),Rectangle=__webpack_require__(452),Tile=new Class({Mixins:[Components.Alpha,Components.Flip,Components.Visible],initialize:function(layer,index,x,y,width,height,baseWidth,baseHeight){this.layer=layer,this.index=index,this.x=x,this.y=y,this.width=width,this.height=height,this.baseWidth=void 0!==baseWidth?baseWidth:width,this.baseHeight=void 0!==baseHeight?baseHeight:height,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=null,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(x,y){return!(x<this.pixelX||y<this.pixelY||x>this.right||y>this.bottom)},copy:function(tile){return this.index=tile.index,this.alpha=tile.alpha,this.properties=tile.properties,this.visible=tile.visible,this.setFlip(tile.flipX,tile.flipY),this.tint=tile.tint,this.rotation=tile.rotation,this.collideUp=tile.collideUp,this.collideDown=tile.collideDown,this.collideLeft=tile.collideLeft,this.collideRight=tile.collideRight,this.collisionCallback=tile.collisionCallback,this.collisionCallbackContext=tile.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(camera){var tilemapLayer=this.tilemapLayer;return tilemapLayer?tilemapLayer.tileToWorldX(this.x,camera):this.x*this.baseWidth},getRight:function(camera){var tilemapLayer=this.tilemapLayer;return tilemapLayer?this.getLeft(camera)+this.width*tilemapLayer.scaleX:this.getLeft(camera)+this.width},getTop:function(camera){var tilemapLayer=this.tilemapLayer;return tilemapLayer?tilemapLayer.tileToWorldY(this.y,camera)-(this.height-this.baseHeight)*tilemapLayer.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(camera){var tilemapLayer=this.tilemapLayer;return tilemapLayer?this.getTop(camera)+this.height*tilemapLayer.scaleY:this.getTop(camera)+this.height},getBounds:function(camera,output){return void 0===output&&(output=new Rectangle),output.x=this.getLeft(),output.y=this.getTop(),output.width=this.getRight()-output.x,output.height=this.getBottom()-output.y,output},getCenterX:function(camera){return(this.getLeft(camera)+this.getRight(camera))/2},getCenterY:function(camera){return(this.getTop(camera)+this.getBottom(camera))/2},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},intersects:function(x,y,right,bottom){return!(right<=this.pixelX||bottom<=this.pixelY||x>=this.right||y>=this.bottom)},isInteresting:function(collides,faces){return collides&&faces?this.canCollide||this.hasInterestingFace:collides?this.collides:!!faces&&this.hasInterestingFace},resetCollision:function(recalculateFaces){(void 0===recalculateFaces&&(recalculateFaces=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,recalculateFaces)&&(this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y));return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(left,right,up,down,recalculateFaces){(void 0===right&&(right=left),void 0===up&&(up=left),void 0===down&&(down=left),void 0===recalculateFaces&&(recalculateFaces=!0),this.collideLeft=left,this.collideRight=right,this.collideUp=up,this.collideDown=down,this.faceLeft=left,this.faceRight=right,this.faceTop=up,this.faceBottom=down,recalculateFaces)&&(this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y));return this},setCollisionCallback:function(callback,context){return null===callback?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=callback,this.collisionCallbackContext=context),this},setSize:function(tileWidth,tileHeight,baseWidth,baseHeight){return void 0!==tileWidth&&(this.width=tileWidth),void 0!==tileHeight&&(this.height=tileHeight),void 0!==baseWidth&&(this.baseWidth=baseWidth),void 0!==baseHeight&&(this.baseHeight=baseHeight),this.updatePixelXY(),this},updatePixelXY:function(){return this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight,this},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var tilemapLayer=this.layer.tilemapLayer;if(tilemapLayer){var tileset=tilemapLayer.gidMap[this.index];if(tileset)return tileset}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var tilemapLayer=this.tilemapLayer;return tilemapLayer?tilemapLayer.tilemap:null}}});module.exports=Tile},function(module,exports){module.exports=function(gameObject){return gameObject.x-gameObject.width*gameObject.originX+.5*gameObject.width}},function(module,exports){module.exports=function(gameObject,x){var offsetX=gameObject.width*gameObject.originX;return gameObject.x=x+offsetX-.5*gameObject.width,gameObject}},function(module,exports){module.exports=function(gameObject,y){var offsetY=gameObject.height*gameObject.originY;return gameObject.y=y+offsetY-.5*gameObject.height,gameObject}},function(module,exports){module.exports=function(gameObject){return gameObject.y-gameObject.height*gameObject.originY+.5*gameObject.height}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Contains=__webpack_require__(52),GetPoint=__webpack_require__(268),GetPoints=__webpack_require__(269),GEOM_CONST=__webpack_require__(53),Random=__webpack_require__(161),Circle=new Class({initialize:function(x,y,radius){void 0===x&&(x=0),void 0===y&&(y=0),void 0===radius&&(radius=0),this.type=GEOM_CONST.CIRCLE,this.x=x,this.y=y,this._radius=radius,this._diameter=2*radius},contains:function(x,y){return Contains(this,x,y)},getPoint:function(position,point){return GetPoint(this,position,point)},getPoints:function(quantity,stepRate,output){return GetPoints(this,quantity,stepRate,output)},getRandomPoint:function(point){return Random(this,point)},setTo:function(x,y,radius){return this.x=x,this.y=y,this._radius=radius,this._diameter=2*radius,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(x,y){return void 0===y&&(y=x),this.x=x,this.y=y,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(value){this._radius=value,this._diameter=2*value}},diameter:{get:function(){return this._diameter},set:function(value){this._diameter=value,this._radius=.5*value}},left:{get:function(){return this.x-this._radius},set:function(value){this.x=value+this._radius}},right:{get:function(){return this.x+this._radius},set:function(value){this.x=value-this._radius}},top:{get:function(){return this.y-this._radius},set:function(value){this.y=value+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(value){this.y=value-this._radius}}});module.exports=Circle},function(module,exports,__webpack_require__){var Vector3=new(__webpack_require__(0))({initialize:function(x,y,z){this.x=0,this.y=0,this.z=0,"object"==typeof x?(this.x=x.x||0,this.y=x.y||0,this.z=x.z||0):(this.x=x||0,this.y=y||0,this.z=z||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},clone:function(){return new Vector3(this.x,this.y,this.z)},crossVectors:function(a,b){var ax=a.x,ay=a.y,az=a.z,bx=b.x,by=b.y,bz=b.z;return this.x=ay*bz-az*by,this.y=az*bx-ax*bz,this.z=ax*by-ay*bx,this},equals:function(v){return this.x===v.x&&this.y===v.y&&this.z===v.z},copy:function(src){return this.x=src.x,this.y=src.y,this.z=src.z||0,this},set:function(x,y,z){return"object"==typeof x?(this.x=x.x||0,this.y=x.y||0,this.z=x.z||0):(this.x=x||0,this.y=y||0,this.z=z||0),this},add:function(v){return this.x+=v.x,this.y+=v.y,this.z+=v.z||0,this},subtract:function(v){return this.x-=v.x,this.y-=v.y,this.z-=v.z||0,this},multiply:function(v){return this.x*=v.x,this.y*=v.y,this.z*=v.z||1,this},scale:function(scale){return isFinite(scale)?(this.x*=scale,this.y*=scale,this.z*=scale):(this.x=0,this.y=0,this.z=0),this},divide:function(v){return this.x/=v.x,this.y/=v.y,this.z/=v.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(v){var dx=v.x-this.x,dy=v.y-this.y,dz=v.z-this.z||0;return Math.sqrt(dx*dx+dy*dy+dz*dz)},distanceSq:function(v){var dx=v.x-this.x,dy=v.y-this.y,dz=v.z-this.z||0;return dx*dx+dy*dy+dz*dz},length:function(){var x=this.x,y=this.y,z=this.z;return Math.sqrt(x*x+y*y+z*z)},lengthSq:function(){var x=this.x,y=this.y,z=this.z;return x*x+y*y+z*z},normalize:function(){var x=this.x,y=this.y,z=this.z,len=x*x+y*y+z*z;return len>0&&(len=1/Math.sqrt(len),this.x=x*len,this.y=y*len,this.z=z*len),this},dot:function(v){return this.x*v.x+this.y*v.y+this.z*v.z},cross:function(v){var ax=this.x,ay=this.y,az=this.z,bx=v.x,by=v.y,bz=v.z;return this.x=ay*bz-az*by,this.y=az*bx-ax*bz,this.z=ax*by-ay*bx,this},lerp:function(v,t){void 0===t&&(t=0);var ax=this.x,ay=this.y,az=this.z;return this.x=ax+t*(v.x-ax),this.y=ay+t*(v.y-ay),this.z=az+t*(v.z-az),this},transformMat3:function(mat){var x=this.x,y=this.y,z=this.z,m=mat.val;return this.x=x*m[0]+y*m[3]+z*m[6],this.y=x*m[1]+y*m[4]+z*m[7],this.z=x*m[2]+y*m[5]+z*m[8],this},transformMat4:function(mat){var x=this.x,y=this.y,z=this.z,m=mat.val;return this.x=m[0]*x+m[4]*y+m[8]*z+m[12],this.y=m[1]*x+m[5]*y+m[9]*z+m[13],this.z=m[2]*x+m[6]*y+m[10]*z+m[14],this},transformCoordinates:function(mat){var x=this.x,y=this.y,z=this.z,m=mat.val,tx=x*m[0]+y*m[4]+z*m[8]+m[12],ty=x*m[1]+y*m[5]+z*m[9]+m[13],tz=x*m[2]+y*m[6]+z*m[10]+m[14],tw=x*m[3]+y*m[7]+z*m[11]+m[15];return this.x=tx/tw,this.y=ty/tw,this.z=tz/tw,this},transformQuat:function(q){var x=this.x,y=this.y,z=this.z,qx=q.x,qy=q.y,qz=q.z,qw=q.w,ix=qw*x+qy*z-qz*y,iy=qw*y+qz*x-qx*z,iz=qw*z+qx*y-qy*x,iw=-qx*x-qy*y-qz*z;return this.x=ix*qw+iw*-qx+iy*-qz-iz*-qy,this.y=iy*qw+iw*-qy+iz*-qx-ix*-qz,this.z=iz*qw+iw*-qz+ix*-qy-iy*-qx,this},project:function(mat){var x=this.x,y=this.y,z=this.z,m=mat.val,a00=m[0],a01=m[1],a02=m[2],a03=m[3],a10=m[4],a11=m[5],a12=m[6],a13=m[7],a20=m[8],a21=m[9],a22=m[10],a23=m[11],a30=m[12],a31=m[13],a32=m[14],lw=1/(x*a03+y*a13+z*a23+m[15]);return this.x=(x*a00+y*a10+z*a20+a30)*lw,this.y=(x*a01+y*a11+z*a21+a31)*lw,this.z=(x*a02+y*a12+z*a22+a32)*lw,this},unproject:function(viewport,invProjectionView){var viewX=viewport.x,viewY=viewport.y,viewWidth=viewport.z,viewHeight=viewport.w,x=this.x-viewX,y=viewHeight-this.y-1-viewY,z=this.z;return this.x=2*x/viewWidth-1,this.y=2*y/viewHeight-1,this.z=2*z-1,this.project(invProjectionView)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});Vector3.ZERO=new Vector3,Vector3.RIGHT=new Vector3(1,0,0),Vector3.LEFT=new Vector3(-1,0,0),Vector3.UP=new Vector3(0,-1,0),Vector3.DOWN=new Vector3(0,1,0),Vector3.FORWARD=new Vector3(0,0,1),Vector3.BACK=new Vector3(0,0,-1),Vector3.ONE=new Vector3(1,1,1),module.exports=Vector3},function(module,exports){module.exports=function(array,index){if(!(index>=array.length)){for(var len=array.length-1,item=array[index],i=index;i<len;i++)array[i]=array[i+1];return array.length=len,item}}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),FromPoints=__webpack_require__(193),Rectangle=__webpack_require__(11),Vector2=__webpack_require__(3),Curve=new Class({initialize:function(type){this.type=type,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new Vector2,this._tmpVec2B=new Vector2},draw:function(graphics,pointsTotal){return void 0===pointsTotal&&(pointsTotal=32),graphics.strokePoints(this.getPoints(pointsTotal))},getBounds:function(out,accuracy){out||(out=new Rectangle),void 0===accuracy&&(accuracy=16);var len=this.getLength();accuracy>len&&(accuracy=len/2);var spaced=Math.max(1,Math.round(len/accuracy));return FromPoints(this.getSpacedPoints(spaced),out)},getDistancePoints:function(distance){var len=this.getLength(),spaced=Math.max(1,len/distance);return this.getSpacedPoints(spaced)},getEndPoint:function(out){return void 0===out&&(out=new Vector2),this.getPointAt(1,out)},getLength:function(){var lengths=this.getLengths();return lengths[lengths.length-1]},getLengths:function(divisions){if(void 0===divisions&&(divisions=this.arcLengthDivisions),this.cacheArcLengths.length===divisions+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var current,cache=[],last=this.getPoint(0,this._tmpVec2A),sum=0;cache.push(0);for(var p=1;p<=divisions;p++)sum+=(current=this.getPoint(p/divisions,this._tmpVec2B)).distance(last),cache.push(sum),last.copy(current);return this.cacheArcLengths=cache,cache},getPointAt:function(u,out){var t=this.getUtoTmapping(u);return this.getPoint(t,out)},getPoints:function(divisions){void 0===divisions&&(divisions=this.defaultDivisions);for(var points=[],d=0;d<=divisions;d++)points.push(this.getPoint(d/divisions));return points},getRandomPoint:function(out){return void 0===out&&(out=new Vector2),this.getPoint(Math.random(),out)},getSpacedPoints:function(divisions){void 0===divisions&&(divisions=this.defaultDivisions);for(var points=[],d=0;d<=divisions;d++){var t=this.getUtoTmapping(d/divisions,null,divisions);points.push(this.getPoint(t))}return points},getStartPoint:function(out){return void 0===out&&(out=new Vector2),this.getPointAt(0,out)},getTangent:function(t,out){void 0===out&&(out=new Vector2);var t1=t-1e-4,t2=t+1e-4;return t1<0&&(t1=0),t2>1&&(t2=1),this.getPoint(t1,this._tmpVec2A),this.getPoint(t2,out),out.subtract(this._tmpVec2A).normalize()},getTangentAt:function(u,out){var t=this.getUtoTmapping(u);return this.getTangent(t,out)},getTFromDistance:function(distance,divisions){return distance<=0?0:this.getUtoTmapping(0,distance,divisions)},getUtoTmapping:function(u,distance,divisions){var targetArcLength,arcLengths=this.getLengths(divisions),i=0,il=arcLengths.length;targetArcLength=distance?Math.min(distance,arcLengths[il-1]):u*arcLengths[il-1];for(var comparison,low=0,high=il-1;low<=high;)if((comparison=arcLengths[i=Math.floor(low+(high-low)/2)]-targetArcLength)<0)low=i+1;else{if(!(comparison>0)){high=i;break}high=i-1}if(arcLengths[i=high]===targetArcLength)return i/(il-1);var lengthBefore=arcLengths[i];return(i+(targetArcLength-lengthBefore)/(arcLengths[i+1]-lengthBefore))/(il-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});module.exports=Curve},function(module,exports,__webpack_require__){module.exports={ADD:__webpack_require__(872),COMPLETE:__webpack_require__(873),FILE_COMPLETE:__webpack_require__(874),FILE_KEY_COMPLETE:__webpack_require__(875),FILE_LOAD_ERROR:__webpack_require__(876),FILE_LOAD:__webpack_require__(877),FILE_PROGRESS:__webpack_require__(878),POST_PROCESS:__webpack_require__(879),PROGRESS:__webpack_require__(880),START:__webpack_require__(881)}},function(module,exports,__webpack_require__){var Clone=__webpack_require__(71);module.exports=function(obj1,obj2){var clone=Clone(obj1);for(var key in obj2)clone.hasOwnProperty(key)||(clone[key]=obj2[key]);return clone}},function(module,exports,__webpack_require__){var Set=new(__webpack_require__(0))({initialize:function(elements){if(this.entries=[],Array.isArray(elements))for(var i=0;i<elements.length;i++)this.set(elements[i])},set:function(value){return-1===this.entries.indexOf(value)&&this.entries.push(value),this},get:function(property,value){for(var i=0;i<this.entries.length;i++){var entry=this.entries[i];if(entry[property]===value)return entry}},getArray:function(){return this.entries.slice(0)},delete:function(value){var index=this.entries.indexOf(value);return index>-1&&this.entries.splice(index,1),this},dump:function(){console.group("Set");for(var i=0;i<this.entries.length;i++){var entry=this.entries[i];console.log(entry)}console.groupEnd()},each:function(callback,callbackScope){var i,temp=this.entries.slice(),len=temp.length;if(callbackScope)for(i=0;i<len&&!1!==callback.call(callbackScope,temp[i],i);i++);else for(i=0;i<len&&!1!==callback(temp[i],i);i++);return this},iterate:function(callback,callbackScope){var i,len=this.entries.length;if(callbackScope)for(i=0;i<len&&!1!==callback.call(callbackScope,this.entries[i],i);i++);else for(i=0;i<len&&!1!==callback(this.entries[i],i);i++);return this},iterateLocal:function(callbackKey){var i,args=[];for(i=1;i<arguments.length;i++)args.push(arguments[i]);var len=this.entries.length;for(i=0;i<len;i++){var entry=this.entries[i];entry[callbackKey].apply(entry,args)}return this},clear:function(){return this.entries.length=0,this},contains:function(value){return this.entries.indexOf(value)>-1},union:function(set){var newSet=new Set;return set.entries.forEach((function(value){newSet.set(value)})),this.entries.forEach((function(value){newSet.set(value)})),newSet},intersect:function(set){var newSet=new Set;return this.entries.forEach((function(value){set.contains(value)&&newSet.set(value)})),newSet},difference:function(set){var newSet=new Set;return this.entries.forEach((function(value){set.contains(value)||newSet.set(value)})),newSet},size:{get:function(){return this.entries.length},set:function(value){return value<this.entries.length?this.entries.length=value:this.entries.length}}});module.exports=Set},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Components=__webpack_require__(12),GameObject=__webpack_require__(13),ImageRender=__webpack_require__(976),Image=new Class({Extends:GameObject,Mixins:[Components.Alpha,Components.BlendMode,Components.Depth,Components.Flip,Components.GetBounds,Components.Mask,Components.Origin,Components.Pipeline,Components.ScrollFactor,Components.Size,Components.TextureCrop,Components.Tint,Components.Transform,Components.Visible,ImageRender],initialize:function(scene,x,y,texture,frame){GameObject.call(this,scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(texture,frame),this.setPosition(x,y),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});module.exports=Image},function(module,exports,__webpack_require__){var EaseMap=__webpack_require__(180),UppercaseFirst=__webpack_require__(198);module.exports=function(ease,easeParams){var easeFunction=EaseMap.Power0;if("string"==typeof ease)if(EaseMap.hasOwnProperty(ease))easeFunction=EaseMap[ease];else{var direction="";ease.indexOf(".")&&("in"===(direction=ease.substr(ease.indexOf(".")+1)).toLowerCase()?direction="easeIn":"out"===direction.toLowerCase()?direction="easeOut":"inout"===direction.toLowerCase()&&(direction="easeInOut")),ease=UppercaseFirst(ease.substr(0,ease.indexOf(".")+1)+direction),EaseMap.hasOwnProperty(ease)&&(easeFunction=EaseMap[ease])}else"function"==typeof ease?easeFunction=ease:Array.isArray(ease)&&ease.length;if(!easeParams)return easeFunction;var cloneParams=easeParams.slice(0);return cloneParams.unshift(0),function(v){return cloneParams[0]=v,easeFunction.apply(this,cloneParams)}}},function(module,exports){module.exports=function(source,key){return source.hasOwnProperty(key)}},function(module,exports){module.exports=function(triangle,x,y){var v0x=triangle.x3-triangle.x1,v0y=triangle.y3-triangle.y1,v1x=triangle.x2-triangle.x1,v1y=triangle.y2-triangle.y1,v2x=x-triangle.x1,v2y=y-triangle.y1,dot00=v0x*v0x+v0y*v0y,dot01=v0x*v1x+v0y*v1y,dot02=v0x*v2x+v0y*v2y,dot11=v1x*v1x+v1y*v1y,dot12=v1x*v2x+v1y*v2y,b=dot00*dot11-dot01*dot01,inv=0===b?0:1/b,u=(dot11*dot02-dot01*dot12)*inv,v=(dot00*dot12-dot01*dot02)*inv;return u>=0&&v>=0&&u+v<1}},function(module,exports,__webpack_require__){var Point=__webpack_require__(4);module.exports=function(line1,line2,out){void 0===out&&(out=new Point);var x1=line1.x1,y1=line1.y1,x2=line1.x2,y2=line1.y2,x3=line2.x1,y3=line2.y1,x4=line2.x2,y4=line2.y2,deNom=(y4-y3)*(x2-x1)-(x4-x3)*(y2-y1);if(0===deNom)return!1;var uA=((x4-x3)*(y1-y3)-(y4-y3)*(x1-x3))/deNom,uB=((x2-x1)*(y1-y3)-(y2-y1)*(x1-x3))/deNom;return uA>=0&&uA<=1&&uB>=0&&uB<=1&&(out.x=x1+uA*(x2-x1),out.y=y1+uA*(y2-y1),!0)}},function(module,exports){module.exports=function(line){return Math.atan2(line.y2-line.y1,line.x2-line.x1)}},function(module,exports,__webpack_require__){var Events={};module.exports=Events;var Common=__webpack_require__(19);Events.on=function(object,eventNames,callback){for(var name,names=eventNames.split(" "),i=0;i<names.length;i++)name=names[i],object.events=object.events||{},object.events[name]=object.events[name]||[],object.events[name].push(callback);return callback},Events.off=function(object,eventNames,callback){if(eventNames){"function"==typeof eventNames&&(callback=eventNames,eventNames=Common.keys(object.events).join(" "));for(var names=eventNames.split(" "),i=0;i<names.length;i++){var callbacks=object.events[names[i]],newCallbacks=[];if(callback&&callbacks)for(var j=0;j<callbacks.length;j++)callbacks[j]!==callback&&newCallbacks.push(callbacks[j]);object.events[names[i]]=newCallbacks}}else object.events={}},Events.trigger=function(object,eventNames,event){var names,name,callbacks,eventClone,events=object.events;if(events&&Common.keys(events).length>0){event||(event={}),names=eventNames.split(" ");for(var i=0;i<names.length;i++)if(callbacks=events[name=names[i]]){(eventClone=Common.clone(event,!1)).name=name,eventClone.source=object;for(var j=0;j<callbacks.length;j++)callbacks[j].apply(object,[eventClone])}}}},function(module,exports,__webpack_require__){var Constraint={};module.exports=Constraint;var Vertices=__webpack_require__(32),Vector=__webpack_require__(38),Sleeping=__webpack_require__(113),Bounds=__webpack_require__(39),Axes=__webpack_require__(234),Common=__webpack_require__(19);Constraint._warming=.4,Constraint._torqueDampen=1,Constraint._minLength=1e-6,Constraint.create=function(options){var constraint=options;constraint.bodyA&&!constraint.pointA&&(constraint.pointA={x:0,y:0}),constraint.bodyB&&!constraint.pointB&&(constraint.pointB={x:0,y:0});var initialPointA=constraint.bodyA?Vector.add(constraint.bodyA.position,constraint.pointA):constraint.pointA,initialPointB=constraint.bodyB?Vector.add(constraint.bodyB.position,constraint.pointB):constraint.pointB,length=Vector.magnitude(Vector.sub(initialPointA,initialPointB));constraint.length=void 0!==constraint.length?constraint.length:length,constraint.id=constraint.id||Common.nextId(),constraint.label=constraint.label||"Constraint",constraint.type="constraint",constraint.stiffness=constraint.stiffness||(constraint.length>0?1:.7),constraint.damping=constraint.damping||0,constraint.angularStiffness=constraint.angularStiffness||0,constraint.angleA=constraint.bodyA?constraint.bodyA.angle:constraint.angleA,constraint.angleB=constraint.bodyB?constraint.bodyB.angle:constraint.angleB,constraint.plugin={};var render={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return 0===constraint.length&&constraint.stiffness>.1?(render.type="pin",render.anchors=!1):constraint.stiffness<.9&&(render.type="spring"),constraint.render=Common.extend(render,constraint.render),constraint},Constraint.preSolveAll=function(bodies){for(var i=0;i<bodies.length;i+=1){var body=bodies[i],impulse=body.constraintImpulse;body.isStatic||0===impulse.x&&0===impulse.y&&0===impulse.angle||(body.position.x+=impulse.x,body.position.y+=impulse.y,body.angle+=impulse.angle)}},Constraint.solveAll=function(constraints,timeScale){for(var i=0;i<constraints.length;i+=1){var constraint=constraints[i],fixedA=!constraint.bodyA||constraint.bodyA&&constraint.bodyA.isStatic,fixedB=!constraint.bodyB||constraint.bodyB&&constraint.bodyB.isStatic;(fixedA||fixedB)&&Constraint.solve(constraints[i],timeScale)}for(i=0;i<constraints.length;i+=1)fixedA=!(constraint=constraints[i]).bodyA||constraint.bodyA&&constraint.bodyA.isStatic,fixedB=!constraint.bodyB||constraint.bodyB&&constraint.bodyB.isStatic,fixedA||fixedB||Constraint.solve(constraints[i],timeScale)},Constraint.solve=function(constraint,timeScale){var bodyA=constraint.bodyA,bodyB=constraint.bodyB,pointA=constraint.pointA,pointB=constraint.pointB;if(bodyA||bodyB){bodyA&&!bodyA.isStatic&&(Vector.rotate(pointA,bodyA.angle-constraint.angleA,pointA),constraint.angleA=bodyA.angle),bodyB&&!bodyB.isStatic&&(Vector.rotate(pointB,bodyB.angle-constraint.angleB,pointB),constraint.angleB=bodyB.angle);var pointAWorld=pointA,pointBWorld=pointB;if(bodyA&&(pointAWorld=Vector.add(bodyA.position,pointA)),bodyB&&(pointBWorld=Vector.add(bodyB.position,pointB)),pointAWorld&&pointBWorld){var delta=Vector.sub(pointAWorld,pointBWorld),currentLength=Vector.magnitude(delta);currentLength<Constraint._minLength&&(currentLength=Constraint._minLength);var torque,share,normal,normalVelocity,relativeVelocity,difference=(currentLength-constraint.length)/currentLength,stiffness=constraint.stiffness<1?constraint.stiffness*timeScale:constraint.stiffness,force=Vector.mult(delta,difference*stiffness),massTotal=(bodyA?bodyA.inverseMass:0)+(bodyB?bodyB.inverseMass:0),resistanceTotal=massTotal+((bodyA?bodyA.inverseInertia:0)+(bodyB?bodyB.inverseInertia:0));if(constraint.damping){var zero=Vector.create();normal=Vector.div(delta,currentLength),relativeVelocity=Vector.sub(bodyB&&Vector.sub(bodyB.position,bodyB.positionPrev)||zero,bodyA&&Vector.sub(bodyA.position,bodyA.positionPrev)||zero),normalVelocity=Vector.dot(normal,relativeVelocity)}bodyA&&!bodyA.isStatic&&(share=bodyA.inverseMass/massTotal,bodyA.constraintImpulse.x-=force.x*share,bodyA.constraintImpulse.y-=force.y*share,bodyA.position.x-=force.x*share,bodyA.position.y-=force.y*share,constraint.damping&&(bodyA.positionPrev.x-=constraint.damping*normal.x*normalVelocity*share,bodyA.positionPrev.y-=constraint.damping*normal.y*normalVelocity*share),torque=Vector.cross(pointA,force)/resistanceTotal*Constraint._torqueDampen*bodyA.inverseInertia*(1-constraint.angularStiffness),bodyA.constraintImpulse.angle-=torque,bodyA.angle-=torque),bodyB&&!bodyB.isStatic&&(share=bodyB.inverseMass/massTotal,bodyB.constraintImpulse.x+=force.x*share,bodyB.constraintImpulse.y+=force.y*share,bodyB.position.x+=force.x*share,bodyB.position.y+=force.y*share,constraint.damping&&(bodyB.positionPrev.x+=constraint.damping*normal.x*normalVelocity*share,bodyB.positionPrev.y+=constraint.damping*normal.y*normalVelocity*share),torque=Vector.cross(pointB,force)/resistanceTotal*Constraint._torqueDampen*bodyB.inverseInertia*(1-constraint.angularStiffness),bodyB.constraintImpulse.angle+=torque,bodyB.angle+=torque)}}},Constraint.postSolveAll=function(bodies){for(var i=0;i<bodies.length;i++){var body=bodies[i],impulse=body.constraintImpulse;if(!(body.isStatic||0===impulse.x&&0===impulse.y&&0===impulse.angle)){Sleeping.set(body,!1);for(var j=0;j<body.parts.length;j++){var part=body.parts[j];Vertices.translate(part.vertices,impulse),j>0&&(part.position.x+=impulse.x,part.position.y+=impulse.y),0!==impulse.angle&&(Vertices.rotate(part.vertices,impulse.angle,body.position),Axes.rotate(part.axes,impulse.angle),j>0&&Vector.rotateAbout(part.position,impulse.angle,body.position,part.position)),Bounds.update(part.bounds,part.vertices,body.velocity)}impulse.angle*=Constraint._warming,impulse.x*=Constraint._warming,impulse.y*=Constraint._warming}}}},function(module,exports){module.exports={DEFAULT:0,LINEAR:0,NEAREST:1}},function(module,exports,__webpack_require__){var Clamp=__webpack_require__(25);module.exports=function(percent,min,max){return(max-min)*(percent=Clamp(percent,0,1))}},function(module,exports){module.exports=function(source,key,defaultValue){return source&&source.hasOwnProperty(key)?source[key]:defaultValue}},function(module,exports){module.exports={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Events=__webpack_require__(287),DataManager=new Class({initialize:function(parent,eventEmitter){this.parent=parent,this.events=eventEmitter,eventEmitter||(this.events=parent.events?parent.events:parent),this.list={},this.values={},this._frozen=!1,!parent.hasOwnProperty("sys")&&this.events&&this.events.once("destroy",this.destroy,this)},get:function(key){var list=this.list;if(Array.isArray(key)){for(var output=[],i=0;i<key.length;i++)output.push(list[key[i]]);return output}return list[key]},getAll:function(){var results={};for(var key in this.list)this.list.hasOwnProperty(key)&&(results[key]=this.list[key]);return results},query:function(search){var results={};for(var key in this.list)this.list.hasOwnProperty(key)&&key.match(search)&&(results[key]=this.list[key]);return results},set:function(key,data){if(this._frozen)return this;if("string"==typeof key)return this.setValue(key,data);for(var entry in key)this.setValue(entry,key[entry]);return this},setValue:function(key,data){if(this._frozen)return this;if(this.has(key))this.values[key]=data;else{var _this=this,list=this.list,events=this.events,parent=this.parent;Object.defineProperty(this.values,key,{enumerable:!0,configurable:!0,get:function(){return list[key]},set:function(value){if(!_this._frozen){var previousValue=list[key];list[key]=value,events.emit(Events.CHANGE_DATA,parent,key,value,previousValue),events.emit(Events.CHANGE_DATA_KEY+key,parent,value,previousValue)}}}),list[key]=data,events.emit(Events.SET_DATA,parent,key,data)}return this},each:function(callback,context){for(var args=[this.parent,null,void 0],i=1;i<arguments.length;i++)args.push(arguments[i]);for(var key in this.list)args[1]=key,args[2]=this.list[key],callback.apply(context,args);return this},merge:function(data,overwrite){for(var key in void 0===overwrite&&(overwrite=!0),data)data.hasOwnProperty(key)&&(overwrite||!overwrite&&!this.has(key))&&this.setValue(key,data[key]);return this},remove:function(key){if(this._frozen)return this;if(!Array.isArray(key))return this.removeValue(key);for(var i=0;i<key.length;i++)this.removeValue(key[i]);return this},removeValue:function(key){if(this.has(key)){var data=this.list[key];delete this.list[key],delete this.values[key],this.events.emit(Events.REMOVE_DATA,this.parent,key,data)}return this},pop:function(key){var data=void 0;return!this._frozen&&this.has(key)&&(data=this.list[key],delete this.list[key],delete this.values[key],this.events.emit(Events.REMOVE_DATA,this.parent,key,data)),data},has:function(key){return this.list.hasOwnProperty(key)},setFreeze:function(value){return this._frozen=value,this},reset:function(){for(var key in this.list)delete this.list[key],delete this.values[key];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(Events.CHANGE_DATA),this.events.off(Events.SET_DATA),this.events.off(Events.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(value){this._frozen=!!value}},count:{get:function(){var i=0;for(var key in this.list)void 0!==this.list[key]&&i++;return i}}});module.exports=DataManager},function(module,exports,__webpack_require__){module.exports={ENTER_FULLSCREEN:__webpack_require__(700),FULLSCREEN_FAILED:__webpack_require__(701),FULLSCREEN_UNSUPPORTED:__webpack_require__(702),LEAVE_FULLSCREEN:__webpack_require__(703),ORIENTATION_CHANGE:__webpack_require__(704),RESIZE:__webpack_require__(705)}},function(module,exports){module.exports=function(value,gap,start,divide){return void 0===start&&(start=0),0===gap?value:(value-=start,value=gap*Math.floor(value/gap),divide?(start+value)/gap:start+value)}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Clamp=__webpack_require__(25),Extend=__webpack_require__(17),Frame=new Class({initialize:function(texture,name,sourceIndex,x,y,width,height){this.texture=texture,this.name=name,this.source=texture.source[sourceIndex],this.sourceIndex=sourceIndex,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(width,height,x,y)},setSize:function(width,height,x,y){void 0===x&&(x=0),void 0===y&&(y=0),this.cutX=x,this.cutY=y,this.cutWidth=width,this.cutHeight=height,this.width=width,this.height=height,this.halfWidth=Math.floor(.5*width),this.halfHeight=Math.floor(.5*height),this.centerX=Math.floor(width/2),this.centerY=Math.floor(height/2);var data=this.data,cut=data.cut;cut.x=x,cut.y=y,cut.w=width,cut.h=height,cut.r=x+width,cut.b=y+height,data.sourceSize.w=width,data.sourceSize.h=height,data.spriteSourceSize.w=width,data.spriteSourceSize.h=height,data.radius=.5*Math.sqrt(width*width+height*height);var drawImage=data.drawImage;return drawImage.x=x,drawImage.y=y,drawImage.width=width,drawImage.height=height,this.updateUVs()},setTrim:function(actualWidth,actualHeight,destX,destY,destWidth,destHeight){var data=this.data,ss=data.spriteSourceSize;return data.trim=!0,data.sourceSize.w=actualWidth,data.sourceSize.h=actualHeight,ss.x=destX,ss.y=destY,ss.w=destWidth,ss.h=destHeight,ss.r=destX+destWidth,ss.b=destY+destHeight,this.x=destX,this.y=destY,this.width=destWidth,this.height=destHeight,this.halfWidth=.5*destWidth,this.halfHeight=.5*destHeight,this.centerX=Math.floor(destWidth/2),this.centerY=Math.floor(destHeight/2),this.updateUVs()},setCropUVs:function(crop,x,y,width,height,flipX,flipY){var cx=this.cutX,cy=this.cutY,cw=this.cutWidth,ch=this.cutHeight,rw=this.realWidth,rh=this.realHeight,ox=cx+(x=Clamp(x,0,rw)),oy=cy+(y=Clamp(y,0,rh)),ow=width=Clamp(width,0,rw-x),oh=height=Clamp(height,0,rh-y),data=this.data;if(data.trim){var ss=data.spriteSourceSize,cropRight=x+(width=Clamp(width,0,cw-x)),cropBottom=y+(height=Clamp(height,0,ch-y));if(!(ss.r<x||ss.b<y||ss.x>cropRight||ss.y>cropBottom)){var ix=Math.max(ss.x,x),iy=Math.max(ss.y,y),iw=Math.min(ss.r,cropRight)-ix,ih=Math.min(ss.b,cropBottom)-iy;ow=iw,oh=ih,ox=flipX?cx+(cw-(ix-ss.x)-iw):cx+(ix-ss.x),oy=flipY?cy+(ch-(iy-ss.y)-ih):cy+(iy-ss.y),x=ix,y=iy,width=iw,height=ih}else ox=0,oy=0,ow=0,oh=0}else flipX&&(ox=cx+(cw-x-width)),flipY&&(oy=cy+(ch-y-height));var tw=this.source.width,th=this.source.height;return crop.u0=Math.max(0,ox/tw),crop.v0=Math.max(0,oy/th),crop.u1=Math.min(1,(ox+ow)/tw),crop.v1=Math.min(1,(oy+oh)/th),crop.x=x,crop.y=y,crop.cx=ox,crop.cy=oy,crop.cw=ow,crop.ch=oh,crop.width=width,crop.height=height,crop.flipX=flipX,crop.flipY=flipY,crop},updateCropUVs:function(crop,flipX,flipY){return this.setCropUVs(crop,crop.x,crop.y,crop.width,crop.height,flipX,flipY)},updateUVs:function(){var cx=this.cutX,cy=this.cutY,cw=this.cutWidth,ch=this.cutHeight,cd=this.data.drawImage;cd.width=cw,cd.height=ch;var tw=this.source.width,th=this.source.height;return this.u0=cx/tw,this.v0=cy/th,this.u1=(cx+cw)/tw,this.v1=(cy+ch)/th,this},updateUVsInverted:function(){var tw=this.source.width,th=this.source.height;return this.u0=(this.cutX+this.cutHeight)/tw,this.v0=this.cutY/th,this.u1=this.cutX/tw,this.v1=(this.cutY+this.cutWidth)/th,this},clone:function(){var clone=new Frame(this.texture,this.name,this.sourceIndex);return clone.cutX=this.cutX,clone.cutY=this.cutY,clone.cutWidth=this.cutWidth,clone.cutHeight=this.cutHeight,clone.x=this.x,clone.y=this.y,clone.width=this.width,clone.height=this.height,clone.halfWidth=this.halfWidth,clone.halfHeight=this.halfHeight,clone.centerX=this.centerX,clone.centerY=this.centerY,clone.rotated=this.rotated,clone.data=Extend(!0,clone.data,this.data),clone.updateUVs(),clone},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});module.exports=Frame},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Contains=__webpack_require__(108),GetPoint=__webpack_require__(403),GetPoints=__webpack_require__(404),GEOM_CONST=__webpack_require__(53),Random=__webpack_require__(169),Ellipse=new Class({initialize:function(x,y,width,height){void 0===x&&(x=0),void 0===y&&(y=0),void 0===width&&(width=0),void 0===height&&(height=0),this.type=GEOM_CONST.ELLIPSE,this.x=x,this.y=y,this.width=width,this.height=height},contains:function(x,y){return Contains(this,x,y)},getPoint:function(position,point){return GetPoint(this,position,point)},getPoints:function(quantity,stepRate,output){return GetPoints(this,quantity,stepRate,output)},getRandomPoint:function(point){return Random(this,point)},setTo:function(x,y,width,height){return this.x=x,this.y=y,this.width=width,this.height=height,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(x,y){return void 0===y&&(y=x),this.x=x,this.y=y,this},setSize:function(width,height){return void 0===height&&(height=width),this.width=width,this.height=height,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(value){this.x=value+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(value){this.x=value-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(value){this.y=value+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(value){this.y=value-this.height/2}}});module.exports=Ellipse},function(module,exports){module.exports=function(ellipse,x,y){if(ellipse.width<=0||ellipse.height<=0)return!1;var normx=(x-ellipse.x)/ellipse.width,normy=(y-ellipse.y)/ellipse.height;return(normx*=normx)+(normy*=normy)<.25}},function(module,exports,__webpack_require__){var Actions=__webpack_require__(256),Class=__webpack_require__(0),Events=__webpack_require__(122),GetFastValue=__webpack_require__(1),GetValue=__webpack_require__(5),IsPlainObject=__webpack_require__(7),Range=__webpack_require__(398),Set=__webpack_require__(90),Sprite=__webpack_require__(57),Group=new Class({initialize:function(scene,children,config){config?children&&!Array.isArray(children)&&(children=[children]):Array.isArray(children)?IsPlainObject(children[0])&&(config=children,children=null):IsPlainObject(children)&&(config=children,children=null),this.scene=scene,this.children=new Set(children),this.isParent=!0,this.classType=GetFastValue(config,"classType",Sprite),this.name=GetFastValue(config,"name",""),this.active=GetFastValue(config,"active",!0),this.maxSize=GetFastValue(config,"maxSize",-1),this.defaultKey=GetFastValue(config,"defaultKey",null),this.defaultFrame=GetFastValue(config,"defaultFrame",null),this.runChildUpdate=GetFastValue(config,"runChildUpdate",!1),this.createCallback=GetFastValue(config,"createCallback",null),this.removeCallback=GetFastValue(config,"removeCallback",null),this.createMultipleCallback=GetFastValue(config,"createMultipleCallback",null),config&&this.createMultiple(config)},create:function(x,y,key,frame,visible,active){if(void 0===x&&(x=0),void 0===y&&(y=0),void 0===key&&(key=this.defaultKey),void 0===frame&&(frame=this.defaultFrame),void 0===visible&&(visible=!0),void 0===active&&(active=!0),this.isFull())return null;var child=new this.classType(this.scene,x,y,key,frame);return this.scene.sys.displayList.add(child),child.preUpdate&&this.scene.sys.updateList.add(child),child.visible=visible,child.setActive(active),this.add(child),child},createMultiple:function(config){if(this.isFull())return[];Array.isArray(config)||(config=[config]);var output=[];if(config[0].key)for(var i=0;i<config.length;i++){var entries=this.createFromConfig(config[i]);output=output.concat(entries)}return output},createFromConfig:function(options){if(this.isFull())return[];this.classType=GetFastValue(options,"classType",this.classType);var key=GetFastValue(options,"key",void 0),frame=GetFastValue(options,"frame",null),visible=GetFastValue(options,"visible",!0),active=GetFastValue(options,"active",!0),entries=[];if(void 0===key)return entries;Array.isArray(key)||(key=[key]),Array.isArray(frame)||(frame=[frame]);var repeat=GetFastValue(options,"repeat",0),randomKey=GetFastValue(options,"randomKey",!1),randomFrame=GetFastValue(options,"randomFrame",!1),yoyo=GetFastValue(options,"yoyo",!1),quantity=GetFastValue(options,"quantity",!1),frameQuantity=GetFastValue(options,"frameQuantity",1),max=GetFastValue(options,"max",0),range=Range(key,frame,{max:max,qty:quantity||frameQuantity,random:randomKey,randomB:randomFrame,repeat:repeat,yoyo:yoyo});options.createCallback&&(this.createCallback=options.createCallback),options.removeCallback&&(this.removeCallback=options.removeCallback);for(var c=0;c<range.length;c++){var created=this.create(0,0,range[c].a,range[c].b,visible,active);if(!created)break;entries.push(created)}var x=GetValue(options,"setXY.x",0),y=GetValue(options,"setXY.y",0),stepX=GetValue(options,"setXY.stepX",0),stepY=GetValue(options,"setXY.stepY",0);Actions.SetXY(entries,x,y,stepX,stepY);var rotation=GetValue(options,"setRotation.value",0),stepRotation=GetValue(options,"setRotation.step",0);Actions.SetRotation(entries,rotation,stepRotation);var scaleX=GetValue(options,"setScale.x",1),scaleY=GetValue(options,"setScale.y",scaleX),stepScaleX=GetValue(options,"setScale.stepX",0),stepScaleY=GetValue(options,"setScale.stepY",0);Actions.SetScale(entries,scaleX,scaleY,stepScaleX,stepScaleY);var alpha=GetValue(options,"setAlpha.value",1),stepAlpha=GetValue(options,"setAlpha.step",0);Actions.SetAlpha(entries,alpha,stepAlpha);var hitArea=GetFastValue(options,"hitArea",null),hitAreaCallback=GetFastValue(options,"hitAreaCallback",null);hitArea&&Actions.SetHitArea(entries,hitArea,hitAreaCallback);var grid=GetFastValue(options,"gridAlign",!1);return grid&&Actions.GridAlign(entries,grid),this.createMultipleCallback&&this.createMultipleCallback.call(this,entries),entries},preUpdate:function(time,delta){if(this.runChildUpdate&&0!==this.children.size)for(var temp=this.children.entries.slice(),i=0;i<temp.length;i++){var item=temp[i];item.active&&item.update(time,delta)}},add:function(child,addToScene){return void 0===addToScene&&(addToScene=!1),this.isFull()?this:(this.children.set(child),this.createCallback&&this.createCallback.call(this,child),addToScene&&(this.scene.sys.displayList.add(child),child.preUpdate&&this.scene.sys.updateList.add(child)),child.on(Events.DESTROY,this.remove,this),this)},addMultiple:function(children,addToScene){if(void 0===addToScene&&(addToScene=!1),Array.isArray(children))for(var i=0;i<children.length;i++)this.add(children[i],addToScene);return this},remove:function(child,removeFromScene,destroyChild){return void 0===removeFromScene&&(removeFromScene=!1),void 0===destroyChild&&(destroyChild=!1),this.children.contains(child)?(this.children.delete(child),this.removeCallback&&this.removeCallback.call(this,child),child.off(Events.DESTROY,this.remove,this),destroyChild?child.destroy():removeFromScene&&(child.scene.sys.displayList.remove(child),child.preUpdate&&child.scene.sys.updateList.remove(child)),this):this},clear:function(removeFromScene,destroyChild){void 0===removeFromScene&&(removeFromScene=!1),void 0===destroyChild&&(destroyChild=!1);for(var children=this.children,i=0;i<children.size;i++){var gameObject=children.entries[i];gameObject.off(Events.DESTROY,this.remove,this),destroyChild?gameObject.destroy():removeFromScene&&(gameObject.scene.sys.displayList.remove(gameObject),gameObject.preUpdate&&gameObject.scene.sys.updateList.remove(gameObject))}return this.children.clear(),this},contains:function(child){return this.children.contains(child)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getFirst:function(state,createIfNull,x,y,key,frame,visible){return this.getHandler(!0,1,state,createIfNull,x,y,key,frame,visible)},getFirstNth:function(nth,state,createIfNull,x,y,key,frame,visible){return this.getHandler(!0,nth,state,createIfNull,x,y,key,frame,visible)},getLast:function(state,createIfNull,x,y,key,frame,visible){return this.getHandler(!1,1,state,createIfNull,x,y,key,frame,visible)},getLastNth:function(nth,state,createIfNull,x,y,key,frame,visible){return this.getHandler(!1,nth,state,createIfNull,x,y,key,frame,visible)},getHandler:function(forwards,nth,state,createIfNull,x,y,key,frame,visible){var gameObject,i;void 0===state&&(state=!1),void 0===createIfNull&&(createIfNull=!1);var total=0,children=this.children.entries;if(forwards)for(i=0;i<children.length;i++)if((gameObject=children[i]).active===state){if(++total===nth)break}else gameObject=null;else for(i=children.length-1;i>=0;i--)if((gameObject=children[i]).active===state){if(++total===nth)break}else gameObject=null;return gameObject?("number"==typeof x&&(gameObject.x=x),"number"==typeof y&&(gameObject.y=y),gameObject):createIfNull?this.create(x,y,key,frame,visible):null},get:function(x,y,key,frame,visible){return this.getFirst(!1,!0,x,y,key,frame,visible)},getFirstAlive:function(createIfNull,x,y,key,frame,visible){return this.getFirst(!0,createIfNull,x,y,key,frame,visible)},getFirstDead:function(createIfNull,x,y,key,frame,visible){return this.getFirst(!1,createIfNull,x,y,key,frame,visible)},playAnimation:function(key,startFrame){return Actions.PlayAnimation(this.children.entries,key,startFrame),this},isFull:function(){return-1!==this.maxSize&&this.children.size>=this.maxSize},countActive:function(value){void 0===value&&(value=!0);for(var total=0,i=0;i<this.children.size;i++)this.children.entries[i].active===value&&total++;return total},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var used=this.getTotalUsed();return(-1===this.maxSize?999999999999:this.maxSize)-used},setDepth:function(value,step){return Actions.SetDepth(this.children.entries,value,step),this},kill:function(gameObject){this.children.contains(gameObject)&&gameObject.setActive(!1)},killAndHide:function(gameObject){this.children.contains(gameObject)&&(gameObject.setActive(!1),gameObject.setVisible(!1))},toggleVisible:function(){return Actions.ToggleVisible(this.children.entries),this},destroy:function(destroyChildren){void 0===destroyChildren&&(destroyChildren=!1),this.scene&&!this.ignoreDestroy&&(this.clear(!1,destroyChildren),this.scene=void 0,this.children=void 0)}});module.exports=Group},function(module,exports,__webpack_require__){var Utils=__webpack_require__(10);module.exports=function(pipeline,calcMatrix,src,alpha,dx,dy){for(var fillTintColor=Utils.getTintAppendFloatAlphaAndSwap(src.fillColor,src.fillAlpha*alpha),path=src.pathData,pathIndexes=src.pathIndexes,i=0;i<pathIndexes.length;i+=3){var p0=2*pathIndexes[i],p1=2*pathIndexes[i+1],p2=2*pathIndexes[i+2],x0=path[p0+0]-dx,y0=path[p0+1]-dy,x1=path[p1+0]-dx,y1=path[p1+1]-dy,x2=path[p2+0]-dx,y2=path[p2+1]-dy,tx0=calcMatrix.getX(x0,y0),ty0=calcMatrix.getY(x0,y0),tx1=calcMatrix.getX(x1,y1),ty1=calcMatrix.getY(x1,y1),tx2=calcMatrix.getX(x2,y2),ty2=calcMatrix.getY(x2,y2);pipeline.setTexture2D(),pipeline.batchTri(tx0,ty0,tx1,ty1,tx2,ty2,0,0,1,1,fillTintColor,fillTintColor,fillTintColor,pipeline.tintEffect)}}},function(module,exports){module.exports={NEVER:0,LITE:1,PASSIVE:2,ACTIVE:4,FIXED:8}},function(module,exports){module.exports={NONE:0,A:1,B:2,BOTH:3}},function(module,exports,__webpack_require__){var Sleeping={};module.exports=Sleeping;var Events=__webpack_require__(97);Sleeping._motionWakeThreshold=.18,Sleeping._motionSleepThreshold=.08,Sleeping._minBias=.9,Sleeping.update=function(bodies,timeScale){for(var timeFactor=timeScale*timeScale*timeScale,i=0;i<bodies.length;i++){var body=bodies[i],motion=body.speed*body.speed+body.angularSpeed*body.angularSpeed;if(0===body.force.x&&0===body.force.y){var minMotion=Math.min(body.motion,motion),maxMotion=Math.max(body.motion,motion);body.motion=Sleeping._minBias*minMotion+(1-Sleeping._minBias)*maxMotion,body.sleepThreshold>0&&body.motion<Sleeping._motionSleepThreshold*timeFactor?(body.sleepCounter+=1,body.sleepCounter>=body.sleepThreshold&&Sleeping.set(body,!0)):body.sleepCounter>0&&(body.sleepCounter-=1)}else Sleeping.set(body,!1)}},Sleeping.afterCollisions=function(pairs,timeScale){for(var timeFactor=timeScale*timeScale*timeScale,i=0;i<pairs.length;i++){var pair=pairs[i];if(pair.isActive){var collision=pair.collision,bodyA=collision.bodyA.parent,bodyB=collision.bodyB.parent;if(!(bodyA.isSleeping&&bodyB.isSleeping||bodyA.isStatic||bodyB.isStatic)&&(bodyA.isSleeping||bodyB.isSleeping)){var sleepingBody=bodyA.isSleeping&&!bodyA.isStatic?bodyA:bodyB,movingBody=sleepingBody===bodyA?bodyB:bodyA;!sleepingBody.isStatic&&movingBody.motion>Sleeping._motionWakeThreshold*timeFactor&&Sleeping.set(sleepingBody,!1)}}}},Sleeping.set=function(body,isSleeping){var wasSleeping=body.isSleeping;isSleeping?(body.isSleeping=!0,body.sleepCounter=body.sleepThreshold,body.positionImpulse.x=0,body.positionImpulse.y=0,body.positionPrev.x=body.position.x,body.positionPrev.y=body.position.y,body.anglePrev=body.angle,body.speed=0,body.angularSpeed=0,body.motion=0,wasSleeping||Events.trigger(body,"sleepStart")):(body.isSleeping=!1,body.sleepCounter=0,wasSleeping&&Events.trigger(body,"sleepEnd"))}},function(module,exports){module.exports=function(tileX,tileY,layer){return tileX>=0&&tileX<layer.width&&tileY>=0&&tileY<layer.height}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),GetFastValue=__webpack_require__(1),LayerData=new Class({initialize:function(config){void 0===config&&(config={}),this.name=GetFastValue(config,"name","layer"),this.x=GetFastValue(config,"x",0),this.y=GetFastValue(config,"y",0),this.width=GetFastValue(config,"width",0),this.height=GetFastValue(config,"height",0),this.tileWidth=GetFastValue(config,"tileWidth",0),this.tileHeight=GetFastValue(config,"tileHeight",0),this.baseTileWidth=GetFastValue(config,"baseTileWidth",this.tileWidth),this.baseTileHeight=GetFastValue(config,"baseTileHeight",this.tileHeight),this.widthInPixels=GetFastValue(config,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=GetFastValue(config,"heightInPixels",this.height*this.baseTileHeight),this.alpha=GetFastValue(config,"alpha",1),this.visible=GetFastValue(config,"visible",!0),this.properties=GetFastValue(config,"properties",{}),this.indexes=GetFastValue(config,"indexes",[]),this.collideIndexes=GetFastValue(config,"collideIndexes",[]),this.callbacks=GetFastValue(config,"callbacks",[]),this.bodies=GetFastValue(config,"bodies",[]),this.data=GetFastValue(config,"data",[]),this.tilemapLayer=GetFastValue(config,"tilemapLayer",null)}});module.exports=LayerData},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),GetFastValue=__webpack_require__(1),MapData=new Class({initialize:function(config){void 0===config&&(config={}),this.name=GetFastValue(config,"name","map"),this.width=GetFastValue(config,"width",0),this.height=GetFastValue(config,"height",0),this.infinite=GetFastValue(config,"infinite",!1),this.tileWidth=GetFastValue(config,"tileWidth",0),this.tileHeight=GetFastValue(config,"tileHeight",0),this.widthInPixels=GetFastValue(config,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=GetFastValue(config,"heightInPixels",this.height*this.tileHeight),this.format=GetFastValue(config,"format",null),this.orientation=GetFastValue(config,"orientation","orthogonal"),this.renderOrder=GetFastValue(config,"renderOrder","right-down"),this.version=GetFastValue(config,"version","1"),this.properties=GetFastValue(config,"properties",{}),this.layers=GetFastValue(config,"layers",[]),this.images=GetFastValue(config,"images",[]),this.objects=GetFastValue(config,"objects",{}),this.collision=GetFastValue(config,"collision",{}),this.tilesets=GetFastValue(config,"tilesets",[]),this.imageCollections=GetFastValue(config,"imageCollections",[]),this.tiles=GetFastValue(config,"tiles",[])}});module.exports=MapData},function(module,exports,__webpack_require__){(function(global){__webpack_require__(533);var CONST=__webpack_require__(35),Extend=__webpack_require__(17),Phaser={Actions:__webpack_require__(256),Animations:__webpack_require__(638),BlendModes:__webpack_require__(43),Cache:__webpack_require__(639),Cameras:__webpack_require__(642),Core:__webpack_require__(725),Class:__webpack_require__(0),Create:__webpack_require__(780),Curves:__webpack_require__(786),Data:__webpack_require__(789),Display:__webpack_require__(791),DOM:__webpack_require__(820),Events:__webpack_require__(821),Game:__webpack_require__(823),GameObjects:__webpack_require__(921),Geom:__webpack_require__(436),Input:__webpack_require__(1195),Loader:__webpack_require__(1229),Math:__webpack_require__(182),Physics:__webpack_require__(1254),Plugins:__webpack_require__(1342),Renderer:__webpack_require__(1344),Scale:__webpack_require__(1349),ScaleModes:__webpack_require__(99),Scene:__webpack_require__(381),Scenes:__webpack_require__(1350),Structs:__webpack_require__(1352),Textures:__webpack_require__(1353),Tilemaps:__webpack_require__(1355),Time:__webpack_require__(1396),Tweens:__webpack_require__(1398),Utils:__webpack_require__(1416)};Phaser.Sound=__webpack_require__(1426),Phaser.Cameras.Sprite3D=__webpack_require__(1427),Phaser.GameObjects.Sprite3D=__webpack_require__(157),Phaser.GameObjects.Factories.Sprite3D=__webpack_require__(1429),Phaser.GameObjects.Creators.Sprite3D=__webpack_require__(1430),Phaser.FacebookInstantGamesPlugin=__webpack_require__(395),Phaser=Extend(!1,Phaser,CONST),module.exports=Phaser,global.Phaser=Phaser}).call(this,__webpack_require__(158))},function(module,exports,__webpack_require__){var BlendModes=__webpack_require__(43),Circle=__webpack_require__(84),CircleContains=__webpack_require__(52),Class=__webpack_require__(0),Components=__webpack_require__(12),GameObject=__webpack_require__(13),Rectangle=__webpack_require__(11),RectangleContains=__webpack_require__(54),Zone=new Class({Extends:GameObject,Mixins:[Components.Depth,Components.GetBounds,Components.Origin,Components.Transform,Components.ScrollFactor,Components.Visible],initialize:function(scene,x,y,width,height){void 0===width&&(width=1),void 0===height&&(height=width),GameObject.call(this,scene,"Zone"),this.setPosition(x,y),this.width=width,this.height=height,this.blendMode=BlendModes.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(value){this.scaleX=value/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(value){this.scaleY=value/this.height}},setSize:function(width,height,resizeInput){void 0===resizeInput&&(resizeInput=!0),this.width=width,this.height=height,this.updateDisplayOrigin();var input=this.input;return resizeInput&&input&&!input.customHitArea&&(input.hitArea.width=width,input.hitArea.height=height),this},setDisplaySize:function(width,height){return this.displayWidth=width,this.displayHeight=height,this},setCircleDropZone:function(radius){return this.setDropZone(new Circle(0,0,radius),CircleContains)},setRectangleDropZone:function(width,height){return this.setDropZone(new Rectangle(0,0,width,height),RectangleContains)},setDropZone:function(shape,callback){return void 0===shape?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(shape,callback,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(){},renderWebGL:function(){}});module.exports=Zone},function(module,exports,__webpack_require__){module.exports={ADD_ANIMATION:__webpack_require__(547),ANIMATION_COMPLETE:__webpack_require__(548),ANIMATION_REPEAT:__webpack_require__(549),ANIMATION_RESTART:__webpack_require__(550),ANIMATION_START:__webpack_require__(551),PAUSE_ALL:__webpack_require__(552),REMOVE_ANIMATION:__webpack_require__(553),RESUME_ALL:__webpack_require__(554),SPRITE_ANIMATION_COMPLETE:__webpack_require__(555),SPRITE_ANIMATION_KEY_COMPLETE:__webpack_require__(556),SPRITE_ANIMATION_KEY_REPEAT:__webpack_require__(557),SPRITE_ANIMATION_KEY_RESTART:__webpack_require__(558),SPRITE_ANIMATION_KEY_START:__webpack_require__(559),SPRITE_ANIMATION_KEY_UPDATE:__webpack_require__(560),SPRITE_ANIMATION_REPEAT:__webpack_require__(561),SPRITE_ANIMATION_RESTART:__webpack_require__(562),SPRITE_ANIMATION_START:__webpack_require__(563),SPRITE_ANIMATION_UPDATE:__webpack_require__(564)}},function(module,exports){module.exports=function(rect){return 2*(rect.width+rect.height)}},function(module,exports){var Pipeline={defaultPipeline:null,pipeline:null,initPipeline:function(pipelineName){void 0===pipelineName&&(pipelineName="TextureTintPipeline");var renderer=this.scene.sys.game.renderer;return!!(renderer&&renderer.gl&&renderer.hasPipeline(pipelineName))&&(this.defaultPipeline=renderer.getPipeline(pipelineName),this.pipeline=this.defaultPipeline,!0)},setPipeline:function(pipelineName){var renderer=this.scene.sys.game.renderer;return renderer&&renderer.gl&&renderer.hasPipeline(pipelineName)&&(this.pipeline=renderer.getPipeline(pipelineName)),this},resetPipeline:function(){return this.pipeline=this.defaultPipeline,null!==this.pipeline},getPipelineName:function(){return this.pipeline.name}};module.exports=Pipeline},function(module,exports,__webpack_require__){module.exports={DESTROY:__webpack_require__(595)}},function(module,exports){module.exports=function(array){for(var i=array.length-1;i>0;i--){var j=Math.floor(Math.random()*(i+1)),temp=array[i];array[i]=array[j],array[j]=temp}return array}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Components=__webpack_require__(12),DegToRad=__webpack_require__(41),EventEmitter=__webpack_require__(9),Events=__webpack_require__(55),Rectangle=__webpack_require__(11),TransformMatrix=__webpack_require__(36),ValueToColor=__webpack_require__(176),Vector2=__webpack_require__(3),BaseCamera=new Class({Extends:EventEmitter,Mixins:[Components.Alpha,Components.Visible],initialize:function(x,y,width,height){void 0===x&&(x=0),void 0===y&&(y=0),void 0===width&&(width=0),void 0===height&&(height=0),EventEmitter.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.resolution=1,this.roundPixels=!1,this.useBounds=!1,this.worldView=new Rectangle,this.dirty=!0,this._x=x,this._y=y,this._cx=0,this._cy=0,this._cw=0,this._ch=0,this._width=width,this._height=height,this._bounds=new Rectangle,this._scrollX=0,this._scrollY=0,this._zoom=1,this._rotation=0,this.matrix=new TransformMatrix,this.transparent=!0,this.backgroundColor=ValueToColor("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new Vector2(width/2,height/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null},setOrigin:function(x,y){return void 0===x&&(x=.5),void 0===y&&(y=x),this.originX=x,this.originY=y,this},getScroll:function(x,y,out){void 0===out&&(out=new Vector2);var originX=.5*this.width,originY=.5*this.height;return out.x=x-originX,out.y=y-originY,this.useBounds&&(out.x=this.clampX(out.x),out.y=this.clampY(out.y)),out},centerOnX:function(x){var originX=.5*this.width;return this.midPoint.x=x,this.scrollX=x-originX,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(y){var originY=.5*this.height;return this.midPoint.y=y,this.scrollY=y-originY,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(x,y){return this.centerOnX(x),this.centerOnY(y),this},centerToBounds:function(){if(this.useBounds){var bounds=this._bounds,originX=.5*this.width,originY=.5*this.height;this.midPoint.set(bounds.centerX,bounds.centerY),this.scrollX=bounds.centerX-originX,this.scrollY=bounds.centerY-originY}return this},centerToSize:function(){return this.scrollX=.5*this.width,this.scrollY=.5*this.height,this},cull:function(renderableObjects){if(this.disableCull)return renderableObjects;var cameraMatrix=this.matrix.matrix,mva=cameraMatrix[0],mvb=cameraMatrix[1],mvc=cameraMatrix[2],mvd=cameraMatrix[3],determinant=mva*mvd-mvb*mvc;if(!determinant)return renderableObjects;var mve=cameraMatrix[4],mvf=cameraMatrix[5],scrollX=this.scrollX,scrollY=this.scrollY,cameraW=this.width,cameraH=this.height,culledObjects=this.culledObjects,length=renderableObjects.length;determinant=1/determinant,culledObjects.length=0;for(var index=0;index<length;++index){var object=renderableObjects[index];if(object.hasOwnProperty("width")&&!object.parentContainer){var objectW=object.width,objectH=object.height,objectX=object.x-scrollX*object.scrollFactorX-objectW*object.originX,objectY=object.y-scrollY*object.scrollFactorY-objectH*object.originY,tx=objectX*mva+objectY*mvc+mve,ty=objectX*mvb+objectY*mvd+mvf,tw=(objectX+objectW)*mva+(objectY+objectH)*mvc+mve,th=(objectX+objectW)*mvb+(objectY+objectH)*mvd+mvf,cullTop=this.y,cullBottom=cullTop+cameraH,cullLeft=this.x;tw>cullLeft&&tx<cullLeft+cameraW&&th>cullTop&&ty<cullBottom&&culledObjects.push(object)}else culledObjects.push(object)}return culledObjects},getWorldPoint:function(x,y,output){void 0===output&&(output=new Vector2);var cameraMatrix=this.matrix.matrix,mva=cameraMatrix[0],mvb=cameraMatrix[1],mvc=cameraMatrix[2],mvd=cameraMatrix[3],mve=cameraMatrix[4],mvf=cameraMatrix[5],determinant=mva*mvd-mvb*mvc;if(!determinant)return output.x=x,output.y=y,output;var ima=mvd*(determinant=1/determinant),imb=-mvb*determinant,imc=-mvc*determinant,imd=mva*determinant,ime=(mvc*mvf-mvd*mve)*determinant,imf=(mvb*mve-mva*mvf)*determinant,c=Math.cos(this.rotation),s=Math.sin(this.rotation),zoom=this.zoom,res=this.resolution,scrollX=this.scrollX,scrollY=this.scrollY,sx=x+(scrollX*c-scrollY*s)*zoom,sy=y+(scrollX*s+scrollY*c)*zoom;return output.x=(sx*ima+sy*imc)*res+ime,output.y=(sx*imb+sy*imd)*res+imf,output},ignore:function(entries){var id=this.id;Array.isArray(entries)||(entries=[entries]);for(var i=0;i<entries.length;i++){var entry=entries[i];Array.isArray(entry)?this.ignore(entry):entry.isParent?this.ignore(entry.getChildren()):entry.cameraFilter|=id}return this},preRender:function(resolution){var width=this.width,height=this.height,halfWidth=.5*width,halfHeight=.5*height,zoom=this.zoom*resolution,matrix=this.matrix,originX=width*this.originX,originY=height*this.originY,sx=this.scrollX,sy=this.scrollY;this.useBounds&&(sx=this.clampX(sx),sy=this.clampY(sy)),this.roundPixels&&(originX=Math.round(originX),originY=Math.round(originY)),this.scrollX=sx,this.scrollY=sy;var midX=sx+halfWidth,midY=sy+halfHeight;this.midPoint.set(midX,midY);var displayWidth=width/zoom,displayHeight=height/zoom;this.worldView.setTo(midX-displayWidth/2,midY-displayHeight/2,displayWidth,displayHeight),matrix.applyITRS(this.x+originX,this.y+originY,this.rotation,zoom,zoom),matrix.translate(-originX,-originY)},clampX:function(x){var bounds=this._bounds,dw=this.displayWidth,bx=bounds.x+(dw-this.width)/2,bw=Math.max(bx,bx+bounds.width-dw);return x<bx?x=bx:x>bw&&(x=bw),x},clampY:function(y){var bounds=this._bounds,dh=this.displayHeight,by=bounds.y+(dh-this.height)/2,bh=Math.max(by,by+bounds.height-dh);return y<by?y=by:y>bh&&(y=bh),y},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(value){return void 0===value&&(value=0),this.rotation=DegToRad(value),this},setBackgroundColor:function(color){return void 0===color&&(color="rgba(0,0,0,0)"),this.backgroundColor=ValueToColor(color),this.transparent=0===this.backgroundColor.alpha,this},setBounds:function(x,y,width,height,centerOn){return void 0===centerOn&&(centerOn=!1),this._bounds.setTo(x,y,width,height),this.dirty=!0,this.useBounds=!0,centerOn?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(out){void 0===out&&(out=new Rectangle);var source=this._bounds;return out.setTo(source.x,source.y,source.width,source.height),out},setName:function(value){return void 0===value&&(value=""),this.name=value,this},setPosition:function(x,y){return void 0===y&&(y=x),this.x=x,this.y=y,this},setRotation:function(value){return void 0===value&&(value=0),this.rotation=value,this},setRoundPixels:function(value){return this.roundPixels=value,this},setScene:function(scene){this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=scene;var sys=scene.sys;this.sceneManager=sys.game.scene,this.scaleManager=sys.scale,this.cameraManager=sys.cameras;var res=this.scaleManager.resolution;return this.resolution=res,this._cx=this._x*res,this._cy=this._y*res,this._cw=this._width*res,this._ch=this._height*res,this.updateSystem(),this},setScroll:function(x,y){return void 0===y&&(y=x),this.scrollX=x,this.scrollY=y,this},setSize:function(width,height){return void 0===height&&(height=width),this.width=width,this.height=height,this},setViewport:function(x,y,width,height){return this.x=x,this.y=y,this.width=width,this.height=height,this},setZoom:function(value){return void 0===value&&(value=1),0===value&&(value=.001),this.zoom=value,this},setMask:function(mask,fixedPosition){return void 0===fixedPosition&&(fixedPosition=!0),this.mask=mask,this._maskCamera=fixedPosition?this.cameraManager.default:this,this},clearMask:function(destroyMask){return void 0===destroyMask&&(destroyMask=!1),destroyMask&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var output={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(output.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),output},update:function(){},updateSystem:function(){if(this.scaleManager){var custom=0!==this._x||0!==this._y||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,sceneManager=this.sceneManager;custom&&!this._customViewport?sceneManager.customViewports++:!custom&&this._customViewport&&sceneManager.customViewports--,this.dirty=!0,this._customViewport=custom}},destroy:function(){this.emit(Events.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(value){this._x=value,this._cx=value*this.resolution,this.updateSystem()}},y:{get:function(){return this._y},set:function(value){this._y=value,this._cy=value*this.resolution,this.updateSystem()}},width:{get:function(){return this._width},set:function(value){this._width=value,this._cw=value*this.resolution,this.updateSystem()}},height:{get:function(){return this._height},set:function(value){this._height=value,this._ch=value*this.resolution,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(value){this._scrollX=value,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(value){this._scrollY=value,this.dirty=!0}},zoom:{get:function(){return this._zoom},set:function(value){this._zoom=value,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(value){this._rotation=value,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoom}},displayHeight:{get:function(){return this.height/this.zoom}}});module.exports=BaseCamera},function(module,exports){var getPrefix,prefix="";module.exports={disable:function(context){return""===prefix&&(prefix=getPrefix(context)),prefix&&(context[prefix]=!1),context},enable:function(context){return""===prefix&&(prefix=getPrefix(context)),prefix&&(context[prefix]=!0),context},getPrefix:getPrefix=function(context){for(var vendors=["i","webkitI","msI","mozI","oI"],i=0;i<vendors.length;i++){var s=vendors[i]+"mageSmoothingEnabled";if(s in context)return s}return null},isEnabled:function(context){return null!==prefix?context[prefix]:null}}},function(module,exports){module.exports=function(p0,p1,t){return(p1-p0)*t+p0}},function(module,exports,__webpack_require__){(function(process){var OS={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};module.exports=function(){var ua=navigator.userAgent;/Windows/.test(ua)?OS.windows=!0:/Mac OS/.test(ua)&&!/like Mac OS/.test(ua)?OS.macOS=!0:/Android/.test(ua)?OS.android=!0:/Linux/.test(ua)?OS.linux=!0:/iP[ao]d|iPhone/i.test(ua)?(OS.iOS=!0,navigator.appVersion.match(/OS (\d+)/),OS.iOSVersion=parseInt(RegExp.$1,10),OS.iPhone=-1!==ua.toLowerCase().indexOf("iphone"),OS.iPad=-1!==ua.toLowerCase().indexOf("ipad")):/Kindle/.test(ua)||/\bKF[A-Z][A-Z]+/.test(ua)||/Silk.*Mobile Safari/.test(ua)?OS.kindle=!0:/CrOS/.test(ua)&&(OS.chromeOS=!0),(/Windows Phone/i.test(ua)||/IEMobile/i.test(ua))&&(OS.android=!1,OS.iOS=!1,OS.macOS=!1,OS.windows=!0,OS.windowsPhone=!0);var silk=/Silk/.test(ua);return(OS.windows||OS.macOS||OS.linux&&!silk||OS.chromeOS)&&(OS.desktop=!0),(OS.windowsPhone||/Windows NT/i.test(ua)&&/Touch/i.test(ua))&&(OS.desktop=!1),navigator.standalone&&(OS.webApp=!0),void 0!==window.cordova&&(OS.cordova=!0),void 0!==process&&process.versions&&process.versions.node&&(OS.node=!0),OS.node&&"object"==typeof process.versions&&(OS.nodeWebkit=!!process.versions["node-webkit"],OS.electron=!!process.versions.electron),void 0!==window.ejecta&&(OS.ejecta=!0),/Crosswalk/.test(ua)&&(OS.crosswalk=!0),OS.pixelRatio=window.devicePixelRatio||1,OS}()}).call(this,__webpack_require__(726))},function(module,exports,__webpack_require__){var ua,OS=__webpack_require__(127),Browser={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};module.exports=(ua=navigator.userAgent,/Edge\/\d+/.test(ua)?Browser.edge=!0:/Chrome\/(\d+)/.test(ua)&&!OS.windowsPhone?(Browser.chrome=!0,Browser.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(ua)?(Browser.firefox=!0,Browser.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(ua)&&OS.iOS?Browser.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(ua)?(Browser.ie=!0,Browser.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(ua)?Browser.opera=!0:/Safari/.test(ua)&&!OS.windowsPhone?Browser.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(ua)&&(Browser.ie=!0,Browser.trident=!0,Browser.tridentVersion=parseInt(RegExp.$1,10),Browser.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(ua)&&(Browser.silk=!0),Browser)},function(module,exports){module.exports=function(width,height){return width>0&&0==(width&width-1)&&height>0&&0==(height&height-1)}},function(module,exports,__webpack_require__){var Vector4=new(__webpack_require__(0))({initialize:function(x,y,z,w){this.x=0,this.y=0,this.z=0,this.w=0,"object"==typeof x?(this.x=x.x||0,this.y=x.y||0,this.z=x.z||0,this.w=x.w||0):(this.x=x||0,this.y=y||0,this.z=z||0,this.w=w||0)},clone:function(){return new Vector4(this.x,this.y,this.z,this.w)},copy:function(src){return this.x=src.x,this.y=src.y,this.z=src.z||0,this.w=src.w||0,this},equals:function(v){return this.x===v.x&&this.y===v.y&&this.z===v.z&&this.w===v.w},set:function(x,y,z,w){return"object"==typeof x?(this.x=x.x||0,this.y=x.y||0,this.z=x.z||0,this.w=x.w||0):(this.x=x||0,this.y=y||0,this.z=z||0,this.w=w||0),this},add:function(v){return this.x+=v.x,this.y+=v.y,this.z+=v.z||0,this.w+=v.w||0,this},subtract:function(v){return this.x-=v.x,this.y-=v.y,this.z-=v.z||0,this.w-=v.w||0,this},scale:function(scale){return this.x*=scale,this.y*=scale,this.z*=scale,this.w*=scale,this},length:function(){var x=this.x,y=this.y,z=this.z,w=this.w;return Math.sqrt(x*x+y*y+z*z+w*w)},lengthSq:function(){var x=this.x,y=this.y,z=this.z,w=this.w;return x*x+y*y+z*z+w*w},normalize:function(){var x=this.x,y=this.y,z=this.z,w=this.w,len=x*x+y*y+z*z+w*w;return len>0&&(len=1/Math.sqrt(len),this.x=x*len,this.y=y*len,this.z=z*len,this.w=w*len),this},dot:function(v){return this.x*v.x+this.y*v.y+this.z*v.z+this.w*v.w},lerp:function(v,t){void 0===t&&(t=0);var ax=this.x,ay=this.y,az=this.z,aw=this.w;return this.x=ax+t*(v.x-ax),this.y=ay+t*(v.y-ay),this.z=az+t*(v.z-az),this.w=aw+t*(v.w-aw),this},multiply:function(v){return this.x*=v.x,this.y*=v.y,this.z*=v.z||1,this.w*=v.w||1,this},divide:function(v){return this.x/=v.x,this.y/=v.y,this.z/=v.z||1,this.w/=v.w||1,this},distance:function(v){var dx=v.x-this.x,dy=v.y-this.y,dz=v.z-this.z||0,dw=v.w-this.w||0;return Math.sqrt(dx*dx+dy*dy+dz*dz+dw*dw)},distanceSq:function(v){var dx=v.x-this.x,dy=v.y-this.y,dz=v.z-this.z||0,dw=v.w-this.w||0;return dx*dx+dy*dy+dz*dz+dw*dw},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(mat){var x=this.x,y=this.y,z=this.z,w=this.w,m=mat.val;return this.x=m[0]*x+m[4]*y+m[8]*z+m[12]*w,this.y=m[1]*x+m[5]*y+m[9]*z+m[13]*w,this.z=m[2]*x+m[6]*y+m[10]*z+m[14]*w,this.w=m[3]*x+m[7]*y+m[11]*z+m[15]*w,this},transformQuat:function(q){var x=this.x,y=this.y,z=this.z,qx=q.x,qy=q.y,qz=q.z,qw=q.w,ix=qw*x+qy*z-qz*y,iy=qw*y+qz*x-qx*z,iz=qw*z+qx*y-qy*x,iw=-qx*x-qy*y-qz*z;return this.x=ix*qw+iw*-qx+iy*-qz-iz*-qy,this.y=iy*qw+iw*-qy+iz*-qx-ix*-qz,this.z=iz*qw+iw*-qz+ix*-qy-iy*-qx,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});Vector4.prototype.sub=Vector4.prototype.subtract,Vector4.prototype.mul=Vector4.prototype.multiply,Vector4.prototype.div=Vector4.prototype.divide,Vector4.prototype.dist=Vector4.prototype.distance,Vector4.prototype.distSq=Vector4.prototype.distanceSq,Vector4.prototype.len=Vector4.prototype.length,Vector4.prototype.lenSq=Vector4.prototype.lengthSq,module.exports=Vector4},function(module,exports,__webpack_require__){module.exports={ADD:__webpack_require__(770),ERROR:__webpack_require__(771),LOAD:__webpack_require__(772),READY:__webpack_require__(773),REMOVE:__webpack_require__(774)}},function(module,exports){module.exports=function(element,parent){var target;if(parent)"string"==typeof parent?target=document.getElementById(parent):"object"==typeof parent&&1===parent.nodeType&&(target=parent);else if(element.parentElement)return element;return target||(target=document.body),target.appendChild(element),element}},function(module,exports,__webpack_require__){var SpliceOne=__webpack_require__(86);module.exports=function(array,item,callback,context){var index;if(void 0===context&&(context=array),!Array.isArray(item))return-1!==(index=array.indexOf(item))?(SpliceOne(array,index),callback&&callback.call(context,item),item):null;for(var itemLength=item.length-1;itemLength>=0;){var entry=item[itemLength];-1!==(index=array.indexOf(entry))?(SpliceOne(array,index),callback&&callback.call(context,entry)):item.pop(),itemLength--}return item}},function(module,exports){module.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175}},function(module,exports){module.exports={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Clone=__webpack_require__(71),EventEmitter=__webpack_require__(9),Events=__webpack_require__(72),GameEvents=__webpack_require__(23),NOOP=__webpack_require__(2),BaseSoundManager=new Class({Extends:EventEmitter,initialize:function(game){EventEmitter.call(this),this.game=game,this.jsonCache=game.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,game.events.on(GameEvents.BLUR,(function(){this.pauseOnBlur&&this.onBlur()}),this),game.events.on(GameEvents.FOCUS,(function(){this.pauseOnBlur&&this.onFocus()}),this),game.events.on(GameEvents.PRE_STEP,this.update,this),game.events.once(GameEvents.DESTROY,this.destroy,this)},add:NOOP,addAudioSprite:function(key,config){void 0===config&&(config={});var sound=this.add(key,config);for(var markerName in sound.spritemap=this.jsonCache.get(key).spritemap,sound.spritemap)if(sound.spritemap.hasOwnProperty(markerName)){var markerConfig=Clone(config),marker=sound.spritemap[markerName];markerConfig.loop=!!marker.hasOwnProperty("loop")&&marker.loop,sound.addMarker({name:markerName,start:marker.start,duration:marker.end-marker.start,config:markerConfig})}return sound},play:function(key,extra){var sound=this.add(key);return sound.once(Events.COMPLETE,sound.destroy,sound),extra?extra.name?(sound.addMarker(extra),sound.play(extra.name)):sound.play(extra):sound.play()},playAudioSprite:function(key,spriteName,config){var sound=this.addAudioSprite(key);return sound.once(Events.COMPLETE,sound.destroy,sound),sound.play(spriteName,config)},remove:function(sound){var index=this.sounds.indexOf(sound);return-1!==index&&(sound.destroy(),this.sounds.splice(index,1),!0)},removeByKey:function(key){for(var removed=0,i=this.sounds.length-1;i>=0;i--){var sound=this.sounds[i];sound.key===key&&(sound.destroy(),this.sounds.splice(i,1),removed++)}return removed},pauseAll:function(){this.forEachActiveSound((function(sound){sound.pause()})),this.emit(Events.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound((function(sound){sound.resume()})),this.emit(Events.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound((function(sound){sound.stop()})),this.emit(Events.STOP_ALL,this)},unlock:NOOP,onBlur:NOOP,onFocus:NOOP,update:function(time,delta){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(Events.UNLOCKED,this));for(var i=this.sounds.length-1;i>=0;i--)this.sounds[i].pendingRemove&&this.sounds.splice(i,1);this.sounds.forEach((function(sound){sound.update(time,delta)}))},destroy:function(){this.removeAllListeners(),this.forEachActiveSound((function(sound){sound.destroy()})),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(callback,scope){var _this=this;this.sounds.forEach((function(sound,index){sound.pendingRemove||callback.call(scope||_this,sound,index,_this.sounds)}))},setRate:function(value){return this.rate=value,this},rate:{get:function(){return this._rate},set:function(value){this._rate=value,this.forEachActiveSound((function(sound){sound.calculateRate()})),this.emit(Events.GLOBAL_RATE,this,value)}},setDetune:function(value){return this.detune=value,this},detune:{get:function(){return this._detune},set:function(value){this._detune=value,this.forEachActiveSound((function(sound){sound.calculateRate()})),this.emit(Events.GLOBAL_DETUNE,this,value)}}});module.exports=BaseSoundManager},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),EventEmitter=__webpack_require__(9),Events=__webpack_require__(72),Extend=__webpack_require__(17),NOOP=__webpack_require__(2),BaseSound=new Class({Extends:EventEmitter,initialize:function(manager,key,config){EventEmitter.call(this),this.manager=manager,this.key=key,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0},this.currentConfig=this.config,this.config=Extend(this.config,config),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(marker){return!(!marker||!marker.name||"string"!=typeof marker.name)&&(this.markers[marker.name]?(console.error("addMarker "+marker.name+" already exists in Sound"),!1):(marker=Extend(!0,{name:"",start:0,duration:this.totalDuration-(marker.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0}},marker),this.markers[marker.name]=marker,!0))},updateMarker:function(marker){return!(!marker||!marker.name||"string"!=typeof marker.name)&&(this.markers[marker.name]?(this.markers[marker.name]=Extend(!0,this.markers[marker.name],marker),!0):(console.warn("Audio Marker: "+marker.name+" missing in Sound: "+this.key),!1))},removeMarker:function(markerName){var marker=this.markers[markerName];return marker?(this.markers[markerName]=null,marker):null},play:function(markerName,config){if(void 0===markerName&&(markerName=""),"object"==typeof markerName&&(config=markerName,markerName=""),"string"!=typeof markerName)return!1;if(markerName){if(!this.markers[markerName])return console.warn("Marker: "+markerName+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[markerName],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}else this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;return this.resetConfig(),this.currentConfig=Extend(this.currentConfig,config),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return!(this.isPaused||!this.isPlaying)&&(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!(!this.isPaused||this.isPlaying)&&(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!(!this.isPaused&&!this.isPlaying)&&(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:NOOP,calculateRate:function(){var totalDetune=this.currentConfig.detune+this.manager.detune,detuneRate=Math.pow(1.0005777895065548,totalDetune);this.totalRate=this.currentConfig.rate*this.manager.rate*detuneRate},destroy:function(){this.pendingRemove||(this.emit(Events.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});module.exports=BaseSound},function(module,exports,__webpack_require__){var ArrayUtils=__webpack_require__(200),Class=__webpack_require__(0),NOOP=__webpack_require__(2),StableSort=__webpack_require__(140),List=new Class({initialize:function(parent){this.parent=parent,this.list=[],this.position=0,this.addCallback=NOOP,this.removeCallback=NOOP,this._sortKey=""},add:function(child,skipCallback){return skipCallback?ArrayUtils.Add(this.list,child):ArrayUtils.Add(this.list,child,0,this.addCallback,this)},addAt:function(child,index,skipCallback){return skipCallback?ArrayUtils.AddAt(this.list,child,index):ArrayUtils.AddAt(this.list,child,index,0,this.addCallback,this)},getAt:function(index){return this.list[index]},getIndex:function(child){return this.list.indexOf(child)},sort:function(property,handler){return property?(void 0===handler&&(handler=function(childA,childB){return childA[property]-childB[property]}),StableSort.inplace(this.list,handler),this):this},getByName:function(name){return ArrayUtils.GetFirst(this.list,"name",name)},getRandom:function(startIndex,length){return ArrayUtils.GetRandom(this.list,startIndex,length)},getFirst:function(property,value,startIndex,endIndex){return ArrayUtils.GetFirst(this.list,property,value,startIndex,endIndex)},getAll:function(property,value,startIndex,endIndex){return ArrayUtils.GetAll(this.list,property,value,startIndex,endIndex)},count:function(property,value){return ArrayUtils.CountAllMatching(this.list,property,value)},swap:function(child1,child2){ArrayUtils.Swap(this.list,child1,child2)},moveTo:function(child,index){return ArrayUtils.MoveTo(this.list,child,index)},remove:function(child,skipCallback){return skipCallback?ArrayUtils.Remove(this.list,child):ArrayUtils.Remove(this.list,child,this.removeCallback,this)},removeAt:function(index,skipCallback){return skipCallback?ArrayUtils.RemoveAt(this.list,index):ArrayUtils.RemoveAt(this.list,index,this.removeCallback,this)},removeBetween:function(startIndex,endIndex,skipCallback){return skipCallback?ArrayUtils.RemoveBetween(this.list,startIndex,endIndex):ArrayUtils.RemoveBetween(this.list,startIndex,endIndex,this.removeCallback,this)},removeAll:function(skipCallback){for(var i=this.list.length;i--;)this.remove(this.list[i],skipCallback);return this},bringToTop:function(child){return ArrayUtils.BringToTop(this.list,child)},sendToBack:function(child){return ArrayUtils.SendToBack(this.list,child)},moveUp:function(child){return ArrayUtils.MoveUp(this.list,child),child},moveDown:function(child){return ArrayUtils.MoveDown(this.list,child),child},reverse:function(){return this.list.reverse(),this},shuffle:function(){return ArrayUtils.Shuffle(this.list),this},replace:function(oldChild,newChild){return ArrayUtils.Replace(this.list,oldChild,newChild)},exists:function(child){return this.list.indexOf(child)>-1},setAll:function(property,value,startIndex,endIndex){return ArrayUtils.SetAll(this.list,property,value,startIndex,endIndex),this},each:function(callback,context){for(var args=[null],i=2;i<arguments.length;i++)args.push(arguments[i]);for(i=0;i<this.list.length;i++)args[0]=this.list[i],callback.apply(context,args)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});module.exports=List},function(module,exports,__webpack_require__){var CheckMatrix=__webpack_require__(201),TransposeMatrix=__webpack_require__(396);module.exports=function(matrix,direction){if(void 0===direction&&(direction=90),!CheckMatrix(matrix))return null;if("string"!=typeof direction&&(direction=(direction%360+360)%360),90===direction||-270===direction||"rotateLeft"===direction)(matrix=TransposeMatrix(matrix)).reverse();else if(-90===direction||270===direction||"rotateRight"===direction)matrix.reverse(),matrix=TransposeMatrix(matrix);else if(180===Math.abs(direction)||"rotate180"===direction){for(var i=0;i<matrix.length;i++)matrix[i].reverse();matrix.reverse()}return matrix}},function(module,exports,__webpack_require__){!function(){var stable=function(arr,comp){return exec(arr.slice(),comp)};function exec(arr,comp){"function"!=typeof comp&&(comp=function(a,b){return String(a).localeCompare(b)});var len=arr.length;if(len<=1)return arr;for(var buffer=new Array(len),chk=1;chk<len;chk*=2){pass(arr,comp,chk,buffer);var tmp=arr;arr=buffer,buffer=tmp}return arr}stable.inplace=function(arr,comp){var result=exec(arr,comp);return result!==arr&&pass(result,null,arr.length,arr),arr};var pass=function(arr,comp,chk,result){var l,r,e,li,ri,len=arr.length,i=0,dbl=2*chk;for(l=0;l<len;l+=dbl)for(e=(r=l+chk)+chk,r>len&&(r=len),e>len&&(e=len),li=l,ri=r;;)if(li<r&&ri<e)comp(arr[li],arr[ri])<=0?result[i++]=arr[li++]:result[i++]=arr[ri++];else if(li<r)result[i++]=arr[li++];else{if(!(ri<e))break;result[i++]=arr[ri++]}};module.exports=stable}()},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Components=__webpack_require__(12),GameObject=__webpack_require__(13),GetBitmapTextSize=__webpack_require__(951),ParseFromAtlas=__webpack_require__(952),ParseXMLBitmapFont=__webpack_require__(204),Render=__webpack_require__(953),BitmapText=new Class({Extends:GameObject,Mixins:[Components.Alpha,Components.BlendMode,Components.Depth,Components.Mask,Components.Origin,Components.Pipeline,Components.ScrollFactor,Components.Texture,Components.Tint,Components.Transform,Components.Visible,Render],initialize:function(scene,x,y,font,text,size,align){void 0===text&&(text=""),void 0===align&&(align=0),GameObject.call(this,scene,"BitmapText"),this.font=font;var entry=this.scene.sys.cache.bitmapFont.get(font);this.fontData=entry.data,this._text="",this._fontSize=size||this.fontData.size,this._letterSpacing=0,this._align=align,this._bounds=GetBitmapTextSize(this,!1,this._bounds),this._dirty=!1,this.setTexture(entry.texture,entry.frame),this.setPosition(x,y),this.setOrigin(0,0),this.initPipeline(),this.setText(text)},setLeftAlign:function(){return this._align=BitmapText.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=BitmapText.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=BitmapText.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(size){return this._fontSize=size,this._dirty=!0,this},setLetterSpacing:function(spacing){return void 0===spacing&&(spacing=0),this._letterSpacing=spacing,this._dirty=!0,this},setText:function(value){return value||0===value||(value=""),Array.isArray(value)&&(value=value.join("\n")),value!==this.text&&(this._text=value.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},getTextBounds:function(round){return this._dirty&&GetBitmapTextSize(this,round,this._bounds),this._bounds},setFont:function(key,size,align){if(void 0===size&&(size=this._fontSize),void 0===align&&(align=this._align),key!==this.font){var entry=this.scene.sys.cache.bitmapFont.get(key);entry&&(this.font=key,this.fontData=entry.data,this._fontSize=size,this._align=align,this.setTexture(entry.texture,entry.frame),GetBitmapTextSize(this,!1,this._bounds))}return this},align:{set:function(value){this._align=value,this._dirty=!0},get:function(){return this._align}},text:{set:function(value){this.setText(value)},get:function(){return this._text}},fontSize:{set:function(value){this._fontSize=value,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(value){this._letterSpacing=value,this._dirty=!0},get:function(){return this._letterSpacing}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var out=Components.ToJSON(this),data={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return out.data=data,out}});BitmapText.ALIGN_LEFT=0,BitmapText.ALIGN_CENTER=1,BitmapText.ALIGN_RIGHT=2,BitmapText.ParseFromAtlas=ParseFromAtlas,BitmapText.ParseXMLBitmapFont=ParseXMLBitmapFont,module.exports=BitmapText},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Components=__webpack_require__(12),GameObject=__webpack_require__(13),MeshRender=__webpack_require__(1073),NOOP=__webpack_require__(2),Mesh=new Class({Extends:GameObject,Mixins:[Components.BlendMode,Components.Depth,Components.GetBounds,Components.Mask,Components.Pipeline,Components.Size,Components.Texture,Components.Transform,Components.Visible,Components.ScrollFactor,MeshRender],initialize:function(scene,x,y,vertices,uv,colors,alphas,texture,frame){if(GameObject.call(this,scene,"Mesh"),vertices.length!==uv.length)throw new Error("Mesh Vertex count must match UV count");var i,verticesUB=vertices.length/2|0;if(colors.length>0&&colors.length<verticesUB)throw new Error("Mesh Color count must match Vertex count");if(alphas.length>0&&alphas.length<verticesUB)throw new Error("Mesh Alpha count must match Vertex count");if(0===colors.length)for(i=0;i<verticesUB;++i)colors[i]=16777215;if(0===alphas.length)for(i=0;i<verticesUB;++i)alphas[i]=1;this.vertices=new Float32Array(vertices),this.uv=new Float32Array(uv),this.colors=new Uint32Array(colors),this.alphas=new Float32Array(alphas),this.tintFill=!1,this.setTexture(texture,frame),this.setPosition(x,y),this.setSizeToFrame(),this.initPipeline()},setAlpha:NOOP});module.exports=Mesh},function(module,exports){module.exports=function(rectA,rectB){return!(rectA.width<=0||rectA.height<=0||rectB.width<=0||rectB.height<=0)&&!(rectA.right<rectB.x||rectA.bottom<rectB.y||rectA.x>rectB.right||rectA.y>rectB.bottom)}},function(module,exports,__webpack_require__){var GetValue=__webpack_require__(5),inputPlugins={},InputPluginCache={register:function(key,plugin,mapping,settingsKey,configKey){inputPlugins[key]={plugin:plugin,mapping:mapping,settingsKey:settingsKey,configKey:configKey}},getPlugin:function(key){return inputPlugins[key]},install:function(target){var sys=target.scene.sys,settings=sys.settings.input,config=sys.game.config;for(var key in inputPlugins){var source=inputPlugins[key].plugin,mapping=inputPlugins[key].mapping,settingsKey=inputPlugins[key].settingsKey,configKey=inputPlugins[key].configKey;GetValue(settings,settingsKey,config[configKey])&&(target[mapping]=new source(target))}},remove:function(key){inputPlugins.hasOwnProperty(key)&&delete inputPlugins[key]}};module.exports=InputPluginCache},function(module,exports,__webpack_require__){module.exports={ANY_KEY_DOWN:__webpack_require__(1211),ANY_KEY_UP:__webpack_require__(1212),COMBO_MATCH:__webpack_require__(1213),DOWN:__webpack_require__(1214),KEY_DOWN:__webpack_require__(1215),KEY_UP:__webpack_require__(1216),UP:__webpack_require__(1217)}},function(module,exports){module.exports=function(responseType,async,user,password,timeout){return void 0===responseType&&(responseType=""),void 0===async&&(async=!0),void 0===user&&(user=""),void 0===password&&(password=""),void 0===timeout&&(timeout=0),{responseType:responseType,async:async,user:user,password:password,timeout:timeout,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0}}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Components=__webpack_require__(230),Sprite=__webpack_require__(57),ArcadeSprite=new Class({Extends:Sprite,Mixins:[Components.Acceleration,Components.Angular,Components.Bounce,Components.Debug,Components.Drag,Components.Enable,Components.Friction,Components.Gravity,Components.Immovable,Components.Mass,Components.Size,Components.Velocity],initialize:function(scene,x,y,texture,frame){Sprite.call(this,scene,x,y,texture,frame),this.body=null}});module.exports=ArcadeSprite},function(module,exports,__webpack_require__){module.exports={Bounce:__webpack_require__(1311),Collision:__webpack_require__(1312),Force:__webpack_require__(1313),Friction:__webpack_require__(1314),Gravity:__webpack_require__(1315),Mass:__webpack_require__(1316),Static:__webpack_require__(1317),Sensor:__webpack_require__(1318),SetBody:__webpack_require__(1319),Sleep:__webpack_require__(1320),Transform:__webpack_require__(1333),Velocity:__webpack_require__(1334)}},function(module,exports){var Pair={};module.exports=Pair,Pair.create=function(collision,timestamp){var bodyA=collision.bodyA,bodyB=collision.bodyB,pair={id:Pair.id(bodyA,bodyB),bodyA:bodyA,bodyB:bodyB,activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:bodyA.isSensor||bodyB.isSensor,timeCreated:timestamp,timeUpdated:timestamp,collision:null,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return Pair.update(pair,collision,timestamp),pair},Pair.update=function(pair,collision,timestamp){if(pair.collision=collision,collision.collided){var supports=collision.supports,activeContacts=pair.activeContacts,parentA=collision.parentA,parentB=collision.parentB;pair.inverseMass=parentA.inverseMass+parentB.inverseMass,pair.friction=Math.min(parentA.friction,parentB.friction),pair.frictionStatic=Math.max(parentA.frictionStatic,parentB.frictionStatic),pair.restitution=Math.max(parentA.restitution,parentB.restitution),pair.slop=Math.max(parentA.slop,parentB.slop);for(var i=0;i<supports.length;i++)activeContacts[i]=supports[i].contact;var supportCount=supports.length;supportCount<activeContacts.length&&(activeContacts.length=supportCount),pair.separation=collision.depth,Pair.setActive(pair,!0,timestamp)}else!0===pair.isActive&&Pair.setActive(pair,!1,timestamp)},Pair.setActive=function(pair,isActive,timestamp){isActive?(pair.isActive=!0,pair.timeUpdated=timestamp):(pair.isActive=!1,pair.activeContacts.length=0)},Pair.id=function(bodyA,bodyB){return bodyA.id<bodyB.id?"A"+bodyA.id+"B"+bodyB.id:"A"+bodyB.id+"B"+bodyA.id}},function(module,exports,__webpack_require__){module.exports={CalculateFacesAt:__webpack_require__(242),CalculateFacesWithin:__webpack_require__(61),Copy:__webpack_require__(1356),CreateFromTiles:__webpack_require__(1357),CullTiles:__webpack_require__(1358),Fill:__webpack_require__(1359),FilterTiles:__webpack_require__(1360),FindByIndex:__webpack_require__(1361),FindTile:__webpack_require__(1362),ForEachTile:__webpack_require__(1363),GetTileAt:__webpack_require__(151),GetTileAtWorldXY:__webpack_require__(1364),GetTilesWithin:__webpack_require__(27),GetTilesWithinShape:__webpack_require__(1365),GetTilesWithinWorldXY:__webpack_require__(1366),HasTileAt:__webpack_require__(502),HasTileAtWorldXY:__webpack_require__(1367),IsInLayerBounds:__webpack_require__(114),PutTileAt:__webpack_require__(243),PutTileAtWorldXY:__webpack_require__(1368),PutTilesAt:__webpack_require__(1369),Randomize:__webpack_require__(1370),RemoveTileAt:__webpack_require__(503),RemoveTileAtWorldXY:__webpack_require__(1371),RenderDebug:__webpack_require__(1372),ReplaceByIndex:__webpack_require__(501),SetCollision:__webpack_require__(1373),SetCollisionBetween:__webpack_require__(1374),SetCollisionByExclusion:__webpack_require__(1375),SetCollisionByProperty:__webpack_require__(1376),SetCollisionFromCollisionGroup:__webpack_require__(1377),SetTileIndexCallback:__webpack_require__(1378),SetTileLocationCallback:__webpack_require__(1379),Shuffle:__webpack_require__(1380),SwapByIndex:__webpack_require__(1381),TileToWorldX:__webpack_require__(152),TileToWorldXY:__webpack_require__(1382),TileToWorldY:__webpack_require__(153),WeightedRandomize:__webpack_require__(1383),WorldToTileX:__webpack_require__(68),WorldToTileXY:__webpack_require__(1384),WorldToTileY:__webpack_require__(69)}},function(module,exports,__webpack_require__){var IsInLayerBounds=__webpack_require__(114);module.exports=function(tileX,tileY,nonNull,layer){if(void 0===nonNull&&(nonNull=!1),IsInLayerBounds(tileX,tileY,layer)){var tile=layer.data[tileY][tileX]||null;return null===tile?null:-1===tile.index?nonNull?tile:null:tile}return null}},function(module,exports){module.exports=function(tileX,camera,layer){var tileWidth=layer.baseTileWidth,tilemapLayer=layer.tilemapLayer,layerWorldX=0;return tilemapLayer&&(void 0===camera&&(camera=tilemapLayer.scene.cameras.main),layerWorldX=tilemapLayer.x+camera.scrollX*(1-tilemapLayer.scrollFactorX),tileWidth*=tilemapLayer.scaleX),layerWorldX+tileX*tileWidth}},function(module,exports){module.exports=function(tileY,camera,layer){var tileHeight=layer.baseTileHeight,tilemapLayer=layer.tilemapLayer,layerWorldY=0;return tilemapLayer&&(void 0===camera&&(camera=tilemapLayer.scene.cameras.main),layerWorldY=tilemapLayer.y+camera.scrollY*(1-tilemapLayer.scrollFactorY),tileHeight*=tilemapLayer.scaleY),layerWorldY+tileY*tileHeight}},function(module,exports,__webpack_require__){var Tileset=new(__webpack_require__(0))({initialize:function(name,firstgid,tileWidth,tileHeight,tileMargin,tileSpacing,tileProperties,tileData){(void 0===tileWidth||tileWidth<=0)&&(tileWidth=32),(void 0===tileHeight||tileHeight<=0)&&(tileHeight=32),void 0===tileMargin&&(tileMargin=0),void 0===tileSpacing&&(tileSpacing=0),void 0===tileProperties&&(tileProperties={}),void 0===tileData&&(tileData={}),this.name=name,this.firstgid=firstgid,this.tileWidth=tileWidth,this.tileHeight=tileHeight,this.tileMargin=tileMargin,this.tileSpacing=tileSpacing,this.tileProperties=tileProperties,this.tileData=tileData,this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(tileIndex){return this.containsTileIndex(tileIndex)?this.tileProperties[tileIndex-this.firstgid]:null},getTileData:function(tileIndex){return this.containsTileIndex(tileIndex)?this.tileData[tileIndex-this.firstgid]:null},getTileCollisionGroup:function(tileIndex){var data=this.getTileData(tileIndex);return data&&data.objectgroup?data.objectgroup:null},containsTileIndex:function(tileIndex){return tileIndex>=this.firstgid&&tileIndex<this.firstgid+this.total},getTileTextureCoordinates:function(tileIndex){return this.containsTileIndex(tileIndex)?this.texCoordinates[tileIndex-this.firstgid]:null},setImage:function(texture){return this.image=texture,this.glTexture=texture.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(tileWidth,tileHeight){return void 0!==tileWidth&&(this.tileWidth=tileWidth),void 0!==tileHeight&&(this.tileHeight=tileHeight),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(margin,spacing){return void 0!==margin&&(this.tileMargin=margin),void 0!==spacing&&(this.tileSpacing=spacing),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(imageWidth,imageHeight){var rowCount=(imageHeight-2*this.tileMargin+this.tileSpacing)/(this.tileHeight+this.tileSpacing),colCount=(imageWidth-2*this.tileMargin+this.tileSpacing)/(this.tileWidth+this.tileSpacing);rowCount%1==0&&colCount%1==0||console.warn("Image tile area not tile size multiple in: "+this.name),rowCount=Math.floor(rowCount),colCount=Math.floor(colCount),this.rows=rowCount,this.columns=colCount,this.total=rowCount*colCount,this.texCoordinates.length=0;for(var tx=this.tileMargin,ty=this.tileMargin,y=0;y<this.rows;y++){for(var x=0;x<this.columns;x++)this.texCoordinates.push({x:tx,y:ty}),tx+=this.tileWidth+this.tileSpacing;tx=this.tileMargin,ty+=this.tileHeight+this.tileSpacing}return this}});module.exports=Tileset},function(module,exports){module.exports=function(source,key,defaultValue){var valueCallback;source.hasOwnProperty(key)?valueCallback="function"===typeof source[key]?function(target,targetKey,value,targetIndex,totalTargets,tween){return source[key](target,targetKey,value,targetIndex,totalTargets,tween)}:function(){return source[key]}:valueCallback="function"==typeof defaultValue?defaultValue:function(){return defaultValue};return valueCallback}},function(module,exports,__webpack_require__){var Defaults=__webpack_require__(251),GetAdvancedValue=__webpack_require__(14),GetBoolean=__webpack_require__(101),GetEaseFunction=__webpack_require__(92),GetNewValue=__webpack_require__(155),GetProps=__webpack_require__(524),GetTargets=__webpack_require__(249),GetValue=__webpack_require__(5),GetValueOp=__webpack_require__(250),Tween=__webpack_require__(252),TweenData=__webpack_require__(254);module.exports=function(parent,config,defaults){void 0===defaults&&(defaults=Defaults);for(var targets=defaults.targets?defaults.targets:GetTargets(config),props=GetProps(config),delay=GetNewValue(config,"delay",defaults.delay),duration=GetNewValue(config,"duration",defaults.duration),easeParams=GetValue(config,"easeParams",defaults.easeParams),ease=GetEaseFunction(GetValue(config,"ease",defaults.ease),easeParams),hold=GetNewValue(config,"hold",defaults.hold),repeat=GetNewValue(config,"repeat",defaults.repeat),repeatDelay=GetNewValue(config,"repeatDelay",defaults.repeatDelay),yoyo=GetBoolean(config,"yoyo",defaults.yoyo),flipX=GetBoolean(config,"flipX",defaults.flipX),flipY=GetBoolean(config,"flipY",defaults.flipY),data=[],p=0;p<props.length;p++)for(var key=props[p].key,value=props[p].value,t=0;t<targets.length;t++){var ops=GetValueOp(key,value),tweenData=TweenData(targets[t],t,key,ops.getEnd,ops.getStart,ops.getActive,GetEaseFunction(GetValue(value,"ease",ease),easeParams),GetNewValue(value,"delay",delay),GetNewValue(value,"duration",duration),GetBoolean(value,"yoyo",yoyo),GetNewValue(value,"hold",hold),GetNewValue(value,"repeat",repeat),GetNewValue(value,"repeatDelay",repeatDelay),GetBoolean(value,"flipX",flipX),GetBoolean(value,"flipY",flipY));data.push(tweenData)}var tween=new Tween(parent,data,targets);tween.offset=GetAdvancedValue(config,"offset",null),tween.completeDelay=GetAdvancedValue(config,"completeDelay",0),tween.loop=Math.round(GetAdvancedValue(config,"loop",0)),tween.loopDelay=Math.round(GetAdvancedValue(config,"loopDelay",0)),tween.paused=GetBoolean(config,"paused",!1),tween.useFrames=GetBoolean(config,"useFrames",!1);for(var scope=GetValue(config,"callbackScope",tween),tweenArray=[tween,null],callbacks=Tween.TYPES,i=0;i<callbacks.length;i++){var type=callbacks[i],callback=GetValue(config,type,!1);if(callback){var callbackScope=GetValue(config,type+"Scope",scope),callbackParams=GetValue(config,type+"Params",[]);tween.setCallback(type,callback,tweenArray.concat(callbackParams),callbackScope)}}return tween}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),GameObject=__webpack_require__(13),Sprite=__webpack_require__(57),Vector2=__webpack_require__(3),Vector4=__webpack_require__(130),Sprite3D=new Class({Extends:GameObject,initialize:function(scene,x,y,z,texture,frame){GameObject.call(this,scene,"Sprite3D"),this.gameObject=new Sprite(scene,0,0,texture,frame),this.position=new Vector4(x,y,z),this.size=new Vector2(this.gameObject.width,this.gameObject.height),this.scale=new Vector2(1,1),this.adjustScaleX=!0,this.adjustScaleY=!0,this._visible=!0},project:function(camera){var pos=this.position,gameObject=this.gameObject;camera.project(pos,gameObject),camera.getPointSize(pos,this.size,this.scale),this.scale.x<=0||this.scale.y<=0?gameObject.setVisible(!1):(gameObject.visible||gameObject.setVisible(!0),this.adjustScaleX&&(gameObject.scaleX=this.scale.x),this.adjustScaleY&&(gameObject.scaleY=this.scale.y),gameObject.setDepth(-1*gameObject.z))},setVisible:function(value){return this.visible=value,this},visible:{get:function(){return this._visible},set:function(value){this._visible=value,this.gameObject.visible=value}},x:{get:function(){return this.position.x},set:function(value){this.position.x=value}},y:{get:function(){return this.position.y},set:function(value){this.position.y=value}},z:{get:function(){return this.position.z},set:function(value){this.position.z=value}}});module.exports=Sprite3D},function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){"object"==typeof window&&(g=window)}module.exports=g},function(module,exports){module.exports={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12}},function(module,exports,__webpack_require__){var Point=__webpack_require__(4);module.exports=function(circle,angle,out){return void 0===out&&(out=new Point),out.x=circle.x+circle.radius*Math.cos(angle),out.y=circle.y+circle.radius*Math.sin(angle),out}},function(module,exports,__webpack_require__){var Point=__webpack_require__(4);module.exports=function(circle,out){void 0===out&&(out=new Point);var t=2*Math.PI*Math.random(),u=Math.random()+Math.random(),r=u>1?2-u:u,x=r*Math.cos(t),y=r*Math.sin(t);return out.x=circle.x+x*circle.radius,out.y=circle.y+y*circle.radius,out}},function(module,exports,__webpack_require__){var Clamp=__webpack_require__(25),Class=__webpack_require__(0),EventEmitter=__webpack_require__(9),Events=__webpack_require__(119),FindClosestInSorted=__webpack_require__(273),Frame=__webpack_require__(274),GetValue=__webpack_require__(5),Animation=new Class({Extends:EventEmitter,initialize:function(manager,key,config){EventEmitter.call(this),this.manager=manager,this.key=key,this.type="frame",this.frames=this.getFrames(manager.textureManager,GetValue(config,"frames",[]),GetValue(config,"defaultTextureKey",null)),this.frameRate=GetValue(config,"frameRate",null),this.duration=GetValue(config,"duration",null),null===this.duration&&null===this.frameRate?(this.frameRate=24,this.duration=this.frameRate/this.frames.length*1e3):this.duration&&null===this.frameRate?this.frameRate=this.frames.length/(this.duration/1e3):this.duration=this.frames.length/this.frameRate*1e3,this.msPerFrame=1e3/this.frameRate,this.skipMissedFrames=GetValue(config,"skipMissedFrames",!0),this.delay=GetValue(config,"delay",0),this.repeat=GetValue(config,"repeat",0),this.repeatDelay=GetValue(config,"repeatDelay",0),this.yoyo=GetValue(config,"yoyo",!1),this.showOnStart=GetValue(config,"showOnStart",!1),this.hideOnComplete=GetValue(config,"hideOnComplete",!1),this.paused=!1,this.manager.on(Events.PAUSE_ALL,this.pause,this),this.manager.on(Events.RESUME_ALL,this.resume,this)},addFrame:function(config){return this.addFrameAt(this.frames.length,config)},addFrameAt:function(index,config){var newFrames=this.getFrames(this.manager.textureManager,config);if(newFrames.length>0){if(0===index)this.frames=newFrames.concat(this.frames);else if(index===this.frames.length)this.frames=this.frames.concat(newFrames);else{var pre=this.frames.slice(0,index),post=this.frames.slice(index);this.frames=pre.concat(newFrames,post)}this.updateFrameSequence()}return this},checkFrame:function(index){return index>=0&&index<this.frames.length},completeAnimation:function(component){this.hideOnComplete&&(component.parent.visible=!1),component.stop()},getFirstTick:function(component,includeDelay){void 0===includeDelay&&(includeDelay=!0),component.accumulator=0,component.nextTick=component.msPerFrame+component.currentFrame.duration,includeDelay&&(component.nextTick+=component._delay)},getFrameAt:function(index){return this.frames[index]},getFrames:function(textureManager,frames,defaultTextureKey){var prev,animationFrame,i,textureKey,out=[],index=1;if("string"==typeof frames){textureKey=frames;var frameKeys=textureManager.get(textureKey).getFrameNames();frames=[],frameKeys.forEach((function(idx,value){frames.push({key:textureKey,frame:value})}))}if(!Array.isArray(frames)||0===frames.length)return out;for(i=0;i<frames.length;i++){var item=frames[i],key=GetValue(item,"key",defaultTextureKey);if(key){var frame=GetValue(item,"frame",0),textureFrame=textureManager.getFrame(key,frame);(animationFrame=new Frame(key,frame,index,textureFrame)).duration=GetValue(item,"duration",0),animationFrame.isFirst=!prev,prev&&(prev.nextFrame=animationFrame,animationFrame.prevFrame=prev),out.push(animationFrame),prev=animationFrame,index++}}if(out.length>0){animationFrame.isLast=!0,animationFrame.nextFrame=out[0],out[0].prevFrame=animationFrame;var slice=1/(out.length-1);for(i=0;i<out.length;i++)out[i].progress=i*slice}return out},getNextTick:function(component){component.accumulator-=component.nextTick,component.nextTick=component.msPerFrame+component.currentFrame.duration},load:function(component,startFrame){startFrame>=this.frames.length&&(startFrame=0),component.currentAnim!==this&&(component.currentAnim=this,component.frameRate=this.frameRate,component.duration=this.duration,component.msPerFrame=this.msPerFrame,component.skipMissedFrames=this.skipMissedFrames,component._delay=this.delay,component._repeat=this.repeat,component._repeatDelay=this.repeatDelay,component._yoyo=this.yoyo);var frame=this.frames[startFrame];0!==startFrame||component.forward||(frame=this.getLastFrame()),component.updateFrame(frame)},getFrameByProgress:function(value){return value=Clamp(value,0,1),FindClosestInSorted(value,this.frames,"progress")},nextFrame:function(component){var frame=component.currentFrame;frame.isLast?component._yoyo?this.handleYoyoFrame(component,!1):component.repeatCounter>0?component._reverse&&component.forward?component.forward=!1:this.repeatAnimation(component):this.completeAnimation(component):this.updateAndGetNextTick(component,frame.nextFrame)},handleYoyoFrame:function(component,isReverse){if(isReverse||(isReverse=!1),component._reverse===!isReverse&&component.repeatCounter>0)return component.forward=isReverse,void this.repeatAnimation(component);if(component._reverse===isReverse||0!==component.repeatCounter){component.forward=isReverse;var frame=isReverse?component.currentFrame.nextFrame:component.currentFrame.prevFrame;this.updateAndGetNextTick(component,frame)}else this.completeAnimation(component)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(component){var frame=component.currentFrame;frame.isFirst?component._yoyo?this.handleYoyoFrame(component,!0):component.repeatCounter>0?component._reverse&&!component.forward?(component.currentFrame=this.getLastFrame(),this.repeatAnimation(component)):(component.forward=!0,this.repeatAnimation(component)):this.completeAnimation(component):this.updateAndGetNextTick(component,frame.prevFrame)},updateAndGetNextTick:function(component,frame){component.updateFrame(frame),this.getNextTick(component)},removeFrame:function(frame){var index=this.frames.indexOf(frame);return-1!==index&&this.removeFrameAt(index),this},removeFrameAt:function(index){return this.frames.splice(index,1),this.updateFrameSequence(),this},repeatAnimation:function(component){if(2===component._pendingStop)return this.completeAnimation(component);if(component._repeatDelay>0&&!1===component.pendingRepeat)component.pendingRepeat=!0,component.accumulator-=component.nextTick,component.nextTick+=component._repeatDelay;else if(component.repeatCounter--,component.updateFrame(component.currentFrame[component.forward?"nextFrame":"prevFrame"]),component.isPlaying){this.getNextTick(component),component.pendingRepeat=!1;var frame=component.currentFrame,parent=component.parent;this.emit(Events.ANIMATION_REPEAT,this,frame),parent.emit(Events.SPRITE_ANIMATION_KEY_REPEAT+this.key,this,frame,component.repeatCounter,parent),parent.emit(Events.SPRITE_ANIMATION_REPEAT,this,frame,component.repeatCounter,parent)}},setFrame:function(component){component.forward?this.nextFrame(component):this.previousFrame(component)},toJSON:function(){var output={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach((function(frame){output.frames.push(frame.toJSON())})),output},updateFrameSequence:function(){for(var frame,len=this.frames.length,slice=1/(len-1),i=0;i<len;i++)(frame=this.frames[i]).index=i+1,frame.isFirst=!1,frame.isLast=!1,frame.progress=i*slice,0===i?(frame.isFirst=!0,1===len?(frame.isLast=!0,frame.nextFrame=frame,frame.prevFrame=frame):(frame.isLast=!1,frame.prevFrame=this.frames[len-1],frame.nextFrame=this.frames[i+1])):i===len-1&&len>1?(frame.isLast=!0,frame.prevFrame=this.frames[len-2],frame.nextFrame=this.frames[0]):len>1&&(frame.prevFrame=this.frames[i-1],frame.nextFrame=this.frames[i+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.removeAllListeners(),this.manager.off(Events.PAUSE_ALL,this.pause,this),this.manager.off(Events.RESUME_ALL,this.resume,this),this.manager.remove(this.key);for(var i=0;i<this.frames.length;i++)this.frames[i].destroy();this.frames=[],this.manager=null}});module.exports=Animation},function(module,exports,__webpack_require__){var Perimeter=__webpack_require__(120),Point=__webpack_require__(4);module.exports=function(rectangle,position,out){if(void 0===out&&(out=new Point),position<=0||position>=1)return out.x=rectangle.x,out.y=rectangle.y,out;var p=Perimeter(rectangle)*position;return position>.5?(p-=rectangle.width+rectangle.height)<=rectangle.width?(out.x=rectangle.right-p,out.y=rectangle.bottom):(out.x=rectangle.x,out.y=rectangle.bottom-(p-rectangle.width)):p<=rectangle.width?(out.x=rectangle.x+p,out.y=rectangle.y):(out.x=rectangle.right,out.y=rectangle.y+(p-rectangle.width)),out}},function(module,exports,__webpack_require__){var Length=__webpack_require__(63),Point=__webpack_require__(4);module.exports=function(line,quantity,stepRate,out){void 0===out&&(out=[]),quantity||(quantity=Length(line)/stepRate);for(var x1=line.x1,y1=line.y1,x2=line.x2,y2=line.y2,i=0;i<quantity;i++){var position=i/quantity,x=x1+(x2-x1)*position,y=y1+(y2-y1)*position;out.push(new Point(x,y))}return out}},function(module,exports,__webpack_require__){var Point=__webpack_require__(4);module.exports=function(line,out){void 0===out&&(out=new Point);var t=Math.random();return out.x=line.x1+t*(line.x2-line.x1),out.y=line.y1+t*(line.y2-line.y1),out}},function(module,exports,__webpack_require__){var Point=__webpack_require__(4);module.exports=function(rect,out){return void 0===out&&(out=new Point),out.x=rect.x+Math.random()*rect.width,out.y=rect.y+Math.random()*rect.height,out}},function(module,exports,__webpack_require__){var MathWrap=__webpack_require__(64);module.exports=function(angle){return MathWrap(angle,-Math.PI,Math.PI)}},function(module,exports,__webpack_require__){var Wrap=__webpack_require__(64);module.exports=function(angle){return Wrap(angle,-180,180)}},function(module,exports,__webpack_require__){var Point=__webpack_require__(4);module.exports=function(ellipse,out){void 0===out&&(out=new Point);var p=Math.random()*Math.PI*2,s=Math.sqrt(Math.random());return out.x=ellipse.x+s*Math.cos(p)*ellipse.width/2,out.y=ellipse.y+s*Math.sin(p)*ellipse.height/2,out}},function(module,exports,__webpack_require__){var Point=__webpack_require__(4);module.exports=function(triangle,out){void 0===out&&(out=new Point);var ux=triangle.x2-triangle.x1,uy=triangle.y2-triangle.y1,vx=triangle.x3-triangle.x1,vy=triangle.y3-triangle.y1,r=Math.random(),s=Math.random();return r+s>=1&&(r=1-r,s=1-s),out.x=triangle.x1+(ux*r+vx*s),out.y=triangle.y1+(uy*r+vy*s),out}},function(module,exports){module.exports=function(point,x,y,angle,distance){var t=angle+Math.atan2(point.y-y,point.x-x);return point.x=x+distance*Math.cos(t),point.y=y+distance*Math.sin(t),point}},function(module,exports){module.exports=function(x,min,max){return(x=Math.max(0,Math.min(1,(x-min)/(max-min))))*x*x*(x*(6*x-15)+10)}},function(module,exports){module.exports=function(x,min,max){return x<=min?0:x>=max?1:(x=(x-min)/(max-min))*x*(3-2*x)}},function(module,exports,__webpack_require__){var Map=new(__webpack_require__(0))({initialize:function(elements){if(this.entries={},this.size=0,Array.isArray(elements))for(var i=0;i<elements.length;i++)this.set(elements[i][0],elements[i][1])},set:function(key,value){return this.has(key)||this.size++,this.entries[key]=value,this},get:function(key){if(this.has(key))return this.entries[key]},getArray:function(){var output=[],entries=this.entries;for(var key in entries)output.push(entries[key]);return output},has:function(key){return this.entries.hasOwnProperty(key)},delete:function(key){return this.has(key)&&(delete this.entries[key],this.size--),this},clear:function(){return Object.keys(this.entries).forEach((function(prop){delete this.entries[prop]}),this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var output=[],entries=this.entries;for(var key in entries)output.push(entries[key]);return output},dump:function(){var entries=this.entries;for(var key in console.group("Map"),entries)console.log(key,entries[key]);console.groupEnd()},each:function(callback){var entries=this.entries;for(var key in entries)if(!1===callback(key,entries[key]))break;return this},contains:function(value){var entries=this.entries;for(var key in entries)if(entries[key]===value)return!0;return!1},merge:function(map,override){void 0===override&&(override=!1);var local=this.entries,source=map.entries;for(var key in source)local.hasOwnProperty(key)&&override?local[key]=source[key]:this.set(key,source[key]);return this}});module.exports=Map},function(module,exports){module.exports=function(str,len,pad,dir){void 0===len&&(len=0),void 0===pad&&(pad=" "),void 0===dir&&(dir=3);var padlen=0;if(len+1>=(str=str.toString()).length)switch(dir){case 1:str=new Array(len+1-str.length).join(pad)+str;break;case 3:var right=Math.ceil((padlen=len-str.length)/2);str=new Array(padlen-right+1).join(pad)+str+new Array(right+1).join(pad);break;default:str+=new Array(len+1-str.length).join(pad)}return str}},function(module,exports,__webpack_require__){var HexStringToColor=__webpack_require__(297),IntegerToColor=__webpack_require__(300),ObjectToColor=__webpack_require__(302),RGBStringToColor=__webpack_require__(303);module.exports=function(input){switch(typeof input){case"string":return"rgb"===input.substr(0,3).toLowerCase()?RGBStringToColor(input):HexStringToColor(input);case"number":return IntegerToColor(input);case"object":return ObjectToColor(input)}}},function(module,exports){module.exports=function(red,green,blue){return red<<16|green<<8|blue}},function(module,exports,__webpack_require__){var GetColor=__webpack_require__(177);module.exports=function(h,s,v,out){void 0===s&&(s=1),void 0===v&&(v=1);var i=Math.floor(6*h),f=6*h-i,p=Math.floor(v*(1-s)*255),q=Math.floor(v*(1-f*s)*255),t=Math.floor(v*(1-(1-f)*s)*255),r=v=Math.floor(v*=255),g=v,b=v,c=i%6;return 0===c?(g=t,b=p):1===c?(r=q,b=p):2===c?(r=p,b=t):3===c?(r=p,g=q):4===c?(r=t,g=p):5===c&&(g=p,b=q),out?out.setTo?out.setTo(r,g,b,out.alpha,!1):(out.r=r,out.g=g,out.b=b,out.color=GetColor(r,g,b),out):{r:r,g:g,b:b,color:GetColor(r,g,b)}}},function(module,exports){module.exports=function(rect,x,y){return rect.x=x-rect.width/2,rect.y=y-rect.height/2,rect}},function(module,exports,__webpack_require__){var Back=__webpack_require__(305),Bounce=__webpack_require__(306),Circular=__webpack_require__(307),Cubic=__webpack_require__(308),Elastic=__webpack_require__(309),Expo=__webpack_require__(310),Linear=__webpack_require__(311),Quadratic=__webpack_require__(312),Quartic=__webpack_require__(313),Quintic=__webpack_require__(314),Sine=__webpack_require__(315),Stepped=__webpack_require__(316);module.exports={Power0:Linear,Power1:Quadratic.Out,Power2:Cubic.Out,Power3:Quartic.Out,Power4:Quintic.Out,Linear:Linear,Quad:Quadratic.Out,Cubic:Cubic.Out,Quart:Quartic.Out,Quint:Quintic.Out,Sine:Sine.Out,Expo:Expo.Out,Circ:Circular.Out,Elastic:Elastic.Out,Back:Back.Out,Bounce:Bounce.Out,Stepped:Stepped,"Quad.easeIn":Quadratic.In,"Cubic.easeIn":Cubic.In,"Quart.easeIn":Quartic.In,"Quint.easeIn":Quintic.In,"Sine.easeIn":Sine.In,"Expo.easeIn":Expo.In,"Circ.easeIn":Circular.In,"Elastic.easeIn":Elastic.In,"Back.easeIn":Back.In,"Bounce.easeIn":Bounce.In,"Quad.easeOut":Quadratic.Out,"Cubic.easeOut":Cubic.Out,"Quart.easeOut":Quartic.Out,"Quint.easeOut":Quintic.Out,"Sine.easeOut":Sine.Out,"Expo.easeOut":Expo.Out,"Circ.easeOut":Circular.Out,"Elastic.easeOut":Elastic.Out,"Back.easeOut":Back.Out,"Bounce.easeOut":Bounce.Out,"Quad.easeInOut":Quadratic.InOut,"Cubic.easeInOut":Cubic.InOut,"Quart.easeInOut":Quartic.InOut,"Quint.easeInOut":Quintic.InOut,"Sine.easeInOut":Sine.InOut,"Expo.easeInOut":Expo.InOut,"Circ.easeInOut":Circular.InOut,"Elastic.easeInOut":Elastic.InOut,"Back.easeInOut":Back.InOut,"Bounce.easeInOut":Bounce.InOut}},function(module,exports,__webpack_require__){var OS=__webpack_require__(127),Browser=__webpack_require__(128),CanvasPool=__webpack_require__(28),Features={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};module.exports=function(){Features.canvas=!!window.CanvasRenderingContext2D;try{Features.localStorage=!!localStorage.getItem}catch(error){Features.localStorage=!1}Features.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),Features.fileSystem=!!window.requestFileSystem;var a,b,c,isUint8=!1;return Features.webGL=function(){if(window.WebGLRenderingContext)try{var canvas=CanvasPool.createWebGL(this),ctx=canvas.getContext("webgl")||canvas.getContext("experimental-webgl"),canvas2D=CanvasPool.create2D(this),image=canvas2D.getContext("2d").createImageData(1,1);return isUint8=image.data instanceof Uint8ClampedArray,CanvasPool.remove(canvas),CanvasPool.remove(canvas2D),!!ctx}catch(e){return!1}return!1}(),Features.worker=!!window.Worker,Features.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,Features.getUserMedia=Features.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,Browser.firefox&&Browser.firefoxVersion<21&&(Features.getUserMedia=!1),!OS.iOS&&(Browser.ie||Browser.firefox||Browser.chrome)&&(Features.canvasBitBltShift=!0),(Browser.safari||Browser.mobileSafari)&&(Features.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(Features.vibration=!0),"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint32Array&&(Features.littleEndian=(a=new ArrayBuffer(4),b=new Uint8Array(a),c=new Uint32Array(a),b[0]=161,b[1]=178,b[2]=195,b[3]=212,3569595041===c[0]||2712847316!==c[0]&&null)),Features.support32bit="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof Int32Array&&null!==Features.littleEndian&&isUint8,Features}()},function(module,exports,__webpack_require__){var CONST=__webpack_require__(22),Extend=__webpack_require__(17),PhaserMath={Angle:__webpack_require__(731),Distance:__webpack_require__(739),Easing:__webpack_require__(741),Fuzzy:__webpack_require__(742),Interpolation:__webpack_require__(745),Pow2:__webpack_require__(750),Snap:__webpack_require__(752),RandomDataGenerator:__webpack_require__(754),Average:__webpack_require__(755),Bernstein:__webpack_require__(325),Between:__webpack_require__(185),CatmullRom:__webpack_require__(184),CeilTo:__webpack_require__(756),Clamp:__webpack_require__(25),DegToRad:__webpack_require__(41),Difference:__webpack_require__(757),Factorial:__webpack_require__(326),FloatBetween:__webpack_require__(332),FloorTo:__webpack_require__(758),FromPercent:__webpack_require__(100),GetSpeed:__webpack_require__(759),IsEven:__webpack_require__(760),IsEvenStrict:__webpack_require__(761),Linear:__webpack_require__(126),MaxAdd:__webpack_require__(762),MinSub:__webpack_require__(763),Percent:__webpack_require__(764),RadToDeg:__webpack_require__(186),RandomXY:__webpack_require__(765),RandomXYZ:__webpack_require__(333),RandomXYZW:__webpack_require__(334),Rotate:__webpack_require__(335),RotateAround:__webpack_require__(279),RotateAroundDistance:__webpack_require__(171),RoundAwayFromZero:__webpack_require__(336),RoundTo:__webpack_require__(766),SinCosTableGenerator:__webpack_require__(767),SmootherStep:__webpack_require__(172),SmoothStep:__webpack_require__(173),ToXY:__webpack_require__(768),TransformXY:__webpack_require__(337),Within:__webpack_require__(769),Wrap:__webpack_require__(64),Vector2:__webpack_require__(3),Vector3:__webpack_require__(85),Vector4:__webpack_require__(130),Matrix3:__webpack_require__(338),Matrix4:__webpack_require__(187),Quaternion:__webpack_require__(339),RotateVec3:__webpack_require__(340)};PhaserMath=Extend(!1,PhaserMath,CONST),module.exports=PhaserMath},function(module,exports){module.exports=function(a,b,epsilon){return void 0===epsilon&&(epsilon=1e-4),Math.abs(a-b)<epsilon}},function(module,exports){module.exports=function(t,p0,p1,p2,p3){var v0=.5*(p2-p0),v1=.5*(p3-p1),t2=t*t;return(2*p1-2*p2+v0+v1)*(t*t2)+(-3*p1+3*p2-2*v0-v1)*t2+v0*t+p1}},function(module,exports){module.exports=function(min,max){return Math.floor(Math.random()*(max-min+1)+min)}},function(module,exports,__webpack_require__){var CONST=__webpack_require__(22);module.exports=function(radians){return radians*CONST.RAD_TO_DEG}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Matrix4=new Class({initialize:function(m){this.val=new Float32Array(16),m?this.copy(m):this.identity()},clone:function(){return new Matrix4(this)},set:function(src){return this.copy(src)},copy:function(src){var out=this.val,a=src.val;return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[4]=a[4],out[5]=a[5],out[6]=a[6],out[7]=a[7],out[8]=a[8],out[9]=a[9],out[10]=a[10],out[11]=a[11],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15],this},fromArray:function(a){var out=this.val;return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[4]=a[4],out[5]=a[5],out[6]=a[6],out[7]=a[7],out[8]=a[8],out[9]=a[9],out[10]=a[10],out[11]=a[11],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15],this},zero:function(){var out=this.val;return out[0]=0,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=0,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[10]=0,out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=0,this},xyz:function(x,y,z){this.identity();var out=this.val;return out[12]=x,out[13]=y,out[14]=z,this},scaling:function(x,y,z){this.zero();var out=this.val;return out[0]=x,out[5]=y,out[10]=z,out[15]=1,this},identity:function(){var out=this.val;return out[0]=1,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=1,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[10]=1,out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=1,this},transpose:function(){var a=this.val,a01=a[1],a02=a[2],a03=a[3],a12=a[6],a13=a[7],a23=a[11];return a[1]=a[4],a[2]=a[8],a[3]=a[12],a[4]=a01,a[6]=a[9],a[7]=a[13],a[8]=a02,a[9]=a12,a[11]=a[14],a[12]=a03,a[13]=a13,a[14]=a23,this},invert:function(){var a=this.val,a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15],b00=a00*a11-a01*a10,b01=a00*a12-a02*a10,b02=a00*a13-a03*a10,b03=a01*a12-a02*a11,b04=a01*a13-a03*a11,b05=a02*a13-a03*a12,b06=a20*a31-a21*a30,b07=a20*a32-a22*a30,b08=a20*a33-a23*a30,b09=a21*a32-a22*a31,b10=a21*a33-a23*a31,b11=a22*a33-a23*a32,det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;return det?(det=1/det,a[0]=(a11*b11-a12*b10+a13*b09)*det,a[1]=(a02*b10-a01*b11-a03*b09)*det,a[2]=(a31*b05-a32*b04+a33*b03)*det,a[3]=(a22*b04-a21*b05-a23*b03)*det,a[4]=(a12*b08-a10*b11-a13*b07)*det,a[5]=(a00*b11-a02*b08+a03*b07)*det,a[6]=(a32*b02-a30*b05-a33*b01)*det,a[7]=(a20*b05-a22*b02+a23*b01)*det,a[8]=(a10*b10-a11*b08+a13*b06)*det,a[9]=(a01*b08-a00*b10-a03*b06)*det,a[10]=(a30*b04-a31*b02+a33*b00)*det,a[11]=(a21*b02-a20*b04-a23*b00)*det,a[12]=(a11*b07-a10*b09-a12*b06)*det,a[13]=(a00*b09-a01*b07+a02*b06)*det,a[14]=(a31*b01-a30*b03-a32*b00)*det,a[15]=(a20*b03-a21*b01+a22*b00)*det,this):null},adjoint:function(){var a=this.val,a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15];return a[0]=a11*(a22*a33-a23*a32)-a21*(a12*a33-a13*a32)+a31*(a12*a23-a13*a22),a[1]=-(a01*(a22*a33-a23*a32)-a21*(a02*a33-a03*a32)+a31*(a02*a23-a03*a22)),a[2]=a01*(a12*a33-a13*a32)-a11*(a02*a33-a03*a32)+a31*(a02*a13-a03*a12),a[3]=-(a01*(a12*a23-a13*a22)-a11*(a02*a23-a03*a22)+a21*(a02*a13-a03*a12)),a[4]=-(a10*(a22*a33-a23*a32)-a20*(a12*a33-a13*a32)+a30*(a12*a23-a13*a22)),a[5]=a00*(a22*a33-a23*a32)-a20*(a02*a33-a03*a32)+a30*(a02*a23-a03*a22),a[6]=-(a00*(a12*a33-a13*a32)-a10*(a02*a33-a03*a32)+a30*(a02*a13-a03*a12)),a[7]=a00*(a12*a23-a13*a22)-a10*(a02*a23-a03*a22)+a20*(a02*a13-a03*a12),a[8]=a10*(a21*a33-a23*a31)-a20*(a11*a33-a13*a31)+a30*(a11*a23-a13*a21),a[9]=-(a00*(a21*a33-a23*a31)-a20*(a01*a33-a03*a31)+a30*(a01*a23-a03*a21)),a[10]=a00*(a11*a33-a13*a31)-a10*(a01*a33-a03*a31)+a30*(a01*a13-a03*a11),a[11]=-(a00*(a11*a23-a13*a21)-a10*(a01*a23-a03*a21)+a20*(a01*a13-a03*a11)),a[12]=-(a10*(a21*a32-a22*a31)-a20*(a11*a32-a12*a31)+a30*(a11*a22-a12*a21)),a[13]=a00*(a21*a32-a22*a31)-a20*(a01*a32-a02*a31)+a30*(a01*a22-a02*a21),a[14]=-(a00*(a11*a32-a12*a31)-a10*(a01*a32-a02*a31)+a30*(a01*a12-a02*a11)),a[15]=a00*(a11*a22-a12*a21)-a10*(a01*a22-a02*a21)+a20*(a01*a12-a02*a11),this},determinant:function(){var a=this.val,a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15];return(a00*a11-a01*a10)*(a22*a33-a23*a32)-(a00*a12-a02*a10)*(a21*a33-a23*a31)+(a00*a13-a03*a10)*(a21*a32-a22*a31)+(a01*a12-a02*a11)*(a20*a33-a23*a30)-(a01*a13-a03*a11)*(a20*a32-a22*a30)+(a02*a13-a03*a12)*(a20*a31-a21*a30)},multiply:function(src){var a=this.val,a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15],b=src.val,b0=b[0],b1=b[1],b2=b[2],b3=b[3];return a[0]=b0*a00+b1*a10+b2*a20+b3*a30,a[1]=b0*a01+b1*a11+b2*a21+b3*a31,a[2]=b0*a02+b1*a12+b2*a22+b3*a32,a[3]=b0*a03+b1*a13+b2*a23+b3*a33,b0=b[4],b1=b[5],b2=b[6],b3=b[7],a[4]=b0*a00+b1*a10+b2*a20+b3*a30,a[5]=b0*a01+b1*a11+b2*a21+b3*a31,a[6]=b0*a02+b1*a12+b2*a22+b3*a32,a[7]=b0*a03+b1*a13+b2*a23+b3*a33,b0=b[8],b1=b[9],b2=b[10],b3=b[11],a[8]=b0*a00+b1*a10+b2*a20+b3*a30,a[9]=b0*a01+b1*a11+b2*a21+b3*a31,a[10]=b0*a02+b1*a12+b2*a22+b3*a32,a[11]=b0*a03+b1*a13+b2*a23+b3*a33,b0=b[12],b1=b[13],b2=b[14],b3=b[15],a[12]=b0*a00+b1*a10+b2*a20+b3*a30,a[13]=b0*a01+b1*a11+b2*a21+b3*a31,a[14]=b0*a02+b1*a12+b2*a22+b3*a32,a[15]=b0*a03+b1*a13+b2*a23+b3*a33,this},multiplyLocal:function(src){var a=[],m1=this.val,m2=src.val;return a[0]=m1[0]*m2[0]+m1[1]*m2[4]+m1[2]*m2[8]+m1[3]*m2[12],a[1]=m1[0]*m2[1]+m1[1]*m2[5]+m1[2]*m2[9]+m1[3]*m2[13],a[2]=m1[0]*m2[2]+m1[1]*m2[6]+m1[2]*m2[10]+m1[3]*m2[14],a[3]=m1[0]*m2[3]+m1[1]*m2[7]+m1[2]*m2[11]+m1[3]*m2[15],a[4]=m1[4]*m2[0]+m1[5]*m2[4]+m1[6]*m2[8]+m1[7]*m2[12],a[5]=m1[4]*m2[1]+m1[5]*m2[5]+m1[6]*m2[9]+m1[7]*m2[13],a[6]=m1[4]*m2[2]+m1[5]*m2[6]+m1[6]*m2[10]+m1[7]*m2[14],a[7]=m1[4]*m2[3]+m1[5]*m2[7]+m1[6]*m2[11]+m1[7]*m2[15],a[8]=m1[8]*m2[0]+m1[9]*m2[4]+m1[10]*m2[8]+m1[11]*m2[12],a[9]=m1[8]*m2[1]+m1[9]*m2[5]+m1[10]*m2[9]+m1[11]*m2[13],a[10]=m1[8]*m2[2]+m1[9]*m2[6]+m1[10]*m2[10]+m1[11]*m2[14],a[11]=m1[8]*m2[3]+m1[9]*m2[7]+m1[10]*m2[11]+m1[11]*m2[15],a[12]=m1[12]*m2[0]+m1[13]*m2[4]+m1[14]*m2[8]+m1[15]*m2[12],a[13]=m1[12]*m2[1]+m1[13]*m2[5]+m1[14]*m2[9]+m1[15]*m2[13],a[14]=m1[12]*m2[2]+m1[13]*m2[6]+m1[14]*m2[10]+m1[15]*m2[14],a[15]=m1[12]*m2[3]+m1[13]*m2[7]+m1[14]*m2[11]+m1[15]*m2[15],this.fromArray(a)},translate:function(v){var x=v.x,y=v.y,z=v.z,a=this.val;return a[12]=a[0]*x+a[4]*y+a[8]*z+a[12],a[13]=a[1]*x+a[5]*y+a[9]*z+a[13],a[14]=a[2]*x+a[6]*y+a[10]*z+a[14],a[15]=a[3]*x+a[7]*y+a[11]*z+a[15],this},translateXYZ:function(x,y,z){var a=this.val;return a[12]=a[0]*x+a[4]*y+a[8]*z+a[12],a[13]=a[1]*x+a[5]*y+a[9]*z+a[13],a[14]=a[2]*x+a[6]*y+a[10]*z+a[14],a[15]=a[3]*x+a[7]*y+a[11]*z+a[15],this},scale:function(v){var x=v.x,y=v.y,z=v.z,a=this.val;return a[0]=a[0]*x,a[1]=a[1]*x,a[2]=a[2]*x,a[3]=a[3]*x,a[4]=a[4]*y,a[5]=a[5]*y,a[6]=a[6]*y,a[7]=a[7]*y,a[8]=a[8]*z,a[9]=a[9]*z,a[10]=a[10]*z,a[11]=a[11]*z,this},scaleXYZ:function(x,y,z){var a=this.val;return a[0]=a[0]*x,a[1]=a[1]*x,a[2]=a[2]*x,a[3]=a[3]*x,a[4]=a[4]*y,a[5]=a[5]*y,a[6]=a[6]*y,a[7]=a[7]*y,a[8]=a[8]*z,a[9]=a[9]*z,a[10]=a[10]*z,a[11]=a[11]*z,this},makeRotationAxis:function(axis,angle){var c=Math.cos(angle),s=Math.sin(angle),t=1-c,x=axis.x,y=axis.y,z=axis.z,tx=t*x,ty=t*y;return this.fromArray([tx*x+c,tx*y-s*z,tx*z+s*y,0,tx*y+s*z,ty*y+c,ty*z-s*x,0,tx*z-s*y,ty*z+s*x,t*z*z+c,0,0,0,0,1]),this},rotate:function(rad,axis){var a=this.val,x=axis.x,y=axis.y,z=axis.z,len=Math.sqrt(x*x+y*y+z*z);if(Math.abs(len)<1e-6)return null;x*=len=1/len,y*=len,z*=len;var s=Math.sin(rad),c=Math.cos(rad),t=1-c,a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],b00=x*x*t+c,b01=y*x*t+z*s,b02=z*x*t-y*s,b10=x*y*t-z*s,b11=y*y*t+c,b12=z*y*t+x*s,b20=x*z*t+y*s,b21=y*z*t-x*s,b22=z*z*t+c;return a[0]=a00*b00+a10*b01+a20*b02,a[1]=a01*b00+a11*b01+a21*b02,a[2]=a02*b00+a12*b01+a22*b02,a[3]=a03*b00+a13*b01+a23*b02,a[4]=a00*b10+a10*b11+a20*b12,a[5]=a01*b10+a11*b11+a21*b12,a[6]=a02*b10+a12*b11+a22*b12,a[7]=a03*b10+a13*b11+a23*b12,a[8]=a00*b20+a10*b21+a20*b22,a[9]=a01*b20+a11*b21+a21*b22,a[10]=a02*b20+a12*b21+a22*b22,a[11]=a03*b20+a13*b21+a23*b22,this},rotateX:function(rad){var a=this.val,s=Math.sin(rad),c=Math.cos(rad),a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11];return a[4]=a10*c+a20*s,a[5]=a11*c+a21*s,a[6]=a12*c+a22*s,a[7]=a13*c+a23*s,a[8]=a20*c-a10*s,a[9]=a21*c-a11*s,a[10]=a22*c-a12*s,a[11]=a23*c-a13*s,this},rotateY:function(rad){var a=this.val,s=Math.sin(rad),c=Math.cos(rad),a00=a[0],a01=a[1],a02=a[2],a03=a[3],a20=a[8],a21=a[9],a22=a[10],a23=a[11];return a[0]=a00*c-a20*s,a[1]=a01*c-a21*s,a[2]=a02*c-a22*s,a[3]=a03*c-a23*s,a[8]=a00*s+a20*c,a[9]=a01*s+a21*c,a[10]=a02*s+a22*c,a[11]=a03*s+a23*c,this},rotateZ:function(rad){var a=this.val,s=Math.sin(rad),c=Math.cos(rad),a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7];return a[0]=a00*c+a10*s,a[1]=a01*c+a11*s,a[2]=a02*c+a12*s,a[3]=a03*c+a13*s,a[4]=a10*c-a00*s,a[5]=a11*c-a01*s,a[6]=a12*c-a02*s,a[7]=a13*c-a03*s,this},fromRotationTranslation:function(q,v){var out=this.val,x=q.x,y=q.y,z=q.z,w=q.w,x2=x+x,y2=y+y,z2=z+z,xx=x*x2,xy=x*y2,xz=x*z2,yy=y*y2,yz=y*z2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2;return out[0]=1-(yy+zz),out[1]=xy+wz,out[2]=xz-wy,out[3]=0,out[4]=xy-wz,out[5]=1-(xx+zz),out[6]=yz+wx,out[7]=0,out[8]=xz+wy,out[9]=yz-wx,out[10]=1-(xx+yy),out[11]=0,out[12]=v.x,out[13]=v.y,out[14]=v.z,out[15]=1,this},fromQuat:function(q){var out=this.val,x=q.x,y=q.y,z=q.z,w=q.w,x2=x+x,y2=y+y,z2=z+z,xx=x*x2,xy=x*y2,xz=x*z2,yy=y*y2,yz=y*z2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2;return out[0]=1-(yy+zz),out[1]=xy+wz,out[2]=xz-wy,out[3]=0,out[4]=xy-wz,out[5]=1-(xx+zz),out[6]=yz+wx,out[7]=0,out[8]=xz+wy,out[9]=yz-wx,out[10]=1-(xx+yy),out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=1,this},frustum:function(left,right,bottom,top,near,far){var out=this.val,rl=1/(right-left),tb=1/(top-bottom),nf=1/(near-far);return out[0]=2*near*rl,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=2*near*tb,out[6]=0,out[7]=0,out[8]=(right+left)*rl,out[9]=(top+bottom)*tb,out[10]=(far+near)*nf,out[11]=-1,out[12]=0,out[13]=0,out[14]=far*near*2*nf,out[15]=0,this},perspective:function(fovy,aspect,near,far){var out=this.val,f=1/Math.tan(fovy/2),nf=1/(near-far);return out[0]=f/aspect,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=f,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[10]=(far+near)*nf,out[11]=-1,out[12]=0,out[13]=0,out[14]=2*far*near*nf,out[15]=0,this},perspectiveLH:function(width,height,near,far){var out=this.val;return out[0]=2*near/width,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=2*near/height,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[10]=-far/(near-far),out[11]=1,out[12]=0,out[13]=0,out[14]=near*far/(near-far),out[15]=0,this},ortho:function(left,right,bottom,top,near,far){var out=this.val,lr=left-right,bt=bottom-top,nf=near-far;return lr=0===lr?lr:1/lr,bt=0===bt?bt:1/bt,nf=0===nf?nf:1/nf,out[0]=-2*lr,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=-2*bt,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[10]=2*nf,out[11]=0,out[12]=(left+right)*lr,out[13]=(top+bottom)*bt,out[14]=(far+near)*nf,out[15]=1,this},lookAt:function(eye,center,up){var out=this.val,eyex=eye.x,eyey=eye.y,eyez=eye.z,upx=up.x,upy=up.y,upz=up.z,centerx=center.x,centery=center.y,centerz=center.z;if(Math.abs(eyex-centerx)<1e-6&&Math.abs(eyey-centery)<1e-6&&Math.abs(eyez-centerz)<1e-6)return this.identity();var z0=eyex-centerx,z1=eyey-centery,z2=eyez-centerz,len=1/Math.sqrt(z0*z0+z1*z1+z2*z2),x0=upy*(z2*=len)-upz*(z1*=len),x1=upz*(z0*=len)-upx*z2,x2=upx*z1-upy*z0;(len=Math.sqrt(x0*x0+x1*x1+x2*x2))?(x0*=len=1/len,x1*=len,x2*=len):(x0=0,x1=0,x2=0);var y0=z1*x2-z2*x1,y1=z2*x0-z0*x2,y2=z0*x1-z1*x0;return(len=Math.sqrt(y0*y0+y1*y1+y2*y2))?(y0*=len=1/len,y1*=len,y2*=len):(y0=0,y1=0,y2=0),out[0]=x0,out[1]=y0,out[2]=z0,out[3]=0,out[4]=x1,out[5]=y1,out[6]=z1,out[7]=0,out[8]=x2,out[9]=y2,out[10]=z2,out[11]=0,out[12]=-(x0*eyex+x1*eyey+x2*eyez),out[13]=-(y0*eyex+y1*eyey+y2*eyez),out[14]=-(z0*eyex+z1*eyey+z2*eyez),out[15]=1,this},yawPitchRoll:function(yaw,pitch,roll){this.zero(),_tempMat1.zero(),_tempMat2.zero();var m0=this.val,m1=_tempMat1.val,m2=_tempMat2.val,s=Math.sin(roll),c=Math.cos(roll);return m0[10]=1,m0[15]=1,m0[0]=c,m0[1]=s,m0[4]=-s,m0[5]=c,s=Math.sin(pitch),c=Math.cos(pitch),m1[0]=1,m1[15]=1,m1[5]=c,m1[10]=c,m1[9]=-s,m1[6]=s,s=Math.sin(yaw),c=Math.cos(yaw),m2[5]=1,m2[15]=1,m2[0]=c,m2[2]=-s,m2[8]=s,m2[10]=c,this.multiplyLocal(_tempMat1),this.multiplyLocal(_tempMat2),this},setWorldMatrix:function(rotation,position,scale,viewMatrix,projectionMatrix){return this.yawPitchRoll(rotation.y,rotation.x,rotation.z),_tempMat1.scaling(scale.x,scale.y,scale.z),_tempMat2.xyz(position.x,position.y,position.z),this.multiplyLocal(_tempMat1),this.multiplyLocal(_tempMat2),void 0!==viewMatrix&&this.multiplyLocal(viewMatrix),void 0!==projectionMatrix&&this.multiplyLocal(projectionMatrix),this}}),_tempMat1=new Matrix4,_tempMat2=new Matrix4;module.exports=Matrix4},function(module,exports){var DefaultPlugins={Global:["game","anims","cache","plugins","registry","scale","sound","textures"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};DefaultPlugins.DefaultScene.push("CameraManager3D"),DefaultPlugins.Global.push("facebook"),module.exports=DefaultPlugins},function(module,exports,__webpack_require__){var CanvasSnapshot=__webpack_require__(343),CameraEvents=__webpack_require__(55),Class=__webpack_require__(0),CONST=__webpack_require__(35),GetBlendModes=__webpack_require__(344),ScaleEvents=__webpack_require__(104),ScaleModes=__webpack_require__(99),Smoothing=__webpack_require__(125),TransformMatrix=__webpack_require__(36),CanvasRenderer=new Class({initialize:function(game){this.game=game,this.type=CONST.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.config={clearBeforeRender:game.config.clearBeforeRender,backgroundColor:game.config.backgroundColor,resolution:game.config.resolution,antialias:game.config.antialias,roundPixels:game.config.roundPixels},this.scaleMode=game.config.antialias?ScaleModes.LINEAR:ScaleModes.NEAREST,this.gameCanvas=game.canvas;var contextOptions={alpha:game.config.transparent,desynchronized:game.config.desynchronized};this.gameContext=this.game.config.context?this.game.config.context:this.gameCanvas.getContext("2d",contextOptions),this.currentContext=this.gameContext,this.blendModes=GetBlendModes(),this.currentScaleMode=0,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new TransformMatrix,this._tempMatrix2=new TransformMatrix,this._tempMatrix3=new TransformMatrix,this._tempMatrix4=new TransformMatrix,this.init()},init:function(){this.game.scale.on(ScaleEvents.RESIZE,this.onResize,this);var baseSize=this.game.scale.baseSize;this.resize(baseSize.width,baseSize.height)},onResize:function(gameSize,baseSize){baseSize.width===this.width&&baseSize.height===this.height||this.resize(baseSize.width,baseSize.height)},resize:function(width,height){this.width=width,this.height=height,this.scaleMode===ScaleModes.NEAREST&&Smoothing.disable(this.gameContext)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(blendMode){return this.currentContext.globalCompositeOperation=blendMode,this},setContext:function(ctx){return this.currentContext=ctx||this.gameContext,this},setAlpha:function(alpha){return this.currentContext.globalAlpha=alpha,this},preRender:function(){var ctx=this.gameContext,config=this.config,width=this.width,height=this.height;ctx.globalAlpha=1,ctx.globalCompositeOperation="source-over",ctx.setTransform(1,0,0,1,0,0),config.clearBeforeRender&&ctx.clearRect(0,0,width,height),config.transparent||(ctx.fillStyle=config.backgroundColor.rgba,ctx.fillRect(0,0,width,height)),ctx.save(),this.drawCount=0},render:function(scene,children,interpolationPercentage,camera){var list=children.list,childCount=list.length,cx=camera._cx,cy=camera._cy,cw=camera._cw,ch=camera._ch,ctx=camera.renderToTexture?camera.context:scene.sys.context;ctx.save(),this.game.scene.customViewports&&(ctx.beginPath(),ctx.rect(cx,cy,cw,ch),ctx.clip()),this.currentContext=ctx;var mask=camera.mask;mask&&mask.preRenderCanvas(this,null,camera._maskCamera),camera.transparent||(ctx.fillStyle=camera.backgroundColor.rgba,ctx.fillRect(cx,cy,cw,ch)),ctx.globalAlpha=camera.alpha,ctx.globalCompositeOperation="source-over",this.drawCount+=list.length,camera.renderToTexture&&camera.emit(CameraEvents.PRE_RENDER,camera),camera.matrix.copyToContext(ctx);for(var i=0;i<childCount;i++){var child=list[i];child.willRender(camera)&&(child.mask&&child.mask.preRenderCanvas(this,child,camera),child.renderCanvas(this,child,interpolationPercentage,camera),child.mask&&child.mask.postRenderCanvas(this,child,camera))}ctx.setTransform(1,0,0,1,0,0),ctx.globalCompositeOperation="source-over",ctx.globalAlpha=1,camera.flashEffect.postRenderCanvas(ctx),camera.fadeEffect.postRenderCanvas(ctx),camera.dirty=!1,mask&&mask.postRenderCanvas(this),ctx.restore(),camera.renderToTexture&&(camera.emit(CameraEvents.POST_RENDER,camera),scene.sys.context.drawImage(camera.canvas,cx,cy))},postRender:function(){this.gameContext.restore();var state=this.snapshotState;state.callback&&(CanvasSnapshot(this.gameCanvas,state),state.callback=null)},snapshotCanvas:function(canvas,callback,getPixel,x,y,width,height,type,encoderOptions){void 0===getPixel&&(getPixel=!1),this.snapshotArea(x,y,width,height,callback,type,encoderOptions);var state=this.snapshotState;return state.getPixel=getPixel,CanvasSnapshot(this.canvas,state),state.callback=null,this},snapshot:function(callback,type,encoderOptions){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,callback,type,encoderOptions)},snapshotArea:function(x,y,width,height,callback,type,encoderOptions){var state=this.snapshotState;return state.callback=callback,state.type=type,state.encoder=encoderOptions,state.getPixel=!1,state.x=x,state.y=y,state.width=Math.min(width,this.gameCanvas.width),state.height=Math.min(height,this.gameCanvas.height),this},snapshotPixel:function(x,y,callback){return this.snapshotArea(x,y,1,1,callback),this.snapshotState.getPixel=!0,this},batchSprite:function(sprite,frame,camera,parentTransformMatrix){var alpha=camera.alpha*sprite.alpha;if(0!==alpha){var ctx=this.currentContext,camMatrix=this._tempMatrix1,spriteMatrix=this._tempMatrix2,calcMatrix=this._tempMatrix3,cd=frame.canvasData,frameX=cd.x,frameY=cd.y,frameWidth=frame.cutWidth,frameHeight=frame.cutHeight,customPivot=frame.customPivot,res=frame.source.resolution,displayOriginX=sprite.displayOriginX,displayOriginY=sprite.displayOriginY,x=-displayOriginX+frame.x,y=-displayOriginY+frame.y;if(sprite.isCropped){var crop=sprite._crop;crop.flipX===sprite.flipX&&crop.flipY===sprite.flipY||frame.updateCropUVs(crop,sprite.flipX,sprite.flipY),frameWidth=crop.cw,frameHeight=crop.ch,frameX=crop.cx,frameY=crop.cy,x=-displayOriginX+crop.x,y=-displayOriginY+crop.y,sprite.flipX&&(x>=0?x=-(x+frameWidth):x<0&&(x=Math.abs(x)-frameWidth)),sprite.flipY&&(y>=0?y=-(y+frameHeight):y<0&&(y=Math.abs(y)-frameHeight))}var flipX=1,flipY=1;sprite.flipX&&(customPivot||(x+=-frame.realWidth+2*displayOriginX),flipX=-1),sprite.flipY&&(customPivot||(y+=-frame.realHeight+2*displayOriginY),flipY=-1),spriteMatrix.applyITRS(sprite.x,sprite.y,sprite.rotation,sprite.scaleX*flipX,sprite.scaleY*flipY),camMatrix.copyFrom(camera.matrix),parentTransformMatrix?(camMatrix.multiplyWithOffset(parentTransformMatrix,-camera.scrollX*sprite.scrollFactorX,-camera.scrollY*sprite.scrollFactorY),spriteMatrix.e=sprite.x,spriteMatrix.f=sprite.y,camMatrix.multiply(spriteMatrix,calcMatrix)):(spriteMatrix.e-=camera.scrollX*sprite.scrollFactorX,spriteMatrix.f-=camera.scrollY*sprite.scrollFactorY,camMatrix.multiply(spriteMatrix,calcMatrix)),ctx.save(),calcMatrix.setToContext(ctx),ctx.globalCompositeOperation=this.blendModes[sprite.blendMode],ctx.globalAlpha=alpha,ctx.drawImage(frame.source.image,frameX,frameY,frameWidth,frameHeight,x,y,frameWidth/res,frameHeight/res),ctx.restore()}},destroy:function(){this.gameCanvas=null,this.gameContext=null,this.game=null}});module.exports=CanvasRenderer},function(module,exports,__webpack_require__){var BaseCamera=__webpack_require__(124),CameraEvents=__webpack_require__(55),Class=__webpack_require__(0),CONST=__webpack_require__(35),GameEvents=__webpack_require__(23),IsSizePowerOfTwo=__webpack_require__(129),NOOP=__webpack_require__(2),ScaleEvents=__webpack_require__(104),SpliceOne=__webpack_require__(86),TextureEvents=__webpack_require__(131),TransformMatrix=__webpack_require__(36),Utils=__webpack_require__(10),WebGLSnapshot=__webpack_require__(345),BitmapMaskPipeline=__webpack_require__(346),ForwardDiffuseLightPipeline=__webpack_require__(347),TextureTintPipeline=__webpack_require__(192),WebGLRenderer=new Class({initialize:function(game){var gameConfig=game.config,contextCreationConfig={alpha:gameConfig.transparent,desynchronized:gameConfig.desynchronized,depth:!1,antialias:gameConfig.antialias,premultipliedAlpha:gameConfig.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:gameConfig.failIfMajorPerformanceCaveat,powerPreference:gameConfig.powerPreference};this.config={clearBeforeRender:gameConfig.clearBeforeRender,antialias:gameConfig.antialias,backgroundColor:gameConfig.backgroundColor,contextCreation:contextCreationConfig,resolution:gameConfig.resolution,roundPixels:gameConfig.roundPixels,maxTextures:gameConfig.maxTextures,maxTextureSize:gameConfig.maxTextureSize,batchSize:gameConfig.batchSize,maxLights:gameConfig.maxLights},this.game=game,this.type=CONST.WEBGL,this.width=0,this.height=0,this.canvas=game.canvas,this.blendModes=[],this.nativeTextures=[],this.contextLost=!1,this.pipelines=null,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTextureUnit=0,this.currentTextures=new Array(16),this.currentFramebuffer=null,this.currentPipeline=null,this.currentProgram=null,this.currentVertexBuffer=null,this.currentIndexBuffer=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=NOOP,this.contextRestoredHandler=NOOP,this.gl=null,this.supportedExtensions=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.defaultCamera=new BaseCamera(0,0,0,0),this._tempMatrix1=new TransformMatrix,this._tempMatrix2=new TransformMatrix,this._tempMatrix3=new TransformMatrix,this._tempMatrix4=new TransformMatrix,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.init(this.config)},init:function(config){var gl,game=this.game,canvas=this.canvas,clearColor=config.backgroundColor;if(!(gl=game.config.context?game.config.context:canvas.getContext("webgl",config.contextCreation)||canvas.getContext("experimental-webgl",config.contextCreation))||gl.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=gl;var _this=this;this.contextLostHandler=function(event){_this.contextLost=!0,_this.game.events.emit(GameEvents.CONTEXT_LOST,_this),event.preventDefault()},this.contextRestoredHandler=function(){_this.contextLost=!1,_this.init(_this.config),_this.game.events.emit(GameEvents.CONTEXT_RESTORED,_this)},canvas.addEventListener("webglcontextlost",this.contextLostHandler,!1),canvas.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),game.context=gl;for(var i=0;i<=27;i++)this.blendModes.push({func:[gl.ONE,gl.ONE_MINUS_SRC_ALPHA],equation:gl.FUNC_ADD});this.blendModes[1].func=[gl.ONE,gl.DST_ALPHA],this.blendModes[2].func=[gl.DST_COLOR,gl.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[gl.ONE,gl.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[gl.ZERO,gl.ONE_MINUS_SRC_ALPHA],equation:gl.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=gl.BYTE,this.glFormats[1]=gl.SHORT,this.glFormats[2]=gl.UNSIGNED_BYTE,this.glFormats[3]=gl.UNSIGNED_SHORT,this.glFormats[4]=gl.FLOAT,this.glFuncMap={mat2:{func:gl.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:gl.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:gl.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:gl.uniform1f,length:1},"1fv":{func:gl.uniform1fv,length:1},"1i":{func:gl.uniform1i,length:1},"1iv":{func:gl.uniform1iv,length:1},"2f":{func:gl.uniform2f,length:2},"2fv":{func:gl.uniform2fv,length:1},"2i":{func:gl.uniform2i,length:2},"2iv":{func:gl.uniform2iv,length:1},"3f":{func:gl.uniform3f,length:3},"3fv":{func:gl.uniform3fv,length:1},"3i":{func:gl.uniform3i,length:3},"3iv":{func:gl.uniform3iv,length:1},"4f":{func:gl.uniform4f,length:4},"4fv":{func:gl.uniform4fv,length:1},"4i":{func:gl.uniform4i,length:4},"4iv":{func:gl.uniform4iv,length:1}};var exts=gl.getSupportedExtensions();config.maxTextures||(config.maxTextures=gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS)),config.maxTextureSize||(config.maxTextureSize=gl.getParameter(gl.MAX_TEXTURE_SIZE));var extString="WEBGL_compressed_texture_",wkExtString="WEBKIT_"+extString;this.compression.ETC1=gl.getExtension(extString+"etc1")||gl.getExtension(wkExtString+"etc1"),this.compression.PVRTC=gl.getExtension(extString+"pvrtc")||gl.getExtension(wkExtString+"pvrtc"),this.compression.S3TC=gl.getExtension(extString+"s3tc")||gl.getExtension(wkExtString+"s3tc"),this.supportedExtensions=exts,gl.disable(gl.DEPTH_TEST),gl.disable(gl.CULL_FACE),gl.enable(gl.BLEND),gl.clearColor(clearColor.redGL,clearColor.greenGL,clearColor.blueGL,clearColor.alphaGL);for(var index=0;index<this.currentTextures.length;++index)this.currentTextures[index]=null;return this.pipelines={},this.addPipeline("TextureTintPipeline",new TextureTintPipeline({game:game,renderer:this})),this.addPipeline("BitmapMaskPipeline",new BitmapMaskPipeline({game:game,renderer:this})),this.addPipeline("Light2D",new ForwardDiffuseLightPipeline({game:game,renderer:this,maxLights:config.maxLights})),this.setBlendMode(CONST.BlendModes.NORMAL),game.textures.once(TextureEvents.READY,this.boot,this),this},boot:function(){for(var pipelineName in this.pipelines)this.pipelines[pipelineName].boot();var blank=this.game.textures.getFrame("__DEFAULT");this.pipelines.TextureTintPipeline.currentFrame=blank,this.blankTexture=blank;var gl=this.gl;gl.bindFramebuffer(gl.FRAMEBUFFER,null),gl.enable(gl.SCISSOR_TEST),this.setPipeline(this.pipelines.TextureTintPipeline),this.game.scale.on(ScaleEvents.RESIZE,this.onResize,this);var baseSize=this.game.scale.baseSize;this.resize(baseSize.width,baseSize.height,this.game.scale.resolution)},onResize:function(gameSize,baseSize,displaySize,resolution){baseSize.width===this.width&&baseSize.height===this.height&&resolution===this.resolution||this.resize(baseSize.width,baseSize.height,resolution)},resize:function(width,height,resolution){var gl=this.gl,pipelines=this.pipelines;for(var pipelineName in this.width=width,this.height=height,this.resolution=resolution,gl.viewport(0,0,width,height),pipelines)pipelines[pipelineName].resize(width,height,resolution);return this.drawingBufferHeight=gl.drawingBufferHeight,gl.scissor(0,gl.drawingBufferHeight-height,width,height),this.defaultCamera.setSize(width,height),this},hasExtension:function(extensionName){return!!this.supportedExtensions&&this.supportedExtensions.indexOf(extensionName)},getExtension:function(extensionName){return this.hasExtension(extensionName)?(extensionName in this.extensions||(this.extensions[extensionName]=this.gl.getExtension(extensionName)),this.extensions[extensionName]):null},flush:function(){this.currentPipeline&&this.currentPipeline.flush()},hasPipeline:function(pipelineName){return pipelineName in this.pipelines},getPipeline:function(pipelineName){return this.hasPipeline(pipelineName)?this.pipelines[pipelineName]:null},removePipeline:function(pipelineName){return delete this.pipelines[pipelineName],this},addPipeline:function(pipelineName,pipelineInstance){return this.hasPipeline(pipelineName)?console.warn("Pipeline exists: "+pipelineName):this.pipelines[pipelineName]=pipelineInstance,pipelineInstance.name=pipelineName,this.pipelines[pipelineName].resize(this.width,this.height,this.config.resolution),pipelineInstance},pushScissor:function(x,y,width,height,drawingBufferHeight){void 0===drawingBufferHeight&&(drawingBufferHeight=this.drawingBufferHeight);var scissor=[x,y,width,height];return this.scissorStack.push(scissor),this.setScissor(x,y,width,height,drawingBufferHeight),this.currentScissor=scissor,scissor},setScissor:function(x,y,width,height,drawingBufferHeight){void 0===drawingBufferHeight&&(drawingBufferHeight=this.drawingBufferHeight);var gl=this.gl,current=this.currentScissor,setScissor=width>0&&height>0;if(current&&setScissor){var cx=current[0],cy=current[1],cw=current[2],ch=current[3];setScissor=cx!==x||cy!==y||cw!==width||ch!==height}setScissor&&(this.flush(),gl.scissor(x,drawingBufferHeight-y-height,width,height))},popScissor:function(){var scissorStack=this.scissorStack;scissorStack.pop();var scissor=scissorStack[scissorStack.length-1];scissor&&this.setScissor(scissor[0],scissor[1],scissor[2],scissor[3]),this.currentScissor=scissor},setPipeline:function(pipelineInstance,gameObject){return this.currentPipeline===pipelineInstance&&this.currentPipeline.vertexBuffer===this.currentVertexBuffer&&this.currentPipeline.program===this.currentProgram||(this.flush(),this.currentPipeline=pipelineInstance,this.currentPipeline.bind()),this.currentPipeline.onBind(gameObject),this.currentPipeline},hasActiveStencilMask:function(){var mask=this.currentMask.mask,camMask=this.currentCameraMask.mask;return mask&&mask.isStencil||camMask&&camMask.isStencil},rebindPipeline:function(pipelineInstance){var gl=this.gl;gl.disable(gl.DEPTH_TEST),gl.disable(gl.CULL_FACE),this.hasActiveStencilMask()?gl.clear(gl.DEPTH_BUFFER_BIT):(gl.disable(gl.STENCIL_TEST),gl.clear(gl.DEPTH_BUFFER_BIT|gl.STENCIL_BUFFER_BIT)),gl.viewport(0,0,this.width,this.height),this.setBlendMode(0,!0),gl.activeTexture(gl.TEXTURE0),gl.bindTexture(gl.TEXTURE_2D,this.blankTexture.glTexture),this.currentActiveTextureUnit=0,this.currentTextures[0]=this.blankTexture.glTexture,this.currentPipeline=pipelineInstance,this.currentPipeline.bind(),this.currentPipeline.onBind()},clearPipeline:function(){this.flush(),this.currentPipeline=null,this.currentProgram=null,this.currentVertexBuffer=null,this.currentIndexBuffer=null,this.setBlendMode(0,!0)},setBlendMode:function(blendModeId,force){void 0===force&&(force=!1);var gl=this.gl,blendMode=this.blendModes[blendModeId];return!!(force||blendModeId!==CONST.BlendModes.SKIP_CHECK&&this.currentBlendMode!==blendModeId)&&(this.flush(),gl.enable(gl.BLEND),gl.blendEquation(blendMode.equation),blendMode.func.length>2?gl.blendFuncSeparate(blendMode.func[0],blendMode.func[1],blendMode.func[2],blendMode.func[3]):gl.blendFunc(blendMode.func[0],blendMode.func[1]),this.currentBlendMode=blendModeId,!0)},addBlendMode:function(func,equation){return this.blendModes.push({func:func,equation:equation})-1},updateBlendMode:function(index,func,equation){return this.blendModes[index]&&(this.blendModes[index].func=func,equation&&(this.blendModes[index].equation=equation)),this},removeBlendMode:function(index){return index>17&&this.blendModes[index]&&this.blendModes.splice(index,1),this},setBlankTexture:function(force){void 0===force&&(force=!1),!force&&0===this.currentActiveTextureUnit&&this.currentTextures[0]||this.setTexture2D(this.blankTexture.glTexture,0)},setTexture2D:function(texture,textureUnit,flush){void 0===flush&&(flush=!0);var gl=this.gl;return texture!==this.currentTextures[textureUnit]&&(flush&&this.flush(),this.currentActiveTextureUnit!==textureUnit&&(gl.activeTexture(gl.TEXTURE0+textureUnit),this.currentActiveTextureUnit=textureUnit),gl.bindTexture(gl.TEXTURE_2D,texture),this.currentTextures[textureUnit]=texture),this},setFramebuffer:function(framebuffer,updateScissor){void 0===updateScissor&&(updateScissor=!1);var gl=this.gl,width=this.width,height=this.height;return framebuffer!==this.currentFramebuffer&&(framebuffer&&framebuffer.renderTexture?(width=framebuffer.renderTexture.width,height=framebuffer.renderTexture.height):this.flush(),gl.bindFramebuffer(gl.FRAMEBUFFER,framebuffer),gl.viewport(0,0,width,height),updateScissor&&(framebuffer?(this.drawingBufferHeight=height,this.pushScissor(0,0,width,height)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=framebuffer),this},setProgram:function(program){var gl=this.gl;return program!==this.currentProgram&&(this.flush(),gl.useProgram(program),this.currentProgram=program),this},setVertexBuffer:function(vertexBuffer){var gl=this.gl;return vertexBuffer!==this.currentVertexBuffer&&(this.flush(),gl.bindBuffer(gl.ARRAY_BUFFER,vertexBuffer),this.currentVertexBuffer=vertexBuffer),this},setIndexBuffer:function(indexBuffer){var gl=this.gl;return indexBuffer!==this.currentIndexBuffer&&(this.flush(),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,indexBuffer),this.currentIndexBuffer=indexBuffer),this},createTextureFromSource:function(source,width,height,scaleMode){var gl=this.gl,filter=gl.NEAREST,wrap=gl.CLAMP_TO_EDGE;return width=source?source.width:width,height=source?source.height:height,IsSizePowerOfTwo(width,height)&&(wrap=gl.REPEAT),scaleMode===CONST.ScaleModes.LINEAR&&this.config.antialias&&(filter=gl.LINEAR),source||"number"!=typeof width||"number"!=typeof height?this.createTexture2D(0,filter,filter,wrap,wrap,gl.RGBA,source):this.createTexture2D(0,filter,filter,wrap,wrap,gl.RGBA,null,width,height)},createTexture2D:function(mipLevel,minFilter,magFilter,wrapT,wrapS,format,pixels,width,height,pma){pma=null==pma||pma;var gl=this.gl,texture=gl.createTexture();return this.setTexture2D(texture,0),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,minFilter),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,magFilter),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,wrapS),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,wrapT),gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,pma),null==pixels?gl.texImage2D(gl.TEXTURE_2D,mipLevel,format,width,height,0,format,gl.UNSIGNED_BYTE,null):(gl.texImage2D(gl.TEXTURE_2D,mipLevel,format,format,gl.UNSIGNED_BYTE,pixels),width=pixels.width,height=pixels.height),this.setTexture2D(null,0),texture.isAlphaPremultiplied=pma,texture.isRenderTexture=!1,texture.width=width,texture.height=height,this.nativeTextures.push(texture),texture},createFramebuffer:function(width,height,renderTexture,addDepthStencilBuffer){var complete,gl=this.gl,framebuffer=gl.createFramebuffer();if(this.setFramebuffer(framebuffer),addDepthStencilBuffer){var depthStencilBuffer=gl.createRenderbuffer();gl.bindRenderbuffer(gl.RENDERBUFFER,depthStencilBuffer),gl.renderbufferStorage(gl.RENDERBUFFER,gl.DEPTH_STENCIL,width,height),gl.framebufferRenderbuffer(gl.FRAMEBUFFER,gl.DEPTH_STENCIL_ATTACHMENT,gl.RENDERBUFFER,depthStencilBuffer)}if(renderTexture.isRenderTexture=!0,renderTexture.isAlphaPremultiplied=!1,gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.TEXTURE_2D,renderTexture,0),(complete=gl.checkFramebufferStatus(gl.FRAMEBUFFER))!==gl.FRAMEBUFFER_COMPLETE){throw new Error("Framebuffer incomplete. Framebuffer status: "+{36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"}[complete])}return framebuffer.renderTexture=renderTexture,this.setFramebuffer(null),framebuffer},createProgram:function(vertexShader,fragmentShader){var gl=this.gl,program=gl.createProgram(),vs=gl.createShader(gl.VERTEX_SHADER),fs=gl.createShader(gl.FRAGMENT_SHADER);if(gl.shaderSource(vs,vertexShader),gl.shaderSource(fs,fragmentShader),gl.compileShader(vs),gl.compileShader(fs),!gl.getShaderParameter(vs,gl.COMPILE_STATUS))throw new Error("Failed to compile Vertex Shader:\n"+gl.getShaderInfoLog(vs));if(!gl.getShaderParameter(fs,gl.COMPILE_STATUS))throw new Error("Failed to compile Fragment Shader:\n"+gl.getShaderInfoLog(fs));if(gl.attachShader(program,vs),gl.attachShader(program,fs),gl.linkProgram(program),!gl.getProgramParameter(program,gl.LINK_STATUS))throw new Error("Failed to link program:\n"+gl.getProgramInfoLog(program));return program},createVertexBuffer:function(initialDataOrSize,bufferUsage){var gl=this.gl,vertexBuffer=gl.createBuffer();return this.setVertexBuffer(vertexBuffer),gl.bufferData(gl.ARRAY_BUFFER,initialDataOrSize,bufferUsage),this.setVertexBuffer(null),vertexBuffer},createIndexBuffer:function(initialDataOrSize,bufferUsage){var gl=this.gl,indexBuffer=gl.createBuffer();return this.setIndexBuffer(indexBuffer),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,initialDataOrSize,bufferUsage),this.setIndexBuffer(null),indexBuffer},deleteTexture:function(texture){var index=this.nativeTextures.indexOf(texture);return-1!==index&&SpliceOne(this.nativeTextures,index),this.gl.deleteTexture(texture),this.currentTextures[0]!==texture||this.game.pendingDestroy||this.setBlankTexture(!0),this},deleteFramebuffer:function(framebuffer){return this.gl.deleteFramebuffer(framebuffer),this},deleteProgram:function(program){return this.gl.deleteProgram(program),this},deleteBuffer:function(buffer){return this.gl.deleteBuffer(buffer),this},preRenderCamera:function(camera){var cx=camera._cx,cy=camera._cy,cw=camera._cw,ch=camera._ch,TextureTintPipeline=this.pipelines.TextureTintPipeline,color=camera.backgroundColor;if(camera.renderToTexture){this.flush(),this.pushScissor(cx,cy,cw,-ch),this.setFramebuffer(camera.framebuffer);var gl=this.gl;gl.clearColor(0,0,0,0),gl.clear(gl.COLOR_BUFFER_BIT),TextureTintPipeline.projOrtho(cx,cw+cx,cy,ch+cy,-1e3,1e3),camera.mask&&(this.currentCameraMask.mask=camera.mask,this.currentCameraMask.camera=camera._maskCamera,camera.mask.preRenderWebGL(this,camera,camera._maskCamera)),color.alphaGL>0&&TextureTintPipeline.drawFillRect(cx,cy,cw+cx,ch+cy,Utils.getTintFromFloats(color.redGL,color.greenGL,color.blueGL,1),color.alphaGL),camera.emit(CameraEvents.PRE_RENDER,camera)}else this.pushScissor(cx,cy,cw,ch),camera.mask&&(this.currentCameraMask.mask=camera.mask,this.currentCameraMask.camera=camera._maskCamera,camera.mask.preRenderWebGL(this,camera,camera._maskCamera)),color.alphaGL>0&&TextureTintPipeline.drawFillRect(cx,cy,cw,ch,Utils.getTintFromFloats(color.redGL,color.greenGL,color.blueGL,1),color.alphaGL)},getCurrentStencilMask:function(){var prev=null,stack=this.maskStack,cameraMask=this.currentCameraMask;return stack.length>0?prev=stack[stack.length-1]:cameraMask.mask&&cameraMask.mask.isStencil&&(prev=cameraMask),prev},postRenderCamera:function(camera){var TextureTintPipeline=this.pipelines.TextureTintPipeline;if(camera.flashEffect.postRenderWebGL(TextureTintPipeline,Utils.getTintFromFloats),camera.fadeEffect.postRenderWebGL(TextureTintPipeline,Utils.getTintFromFloats),camera.dirty=!1,this.popScissor(),camera.renderToTexture){TextureTintPipeline.flush(),this.setFramebuffer(null),camera.emit(CameraEvents.POST_RENDER,camera),TextureTintPipeline.projOrtho(0,TextureTintPipeline.width,TextureTintPipeline.height,0,-1e3,1e3);var getTint=Utils.getTintAppendFloatAlpha;(camera.pipeline?camera.pipeline:TextureTintPipeline).batchTexture(camera,camera.glTexture,camera.width,camera.height,camera.x,camera.y,camera.width,camera.height,camera.zoom,camera.zoom,camera.rotation,camera.flipX,!camera.flipY,1,1,0,0,0,0,camera.width,camera.height,getTint(camera._tintTL,camera._alphaTL),getTint(camera._tintTR,camera._alphaTR),getTint(camera._tintBL,camera._alphaBL),getTint(camera._tintBR,camera._alphaBR),camera._isTinted&&camera.tintFill,0,0,this.defaultCamera,null),this.setBlankTexture(!0)}camera.mask&&(this.currentCameraMask.mask=null,camera.mask.postRenderWebGL(this,camera._maskCamera))},preRender:function(){if(!this.contextLost){var gl=this.gl,pipelines=this.pipelines;if(gl.bindFramebuffer(gl.FRAMEBUFFER,null),this.config.clearBeforeRender){var clearColor=this.config.backgroundColor;gl.clearColor(clearColor.redGL,clearColor.greenGL,clearColor.blueGL,clearColor.alphaGL),gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT|gl.STENCIL_BUFFER_BIT)}for(var key in gl.enable(gl.SCISSOR_TEST),pipelines)pipelines[key].onPreRender();this.currentScissor=[0,0,this.width,this.height],this.scissorStack=[this.currentScissor],this.game.scene.customViewports&&gl.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.setPipeline(this.pipelines.TextureTintPipeline)}},render:function(scene,children,interpolationPercentage,camera){if(!this.contextLost){var list=children.list,childCount=list.length,pipelines=this.pipelines;for(var key in pipelines)pipelines[key].onRender(scene,camera);if(this.preRenderCamera(camera),0===childCount)return this.setBlendMode(CONST.BlendModes.NORMAL),void this.postRenderCamera(camera);this.currentType="";for(var current=this.currentMask,i=0;i<childCount;i++){var child=list[i];if(child.willRender(camera)){child.blendMode!==this.currentBlendMode&&this.setBlendMode(child.blendMode);var mask=child.mask;(current=this.currentMask).mask&&current.mask!==mask&&current.mask.postRenderWebGL(this,current.camera),mask&&current.mask!==mask&&mask.preRenderWebGL(this,child,camera);var type=child.type;type!==this.currentType&&(this.newType=!0,this.currentType=type),this.nextTypeMatch=i<childCount-1&&list[i+1].type===this.currentType,child.renderWebGL(this,child,interpolationPercentage,camera),this.newType=!1}}(current=this.currentMask).mask&&current.mask.postRenderWebGL(this,current.camera),this.setBlendMode(CONST.BlendModes.NORMAL),this.postRenderCamera(camera)}},postRender:function(){if(!this.contextLost){this.flush();var state=this.snapshotState;state.callback&&(WebGLSnapshot(this.canvas,state),state.callback=null);var pipelines=this.pipelines;for(var key in pipelines)pipelines[key].onPostRender()}},snapshot:function(callback,type,encoderOptions){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,callback,type,encoderOptions)},snapshotArea:function(x,y,width,height,callback,type,encoderOptions){var state=this.snapshotState;return state.callback=callback,state.type=type,state.encoder=encoderOptions,state.getPixel=!1,state.x=x,state.y=y,state.width=Math.min(width,this.gl.drawingBufferWidth),state.height=Math.min(height,this.gl.drawingBufferHeight),this},snapshotPixel:function(x,y,callback){return this.snapshotArea(x,y,1,1,callback),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(framebuffer,bufferWidth,bufferHeight,callback,getPixel,x,y,width,height,type,encoderOptions){void 0===getPixel&&(getPixel=!1),void 0===x&&(x=0),void 0===y&&(y=0),void 0===width&&(width=bufferWidth),void 0===height&&(height=bufferHeight);var currentFramebuffer=this.currentFramebuffer;this.snapshotArea(x,y,width,height,callback,type,encoderOptions);var state=this.snapshotState;return state.getPixel=getPixel,state.isFramebuffer=!0,state.bufferWidth=bufferWidth,state.bufferHeight=bufferHeight,this.setFramebuffer(framebuffer),WebGLSnapshot(this.canvas,state),this.setFramebuffer(currentFramebuffer),state.callback=null,state.isFramebuffer=!1,this},canvasToTexture:function(srcCanvas,dstTexture,noRepeat){void 0===noRepeat&&(noRepeat=!1);var gl=this.gl;if(dstTexture)this.setTexture2D(dstTexture,0),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,srcCanvas),dstTexture.width=srcCanvas.width,dstTexture.height=srcCanvas.height,this.setTexture2D(null,0);else{var wrapping=gl.CLAMP_TO_EDGE;!noRepeat&&IsSizePowerOfTwo(srcCanvas.width,srcCanvas.height)&&(wrapping=gl.REPEAT);var filter=this.config.antialias?gl.LINEAR:gl.NEAREST;dstTexture=this.createTexture2D(0,filter,filter,wrapping,wrapping,gl.RGBA,srcCanvas,srcCanvas.width,srcCanvas.height,!0)}return dstTexture},setTextureFilter:function(texture,filter){var gl=this.gl,glFilter=[gl.LINEAR,gl.NEAREST][filter];return this.setTexture2D(texture,0),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,glFilter),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,glFilter),this.setTexture2D(null,0),this},setFloat1:function(program,name,x){return this.setProgram(program),this.gl.uniform1f(this.gl.getUniformLocation(program,name),x),this},setFloat2:function(program,name,x,y){return this.setProgram(program),this.gl.uniform2f(this.gl.getUniformLocation(program,name),x,y),this},setFloat3:function(program,name,x,y,z){return this.setProgram(program),this.gl.uniform3f(this.gl.getUniformLocation(program,name),x,y,z),this},setFloat4:function(program,name,x,y,z,w){return this.setProgram(program),this.gl.uniform4f(this.gl.getUniformLocation(program,name),x,y,z,w),this},setFloat1v:function(program,name,arr){return this.setProgram(program),this.gl.uniform1fv(this.gl.getUniformLocation(program,name),arr),this},setFloat2v:function(program,name,arr){return this.setProgram(program),this.gl.uniform2fv(this.gl.getUniformLocation(program,name),arr),this},setFloat3v:function(program,name,arr){return this.setProgram(program),this.gl.uniform3fv(this.gl.getUniformLocation(program,name),arr),this},setFloat4v:function(program,name,arr){return this.setProgram(program),this.gl.uniform4fv(this.gl.getUniformLocation(program,name),arr),this},setInt1:function(program,name,x){return this.setProgram(program),this.gl.uniform1i(this.gl.getUniformLocation(program,name),x),this},setInt2:function(program,name,x,y){return this.setProgram(program),this.gl.uniform2i(this.gl.getUniformLocation(program,name),x,y),this},setInt3:function(program,name,x,y,z){return this.setProgram(program),this.gl.uniform3i(this.gl.getUniformLocation(program,name),x,y,z),this},setInt4:function(program,name,x,y,z,w){return this.setProgram(program),this.gl.uniform4i(this.gl.getUniformLocation(program,name),x,y,z,w),this},setMatrix2:function(program,name,transpose,matrix){return this.setProgram(program),this.gl.uniformMatrix2fv(this.gl.getUniformLocation(program,name),transpose,matrix),this},setMatrix3:function(program,name,transpose,matrix){return this.setProgram(program),this.gl.uniformMatrix3fv(this.gl.getUniformLocation(program,name),transpose,matrix),this},setMatrix4:function(program,name,transpose,matrix){return this.setProgram(program),this.gl.uniformMatrix4fv(this.gl.getUniformLocation(program,name),transpose,matrix),this},getMaxTextures:function(){return this.config.maxTextures},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){for(var i=0;i<this.nativeTextures.length;i++)this.gl.deleteTexture(this.nativeTextures[i]);for(var key in this.nativeTextures=[],this.pipelines)this.pipelines[key].destroy(),delete this.pipelines[key];this.defaultCamera.destroy(),this.currentMask=null,this.currentCameraMask=null,this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1),this.game=null,this.gl=null,this.canvas=null,this.maskStack=[],this.contextLost=!0,this.extensions={}}});module.exports=WebGLRenderer},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Utils=__webpack_require__(10),WebGLPipeline=new Class({initialize:function(config){this.name="WebGLPipeline",this.game=config.game,this.view=config.game.canvas,this.resolution=1,this.width=0,this.height=0,this.gl=config.gl,this.vertexCount=0,this.vertexCapacity=config.vertexCapacity,this.renderer=config.renderer,this.vertexData=config.vertices?config.vertices:new ArrayBuffer(config.vertexCapacity*config.vertexSize),this.vertexBuffer=this.renderer.createVertexBuffer(config.vertices?config.vertices:this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=this.renderer.createProgram(config.vertShader,config.fragShader),this.attributes=config.attributes,this.vertexSize=config.vertexSize,this.topology=config.topology,this.bytes=new Uint8Array(this.vertexData),this.vertexComponentCount=Utils.getComponentCount(config.attributes,this.gl),this.flushLocked=!1,this.active=!1},boot:function(){},addAttribute:function(name,size,type,normalized,offset){return this.attributes.push({name:name,size:size,type:this.renderer.glFormats[type],normalized:normalized,offset:offset}),this},shouldFlush:function(){return this.vertexCount>=this.vertexCapacity},resize:function(width,height,resolution){return this.width=width*resolution,this.height=height*resolution,this.resolution=resolution,this},bind:function(){var gl=this.gl,vertexBuffer=this.vertexBuffer,attributes=this.attributes,program=this.program,renderer=this.renderer,vertexSize=this.vertexSize;renderer.setProgram(program),renderer.setVertexBuffer(vertexBuffer);for(var index=0;index<attributes.length;++index){var element=attributes[index],location=gl.getAttribLocation(program,element.name);location>=0?(gl.enableVertexAttribArray(location),gl.vertexAttribPointer(location,element.size,element.type,element.normalized,vertexSize,element.offset)):-1!==location&&gl.disableVertexAttribArray(location)}return this},onBind:function(){return this},onPreRender:function(){return this},onRender:function(){return this},onPostRender:function(){return this},flush:function(){if(this.flushLocked)return this;this.flushLocked=!0;var gl=this.gl,vertexCount=this.vertexCount,topology=this.topology,vertexSize=this.vertexSize;if(0!==vertexCount)return gl.bufferSubData(gl.ARRAY_BUFFER,0,this.bytes.subarray(0,vertexCount*vertexSize)),gl.drawArrays(topology,0,vertexCount),this.vertexCount=0,this.flushLocked=!1,this;this.flushLocked=!1},destroy:function(){var gl=this.gl;return gl.deleteProgram(this.program),gl.deleteBuffer(this.vertexBuffer),delete this.program,delete this.vertexBuffer,delete this.gl,this},setFloat1:function(name,x){return this.renderer.setFloat1(this.program,name,x),this},setFloat2:function(name,x,y){return this.renderer.setFloat2(this.program,name,x,y),this},setFloat3:function(name,x,y,z){return this.renderer.setFloat3(this.program,name,x,y,z),this},setFloat4:function(name,x,y,z,w){return this.renderer.setFloat4(this.program,name,x,y,z,w),this},setFloat1v:function(name,arr){return this.renderer.setFloat1v(this.program,name,arr),this},setFloat2v:function(name,arr){return this.renderer.setFloat2v(this.program,name,arr),this},setFloat3v:function(name,arr){return this.renderer.setFloat3v(this.program,name,arr),this},setFloat4v:function(name,arr){return this.renderer.setFloat4v(this.program,name,arr),this},setInt1:function(name,x){return this.renderer.setInt1(this.program,name,x),this},setInt2:function(name,x,y){return this.renderer.setInt2(this.program,name,x,y),this},setInt3:function(name,x,y,z){return this.renderer.setInt3(this.program,name,x,y,z),this},setInt4:function(name,x,y,z,w){return this.renderer.setInt4(this.program,name,x,y,z,w),this},setMatrix2:function(name,transpose,matrix){return this.renderer.setMatrix2(this.program,name,transpose,matrix),this},setMatrix3:function(name,transpose,matrix){return this.renderer.setMatrix3(this.program,name,transpose,matrix),this},setMatrix4:function(name,transpose,matrix){return this.renderer.setMatrix4(this.program,name,transpose,matrix),this}});module.exports=WebGLPipeline},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Earcut=__webpack_require__(70),GetFastValue=__webpack_require__(1),ModelViewProjection=__webpack_require__(348),ShaderSourceFS=__webpack_require__(778),ShaderSourceVS=__webpack_require__(779),TransformMatrix=__webpack_require__(36),Utils=__webpack_require__(10),WebGLPipeline=__webpack_require__(191),TextureTintPipeline=new Class({Extends:WebGLPipeline,Mixins:[ModelViewProjection],initialize:function(config){var rendererConfig=config.renderer.config;WebGLPipeline.call(this,{game:config.game,renderer:config.renderer,gl:config.renderer.gl,topology:GetFastValue(config,"topology",config.renderer.gl.TRIANGLES),vertShader:GetFastValue(config,"vertShader",ShaderSourceVS),fragShader:GetFastValue(config,"fragShader",ShaderSourceFS),vertexCapacity:GetFastValue(config,"vertexCapacity",6*rendererConfig.batchSize),vertexSize:GetFastValue(config,"vertexSize",5*Float32Array.BYTES_PER_ELEMENT+4*Uint8Array.BYTES_PER_ELEMENT),attributes:[{name:"inPosition",size:2,type:config.renderer.gl.FLOAT,normalized:!1,offset:0},{name:"inTexCoord",size:2,type:config.renderer.gl.FLOAT,normalized:!1,offset:2*Float32Array.BYTES_PER_ELEMENT},{name:"inTintEffect",size:1,type:config.renderer.gl.FLOAT,normalized:!1,offset:4*Float32Array.BYTES_PER_ELEMENT},{name:"inTint",size:4,type:config.renderer.gl.UNSIGNED_BYTE,normalized:!0,offset:5*Float32Array.BYTES_PER_ELEMENT}]}),this.vertexViewF32=new Float32Array(this.vertexData),this.vertexViewU32=new Uint32Array(this.vertexData),this.maxQuads=rendererConfig.batchSize,this.batches=[],this._tempMatrix1=new TransformMatrix,this._tempMatrix2=new TransformMatrix,this._tempMatrix3=new TransformMatrix,this._tempMatrix4=new TransformMatrix,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.tintEffect=2,this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[],this.mvpInit()},onBind:function(){return WebGLPipeline.prototype.onBind.call(this),this.mvpUpdate(),this},resize:function(width,height,resolution){return WebGLPipeline.prototype.resize.call(this,width,height,resolution),this.projOrtho(0,this.width,this.height,0,-1e3,1e3),this},setTexture2D:function(texture,unit){return void 0===texture&&(texture=this.renderer.blankTexture.glTexture),void 0===unit&&(unit=0),this.requireTextureBatch(texture,unit)&&this.pushBatch(texture,unit),this},requireTextureBatch:function(texture,unit){var batches=this.batches,batchLength=batches.length;return!(batchLength>0)||!((unit>0?batches[batchLength-1].textures[unit-1]:batches[batchLength-1].texture)===texture)},pushBatch:function(texture,unit){if(0===unit)this.batches.push({first:this.vertexCount,texture:texture,textures:[]});else{var textures=[];textures[unit-1]=texture,this.batches.push({first:this.vertexCount,texture:null,textures:textures})}},flush:function(){if(this.flushLocked)return this;this.flushLocked=!0;var batchNext,textureIndex,nTexture,gl=this.gl,vertexCount=this.vertexCount,topology=this.topology,vertexSize=this.vertexSize,renderer=this.renderer,batches=this.batches,batchCount=batches.length,batchVertexCount=0,batch=null;if(0===batchCount||0===vertexCount)return this.flushLocked=!1,this;gl.bufferSubData(gl.ARRAY_BUFFER,0,this.bytes.subarray(0,vertexCount*vertexSize));for(var index=0;index<batchCount-1;index++){if(batch=batches[index],batchNext=batches[index+1],batch.textures.length>0){for(textureIndex=0;textureIndex<batch.textures.length;++textureIndex)(nTexture=batch.textures[textureIndex])&&renderer.setTexture2D(nTexture,1+textureIndex,!1);gl.activeTexture(gl.TEXTURE0)}batchVertexCount=batchNext.first-batch.first,null===batch.texture||batchVertexCount<=0||(renderer.setTexture2D(batch.texture,0,!1),gl.drawArrays(topology,batch.first,batchVertexCount))}if((batch=batches[batchCount-1]).textures.length>0){for(textureIndex=0;textureIndex<batch.textures.length;++textureIndex)(nTexture=batch.textures[textureIndex])&&renderer.setTexture2D(nTexture,1+textureIndex,!1);gl.activeTexture(gl.TEXTURE0)}return batchVertexCount=vertexCount-batch.first,batch.texture&&batchVertexCount>0&&(renderer.setTexture2D(batch.texture,0,!1),gl.drawArrays(topology,batch.first,batchVertexCount)),this.vertexCount=0,batches.length=0,this.flushLocked=!1,this},batchSprite:function(sprite,camera,parentTransformMatrix){this.renderer.setPipeline(this);var camMatrix=this._tempMatrix1,spriteMatrix=this._tempMatrix2,calcMatrix=this._tempMatrix3,frame=sprite.frame,texture=frame.glTexture,u0=frame.u0,v0=frame.v0,u1=frame.u1,v1=frame.v1,frameX=frame.x,frameY=frame.y,frameWidth=frame.cutWidth,frameHeight=frame.cutHeight,customPivot=frame.customPivot,displayOriginX=sprite.displayOriginX,displayOriginY=sprite.displayOriginY,x=-displayOriginX+frameX,y=-displayOriginY+frameY;if(sprite.isCropped){var crop=sprite._crop;crop.flipX===sprite.flipX&&crop.flipY===sprite.flipY||frame.updateCropUVs(crop,sprite.flipX,sprite.flipY),u0=crop.u0,v0=crop.v0,u1=crop.u1,v1=crop.v1,frameWidth=crop.width,frameHeight=crop.height,x=-displayOriginX+(frameX=crop.x),y=-displayOriginY+(frameY=crop.y)}var flipX=1,flipY=1;sprite.flipX&&(customPivot||(x+=-frame.realWidth+2*displayOriginX),flipX=-1),(sprite.flipY||frame.source.isGLTexture&&!texture.flipY)&&(customPivot||(y+=-frame.realHeight+2*displayOriginY),flipY=-1),spriteMatrix.applyITRS(sprite.x,sprite.y,sprite.rotation,sprite.scaleX*flipX,sprite.scaleY*flipY),camMatrix.copyFrom(camera.matrix),parentTransformMatrix?(camMatrix.multiplyWithOffset(parentTransformMatrix,-camera.scrollX*sprite.scrollFactorX,-camera.scrollY*sprite.scrollFactorY),spriteMatrix.e=sprite.x,spriteMatrix.f=sprite.y,camMatrix.multiply(spriteMatrix,calcMatrix)):(spriteMatrix.e-=camera.scrollX*sprite.scrollFactorX,spriteMatrix.f-=camera.scrollY*sprite.scrollFactorY,camMatrix.multiply(spriteMatrix,calcMatrix));var xw=x+frameWidth,yh=y+frameHeight,tx0=calcMatrix.getX(x,y),ty0=calcMatrix.getY(x,y),tx1=calcMatrix.getX(x,yh),ty1=calcMatrix.getY(x,yh),tx2=calcMatrix.getX(xw,yh),ty2=calcMatrix.getY(xw,yh),tx3=calcMatrix.getX(xw,y),ty3=calcMatrix.getY(xw,y),tintTL=Utils.getTintAppendFloatAlpha(sprite._tintTL,camera.alpha*sprite._alphaTL),tintTR=Utils.getTintAppendFloatAlpha(sprite._tintTR,camera.alpha*sprite._alphaTR),tintBL=Utils.getTintAppendFloatAlpha(sprite._tintBL,camera.alpha*sprite._alphaBL),tintBR=Utils.getTintAppendFloatAlpha(sprite._tintBR,camera.alpha*sprite._alphaBR);camera.roundPixels&&(tx0=Math.round(tx0),ty0=Math.round(ty0),tx1=Math.round(tx1),ty1=Math.round(ty1),tx2=Math.round(tx2),ty2=Math.round(ty2),tx3=Math.round(tx3),ty3=Math.round(ty3)),this.setTexture2D(texture,0);var tintEffect=sprite._isTinted&&sprite.tintFill;this.batchQuad(tx0,ty0,tx1,ty1,tx2,ty2,tx3,ty3,u0,v0,u1,v1,tintTL,tintTR,tintBL,tintBR,tintEffect,texture,0)},batchQuad:function(x0,y0,x1,y1,x2,y2,x3,y3,u0,v0,u1,v1,tintTL,tintTR,tintBL,tintBR,tintEffect,texture,unit){var hasFlushed=!1;this.vertexCount+6>this.vertexCapacity&&(this.flush(),hasFlushed=!0,this.setTexture2D(texture,unit));var vertexViewF32=this.vertexViewF32,vertexViewU32=this.vertexViewU32,vertexOffset=this.vertexCount*this.vertexComponentCount-1;return vertexViewF32[++vertexOffset]=x0,vertexViewF32[++vertexOffset]=y0,vertexViewF32[++vertexOffset]=u0,vertexViewF32[++vertexOffset]=v0,vertexViewF32[++vertexOffset]=tintEffect,vertexViewU32[++vertexOffset]=tintTL,vertexViewF32[++vertexOffset]=x1,vertexViewF32[++vertexOffset]=y1,vertexViewF32[++vertexOffset]=u0,vertexViewF32[++vertexOffset]=v1,vertexViewF32[++vertexOffset]=tintEffect,vertexViewU32[++vertexOffset]=tintBL,vertexViewF32[++vertexOffset]=x2,vertexViewF32[++vertexOffset]=y2,vertexViewF32[++vertexOffset]=u1,vertexViewF32[++vertexOffset]=v1,vertexViewF32[++vertexOffset]=tintEffect,vertexViewU32[++vertexOffset]=tintBR,vertexViewF32[++vertexOffset]=x0,vertexViewF32[++vertexOffset]=y0,vertexViewF32[++vertexOffset]=u0,vertexViewF32[++vertexOffset]=v0,vertexViewF32[++vertexOffset]=tintEffect,vertexViewU32[++vertexOffset]=tintTL,vertexViewF32[++vertexOffset]=x2,vertexViewF32[++vertexOffset]=y2,vertexViewF32[++vertexOffset]=u1,vertexViewF32[++vertexOffset]=v1,vertexViewF32[++vertexOffset]=tintEffect,vertexViewU32[++vertexOffset]=tintBR,vertexViewF32[++vertexOffset]=x3,vertexViewF32[++vertexOffset]=y3,vertexViewF32[++vertexOffset]=u1,vertexViewF32[++vertexOffset]=v0,vertexViewF32[++vertexOffset]=tintEffect,vertexViewU32[++vertexOffset]=tintTR,this.vertexCount+=6,hasFlushed},batchTri:function(x1,y1,x2,y2,x3,y3,u0,v0,u1,v1,tintTL,tintTR,tintBL,tintEffect,texture,unit){var hasFlushed=!1;this.vertexCount+3>this.vertexCapacity&&(this.flush(),this.setTexture2D(texture,unit),hasFlushed=!0);var vertexViewF32=this.vertexViewF32,vertexViewU32=this.vertexViewU32,vertexOffset=this.vertexCount*this.vertexComponentCount-1;return vertexViewF32[++vertexOffset]=x1,vertexViewF32[++vertexOffset]=y1,vertexViewF32[++vertexOffset]=u0,vertexViewF32[++vertexOffset]=v0,vertexViewF32[++vertexOffset]=tintEffect,vertexViewU32[++vertexOffset]=tintTL,vertexViewF32[++vertexOffset]=x2,vertexViewF32[++vertexOffset]=y2,vertexViewF32[++vertexOffset]=u0,vertexViewF32[++vertexOffset]=v1,vertexViewF32[++vertexOffset]=tintEffect,vertexViewU32[++vertexOffset]=tintTR,vertexViewF32[++vertexOffset]=x3,vertexViewF32[++vertexOffset]=y3,vertexViewF32[++vertexOffset]=u1,vertexViewF32[++vertexOffset]=v1,vertexViewF32[++vertexOffset]=tintEffect,vertexViewU32[++vertexOffset]=tintBL,this.vertexCount+=3,hasFlushed},batchTexture:function(gameObject,texture,textureWidth,textureHeight,srcX,srcY,srcWidth,srcHeight,scaleX,scaleY,rotation,flipX,flipY,scrollFactorX,scrollFactorY,displayOriginX,displayOriginY,frameX,frameY,frameWidth,frameHeight,tintTL,tintTR,tintBL,tintBR,tintEffect,uOffset,vOffset,camera,parentTransformMatrix,skipFlip){this.renderer.setPipeline(this,gameObject);var camMatrix=this._tempMatrix1,spriteMatrix=this._tempMatrix2,calcMatrix=this._tempMatrix3,u0=frameX/textureWidth+uOffset,v0=frameY/textureHeight+vOffset,u1=(frameX+frameWidth)/textureWidth+uOffset,v1=(frameY+frameHeight)/textureHeight+vOffset,width=srcWidth,height=srcHeight,x=-displayOriginX,y=-displayOriginY;if(gameObject.isCropped){var crop=gameObject._crop;width=crop.width,height=crop.height,srcWidth=crop.width,srcHeight=crop.height;var ox=frameX=crop.x,oy=frameY=crop.y;flipX&&(ox=frameWidth-crop.x-crop.width),flipY&&!texture.isRenderTexture&&(oy=frameHeight-crop.y-crop.height),u0=ox/textureWidth+uOffset,v0=oy/textureHeight+vOffset,u1=(ox+crop.width)/textureWidth+uOffset,v1=(oy+crop.height)/textureHeight+vOffset,x=-displayOriginX+frameX,y=-displayOriginY+frameY}flipX&&(width*=-1,x+=srcWidth),(flipY^=!skipFlip&&texture.isRenderTexture?1:0)&&(height*=-1,y+=srcHeight);var xw=x+width,yh=y+height;spriteMatrix.applyITRS(srcX,srcY,rotation,scaleX,scaleY),camMatrix.copyFrom(camera.matrix),parentTransformMatrix?(camMatrix.multiplyWithOffset(parentTransformMatrix,-camera.scrollX*scrollFactorX,-camera.scrollY*scrollFactorY),spriteMatrix.e=srcX,spriteMatrix.f=srcY,camMatrix.multiply(spriteMatrix,calcMatrix)):(spriteMatrix.e-=camera.scrollX*scrollFactorX,spriteMatrix.f-=camera.scrollY*scrollFactorY,camMatrix.multiply(spriteMatrix,calcMatrix));var tx0=calcMatrix.getX(x,y),ty0=calcMatrix.getY(x,y),tx1=calcMatrix.getX(x,yh),ty1=calcMatrix.getY(x,yh),tx2=calcMatrix.getX(xw,yh),ty2=calcMatrix.getY(xw,yh),tx3=calcMatrix.getX(xw,y),ty3=calcMatrix.getY(xw,y);camera.roundPixels&&(tx0=Math.round(tx0),ty0=Math.round(ty0),tx1=Math.round(tx1),ty1=Math.round(ty1),tx2=Math.round(tx2),ty2=Math.round(ty2),tx3=Math.round(tx3),ty3=Math.round(ty3)),this.setTexture2D(texture,0),this.batchQuad(tx0,ty0,tx1,ty1,tx2,ty2,tx3,ty3,u0,v0,u1,v1,tintTL,tintTR,tintBL,tintBR,tintEffect,texture,0)},batchTextureFrame:function(frame,x,y,tint,alpha,transformMatrix,parentTransformMatrix){this.renderer.setPipeline(this);var spriteMatrix=this._tempMatrix1.copyFrom(transformMatrix),calcMatrix=this._tempMatrix2,xw=x+frame.width,yh=y+frame.height;parentTransformMatrix?spriteMatrix.multiply(parentTransformMatrix,calcMatrix):calcMatrix=spriteMatrix;var tx0=calcMatrix.getX(x,y),ty0=calcMatrix.getY(x,y),tx1=calcMatrix.getX(x,yh),ty1=calcMatrix.getY(x,yh),tx2=calcMatrix.getX(xw,yh),ty2=calcMatrix.getY(xw,yh),tx3=calcMatrix.getX(xw,y),ty3=calcMatrix.getY(xw,y);this.setTexture2D(frame.glTexture,0),tint=Utils.getTintAppendFloatAlpha(tint,alpha),this.batchQuad(tx0,ty0,tx1,ty1,tx2,ty2,tx3,ty3,frame.u0,frame.v0,frame.u1,frame.v1,tint,tint,tint,tint,0,frame.glTexture,0)},drawFillRect:function(x,y,width,height,color,alpha){var xw=x+width,yh=y+height;this.setTexture2D();var tint=Utils.getTintAppendFloatAlphaAndSwap(color,alpha);this.batchQuad(x,y,x,yh,xw,yh,xw,y,0,0,1,1,tint,tint,tint,tint,2)},batchFillRect:function(x,y,width,height,currentMatrix,parentMatrix){this.renderer.setPipeline(this);var calcMatrix=this._tempMatrix3;parentMatrix&&parentMatrix.multiply(currentMatrix,calcMatrix);var xw=x+width,yh=y+height,x0=calcMatrix.getX(x,y),y0=calcMatrix.getY(x,y),x1=calcMatrix.getX(x,yh),y1=calcMatrix.getY(x,yh),x2=calcMatrix.getX(xw,yh),y2=calcMatrix.getY(xw,yh),x3=calcMatrix.getX(xw,y),y3=calcMatrix.getY(xw,y),frame=this.currentFrame,u0=frame.u0,v0=frame.v0,u1=frame.u1,v1=frame.v1;this.batchQuad(x0,y0,x1,y1,x2,y2,x3,y3,u0,v0,u1,v1,this.fillTint.TL,this.fillTint.TR,this.fillTint.BL,this.fillTint.BR,this.tintEffect)},batchFillTriangle:function(x0,y0,x1,y1,x2,y2,currentMatrix,parentMatrix){this.renderer.setPipeline(this);var calcMatrix=this._tempMatrix3;parentMatrix&&parentMatrix.multiply(currentMatrix,calcMatrix);var tx0=calcMatrix.getX(x0,y0),ty0=calcMatrix.getY(x0,y0),tx1=calcMatrix.getX(x1,y1),ty1=calcMatrix.getY(x1,y1),tx2=calcMatrix.getX(x2,y2),ty2=calcMatrix.getY(x2,y2),frame=this.currentFrame,u0=frame.u0,v0=frame.v0,u1=frame.u1,v1=frame.v1;this.batchTri(tx0,ty0,tx1,ty1,tx2,ty2,u0,v0,u1,v1,this.fillTint.TL,this.fillTint.TR,this.fillTint.BL,this.tintEffect)},batchStrokeTriangle:function(x0,y0,x1,y1,x2,y2,lineWidth,currentMatrix,parentMatrix){var tempTriangle=this.tempTriangle;tempTriangle[0].x=x0,tempTriangle[0].y=y0,tempTriangle[0].width=lineWidth,tempTriangle[1].x=x1,tempTriangle[1].y=y1,tempTriangle[1].width=lineWidth,tempTriangle[2].x=x2,tempTriangle[2].y=y2,tempTriangle[2].width=lineWidth,tempTriangle[3].x=x0,tempTriangle[3].y=y0,tempTriangle[3].width=lineWidth,this.batchStrokePath(tempTriangle,lineWidth,!1,currentMatrix,parentMatrix)},batchFillPath:function(path,currentMatrix,parentMatrix){this.renderer.setPipeline(this);var calcMatrix=this._tempMatrix3;parentMatrix&&parentMatrix.multiply(currentMatrix,calcMatrix);for(var polygonIndexArray,point,length=path.length,polygonCache=this.polygonCache,tintTL=this.fillTint.TL,tintTR=this.fillTint.TR,tintBL=this.fillTint.BL,tintEffect=this.tintEffect,pathIndex=0;pathIndex<length;++pathIndex)point=path[pathIndex],polygonCache.push(point.x,point.y);length=(polygonIndexArray=Earcut(polygonCache)).length;for(var frame=this.currentFrame,index=0;index<length;index+=3){var p0=2*polygonIndexArray[index+0],p1=2*polygonIndexArray[index+1],p2=2*polygonIndexArray[index+2],x0=polygonCache[p0+0],y0=polygonCache[p0+1],x1=polygonCache[p1+0],y1=polygonCache[p1+1],x2=polygonCache[p2+0],y2=polygonCache[p2+1],tx0=calcMatrix.getX(x0,y0),ty0=calcMatrix.getY(x0,y0),tx1=calcMatrix.getX(x1,y1),ty1=calcMatrix.getY(x1,y1),tx2=calcMatrix.getX(x2,y2),ty2=calcMatrix.getY(x2,y2),u0=frame.u0,v0=frame.v0,u1=frame.u1,v1=frame.v1;this.batchTri(tx0,ty0,tx1,ty1,tx2,ty2,u0,v0,u1,v1,tintTL,tintTR,tintBL,tintEffect)}polygonCache.length=0},batchStrokePath:function(path,lineWidth,pathOpen,currentMatrix,parentMatrix){this.renderer.setPipeline(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var pathLength=path.length-1,pathIndex=0;pathIndex<pathLength;pathIndex++){var point0=path[pathIndex],point1=path[pathIndex+1];this.batchLine(point0.x,point0.y,point1.x,point1.y,point0.width/2,point1.width/2,lineWidth,pathIndex,!pathOpen&&pathIndex===pathLength-1,currentMatrix,parentMatrix)}},batchLine:function(ax,ay,bx,by,aLineWidth,bLineWidth,lineWidth,index,closePath,currentMatrix,parentMatrix){this.renderer.setPipeline(this);var calcMatrix=this._tempMatrix3;parentMatrix&&parentMatrix.multiply(currentMatrix,calcMatrix);var dx=bx-ax,dy=by-ay,len=Math.sqrt(dx*dx+dy*dy),al0=aLineWidth*(by-ay)/len,al1=aLineWidth*(ax-bx)/len,bl0=bLineWidth*(by-ay)/len,bl1=bLineWidth*(ax-bx)/len,lx0=bx-bl0,ly0=by-bl1,lx1=ax-al0,ly1=ay-al1,lx2=bx+bl0,ly2=by+bl1,lx3=ax+al0,ly3=ay+al1,brX=calcMatrix.getX(lx0,ly0),brY=calcMatrix.getY(lx0,ly0),blX=calcMatrix.getX(lx1,ly1),blY=calcMatrix.getY(lx1,ly1),trX=calcMatrix.getX(lx2,ly2),trY=calcMatrix.getY(lx2,ly2),tlX=calcMatrix.getX(lx3,ly3),tlY=calcMatrix.getY(lx3,ly3),tint=this.strokeTint,tintEffect=this.tintEffect,tintTL=tint.TL,tintTR=tint.TR,tintBL=tint.BL,tintBR=tint.BR,frame=this.currentFrame,u0=frame.u0,v0=frame.v0,u1=frame.u1,v1=frame.v1;if(this.batchQuad(tlX,tlY,blX,blY,brX,brY,trX,trY,u0,v0,u1,v1,tintTL,tintTR,tintBL,tintBR,tintEffect),!(lineWidth<=2)){var prev=this.prevQuad,first=this.firstQuad;index>0&&prev[4]?this.batchQuad(tlX,tlY,blX,blY,prev[0],prev[1],prev[2],prev[3],u0,v0,u1,v1,tintTL,tintTR,tintBL,tintBR,tintEffect):(first[0]=tlX,first[1]=tlY,first[2]=blX,first[3]=blY,first[4]=1),closePath&&first[4]?this.batchQuad(brX,brY,trX,trY,first[0],first[1],first[2],first[3],u0,v0,u1,v1,tintTL,tintTR,tintBL,tintBR,tintEffect):(prev[0]=brX,prev[1]=brY,prev[2]=trX,prev[3]=trY,prev[4]=1)}}});module.exports=TextureTintPipeline},function(module,exports,__webpack_require__){var Rectangle=__webpack_require__(11);module.exports=function(points,out){if(void 0===out&&(out=new Rectangle),0===points.length)return out;for(var p,px,py,minX=Number.MAX_VALUE,minY=Number.MAX_VALUE,maxX=Number.MIN_SAFE_INTEGER,maxY=Number.MIN_SAFE_INTEGER,i=0;i<points.length;i++)p=points[i],Array.isArray(p)?(px=p[0],py=p[1]):(px=p.x,py=p.y),minX=Math.min(minX,px),minY=Math.min(minY,py),maxX=Math.max(maxX,px),maxY=Math.max(maxY,py);return out.x=minX,out.y=minY,out.width=maxX-minX,out.height=maxY-minY,out}},function(module,exports,__webpack_require__){var CONST={CENTER:__webpack_require__(366),ORIENTATION:__webpack_require__(367),SCALE_MODE:__webpack_require__(368),ZOOM:__webpack_require__(369)};module.exports=CONST},function(module,exports){module.exports=function(element){element.parentNode&&element.parentNode.removeChild(element)}},function(module,exports){module.exports={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),CONST=__webpack_require__(135),DefaultPlugins=__webpack_require__(188),Events=__webpack_require__(20),GetPhysicsPlugins=__webpack_require__(882),GetScenePlugins=__webpack_require__(883),NOOP=__webpack_require__(2),Settings=__webpack_require__(382),Systems=new Class({initialize:function(scene,config){this.scene=scene,this.game,this.renderer,this.facebook,this.config=config,this.settings=Settings.create(config),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=NOOP},init:function(game){this.settings.status=CONST.INIT,this.sceneUpdate=NOOP,this.game=game,this.renderer=game.renderer,this.canvas=game.canvas,this.context=game.context;var pluginManager=game.plugins;this.plugins=pluginManager,pluginManager.addToScene(this,DefaultPlugins.Global,[DefaultPlugins.CoreScene,GetScenePlugins(this),GetPhysicsPlugins(this)]),this.events.emit(Events.BOOT,this),this.settings.isBooted=!0},install:function(plugin){Array.isArray(plugin)||(plugin=[plugin]),this.plugins.installLocal(this,plugin)},step:function(time,delta){this.events.emit(Events.PRE_UPDATE,time,delta),this.events.emit(Events.UPDATE,time,delta),this.sceneUpdate.call(this.scene,time,delta),this.events.emit(Events.POST_UPDATE,time,delta)},render:function(renderer){var displayList=this.displayList;displayList.depthSort(),this.cameras.render(renderer,displayList),this.events.emit(Events.RENDER,renderer)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(data){return this.settings.active&&(this.settings.status=CONST.PAUSED,this.settings.active=!1,this.events.emit(Events.PAUSE,this,data)),this},resume:function(data){return this.settings.active||(this.settings.status=CONST.RUNNING,this.settings.active=!0,this.events.emit(Events.RESUME,this,data)),this},sleep:function(data){return this.settings.status=CONST.SLEEPING,this.settings.active=!1,this.settings.visible=!1,this.events.emit(Events.SLEEP,this,data),this},wake:function(data){var settings=this.settings;return settings.status=CONST.RUNNING,settings.active=!0,settings.visible=!0,this.events.emit(Events.WAKE,this,data),settings.isTransition&&this.events.emit(Events.TRANSITION_WAKE,settings.transitionFrom,settings.transitionDuration),this},isSleeping:function(){return this.settings.status===CONST.SLEEPING},isActive:function(){return this.settings.status===CONST.RUNNING},isPaused:function(){return this.settings.status===CONST.PAUSED},isTransitioning:function(){return this.settings.isTransition||null!==this.scenePlugin._target},isTransitionOut:function(){return null!==this.scenePlugin._target&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(value){return this.settings.visible=value,this},setActive:function(value,data){return value?this.resume(data):this.pause(data)},start:function(data){data&&(this.settings.data=data),this.settings.status=CONST.START,this.settings.active=!0,this.settings.visible=!0,this.events.emit(Events.START,this),this.events.emit(Events.READY,this,data)},shutdown:function(data){this.events.off(Events.TRANSITION_INIT),this.events.off(Events.TRANSITION_START),this.events.off(Events.TRANSITION_COMPLETE),this.events.off(Events.TRANSITION_OUT),this.settings.status=CONST.SHUTDOWN,this.settings.active=!1,this.settings.visible=!1,this.events.emit(Events.SHUTDOWN,this,data)},destroy:function(){this.settings.status=CONST.DESTROYED,this.settings.active=!1,this.settings.visible=!1,this.events.emit(Events.DESTROY,this),this.events.removeAllListeners();for(var props=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],i=0;i<props.length;i++)this[props[i]]=null}});module.exports=Systems},function(module,exports){module.exports=function(str){return str&&str[0].toUpperCase()+str.slice(1)}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Frame=__webpack_require__(106),TextureSource=__webpack_require__(385),Texture=new Class({initialize:function(manager,key,source,width,height){Array.isArray(source)||(source=[source]),this.manager=manager,this.key=key,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var i=0;i<source.length;i++)this.source.push(new TextureSource(this,source[i],width,height))},add:function(name,sourceIndex,x,y,width,height){if(this.has(name))return null;var frame=new Frame(this,name,sourceIndex,x,y,width,height);return this.frames[name]=frame,"__BASE"===this.firstFrame&&(this.firstFrame=name),this.frameTotal++,frame},remove:function(name){return!!this.has(name)&&(this.get(name).destroy(),delete this.frames[name],!0)},has:function(name){return this.frames[name]},get:function(name){name||(name=this.firstFrame);var frame=this.frames[name];return frame||(console.warn("Texture.frame missing: "+name),frame=this.frames[this.firstFrame]),frame},getTextureSourceIndex:function(source){for(var i=0;i<this.source.length;i++)if(this.source[i]===source)return i;return-1},getFramesFromTextureSource:function(sourceIndex,includeBase){void 0===includeBase&&(includeBase=!1);var out=[];for(var frameName in this.frames)if("__BASE"!==frameName||includeBase){var frame=this.frames[frameName];frame.sourceIndex===sourceIndex&&out.push(frame)}return out},getFrameNames:function(includeBase){void 0===includeBase&&(includeBase=!1);var out=Object.keys(this.frames);if(!includeBase){var idx=out.indexOf("__BASE");-1!==idx&&out.splice(idx,1)}return out},getSourceImage:function(name){null!=name&&1!==this.frameTotal||(name="__BASE");var frame=this.frames[name];return frame?frame.source.image:(console.warn("Texture.frame missing: "+name),this.frames.__BASE.source.image)},getDataSourceImage:function(name){null!=name&&1!==this.frameTotal||(name="__BASE");var idx,frame=this.frames[name];return frame?idx=frame.sourceIndex:(console.warn("Texture.frame missing: "+name),idx=this.frames.__BASE.sourceIndex),this.dataSource[idx].image},setDataSource:function(data){Array.isArray(data)||(data=[data]);for(var i=0;i<data.length;i++){var source=this.source[i];this.dataSource.push(new TextureSource(this,data[i],source.width,source.height))}},setFilter:function(filterMode){var i;for(i=0;i<this.source.length;i++)this.source[i].setFilter(filterMode);for(i=0;i<this.dataSource.length;i++)this.dataSource[i].setFilter(filterMode)},destroy:function(){var i;for(i=0;i<this.source.length;i++)this.source[i].destroy();for(i=0;i<this.dataSource.length;i++)this.dataSource[i].destroy();for(var frameName in this.frames){this.frames[frameName].destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});module.exports=Texture},function(module,exports,__webpack_require__){module.exports={Matrix:__webpack_require__(923),Add:__webpack_require__(930),AddAt:__webpack_require__(931),BringToTop:__webpack_require__(932),CountAllMatching:__webpack_require__(933),Each:__webpack_require__(934),EachInRange:__webpack_require__(935),FindClosestInSorted:__webpack_require__(273),GetAll:__webpack_require__(936),GetFirst:__webpack_require__(937),GetRandom:__webpack_require__(202),MoveDown:__webpack_require__(938),MoveTo:__webpack_require__(939),MoveUp:__webpack_require__(940),NumberArray:__webpack_require__(941),NumberArrayStep:__webpack_require__(942),QuickSelect:__webpack_require__(397),Range:__webpack_require__(398),Remove:__webpack_require__(133),RemoveAt:__webpack_require__(943),RemoveBetween:__webpack_require__(944),RemoveRandomElement:__webpack_require__(945),Replace:__webpack_require__(946),RotateLeft:__webpack_require__(289),RotateRight:__webpack_require__(290),SafeRange:__webpack_require__(73),SendToBack:__webpack_require__(947),SetAll:__webpack_require__(948),Shuffle:__webpack_require__(123),SpliceOne:__webpack_require__(86),StableSort:__webpack_require__(140),Swap:__webpack_require__(949)}},function(module,exports){module.exports=function(matrix){if(!Array.isArray(matrix)||matrix.length<2||!Array.isArray(matrix[0]))return!1;for(var size=matrix[0].length,i=1;i<matrix.length;i++)if(matrix[i].length!==size)return!1;return!0}},function(module,exports){module.exports=function(array,startIndex,length){void 0===startIndex&&(startIndex=0),void 0===length&&(length=array.length);var randomIndex=startIndex+Math.floor(Math.random()*length);return void 0===array[randomIndex]?null:array[randomIndex]}},function(module,exports,__webpack_require__){var GetAdvancedValue=__webpack_require__(14);module.exports=function(sprite,config){var animConfig=GetAdvancedValue(config,"anims",null);if(null===animConfig)return sprite;if("string"==typeof animConfig)sprite.anims.play(animConfig);else if("object"==typeof animConfig){var anims=sprite.anims,key=GetAdvancedValue(animConfig,"key",void 0),startFrame=GetAdvancedValue(animConfig,"startFrame",void 0),delay=GetAdvancedValue(animConfig,"delay",0),repeat=GetAdvancedValue(animConfig,"repeat",0),repeatDelay=GetAdvancedValue(animConfig,"repeatDelay",0),yoyo=GetAdvancedValue(animConfig,"yoyo",!1),play=GetAdvancedValue(animConfig,"play",!1),delayedPlay=GetAdvancedValue(animConfig,"delayedPlay",0);anims.setDelay(delay),anims.setRepeat(repeat),anims.setRepeatDelay(repeatDelay),anims.setYoyo(yoyo),play?anims.play(key,startFrame):delayedPlay>0?anims.delayedPlay(delayedPlay,key,startFrame):anims.load(key)}return sprite}},function(module,exports){function getValue(node,attribute){return parseInt(node.getAttribute(attribute),10)}module.exports=function(xml,xSpacing,ySpacing,frame){void 0===xSpacing&&(xSpacing=0),void 0===ySpacing&&(ySpacing=0);var data={},info=xml.getElementsByTagName("info")[0],common=xml.getElementsByTagName("common")[0];data.font=info.getAttribute("face"),data.size=getValue(info,"size"),data.lineHeight=getValue(common,"lineHeight")+ySpacing,data.chars={};var letters=xml.getElementsByTagName("char"),adjustForTrim=void 0!==frame&&frame.trimmed;if(adjustForTrim)var top=frame.height,left=frame.width;for(var i=0;i<letters.length;i++){var node=letters[i],charCode=getValue(node,"id"),gx=getValue(node,"x"),gy=getValue(node,"y"),gw=getValue(node,"width"),gh=getValue(node,"height");adjustForTrim&&(gx<left&&(left=gx),gy<top&&(top=gy)),data.chars[charCode]={x:gx,y:gy,width:gw,height:gh,centerX:Math.floor(gw/2),centerY:Math.floor(gh/2),xOffset:getValue(node,"xoffset"),yOffset:getValue(node,"yoffset"),xAdvance:getValue(node,"xadvance")+xSpacing,data:{},kerning:{}}}if(adjustForTrim&&0!==top&&0!==left)for(var code in data.chars){var glyph=data.chars[code];glyph.x-=frame.x,glyph.y-=frame.y}var kernings=xml.getElementsByTagName("kerning");for(i=0;i<kernings.length;i++){var kern=kernings[i],first=getValue(kern,"first"),second=getValue(kern,"second"),amount=getValue(kern,"amount");data.chars[second].kerning[first]=amount}return data}},function(module,exports,__webpack_require__){var BlitterRender=__webpack_require__(956),Bob=__webpack_require__(959),Class=__webpack_require__(0),Components=__webpack_require__(12),Frame=__webpack_require__(106),GameObject=__webpack_require__(13),List=__webpack_require__(138),Blitter=new Class({Extends:GameObject,Mixins:[Components.Alpha,Components.BlendMode,Components.Depth,Components.Mask,Components.Pipeline,Components.ScrollFactor,Components.Size,Components.Texture,Components.Transform,Components.Visible,BlitterRender],initialize:function(scene,x,y,texture,frame){GameObject.call(this,scene,"Blitter"),this.setTexture(texture,frame),this.setPosition(x,y),this.initPipeline(),this.children=new List,this.renderList=[],this.dirty=!1},create:function(x,y,frame,visible,index){void 0===visible&&(visible=!0),void 0===index&&(index=this.children.length),void 0===frame?frame=this.frame:frame instanceof Frame||(frame=this.texture.get(frame));var bob=new Bob(this,x,y,frame,visible);return this.children.addAt(bob,index,!1),this.dirty=!0,bob},createFromCallback:function(callback,quantity,frame,visible){for(var bobs=this.createMultiple(quantity,frame,visible),i=0;i<bobs.length;i++){var bob=bobs[i];callback.call(this,bob,i)}return bobs},createMultiple:function(quantity,frame,visible){void 0===frame&&(frame=this.frame.name),void 0===visible&&(visible=!0),Array.isArray(frame)||(frame=[frame]);var bobs=[],_this=this;return frame.forEach((function(singleFrame){for(var i=0;i<quantity;i++)bobs.push(_this.create(0,0,singleFrame,visible))})),bobs},childCanRender:function(child){return child.visible&&child.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});module.exports=Blitter},function(module,exports,__webpack_require__){var ArrayUtils=__webpack_require__(200),BlendModes=__webpack_require__(43),Class=__webpack_require__(0),Components=__webpack_require__(12),Events=__webpack_require__(122),GameObject=__webpack_require__(13),Rectangle=__webpack_require__(11),Render=__webpack_require__(960),Union=__webpack_require__(399),Vector2=__webpack_require__(3),Container=new Class({Extends:GameObject,Mixins:[Components.Alpha,Components.BlendMode,Components.ComputedSize,Components.Depth,Components.Mask,Components.Transform,Components.Visible,Render],initialize:function(scene,x,y,children){GameObject.call(this,scene,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new Components.TransformMatrix,this.tempTransformMatrix=new Components.TransformMatrix,this._displayList=scene.sys.displayList,this._sortKey="",this._sysEvents=scene.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.setPosition(x,y),this.clearAlpha(),this.setBlendMode(BlendModes.SKIP_CHECK),children&&this.add(children)},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return.5*this.width}},displayOriginY:{get:function(){return.5*this.height}},setExclusive:function(value){return void 0===value&&(value=!0),this.exclusive=value,this},getBounds:function(output){if(void 0===output&&(output=new Rectangle),output.setTo(this.x,this.y,0,0),this.list.length>0)for(var children=this.list,tempRect=new Rectangle,i=0;i<children.length;i++){var entry=children[i];entry.getBounds&&(entry.getBounds(tempRect),Union(tempRect,output,output))}return output},addHandler:function(gameObject){gameObject.once(Events.DESTROY,this.remove,this),this.exclusive&&(this._displayList.remove(gameObject),gameObject.parentContainer&&gameObject.parentContainer.remove(gameObject),gameObject.parentContainer=this)},removeHandler:function(gameObject){gameObject.off(Events.DESTROY,this.remove),this.exclusive&&(gameObject.parentContainer=null)},pointToContainer:function(source,output){if(void 0===output&&(output=new Vector2),this.parentContainer)return this.parentContainer.pointToContainer(source,output);var tempMatrix=this.tempTransformMatrix;return tempMatrix.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),tempMatrix.invert(),tempMatrix.transformPoint(source.x,source.y,output),output},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(child){return ArrayUtils.Add(this.list,child,this.maxSize,this.addHandler,this),this},addAt:function(child,index){return ArrayUtils.AddAt(this.list,child,index,this.maxSize,this.addHandler,this),this},getAt:function(index){return this.list[index]},getIndex:function(child){return this.list.indexOf(child)},sort:function(property,handler){return property?(void 0===handler&&(handler=function(childA,childB){return childA[property]-childB[property]}),ArrayUtils.StableSort.inplace(this.list,handler),this):this},getByName:function(name){return ArrayUtils.GetFirst(this.list,"name",name)},getRandom:function(startIndex,length){return ArrayUtils.GetRandom(this.list,startIndex,length)},getFirst:function(property,value,startIndex,endIndex){return ArrayUtils.GetFirst(this.list,property,value,startIndex,endIndex)},getAll:function(property,value,startIndex,endIndex){return ArrayUtils.GetAll(this.list,property,value,startIndex,endIndex)},count:function(property,value,startIndex,endIndex){return ArrayUtils.CountAllMatching(this.list,property,value,startIndex,endIndex)},swap:function(child1,child2){return ArrayUtils.Swap(this.list,child1,child2),this},moveTo:function(child,index){return ArrayUtils.MoveTo(this.list,child,index),this},remove:function(child,destroyChild){var removed=ArrayUtils.Remove(this.list,child,this.removeHandler,this);if(destroyChild&&removed){Array.isArray(removed)||(removed=[removed]);for(var i=0;i<removed.length;i++)removed[i].destroy()}return this},removeAt:function(index,destroyChild){var removed=ArrayUtils.RemoveAt(this.list,index,this.removeHandler,this);return destroyChild&&removed&&removed.destroy(),this},removeBetween:function(startIndex,endIndex,destroyChild){var removed=ArrayUtils.RemoveBetween(this.list,startIndex,endIndex,this.removeHandler,this);if(destroyChild)for(var i=0;i<removed.length;i++)removed[i].destroy();return this},removeAll:function(destroyChild){var removed=ArrayUtils.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(destroyChild)for(var i=0;i<removed.length;i++)removed[i].destroy();return this},bringToTop:function(child){return ArrayUtils.BringToTop(this.list,child),this},sendToBack:function(child){return ArrayUtils.SendToBack(this.list,child),this},moveUp:function(child){return ArrayUtils.MoveUp(this.list,child),this},moveDown:function(child){return ArrayUtils.MoveDown(this.list,child),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return ArrayUtils.Shuffle(this.list),this},replace:function(oldChild,newChild,destroyChild){return ArrayUtils.Replace(this.list,oldChild,newChild)&&(this.addHandler(newChild),this.removeHandler(oldChild),destroyChild&&oldChild.destroy()),this},exists:function(child){return this.list.indexOf(child)>-1},setAll:function(property,value,startIndex,endIndex){return ArrayUtils.SetAll(this.list,property,value,startIndex,endIndex),this},each:function(callback,context){var i,args=[null],temp=this.list.slice(),len=temp.length;for(i=2;i<arguments.length;i++)args.push(arguments[i]);for(i=0;i<len;i++)args[0]=temp[i],callback.apply(context,args);return this},iterate:function(callback,context){var i,args=[null];for(i=2;i<arguments.length;i++)args.push(arguments[i]);for(i=0;i<this.list.length;i++)args[0]=this.list[i],callback.apply(context,args);return this},setScrollFactor:function(x,y,updateChildren){return void 0===y&&(y=x),void 0===updateChildren&&(updateChildren=!1),this.scrollFactorX=x,this.scrollFactorY=y,updateChildren&&(ArrayUtils.SetAll(this.list,"scrollFactorX",x),ArrayUtils.SetAll(this.list,"scrollFactorY",y)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[],this._displayList=null}});module.exports=Container},function(module,exports,__webpack_require__){var BitmapText=__webpack_require__(141),Class=__webpack_require__(0),Render=__webpack_require__(965),DynamicBitmapText=new Class({Extends:BitmapText,Mixins:[Render],initialize:function(scene,x,y,font,text,size,align){BitmapText.call(this,scene,x,y,font,text,size,align),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(width,height){return this.cropWidth=width,this.cropHeight=height,this},setDisplayCallback:function(callback){return this.displayCallback=callback,this},setScrollX:function(value){return this.scrollX=value,this},setScrollY:function(value){return this.scrollY=value,this}});module.exports=DynamicBitmapText},function(module,exports,__webpack_require__){var BaseCamera=__webpack_require__(124),Class=__webpack_require__(0),Commands=__webpack_require__(209),ComponentsAlpha=__webpack_require__(271),ComponentsBlendMode=__webpack_require__(275),ComponentsDepth=__webpack_require__(276),ComponentsMask=__webpack_require__(280),ComponentsPipeline=__webpack_require__(121),ComponentsTransform=__webpack_require__(285),ComponentsVisible=__webpack_require__(286),ComponentsScrollFactor=__webpack_require__(283),TransformMatrix=__webpack_require__(36),Ellipse=__webpack_require__(107),GameObject=__webpack_require__(13),GetFastValue=__webpack_require__(1),GetValue=__webpack_require__(5),MATH_CONST=__webpack_require__(22),Render=__webpack_require__(971),Graphics=new Class({Extends:GameObject,Mixins:[ComponentsAlpha,ComponentsBlendMode,ComponentsDepth,ComponentsMask,ComponentsPipeline,ComponentsTransform,ComponentsVisible,ComponentsScrollFactor,Render],initialize:function(scene,options){var x=GetValue(options,"x",0),y=GetValue(options,"y",0);GameObject.call(this,scene,"Graphics"),this.setPosition(x,y),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this._tempMatrix1=new TransformMatrix,this._tempMatrix2=new TransformMatrix,this._tempMatrix3=new TransformMatrix,this.setDefaultStyles(options)},setDefaultStyles:function(options){return GetValue(options,"lineStyle",null)&&(this.defaultStrokeWidth=GetValue(options,"lineStyle.width",1),this.defaultStrokeColor=GetValue(options,"lineStyle.color",16777215),this.defaultStrokeAlpha=GetValue(options,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),GetValue(options,"fillStyle",null)&&(this.defaultFillColor=GetValue(options,"fillStyle.color",16777215),this.defaultFillAlpha=GetValue(options,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(lineWidth,color,alpha){return void 0===alpha&&(alpha=1),this.commandBuffer.push(Commands.LINE_STYLE,lineWidth,color,alpha),this._lineWidth=lineWidth,this},fillStyle:function(color,alpha){return void 0===alpha&&(alpha=1),this.commandBuffer.push(Commands.FILL_STYLE,color,alpha),this},fillGradientStyle:function(topLeft,topRight,bottomLeft,bottomRight,alpha){return void 0===alpha&&(alpha=1),this.commandBuffer.push(Commands.GRADIENT_FILL_STYLE,alpha,topLeft,topRight,bottomLeft,bottomRight),this},lineGradientStyle:function(lineWidth,topLeft,topRight,bottomLeft,bottomRight,alpha){return void 0===alpha&&(alpha=1),this.commandBuffer.push(Commands.GRADIENT_LINE_STYLE,lineWidth,alpha,topLeft,topRight,bottomLeft,bottomRight),this},setTexture:function(key,frame,mode){if(void 0===mode&&(mode=0),void 0===key)this.commandBuffer.push(Commands.CLEAR_TEXTURE);else{var textureFrame=this.scene.sys.textures.getFrame(key,frame);textureFrame&&(2===mode&&(mode=3),this.commandBuffer.push(Commands.SET_TEXTURE,textureFrame,mode))}return this},beginPath:function(){return this.commandBuffer.push(Commands.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(Commands.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(Commands.FILL_PATH),this},fill:function(){return this.commandBuffer.push(Commands.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(Commands.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(Commands.STROKE_PATH),this},fillCircleShape:function(circle){return this.fillCircle(circle.x,circle.y,circle.radius)},strokeCircleShape:function(circle){return this.strokeCircle(circle.x,circle.y,circle.radius)},fillCircle:function(x,y,radius){return this.beginPath(),this.arc(x,y,radius,0,MATH_CONST.PI2),this.fillPath(),this},strokeCircle:function(x,y,radius){return this.beginPath(),this.arc(x,y,radius,0,MATH_CONST.PI2),this.strokePath(),this},fillRectShape:function(rect){return this.fillRect(rect.x,rect.y,rect.width,rect.height)},strokeRectShape:function(rect){return this.strokeRect(rect.x,rect.y,rect.width,rect.height)},fillRect:function(x,y,width,height){return this.commandBuffer.push(Commands.FILL_RECT,x,y,width,height),this},strokeRect:function(x,y,width,height){var lineWidthHalf=this._lineWidth/2,minx=x-lineWidthHalf,maxx=x+lineWidthHalf;return this.beginPath(),this.moveTo(x,y),this.lineTo(x,y+height),this.strokePath(),this.beginPath(),this.moveTo(x+width,y),this.lineTo(x+width,y+height),this.strokePath(),this.beginPath(),this.moveTo(minx,y),this.lineTo(maxx+width,y),this.strokePath(),this.beginPath(),this.moveTo(minx,y+height),this.lineTo(maxx+width,y+height),this.strokePath(),this},fillRoundedRect:function(x,y,width,height,radius){void 0===radius&&(radius=20);var tl=radius,tr=radius,bl=radius,br=radius;return"number"!=typeof radius&&(tl=GetFastValue(radius,"tl",20),tr=GetFastValue(radius,"tr",20),bl=GetFastValue(radius,"bl",20),br=GetFastValue(radius,"br",20)),this.beginPath(),this.moveTo(x+tl,y),this.lineTo(x+width-tr,y),this.arc(x+width-tr,y+tr,tr,-MATH_CONST.TAU,0),this.lineTo(x+width,y+height-br),this.arc(x+width-br,y+height-br,br,0,MATH_CONST.TAU),this.lineTo(x+bl,y+height),this.arc(x+bl,y+height-bl,bl,MATH_CONST.TAU,Math.PI),this.lineTo(x,y+tl),this.arc(x+tl,y+tl,tl,-Math.PI,-MATH_CONST.TAU),this.fillPath(),this},strokeRoundedRect:function(x,y,width,height,radius){void 0===radius&&(radius=20);var tl=radius,tr=radius,bl=radius,br=radius;return"number"!=typeof radius&&(tl=GetFastValue(radius,"tl",20),tr=GetFastValue(radius,"tr",20),bl=GetFastValue(radius,"bl",20),br=GetFastValue(radius,"br",20)),this.beginPath(),this.moveTo(x+tl,y),this.lineTo(x+width-tr,y),this.arc(x+width-tr,y+tr,tr,-MATH_CONST.TAU,0),this.lineTo(x+width,y+height-br),this.arc(x+width-br,y+height-br,br,0,MATH_CONST.TAU),this.lineTo(x+bl,y+height),this.arc(x+bl,y+height-bl,bl,MATH_CONST.TAU,Math.PI),this.lineTo(x,y+tl),this.arc(x+tl,y+tl,tl,-Math.PI,-MATH_CONST.TAU),this.strokePath(),this},fillPointShape:function(point,size){return this.fillPoint(point.x,point.y,size)},fillPoint:function(x,y,size){return!size||size<1?size=1:(x-=size/2,y-=size/2),this.commandBuffer.push(Commands.FILL_RECT,x,y,size,size),this},fillTriangleShape:function(triangle){return this.fillTriangle(triangle.x1,triangle.y1,triangle.x2,triangle.y2,triangle.x3,triangle.y3)},strokeTriangleShape:function(triangle){return this.strokeTriangle(triangle.x1,triangle.y1,triangle.x2,triangle.y2,triangle.x3,triangle.y3)},fillTriangle:function(x0,y0,x1,y1,x2,y2){return this.commandBuffer.push(Commands.FILL_TRIANGLE,x0,y0,x1,y1,x2,y2),this},strokeTriangle:function(x0,y0,x1,y1,x2,y2){return this.commandBuffer.push(Commands.STROKE_TRIANGLE,x0,y0,x1,y1,x2,y2),this},strokeLineShape:function(line){return this.lineBetween(line.x1,line.y1,line.x2,line.y2)},lineBetween:function(x1,y1,x2,y2){return this.beginPath(),this.moveTo(x1,y1),this.lineTo(x2,y2),this.strokePath(),this},lineTo:function(x,y){return this.commandBuffer.push(Commands.LINE_TO,x,y),this},moveTo:function(x,y){return this.commandBuffer.push(Commands.MOVE_TO,x,y),this},strokePoints:function(points,closeShape,closePath,endIndex){void 0===closeShape&&(closeShape=!1),void 0===closePath&&(closePath=!1),void 0===endIndex&&(endIndex=points.length),this.beginPath(),this.moveTo(points[0].x,points[0].y);for(var i=1;i<endIndex;i++)this.lineTo(points[i].x,points[i].y);return closeShape&&this.lineTo(points[0].x,points[0].y),closePath&&this.closePath(),this.strokePath(),this},fillPoints:function(points,closeShape,closePath,endIndex){void 0===closeShape&&(closeShape=!1),void 0===closePath&&(closePath=!1),void 0===endIndex&&(endIndex=points.length),this.beginPath(),this.moveTo(points[0].x,points[0].y);for(var i=1;i<endIndex;i++)this.lineTo(points[i].x,points[i].y);return closeShape&&this.lineTo(points[0].x,points[0].y),closePath&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(ellipse,smoothness){void 0===smoothness&&(smoothness=32);var points=ellipse.getPoints(smoothness);return this.strokePoints(points,!0)},strokeEllipse:function(x,y,width,height,smoothness){void 0===smoothness&&(smoothness=32);var points=new Ellipse(x,y,width,height).getPoints(smoothness);return this.strokePoints(points,!0)},fillEllipseShape:function(ellipse,smoothness){void 0===smoothness&&(smoothness=32);var points=ellipse.getPoints(smoothness);return this.fillPoints(points,!0)},fillEllipse:function(x,y,width,height,smoothness){void 0===smoothness&&(smoothness=32);var points=new Ellipse(x,y,width,height).getPoints(smoothness);return this.fillPoints(points,!0)},arc:function(x,y,radius,startAngle,endAngle,anticlockwise,overshoot){return void 0===anticlockwise&&(anticlockwise=!1),void 0===overshoot&&(overshoot=0),this.commandBuffer.push(Commands.ARC,x,y,radius,startAngle,endAngle,anticlockwise,overshoot),this},slice:function(x,y,radius,startAngle,endAngle,anticlockwise,overshoot){return void 0===anticlockwise&&(anticlockwise=!1),void 0===overshoot&&(overshoot=0),this.commandBuffer.push(Commands.BEGIN_PATH),this.commandBuffer.push(Commands.MOVE_TO,x,y),this.commandBuffer.push(Commands.ARC,x,y,radius,startAngle,endAngle,anticlockwise,overshoot),this.commandBuffer.push(Commands.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(Commands.SAVE),this},restore:function(){return this.commandBuffer.push(Commands.RESTORE),this},translateCanvas:function(x,y){return this.commandBuffer.push(Commands.TRANSLATE,x,y),this},scaleCanvas:function(x,y){return this.commandBuffer.push(Commands.SCALE,x,y),this},rotateCanvas:function(radians){return this.commandBuffer.push(Commands.ROTATE,radians),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(key,width,height){var texture,ctx,sys=this.scene.sys,renderer=sys.game.renderer;if(void 0===width&&(width=sys.scale.width),void 0===height&&(height=sys.scale.height),Graphics.TargetCamera.setScene(this.scene),Graphics.TargetCamera.setViewport(0,0,width,height),Graphics.TargetCamera.scrollX=this.x,Graphics.TargetCamera.scrollY=this.y,"string"==typeof key)if(sys.textures.exists(key)){var src=(texture=sys.textures.get(key)).getSourceImage();src instanceof HTMLCanvasElement&&(ctx=src.getContext("2d"))}else ctx=(texture=sys.textures.createCanvas(key,width,height)).getSourceImage().getContext("2d");else key instanceof HTMLCanvasElement&&(ctx=key.getContext("2d"));return ctx&&(this.renderCanvas(renderer,this,0,Graphics.TargetCamera,null,ctx,!1),texture&&texture.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});Graphics.TargetCamera=new BaseCamera,module.exports=Graphics},function(module,exports){module.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,SET_TEXTURE:19,CLEAR_TEXTURE:20,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(module,exports,__webpack_require__){var Point=__webpack_require__(4);module.exports=function(ellipse,angle,out){void 0===out&&(out=new Point);var halfWidth=ellipse.width/2,halfHeight=ellipse.height/2;return out.x=ellipse.x+halfWidth*Math.cos(angle),out.y=ellipse.y+halfHeight*Math.sin(angle),out}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Components=__webpack_require__(12),GameObject=__webpack_require__(13),GravityWell=__webpack_require__(407),List=__webpack_require__(138),ParticleEmitter=__webpack_require__(409),Render=__webpack_require__(981),ParticleEmitterManager=new Class({Extends:GameObject,Mixins:[Components.Depth,Components.Mask,Components.Pipeline,Components.Transform,Components.Visible,Render],initialize:function(scene,texture,frame,emitters){if(GameObject.call(this,scene,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],null===frame||"object"!=typeof frame&&!Array.isArray(frame)||(emitters=frame,frame=null),this.setTexture(texture,frame),this.initPipeline(),this.emitters=new List(this),this.wells=new List(this),emitters){Array.isArray(emitters)||(emitters=[emitters]);for(var i=0;i<emitters.length;i++)this.createEmitter(emitters[i])}},setTexture:function(key,frame){return this.texture=this.scene.sys.textures.get(key),this.setFrame(frame)},setFrame:function(frame){this.frame=this.texture.get(frame);var frames=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),names=[];return frames.forEach((function(sourceFrame){names.push(sourceFrame.name)})),this.frameNames=names,this.defaultFrame=this.frame,this},setEmitterFrames:function(frames,emitter){Array.isArray(frames)||(frames=[frames]);var out=emitter.frames;out.length=0;for(var i=0;i<frames.length;i++){var frame=frames[i];-1!==this.frameNames.indexOf(frame)&&out.push(this.texture.get(frame))}return out.length>0?emitter.defaultFrame=out[0]:emitter.defaultFrame=this.defaultFrame,this},addEmitter:function(emitter){return this.emitters.add(emitter)},createEmitter:function(config){return this.addEmitter(new ParticleEmitter(this,config))},addGravityWell:function(well){return this.wells.add(well)},createGravityWell:function(config){return this.addGravityWell(new GravityWell(config))},emitParticle:function(count,x,y){for(var emitters=this.emitters.list,i=0;i<emitters.length;i++){var emitter=emitters[i];emitter.active&&emitter.emitParticle(count,x,y)}return this},emitParticleAt:function(x,y,count){return this.emitParticle(count,x,y)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(time,delta){delta*=this.timeScale;for(var emitters=this.emitters.list,i=0;i<emitters.length;i++){var emitter=emitters[i];emitter.active&&emitter.preUpdate(time,delta)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});module.exports=ParticleEmitterManager},function(module,exports,__webpack_require__){var BlendModes=__webpack_require__(43),Camera=__webpack_require__(124),CanvasPool=__webpack_require__(28),Class=__webpack_require__(0),Components=__webpack_require__(12),CONST=__webpack_require__(35),Frame=__webpack_require__(106),GameObject=__webpack_require__(13),Render=__webpack_require__(985),Utils=__webpack_require__(10),UUID=__webpack_require__(415),RenderTexture=new Class({Extends:GameObject,Mixins:[Components.Alpha,Components.BlendMode,Components.ComputedSize,Components.Crop,Components.Depth,Components.Flip,Components.GetBounds,Components.Mask,Components.Origin,Components.Pipeline,Components.ScrollFactor,Components.Tint,Components.Transform,Components.Visible,Render],initialize:function(scene,x,y,width,height,key,frame){void 0===x&&(x=0),void 0===y&&(y=0),void 0===width&&(width=32),void 0===height&&(height=32),GameObject.call(this,scene,"RenderTexture"),this.renderer=scene.sys.game.renderer,this.textureManager=scene.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.framebuffer=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,void 0===key?(this.canvas=CanvasPool.create2D(this,width,height),this.texture=scene.sys.textures.addCanvas(UUID(),this.canvas),this.frame=this.texture.get()):(this.texture=scene.sys.textures.get(key),this.frame=this.texture.get(frame),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new Camera(0,0,width,height),this.gl=null,this.glTexture=null;var renderer=this.renderer;if(renderer.type===CONST.WEBGL){var gl=renderer.gl;this.gl=gl,this.glTexture=this.frame.source.glTexture,this.drawGameObject=this.batchGameObjectWebGL,this.framebuffer=renderer.createFramebuffer(width,height,this.glTexture,!1)}else renderer.type===CONST.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas);this.camera.setScene(scene),this.setPosition(x,y),void 0===key&&this.setSize(width,height),this.setOrigin(0,0),this.initPipeline()},setSize:function(width,height){return this.resize(width,height)},resize:function(width,height){if(void 0===height&&(height=width),width!==this.width||height!==this.height){if("__BASE"===this.frame.name){if(this.canvas.width=width,this.canvas.height=height,this.gl){var gl=this.gl;this.renderer.deleteTexture(this.frame.source.glTexture),this.renderer.deleteFramebuffer(this.framebuffer);var glTexture=this.renderer.createTexture2D(0,gl.NEAREST,gl.NEAREST,gl.CLAMP_TO_EDGE,gl.CLAMP_TO_EDGE,gl.RGBA,null,width,height,!1);this.framebuffer=this.renderer.createFramebuffer(width,height,glTexture,!1),this.frame.source.isRenderTexture=!0,this.frame.glTexture=glTexture,this.glTexture=glTexture}this.frame.source.width=width,this.frame.source.height=height,this.camera.setSize(width,height),this.frame.setSize(width,height),this.width=width,this.height=height}}else{var baseFrame=this.texture.getSourceImage();this.frame.cutX+width>baseFrame.width&&(width=baseFrame.width-this.frame.cutX),this.frame.cutY+height>baseFrame.height&&(height=baseFrame.height-this.frame.cutY),this.frame.setSize(width,height,this.frame.cutX,this.frame.cutY)}return this},setGlobalTint:function(tint){return this.globalTint=tint,this},setGlobalAlpha:function(alpha){return this.globalAlpha=alpha,this},saveTexture:function(key){return this.textureManager.renameTexture(this.texture.key,key),this._saved=!0,this.texture},fill:function(rgb,alpha,x,y,width,height){void 0===alpha&&(alpha=1),void 0===x&&(x=0),void 0===y&&(y=0),void 0===width&&(width=this.frame.cutWidth),void 0===height&&(height=this.frame.cutHeight);var r=255&(rgb>>16|0),g=255&(rgb>>8|0),b=255&(0|rgb),gl=this.gl,frame=this.frame;if(gl){var renderer=this.renderer,bounds=this.getBounds();renderer.setFramebuffer(this.framebuffer,!0),width===frame.source.width&&height===frame.source.height||gl.scissor(x+frame.cutX,y+frame.cutY,width,height),this.pipeline.drawFillRect(bounds.x,bounds.y,bounds.right,bounds.bottom,Utils.getTintFromFloats(r/255,g/255,b/255,1),alpha),width===frame.source.width&&height===frame.source.height||gl.scissor(0,0,frame.source.width,frame.source.height),this.renderer.setFramebuffer(null,!0)}else this.context.fillStyle="rgba("+r+","+g+","+b+","+alpha+")",this.context.fillRect(x+frame.cutX,y+frame.cutY,width,height);return this},clear:function(){if(this.dirty){var gl=this.gl;if(gl){var renderer=this.renderer;renderer.setFramebuffer(this.framebuffer,!0),this.frame.cutWidth===this.canvas.width&&this.frame.cutHeight===this.canvas.height||gl.scissor(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),gl.clearColor(0,0,0,0),gl.clear(gl.COLOR_BUFFER_BIT),renderer.setFramebuffer(null,!0)}else{var ctx=this.context;ctx.save(),ctx.setTransform(1,0,0,1,0,0),ctx.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),ctx.restore()}this.dirty=!1}return this},erase:function(entries,x,y){this._eraseMode=!0;var blendMode=this.renderer.currentBlendMode;return this.renderer.setBlendMode(BlendModes.ERASE),this.draw(entries,x,y,1,16777215),this.renderer.setBlendMode(blendMode),this._eraseMode=!1,this},draw:function(entries,x,y,alpha,tint){void 0===alpha&&(alpha=this.globalAlpha),tint=void 0===tint?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(tint>>16)+(65280&tint)+((255&tint)<<16),Array.isArray(entries)||(entries=[entries]);var gl=this.gl;if(this.camera.preRender(1,1),gl){var cx=this.camera._cx,cy=this.camera._cy,cw=this.camera._cw,ch=this.camera._ch;this.renderer.setFramebuffer(this.framebuffer,!1),this.renderer.pushScissor(cx,cy,cw,ch,ch);var pipeline=this.pipeline;pipeline.projOrtho(0,this.texture.width,0,this.texture.height,-1e3,1e3),this.batchList(entries,x,y,alpha,tint),pipeline.flush(),this.renderer.setFramebuffer(null,!1),this.renderer.popScissor(),pipeline.projOrtho(0,pipeline.width,pipeline.height,0,-1e3,1e3)}else this.renderer.setContext(this.context),this.batchList(entries,x,y,alpha,tint),this.renderer.setContext();return this.dirty=!0,this},drawFrame:function(key,frame,x,y,alpha,tint){void 0===x&&(x=0),void 0===y&&(y=0),void 0===alpha&&(alpha=this.globalAlpha),tint=void 0===tint?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(tint>>16)+(65280&tint)+((255&tint)<<16);var gl=this.gl,textureFrame=this.textureManager.getFrame(key,frame);if(textureFrame){if(this.camera.preRender(1,1),gl){var cx=this.camera._cx,cy=this.camera._cy,cw=this.camera._cw,ch=this.camera._ch;this.renderer.setFramebuffer(this.framebuffer,!1),this.renderer.pushScissor(cx,cy,cw,ch,ch);var pipeline=this.pipeline;pipeline.projOrtho(0,this.texture.width,0,this.texture.height,-1e3,1e3),pipeline.batchTextureFrame(textureFrame,x+this.frame.cutX,y+this.frame.cutY,tint,alpha,this.camera.matrix,null),pipeline.flush(),this.renderer.setFramebuffer(null,!1),this.renderer.popScissor(),pipeline.projOrtho(0,pipeline.width,pipeline.height,0,-1e3,1e3)}else this.batchTextureFrame(textureFrame,x+this.frame.cutX,y+this.frame.cutY,alpha,tint);this.dirty=!0}return this},batchList:function(children,x,y,alpha,tint){for(var i=0;i<children.length;i++){var entry=children[i];entry&&entry!==this&&(entry.renderWebGL||entry.renderCanvas?this.drawGameObject(entry,x,y):entry.isParent||entry.list?this.batchGroup(entry.getChildren(),x,y):"string"==typeof entry?this.batchTextureFrameKey(entry,null,x,y,alpha,tint):entry instanceof Frame?this.batchTextureFrame(entry,x,y,alpha,tint):Array.isArray(entry)&&this.batchList(entry,x,y,alpha,tint))}},batchGroup:function(children,x,y){void 0===x&&(x=0),void 0===y&&(y=0),x+=this.frame.cutX,y+=this.frame.cutY;for(var i=0;i<children.length;i++){var entry=children[i];if(entry.willRender()){var tx=entry.x+x,ty=entry.y+y;this.drawGameObject(entry,tx,ty)}}},batchGameObjectWebGL:function(gameObject,x,y){void 0===x&&(x=gameObject.x),void 0===y&&(y=gameObject.y);var prevX=gameObject.x,prevY=gameObject.y;this._eraseMode||this.renderer.setBlendMode(gameObject.blendMode),gameObject.setPosition(x+this.frame.cutX,y+this.frame.cutY),gameObject.renderWebGL(this.renderer,gameObject,0,this.camera,null),gameObject.setPosition(prevX,prevY)},batchGameObjectCanvas:function(gameObject,x,y){void 0===x&&(x=gameObject.x),void 0===y&&(y=gameObject.y);var prevX=gameObject.x,prevY=gameObject.y;if(this._eraseMode){var blendMode=gameObject.blendMode;gameObject.blendMode=BlendModes.ERASE}gameObject.setPosition(x+this.frame.cutX,y+this.frame.cutY),gameObject.renderCanvas(this.renderer,gameObject,0,this.camera,null),gameObject.setPosition(prevX,prevY),this._eraseMode&&(gameObject.blendMode=blendMode)},batchTextureFrameKey:function(key,frame,x,y,alpha,tint){var textureFrame=this.textureManager.getFrame(key,frame);textureFrame&&this.batchTextureFrame(textureFrame,x,y,alpha,tint)},batchTextureFrame:function(textureFrame,x,y,alpha,tint){if(void 0===x&&(x=0),void 0===y&&(y=0),x+=this.frame.cutX,y+=this.frame.cutY,this.gl)this.pipeline.batchTextureFrame(textureFrame,x,y,tint,alpha,this.camera.matrix,null);else{var ctx=this.context,cd=textureFrame.canvasData,source=textureFrame.source.image,matrix=this.camera.matrix;ctx.globalAlpha=this.globalAlpha,ctx.setTransform(matrix[0],matrix[1],matrix[2],matrix[3],matrix[4],matrix[5]),ctx.drawImage(source,cd.x,cd.y,cd.width,cd.height,x,y,cd.width,cd.height)}},snapshotArea:function(x,y,width,height,callback,type,encoderOptions){return this.gl?this.renderer.snapshotFramebuffer(this.framebuffer,this.width,this.height,callback,!1,x,y,width,height,type,encoderOptions):this.renderer.snapshotCanvas(this.canvas,callback,!1,x,y,width,height,type,encoderOptions),this},snapshot:function(callback,type,encoderOptions){return this.gl?this.renderer.snapshotFramebuffer(this.framebuffer,this.width,this.height,callback,!1,0,0,this.width,this.height,type,encoderOptions):this.renderer.snapshotCanvas(this.canvas,callback,!1,0,0,this.width,this.height,type,encoderOptions),this},snapshotPixel:function(x,y,callback){return this.gl?this.renderer.snapshotFramebuffer(this.framebuffer,this.width,this.height,callback,!0,x,y):this.renderer.snapshotCanvas(this.canvas,callback,!0,x,y),this},preDestroy:function(){this._saved||(CanvasPool.remove(this.canvas),this.gl&&this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.framebuffer=null,this.texture=null,this.glTexture=null)}});module.exports=RenderTexture},function(module,exports,__webpack_require__){var AddToDOM=__webpack_require__(132),CanvasPool=__webpack_require__(28),Class=__webpack_require__(0),Components=__webpack_require__(12),GameEvents=__webpack_require__(23),GameObject=__webpack_require__(13),GetTextSize=__webpack_require__(991),GetValue=__webpack_require__(5),RemoveFromDOM=__webpack_require__(195),TextRender=__webpack_require__(992),TextStyle=__webpack_require__(995),Text=new Class({Extends:GameObject,Mixins:[Components.Alpha,Components.BlendMode,Components.ComputedSize,Components.Crop,Components.Depth,Components.Flip,Components.GetBounds,Components.Mask,Components.Origin,Components.Pipeline,Components.ScrollFactor,Components.Tint,Components.Transform,Components.Visible,TextRender],initialize:function(scene,x,y,text,style){void 0===x&&(x=0),void 0===y&&(y=0),GameObject.call(this,scene,"Text"),this.renderer=scene.sys.game.renderer,this.setPosition(x,y),this.setOrigin(0,0),this.initPipeline(),this.canvas=CanvasPool.create(this),this.context=this.canvas.getContext("2d"),this.style=new TextStyle(this,style),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,0===this.style.resolution&&(this.style.resolution=scene.sys.game.config.resolution),this._crop=this.resetCropObject(),this.texture=scene.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(text),style&&style.padding&&this.setPadding(style.padding),style&&style.lineSpacing&&(this.lineSpacing=style.lineSpacing),scene.sys.game.events.on(GameEvents.CONTEXT_RESTORED,(function(){this.dirty=!0}),this)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",AddToDOM(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(text){var style=this.style;if(style.wordWrapCallback){var wrappedLines=style.wordWrapCallback.call(style.wordWrapCallbackScope,text,this);return Array.isArray(wrappedLines)&&(wrappedLines=wrappedLines.join("\n")),wrappedLines}return style.wordWrapWidth?style.wordWrapUseAdvanced?this.advancedWordWrap(text,this.context,this.style.wordWrapWidth):this.basicWordWrap(text,this.context,this.style.wordWrapWidth):text},advancedWordWrap:function(text,context,wordWrapWidth){for(var output="",lines=text.replace(/ +/gi," ").split(this.splitRegExp),linesCount=lines.length,i=0;i<linesCount;i++){var line=lines[i],out="";if(line=line.replace(/^ *|\s*$/gi,""),context.measureText(line).width<wordWrapWidth)output+=line+"\n";else{for(var currentLineWidth=wordWrapWidth,words=line.split(" "),j=0;j<words.length;j++){var word=words[j],wordWithSpace=word+" ",wordWidth=context.measureText(wordWithSpace).width;if(wordWidth>currentLineWidth){if(0===j){for(var newWord=wordWithSpace;newWord.length&&(newWord=newWord.slice(0,-1),!((wordWidth=context.measureText(newWord).width)<=currentLineWidth)););if(!newWord.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var secondPart=word.substr(newWord.length);words[j]=secondPart,out+=newWord}var offset=words[j].length?j:j+1,remainder=words.slice(offset).join(" ").replace(/[ \n]*$/gi,"");lines[i+1]=remainder+" "+(lines[i+1]||""),linesCount=lines.length;break}out+=wordWithSpace,currentLineWidth-=wordWidth}output+=out.replace(/[ \n]*$/gi,"")+"\n"}}return output=output.replace(/[\s|\n]*$/gi,"")},basicWordWrap:function(text,context,wordWrapWidth){for(var result="",lines=text.split(this.splitRegExp),i=0;i<lines.length;i++){for(var spaceLeft=wordWrapWidth,words=lines[i].split(" "),j=0;j<words.length;j++){var wordWidthWithSpace=context.measureText(words[j]).width+context.measureText(" ").width;wordWidthWithSpace>spaceLeft?(j>0&&(result+="\n"),result+=words[j]+" ",spaceLeft=wordWrapWidth-wordWidthWithSpace):(spaceLeft-=wordWidthWithSpace,result+=words[j],j<words.length-1&&(result+=" "))}i<lines.length-1&&(result+="\n")}return result},getWrappedText:function(text){return void 0===text&&(text=this._text),this.style.syncFont(this.canvas,this.context),this.runWordWrap(text).split(this.splitRegExp)},setText:function(value){return value||0===value||(value=""),Array.isArray(value)&&(value=value.join("\n")),value!==this._text&&(this._text=value.toString(),this.updateText()),this},setStyle:function(style){return this.style.setStyle(style)},setFont:function(font){return this.style.setFont(font)},setFontFamily:function(family){return this.style.setFontFamily(family)},setFontSize:function(size){return this.style.setFontSize(size)},setFontStyle:function(style){return this.style.setFontStyle(style)},setFixedSize:function(width,height){return this.style.setFixedSize(width,height)},setBackgroundColor:function(color){return this.style.setBackgroundColor(color)},setFill:function(fillStyle){return this.style.setFill(fillStyle)},setColor:function(color){return this.style.setColor(color)},setStroke:function(color,thickness){return this.style.setStroke(color,thickness)},setShadow:function(x,y,color,blur,shadowStroke,shadowFill){return this.style.setShadow(x,y,color,blur,shadowStroke,shadowFill)},setShadowOffset:function(x,y){return this.style.setShadowOffset(x,y)},setShadowColor:function(color){return this.style.setShadowColor(color)},setShadowBlur:function(blur){return this.style.setShadowBlur(blur)},setShadowStroke:function(enabled){return this.style.setShadowStroke(enabled)},setShadowFill:function(enabled){return this.style.setShadowFill(enabled)},setWordWrapWidth:function(width,useAdvancedWrap){return this.style.setWordWrapWidth(width,useAdvancedWrap)},setWordWrapCallback:function(callback,scope){return this.style.setWordWrapCallback(callback,scope)},setAlign:function(align){return this.style.setAlign(align)},setResolution:function(value){return this.style.setResolution(value)},setLineSpacing:function(value){return this.lineSpacing=value,this.updateText()},setPadding:function(left,top,right,bottom){if("object"==typeof left){var config=left,x=GetValue(config,"x",null);null!==x?(left=x,right=x):(left=GetValue(config,"left",0),right=GetValue(config,"right",left));var y=GetValue(config,"y",null);null!==y?(top=y,bottom=y):(top=GetValue(config,"top",0),bottom=GetValue(config,"bottom",top))}else void 0===left&&(left=0),void 0===top&&(top=left),void 0===right&&(right=left),void 0===bottom&&(bottom=top);return this.padding.left=left,this.padding.top=top,this.padding.right=right,this.padding.bottom=bottom,this.updateText()},setMaxLines:function(max){return this.style.setMaxLines(max)},updateText:function(){var canvas=this.canvas,context=this.context,style=this.style,resolution=style.resolution,size=style.metrics;style.syncFont(canvas,context);var outputText=this._text;(style.wordWrapWidth||style.wordWrapCallback)&&(outputText=this.runWordWrap(this._text));var textWidth,lines=outputText.split(this.splitRegExp),textSize=GetTextSize(this,size,lines),padding=this.padding;0===style.fixedWidth?(this.width=textSize.width+padding.left+padding.right,textWidth=textSize.width):(this.width=style.fixedWidth,(textWidth=this.width-padding.left-padding.right)<textSize.width&&(textWidth=textSize.width)),0===style.fixedHeight?this.height=textSize.height+padding.top+padding.bottom:this.height=style.fixedHeight;var linePositionX,linePositionY,w=this.width,h=this.height;this.updateDisplayOrigin(),w*=resolution,h*=resolution,w=Math.max(w,1),h=Math.max(h,1),canvas.width!==w||canvas.height!==h?(canvas.width=w,canvas.height=h,this.frame.setSize(w,h),style.syncFont(canvas,context)):context.clearRect(0,0,w,h),context.save(),context.scale(resolution,resolution),style.backgroundColor&&(context.fillStyle=style.backgroundColor,context.fillRect(0,0,w,h)),style.syncStyle(canvas,context),context.textBaseline="alphabetic",context.translate(padding.left,padding.top);for(var i=0;i<textSize.lines;i++){if(linePositionX=style.strokeThickness/2,linePositionY=style.strokeThickness/2+i*textSize.lineHeight+size.ascent,i>0&&(linePositionY+=textSize.lineSpacing*i),style.rtl)linePositionX=w-linePositionX;else if("right"===style.align)linePositionX+=textWidth-textSize.lineWidths[i];else if("center"===style.align)linePositionX+=(textWidth-textSize.lineWidths[i])/2;else if("justify"===style.align){if(textSize.lineWidths[i]/textSize.width>=.85){var extraSpace=textSize.width-textSize.lineWidths[i],spaceSize=context.measureText(" ").width,trimmedLine=lines[i].trim(),array=trimmedLine.split(" ");extraSpace+=(lines[i].length-trimmedLine.length)*spaceSize;for(var extraSpaceCharacters=Math.floor(extraSpace/spaceSize),idx=0;extraSpaceCharacters>0;)array[idx]+=" ",idx=(idx+1)%(array.length-1||1),--extraSpaceCharacters;lines[i]=array.join(" ")}}this.autoRound&&(linePositionX=Math.round(linePositionX),linePositionY=Math.round(linePositionY)),style.strokeThickness&&(this.style.syncShadow(context,style.shadowStroke),context.strokeText(lines[i],linePositionX,linePositionY)),style.color&&(this.style.syncShadow(context,style.shadowFill),context.fillText(lines[i],linePositionX,linePositionY))}context.restore(),this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(canvas,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var input=this.input;return input&&!input.customHitArea&&(input.hitArea.width=this.width,input.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(value){this.setText(value)}},toJSON:function(){var out=Components.ToJSON(this),data={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return out.data=data,out},preDestroy:function(){this.style.rtl&&RemoveFromDOM(this.canvas),CanvasPool.remove(this.canvas),this.texture.destroy()}});module.exports=Text},function(module,exports,__webpack_require__){var CanvasPool=__webpack_require__(28),Class=__webpack_require__(0),Components=__webpack_require__(12),GameEvents=__webpack_require__(23),GameObject=__webpack_require__(13),GetPowerOfTwo=__webpack_require__(330),Smoothing=__webpack_require__(125),TileSpriteRender=__webpack_require__(997),Vector2=__webpack_require__(3),TileSprite=new Class({Extends:GameObject,Mixins:[Components.Alpha,Components.BlendMode,Components.ComputedSize,Components.Crop,Components.Depth,Components.Flip,Components.GetBounds,Components.Mask,Components.Origin,Components.Pipeline,Components.ScrollFactor,Components.Tint,Components.Transform,Components.Visible,TileSpriteRender],initialize:function(scene,x,y,width,height,textureKey,frameKey){var renderer=scene.sys.game.renderer;GameObject.call(this,scene,"TileSprite");var displayTexture=scene.sys.textures.get(textureKey),displayFrame=displayTexture.get(frameKey);width&&height?(width=Math.floor(width),height=Math.floor(height)):(width=displayFrame.width,height=displayFrame.height),this._tilePosition=new Vector2,this._tileScale=new Vector2(1,1),this.dirty=!1,this.renderer=renderer,this.canvas=CanvasPool.create(this,width,height),this.context=this.canvas.getContext("2d"),this.displayTexture=displayTexture,this.displayFrame=displayFrame,this._crop=this.resetCropObject(),this.texture=scene.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=GetPowerOfTwo(displayFrame.width),this.potHeight=GetPowerOfTwo(displayFrame.height),this.fillCanvas=CanvasPool.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(x,y),this.setSize(width,height),this.setFrame(frameKey),this.setOriginFromFrame(),this.initPipeline(),scene.sys.game.events.on(GameEvents.CONTEXT_RESTORED,(function(renderer){var gl=renderer.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=renderer.createTexture2D(0,gl.LINEAR,gl.LINEAR,gl.REPEAT,gl.REPEAT,gl.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}),this)},setTexture:function(key,frame){return this.displayTexture=this.scene.sys.textures.get(key),this.setFrame(frame)},setFrame:function(frame){return this.displayFrame=this.displayTexture.get(frame),this.displayFrame.cutWidth&&this.displayFrame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(x,y){return void 0!==x&&(this.tilePositionX=x),void 0!==y&&(this.tilePositionY=y),this},setTileScale:function(x,y){return void 0===x&&(x=this.tileScaleX),void 0===y&&(y=x),this.tileScaleX=x,this.tileScaleY=y,this},updateTileTexture:function(){if(this.dirty&&this.renderer){var frame=this.displayFrame,ctx=this.fillContext,canvas=this.fillCanvas,fw=this.potWidth,fh=this.potHeight;this.renderer.gl||(fw=frame.cutWidth,fh=frame.cutHeight),ctx.clearRect(0,0,fw,fh),canvas.width=fw,canvas.height=fh,ctx.drawImage(frame.source.image,frame.cutX,frame.cutY,frame.cutWidth,frame.cutHeight,0,0,fw,fh),this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(canvas,this.fillPattern):this.fillPattern=ctx.createPattern(canvas,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var canvas=this.canvas;if(canvas.width===this.width&&canvas.height===this.height||(canvas.width=this.width,canvas.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl)this.dirty=!1;else{var ctx=this.context;this.scene.sys.game.config.antialias||Smoothing.disable(ctx);var scaleX=this._tileScale.x,scaleY=this._tileScale.y,positionX=this._tilePosition.x,positionY=this._tilePosition.y;ctx.clearRect(0,0,this.width,this.height),ctx.save(),ctx.scale(scaleX,scaleY),ctx.translate(-positionX,-positionY),ctx.fillStyle=this.fillPattern,ctx.fillRect(positionX,positionY,this.width/scaleX,this.height/scaleY),ctx.restore(),this.dirty=!1}},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),CanvasPool.remove(this.canvas),CanvasPool.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(value){this._tilePosition.x=value,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(value){this._tilePosition.y=value,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(value){this._tileScale.x=value,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(value){this._tileScale.y=value,this.dirty=!0}}});module.exports=TileSprite},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Contains=__webpack_require__(216),GetPoints=__webpack_require__(425),GEOM_CONST=__webpack_require__(53),Polygon=new Class({initialize:function(points){this.type=GEOM_CONST.POLYGON,this.area=0,this.points=[],points&&this.setTo(points)},contains:function(x,y){return Contains(this,x,y)},setTo:function(points){if(this.area=0,this.points=[],"string"==typeof points&&(points=points.split(" ")),!Array.isArray(points))return this;for(var p,y0=Number.MAX_VALUE,i=0;i<points.length;i++)p={x:0,y:0},"number"==typeof points[i]||"string"==typeof points[i]?(p.x=parseFloat(points[i]),p.y=parseFloat(points[i+1]),i++):Array.isArray(points[i])?(p.x=points[i][0],p.y=points[i][1]):(p.x=points[i].x,p.y=points[i].y),this.points.push(p),p.y<y0&&(y0=p.y);return this.calculateArea(y0),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var p1,p2,sum=0,i=0;i<this.points.length-1;i++)p1=this.points[i],sum+=((p2=this.points[i+1]).x-p1.x)*(p1.y+p2.y);return p1=this.points[0],p2=this.points[this.points.length-1],sum+=(p1.x-p2.x)*(p2.y+p1.y),this.area=.5*-sum,this.area},getPoints:function(quantity,step,output){return GetPoints(this,quantity,step,output)}});module.exports=Polygon},function(module,exports){module.exports=function(polygon,x,y){for(var inside=!1,i=-1,j=polygon.points.length-1;++i<polygon.points.length;j=i){var ix=polygon.points[i].x,iy=polygon.points[i].y,jx=polygon.points[j].x,jy=polygon.points[j].y;(iy<=y&&y<jy||jy<=y&&y<iy)&&x<(jx-ix)*(y-iy)/(jy-iy)+ix&&(inside=!inside)}return inside}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Mesh=__webpack_require__(142),Quad=new Class({Extends:Mesh,initialize:function(scene,x,y,texture,frame){Mesh.call(this,scene,x,y,[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,1,1,0,0,1,1,1,0],[16777215,16777215,16777215,16777215,16777215,16777215],[1,1,1,1,1,1],texture,frame),this.resetPosition()},setFrame:function(frame){return this.frame=this.texture.get(frame),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,frame=this.frame,this.uv[0]=frame.u0,this.uv[1]=frame.v0,this.uv[2]=frame.u0,this.uv[3]=frame.v1,this.uv[4]=frame.u1,this.uv[5]=frame.v1,this.uv[6]=frame.u0,this.uv[7]=frame.v0,this.uv[8]=frame.u1,this.uv[9]=frame.v1,this.uv[10]=frame.u1,this.uv[11]=frame.v0,this},topLeftX:{get:function(){return this.x+this.vertices[0]},set:function(value){this.vertices[0]=value-this.x,this.vertices[6]=value-this.x}},topLeftY:{get:function(){return this.y+this.vertices[1]},set:function(value){this.vertices[1]=value-this.y,this.vertices[7]=value-this.y}},topRightX:{get:function(){return this.x+this.vertices[10]},set:function(value){this.vertices[10]=value-this.x}},topRightY:{get:function(){return this.y+this.vertices[11]},set:function(value){this.vertices[11]=value-this.y}},bottomLeftX:{get:function(){return this.x+this.vertices[2]},set:function(value){this.vertices[2]=value-this.x}},bottomLeftY:{get:function(){return this.y+this.vertices[3]},set:function(value){this.vertices[3]=value-this.y}},bottomRightX:{get:function(){return this.x+this.vertices[4]},set:function(value){this.vertices[4]=value-this.x,this.vertices[8]=value-this.x}},bottomRightY:{get:function(){return this.y+this.vertices[5]},set:function(value){this.vertices[5]=value-this.y,this.vertices[9]=value-this.y}},topLeftAlpha:{get:function(){return this.alphas[0]},set:function(value){this.alphas[0]=value,this.alphas[3]=value}},topRightAlpha:{get:function(){return this.alphas[5]},set:function(value){this.alphas[5]=value}},bottomLeftAlpha:{get:function(){return this.alphas[1]},set:function(value){this.alphas[1]=value}},bottomRightAlpha:{get:function(){return this.alphas[2]},set:function(value){this.alphas[2]=value,this.alphas[4]=value}},topLeftColor:{get:function(){return this.colors[0]},set:function(value){this.colors[0]=value,this.colors[3]=value}},topRightColor:{get:function(){return this.colors[5]},set:function(value){this.colors[5]=value}},bottomLeftColor:{get:function(){return this.colors[1]},set:function(value){this.colors[1]=value}},bottomRightColor:{get:function(){return this.colors[2]},set:function(value){this.colors[2]=value,this.colors[4]=value}},setTopLeft:function(x,y){return this.topLeftX=x,this.topLeftY=y,this},setTopRight:function(x,y){return this.topRightX=x,this.topRightY=y,this},setBottomLeft:function(x,y){return this.bottomLeftX=x,this.bottomLeftY=y,this},setBottomRight:function(x,y){return this.bottomRightX=x,this.bottomRightY=y,this},resetPosition:function(){var x=this.x,y=this.y,halfWidth=Math.floor(this.width/2),halfHeight=Math.floor(this.height/2);return this.setTopLeft(x-halfWidth,y-halfHeight),this.setTopRight(x+halfWidth,y-halfHeight),this.setBottomLeft(x-halfWidth,y+halfHeight),this.setBottomRight(x+halfWidth,y+halfHeight),this},resetAlpha:function(){var alphas=this.alphas;return alphas[0]=1,alphas[1]=1,alphas[2]=1,alphas[3]=1,alphas[4]=1,alphas[5]=1,this},resetColors:function(){var colors=this.colors;return colors[0]=16777215,colors[1]=16777215,colors[2]=16777215,colors[3]=16777215,colors[4]=16777215,colors[5]=16777215,this},reset:function(){return this.resetPosition(),this.resetAlpha(),this.resetColors()}});module.exports=Quad},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Components=__webpack_require__(12),GameObject=__webpack_require__(13),GetFastValue=__webpack_require__(1),Extend=__webpack_require__(17),SetValue=__webpack_require__(433),ShaderRender=__webpack_require__(1076),TransformMatrix=__webpack_require__(36),Shader=new Class({Extends:GameObject,Mixins:[Components.ComputedSize,Components.Depth,Components.GetBounds,Components.Mask,Components.Origin,Components.ScrollFactor,Components.Transform,Components.Visible,ShaderRender],initialize:function(scene,key,x,y,width,height,textures){void 0===x&&(x=0),void 0===y&&(y=0),void 0===width&&(width=128),void 0===height&&(height=128),GameObject.call(this,scene,"Shader"),this.blendMode=-1,this.shader;var renderer=scene.sys.renderer;this.renderer=renderer,this.gl=renderer.gl,this.vertexData=new ArrayBuffer(2*Float32Array.BYTES_PER_ELEMENT*6),this.vertexBuffer=renderer.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new TransformMatrix,this._tempMatrix2=new TransformMatrix,this._tempMatrix3=new TransformMatrix,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=renderer.width,this._rendererHeight=renderer.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this._savedKey="",this.setPosition(x,y),this.setSize(width,height),this.setOrigin(.5,.5),this.setShader(key,textures)},willRender:function(camera){return!!this.renderToTexture||!(GameObject.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&camera.id)},setRenderToTexture:function(key,flipY){if(void 0===flipY&&(flipY=!1),!this.renderToTexture){var width=this.width,height=this.height,renderer=this.renderer;this.glTexture=renderer.createTextureFromSource(null,width,height,0),this.glTexture.flipY=flipY,this.framebuffer=renderer.createFramebuffer(width,height,this.glTexture,!1),this._rendererWidth=width,this._rendererHeight=height,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),key&&(this._savedKey=key,this.texture=this.scene.sys.textures.addGLTexture(key,this.glTexture,width,height))}return this},setShader:function(key,textures){if(void 0===textures&&(textures=[]),"string"==typeof key){var cache=this.scene.sys.cache.shader;if(!cache.has(key))return console.warn("Shader missing: "+key),this;this.shader=cache.get(key)}else this.shader=key;var gl=this.gl,renderer=this.renderer;this.program&&gl.deleteProgram(this.program);var program=renderer.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);renderer.setMatrix4(program,"uViewMatrix",!1,this.viewMatrix),renderer.setMatrix4(program,"uProjectionMatrix",!1,this.projectionMatrix),renderer.setFloat2(program,"uResolution",this.width,this.height),this.program=program;var d=new Date,defaultUniforms={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[d.getFullYear(),d.getMonth(),d.getDate(),60*d.getHours()*60+60*d.getMinutes()+d.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=Extend(!0,{},this.shader.uniforms,defaultUniforms):this.uniforms=defaultUniforms;for(var i=0;i<4;i++)textures[i]&&this.setSampler2D("iChannel"+i,textures[i],i);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(pointer){return this.pointer=pointer,this},projOrtho:function(left,right,bottom,top){var leftRight=1/(left-right),bottomTop=1/(bottom-top),pm=this.projectionMatrix;pm[0]=-2*leftRight,pm[5]=-2*bottomTop,pm[10]=-.001,pm[12]=(left+right)*leftRight,pm[13]=(top+bottom)*bottomTop,pm[14]=-0;var program=this.program;this.renderer.setMatrix4(program,"uProjectionMatrix",!1,this.projectionMatrix),this._rendererWidth=right,this._rendererHeight=bottom},initUniforms:function(){var gl=this.gl,map=this.renderer.glFuncMap,program=this.program;for(var key in this._textureCount=0,this.uniforms){var uniform=this.uniforms[key],type=uniform.type,data=map[type];uniform.uniformLocation=gl.getUniformLocation(program,key),"sampler2D"!==type&&(uniform.glMatrix=data.matrix,uniform.glValueLength=data.length,uniform.glFunc=data.func)}},setSampler2DBuffer:function(uniformKey,texture,width,height,textureIndex,textureData){void 0===textureIndex&&(textureIndex=0),void 0===textureData&&(textureData={});var uniform=this.uniforms[uniformKey];return uniform.value=texture,textureData.width=width,textureData.height=height,uniform.textureData=textureData,this._textureCount=textureIndex,this.initSampler2D(uniform),this},setSampler2D:function(uniformKey,textureKey,textureIndex,textureData){void 0===textureIndex&&(textureIndex=0);var textureManager=this.scene.sys.textures;if(textureManager.exists(textureKey)){var frame=textureManager.getFrame(textureKey),uniform=this.uniforms[uniformKey],source=frame.source;uniform.textureKey=textureKey,uniform.source=source.image,uniform.value=frame.glTexture,source.isGLTexture&&(textureData||(textureData={}),textureData.width=source.width,textureData.height=source.height),textureData&&(uniform.textureData=textureData),this._textureCount=textureIndex,this.initSampler2D(uniform)}return this},setUniform:function(key,value){return SetValue(this.uniforms,key,value),this},getUniform:function(key){return GetFastValue(this.uniforms,key,null)},setChannel0:function(textureKey,textureData){return this.setSampler2D("iChannel0",textureKey,0,textureData)},setChannel1:function(textureKey,textureData){return this.setSampler2D("iChannel1",textureKey,1,textureData)},setChannel2:function(textureKey,textureData){return this.setSampler2D("iChannel2",textureKey,2,textureData)},setChannel3:function(textureKey,textureData){return this.setSampler2D("iChannel3",textureKey,3,textureData)},initSampler2D:function(uniform){if(uniform.value){var gl=this.gl;gl.activeTexture(gl.TEXTURE0+this._textureCount),gl.bindTexture(gl.TEXTURE_2D,uniform.value);var data=uniform.textureData;if(data){var magFilter=gl[GetFastValue(data,"magFilter","linear").toUpperCase()],minFilter=gl[GetFastValue(data,"minFilter","linear").toUpperCase()],wrapS=gl[GetFastValue(data,"wrapS","repeat").toUpperCase()],wrapT=gl[GetFastValue(data,"wrapT","repeat").toUpperCase()],format=gl[GetFastValue(data,"format","rgba").toUpperCase()];if(data.repeat&&(wrapS=gl.REPEAT,wrapT=gl.REPEAT),gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL,!!data.flipY),data.width){var width=GetFastValue(data,"width",512),height=GetFastValue(data,"height",2),border=GetFastValue(data,"border",0);gl.texImage2D(gl.TEXTURE_2D,0,format,width,height,border,format,gl.UNSIGNED_BYTE,null)}else gl.texImage2D(gl.TEXTURE_2D,0,format,gl.RGBA,gl.UNSIGNED_BYTE,uniform.source);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,magFilter),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,minFilter),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,wrapS),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,wrapT)}this.renderer.setProgram(this.program),gl.uniform1i(uniform.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var uniform,length,glFunc,location,value,gl=this.gl,uniforms=this.uniforms,textureCount=0;for(var key in uniforms)glFunc=(uniform=uniforms[key]).glFunc,length=uniform.glValueLength,location=uniform.uniformLocation,null!==(value=uniform.value)&&(1===length?uniform.glMatrix?glFunc.call(gl,location,uniform.transpose,value):glFunc.call(gl,location,value):2===length?glFunc.call(gl,location,value.x,value.y):3===length?glFunc.call(gl,location,value.x,value.y,value.z):4===length?glFunc.call(gl,location,value.x,value.y,value.z,value.w):"sampler2D"===uniform.type&&(gl.activeTexture(gl["TEXTURE"+textureCount]),gl.bindTexture(gl.TEXTURE_2D,value),gl.uniform1i(location,textureCount),textureCount++))},load:function(matrix2D){var gl=this.gl,width=this.width,height=this.height,renderer=this.renderer,program=this.program,vm=this.viewMatrix;if(!this.renderToTexture){var x=-this._displayOriginX,y=-this._displayOriginY;vm[0]=matrix2D[0],vm[1]=matrix2D[1],vm[4]=matrix2D[2],vm[5]=matrix2D[3],vm[8]=matrix2D[4],vm[9]=matrix2D[5],vm[12]=vm[0]*x+vm[4]*y,vm[13]=vm[1]*x+vm[5]*y}gl.useProgram(program),gl.uniformMatrix4fv(gl.getUniformLocation(program,"uViewMatrix"),!1,vm),gl.uniform2f(gl.getUniformLocation(program,"uResolution"),this.width,this.height);var uniforms=this.uniforms,res=uniforms.resolution;res.value.x=width,res.value.y=height,uniforms.time.value=renderer.game.loop.getDuration();var pointer=this.pointer;if(pointer){var mouse=uniforms.mouse,px=pointer.x/width,py=1-pointer.y/height;mouse.value.x=px.toFixed(2),mouse.value.y=py.toFixed(2)}this.syncUniforms()},flush:function(){var width=this.width,height=this.height,program=this.program,gl=this.gl,vertexBuffer=this.vertexBuffer,renderer=this.renderer,vertexSize=2*Float32Array.BYTES_PER_ELEMENT;this.renderToTexture&&(renderer.setFramebuffer(this.framebuffer),gl.clearColor(0,0,0,0),gl.clear(gl.COLOR_BUFFER_BIT)),gl.bindBuffer(gl.ARRAY_BUFFER,vertexBuffer);var location=gl.getAttribLocation(program,"inPosition");-1!==location&&(gl.enableVertexAttribArray(location),gl.vertexAttribPointer(location,2,gl.FLOAT,!1,vertexSize,0));var vf=this.vertexViewF32;vf[3]=height,vf[4]=width,vf[5]=height,vf[8]=width,vf[9]=height,vf[10]=width;gl.bufferSubData(gl.ARRAY_BUFFER,0,this.bytes.subarray(0,6*vertexSize)),gl.drawArrays(gl.TRIANGLES,0,6),this.renderToTexture&&renderer.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var gl=this.gl;gl.deleteProgram(this.program),gl.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});module.exports=Shader},function(module,exports,__webpack_require__){var Point=__webpack_require__(4),LineToCircle=__webpack_require__(220);module.exports=function(line,circle,out){if(void 0===out&&(out=[]),LineToCircle(line,circle)){var x,y,lx1=line.x1,ly1=line.y1,lx2=line.x2,ly2=line.y2,cx=circle.x,cy=circle.y,cr=circle.radius,lDirX=lx2-lx1,lDirY=ly2-ly1,oDirX=lx1-cx,oDirY=ly1-cy,coefficientA=lDirX*lDirX+lDirY*lDirY,coefficientB=2*(lDirX*oDirX+lDirY*oDirY),lambda=coefficientB*coefficientB-4*coefficientA*(oDirX*oDirX+oDirY*oDirY-cr*cr);if(0===lambda){var root=-coefficientB/(2*coefficientA);x=lx1+root*lDirX,y=ly1+root*lDirY,root>=0&&root<=1&&out.push(new Point(x,y))}else if(lambda>0){var root1=(-coefficientB-Math.sqrt(lambda))/(2*coefficientA);x=lx1+root1*lDirX,y=ly1+root1*lDirY,root1>=0&&root1<=1&&out.push(new Point(x,y));var root2=(-coefficientB+Math.sqrt(lambda))/(2*coefficientA);x=lx1+root2*lDirX,y=ly1+root2*lDirY,root2>=0&&root2<=1&&out.push(new Point(x,y))}}return out}},function(module,exports,__webpack_require__){var Contains=__webpack_require__(52),tmp=new(__webpack_require__(4));module.exports=function(line,circle,nearest){if(void 0===nearest&&(nearest=tmp),Contains(circle,line.x1,line.y1))return nearest.x=line.x1,nearest.y=line.y1,!0;if(Contains(circle,line.x2,line.y2))return nearest.x=line.x2,nearest.y=line.y2,!0;var dx=line.x2-line.x1,dy=line.y2-line.y1,lcx=circle.x-line.x1,lcy=circle.y-line.y1,dLen2=dx*dx+dy*dy,px=dx,py=dy;if(dLen2>0){var dp=(lcx*dx+lcy*dy)/dLen2;px*=dp,py*=dp}return nearest.x=line.x1+px,nearest.y=line.y1+py,px*px+py*py<=dLen2&&px*dx+py*dy>=0&&Contains(circle,nearest.x,nearest.y)}},function(module,exports,__webpack_require__){var Point=__webpack_require__(4),LineToLine=__webpack_require__(95),LineToRectangle=__webpack_require__(440);module.exports=function(line,rect,out){if(void 0===out&&(out=[]),LineToRectangle(line,rect))for(var lineA=rect.getLineA(),lineB=rect.getLineB(),lineC=rect.getLineC(),lineD=rect.getLineD(),output=[new Point,new Point,new Point,new Point],result=[LineToLine(lineA,line,output[0]),LineToLine(lineB,line,output[1]),LineToLine(lineC,line,output[2]),LineToLine(lineD,line,output[3])],i=0;i<4;i++)result[i]&&out.push(output[i]);return out}},function(module,exports){module.exports=function(triangle,points,returnFirst,out){void 0===returnFirst&&(returnFirst=!1),void 0===out&&(out=[]);for(var u,v,v2x,v2y,dot02,dot12,v0x=triangle.x3-triangle.x1,v0y=triangle.y3-triangle.y1,v1x=triangle.x2-triangle.x1,v1y=triangle.y2-triangle.y1,dot00=v0x*v0x+v0y*v0y,dot01=v0x*v1x+v0y*v1y,dot11=v1x*v1x+v1y*v1y,b=dot00*dot11-dot01*dot01,inv=0===b?0:1/b,x1=triangle.x1,y1=triangle.y1,i=0;i<points.length&&(v=(dot00*(dot12=v1x*(v2x=points[i].x-x1)+v1y*(v2y=points[i].y-y1))-dot01*(dot02=v0x*v2x+v0y*v2y))*inv,!((u=(dot11*dot02-dot01*dot12)*inv)>=0&&v>=0&&u+v<1&&(out.push({x:points[i].x,y:points[i].y}),returnFirst)));i++);return out}},function(module,exports){module.exports=function(line,x,y,angle){var c=Math.cos(angle),s=Math.sin(angle),tx=line.x1-x,ty=line.y1-y;return line.x1=tx*c-ty*s+x,line.y1=tx*s+ty*c+y,tx=line.x2-x,ty=line.y2-y,line.x2=tx*c-ty*s+x,line.y2=tx*s+ty*c+y,line}},function(module,exports){module.exports=function(rect){return 0===rect.height?NaN:rect.width/rect.height}},function(module,exports){module.exports=function(triangle,x,y,angle){var c=Math.cos(angle),s=Math.sin(angle),tx=triangle.x1-x,ty=triangle.y1-y;return triangle.x1=tx*c-ty*s+x,triangle.y1=tx*s+ty*c+y,tx=triangle.x2-x,ty=triangle.y2-y,triangle.x2=tx*c-ty*s+x,triangle.y2=tx*s+ty*c+y,tx=triangle.x3-x,ty=triangle.y3-y,triangle.x3=tx*c-ty*s+x,triangle.y3=tx*s+ty*c+y,triangle}},function(module,exports,__webpack_require__){module.exports={BUTTON_DOWN:__webpack_require__(1197),BUTTON_UP:__webpack_require__(1198),CONNECTED:__webpack_require__(1199),DISCONNECTED:__webpack_require__(1200),GAMEPAD_BUTTON_DOWN:__webpack_require__(1201),GAMEPAD_BUTTON_UP:__webpack_require__(1202)}},function(module,exports){module.exports=function(file,baseURL){return!!file.url&&(file.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?file.url:baseURL+file.url)}},function(module,exports,__webpack_require__){var Extend=__webpack_require__(17),XHRSettings=__webpack_require__(146);module.exports=function(global,local){var output=void 0===global?XHRSettings():Extend({},global);if(local)for(var setting in local)void 0!==local[setting]&&(output[setting]=local[setting]);return output}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),CONST=__webpack_require__(21),File=__webpack_require__(24),FileTypesManager=__webpack_require__(8),GetFastValue=__webpack_require__(1),IsPlainObject=__webpack_require__(7),ParseXML=__webpack_require__(371),XMLFile=new Class({Extends:File,initialize:function(loader,key,url,xhrSettings){var extension="xml";if(IsPlainObject(key)){var config=key;key=GetFastValue(config,"key"),url=GetFastValue(config,"url"),xhrSettings=GetFastValue(config,"xhrSettings"),extension=GetFastValue(config,"extension",extension)}var fileConfig={type:"xml",cache:loader.cacheManager.xml,extension:extension,responseType:"text",key:key,url:url,xhrSettings:xhrSettings};File.call(this,loader,fileConfig)},onProcess:function(){this.state=CONST.FILE_PROCESSING,this.data=ParseXML(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});FileTypesManager.register("xml",(function(key,url,xhrSettings){if(Array.isArray(key))for(var i=0;i<key.length;i++)this.addFile(new XMLFile(this,key[i]));else this.addFile(new XMLFile(this,key,url,xhrSettings));return this})),module.exports=XMLFile},function(module,exports,__webpack_require__){module.exports={Acceleration:__webpack_require__(1257),Angular:__webpack_require__(1258),Bounce:__webpack_require__(1259),Debug:__webpack_require__(1260),Drag:__webpack_require__(1261),Enable:__webpack_require__(1262),Friction:__webpack_require__(1263),Gravity:__webpack_require__(1264),Immovable:__webpack_require__(1265),Mass:__webpack_require__(1266),Size:__webpack_require__(1267),Velocity:__webpack_require__(1268)}},function(module,exports,__webpack_require__){module.exports={COLLIDE:__webpack_require__(1270),OVERLAP:__webpack_require__(1271),PAUSE:__webpack_require__(1272),RESUME:__webpack_require__(1273),TILE_COLLIDE:__webpack_require__(1274),TILE_OVERLAP:__webpack_require__(1275),WORLD_BOUNDS:__webpack_require__(1276),WORLD_STEP:__webpack_require__(1277)}},function(module,exports,__webpack_require__){module.exports={COLLIDE:__webpack_require__(1289),PAUSE:__webpack_require__(1290),RESUME:__webpack_require__(1291)}},function(module,exports,__webpack_require__){module.exports={Acceleration:__webpack_require__(1293),BodyScale:__webpack_require__(1294),BodyType:__webpack_require__(1295),Bounce:__webpack_require__(1296),CheckAgainst:__webpack_require__(1297),Collides:__webpack_require__(1298),Debug:__webpack_require__(1299),Friction:__webpack_require__(1300),Gravity:__webpack_require__(1301),Offset:__webpack_require__(1302),SetGameObject:__webpack_require__(1303),Velocity:__webpack_require__(1304)}},function(module,exports,__webpack_require__){var Axes={};module.exports=Axes;var Vector=__webpack_require__(38),Common=__webpack_require__(19);Axes.fromVertices=function(vertices){for(var axes={},i=0;i<vertices.length;i++){var j=(i+1)%vertices.length,normal=Vector.normalise({x:vertices[j].y-vertices[i].y,y:vertices[i].x-vertices[j].x}),gradient=0===normal.y?1/0:normal.x/normal.y;axes[gradient=gradient.toFixed(3).toString()]=normal}return Common.values(axes)},Axes.rotate=function(axes,angle){if(0!==angle)for(var cos=Math.cos(angle),sin=Math.sin(angle),i=0;i<axes.length;i++){var xx,axis=axes[i];xx=axis.x*cos-axis.y*sin,axis.y=axis.x*sin+axis.y*cos,axis.x=xx}}},function(module,exports,__webpack_require__){module.exports={AFTER_UPDATE:__webpack_require__(1321),BEFORE_UPDATE:__webpack_require__(1322),COLLISION_ACTIVE:__webpack_require__(1323),COLLISION_END:__webpack_require__(1324),COLLISION_START:__webpack_require__(1325),DRAG_END:__webpack_require__(1326),DRAG:__webpack_require__(1327),DRAG_START:__webpack_require__(1328),PAUSE:__webpack_require__(1329),RESUME:__webpack_require__(1330),SLEEP_END:__webpack_require__(1331),SLEEP_START:__webpack_require__(1332)}},function(module,exports,__webpack_require__){var Bodies=__webpack_require__(60),Body=__webpack_require__(26),Class=__webpack_require__(0),Components=__webpack_require__(148),GetFastValue=__webpack_require__(1),HasValue=__webpack_require__(93),Vertices=__webpack_require__(32),MatterTileBody=new Class({Mixins:[Components.Bounce,Components.Collision,Components.Friction,Components.Gravity,Components.Mass,Components.Sensor,Components.Sleep,Components.Static],initialize:function(world,tile,options){this.tile=tile,this.world=world,tile.physics.matterBody&&tile.physics.matterBody.destroy(),tile.physics.matterBody=this;var body=GetFastValue(options,"body",null),addToWorld=GetFastValue(options,"addToWorld",!0);if(body)this.setBody(body,addToWorld);else{var collisionGroup=tile.getCollisionGroup();GetFastValue(collisionGroup,"objects",[]).length>0?this.setFromTileCollision(options):this.setFromTileRectangle(options)}},setFromTileRectangle:function(options){void 0===options&&(options={}),HasValue(options,"isStatic")||(options.isStatic=!0),HasValue(options,"addToWorld")||(options.addToWorld=!0);var bounds=this.tile.getBounds(),cx=bounds.x+bounds.width/2,cy=bounds.y+bounds.height/2,body=Bodies.rectangle(cx,cy,bounds.width,bounds.height,options);return this.setBody(body,options.addToWorld),this},setFromTileCollision:function(options){void 0===options&&(options={}),HasValue(options,"isStatic")||(options.isStatic=!0),HasValue(options,"addToWorld")||(options.addToWorld=!0);for(var sx=this.tile.tilemapLayer.scaleX,sy=this.tile.tilemapLayer.scaleY,tileX=this.tile.getLeft(),tileY=this.tile.getTop(),collisionGroup=this.tile.getCollisionGroup(),collisionObjects=GetFastValue(collisionGroup,"objects",[]),parts=[],i=0;i<collisionObjects.length;i++){var object=collisionObjects[i],ox=tileX+object.x*sx,oy=tileY+object.y*sy,ow=object.width*sx,oh=object.height*sy,body=null;if(object.rectangle)body=Bodies.rectangle(ox+ow/2,oy+oh/2,ow,oh,options);else if(object.ellipse)body=Bodies.circle(ox+ow/2,oy+oh/2,ow/2,options);else if(object.polygon||object.polyline){var points=(object.polygon?object.polygon:object.polyline).map((function(p){return{x:p.x*sx,y:p.y*sy}})),vertices=Vertices.create(points),center=Vertices.centre(vertices);ox+=center.x,oy+=center.y,body=Bodies.fromVertices(ox,oy,vertices,options)}body&&parts.push(body)}return 1===parts.length?this.setBody(parts[0],options.addToWorld):parts.length>1&&(options.parts=parts,this.setBody(Body.create(options),options.addToWorld)),this},setBody:function(body,addToWorld){return void 0===addToWorld&&(addToWorld=!0),this.body&&this.removeBody(),this.body=body,this.body.gameObject=this,addToWorld&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0}});module.exports=MatterTileBody},function(module,exports,__webpack_require__){var Detector={};module.exports=Detector;var SAT=__webpack_require__(238),Pair=__webpack_require__(149),Bounds=__webpack_require__(39);Detector.collisions=function(broadphasePairs,engine){for(var collisions=[],pairsTable=engine.pairs.table,metrics=engine.metrics,i=0;i<broadphasePairs.length;i++){var bodyA=broadphasePairs[i][0],bodyB=broadphasePairs[i][1];if((!bodyA.isStatic&&!bodyA.isSleeping||!bodyB.isStatic&&!bodyB.isSleeping)&&Detector.canCollide(bodyA.collisionFilter,bodyB.collisionFilter)&&(metrics.midphaseTests+=1,Bounds.overlaps(bodyA.bounds,bodyB.bounds)))for(var j=bodyA.parts.length>1?1:0;j<bodyA.parts.length;j++)for(var partA=bodyA.parts[j],k=bodyB.parts.length>1?1:0;k<bodyB.parts.length;k++){var partB=bodyB.parts[k];if(partA===bodyA&&partB===bodyB||Bounds.overlaps(partA.bounds,partB.bounds)){var previousCollision,pair=pairsTable[Pair.id(partA,partB)];previousCollision=pair&&pair.isActive?pair.collision:null;var collision=SAT.collides(partA,partB,previousCollision);metrics.narrowphaseTests+=1,collision.reused&&(metrics.narrowReuseCount+=1),collision.collided&&(collisions.push(collision),metrics.narrowDetections+=1)}}}return collisions},Detector.canCollide=function(filterA,filterB){return filterA.group===filterB.group&&0!==filterA.group?filterA.group>0:0!=(filterA.mask&filterB.category)&&0!=(filterB.mask&filterA.category)}},function(module,exports,__webpack_require__){var SAT={};module.exports=SAT;var Vertices=__webpack_require__(32),Vector=__webpack_require__(38);SAT.collides=function(bodyA,bodyB,previousCollision){var overlapAB,overlapBA,minOverlap,collision,canReusePrevCol=!1;if(previousCollision){var parentA=bodyA.parent,parentB=bodyB.parent,motion=parentA.speed*parentA.speed+parentA.angularSpeed*parentA.angularSpeed+parentB.speed*parentB.speed+parentB.angularSpeed*parentB.angularSpeed;canReusePrevCol=previousCollision&&previousCollision.collided&&motion<.2,collision=previousCollision}else collision={collided:!1,bodyA:bodyA,bodyB:bodyB};if(previousCollision&&canReusePrevCol){var axisBodyA=collision.axisBody,axisBodyB=axisBodyA===bodyA?bodyB:bodyA,axes=[axisBodyA.axes[previousCollision.axisNumber]];if(minOverlap=SAT._overlapAxes(axisBodyA.vertices,axisBodyB.vertices,axes),collision.reused=!0,minOverlap.overlap<=0)return collision.collided=!1,collision}else{if((overlapAB=SAT._overlapAxes(bodyA.vertices,bodyB.vertices,bodyA.axes)).overlap<=0)return collision.collided=!1,collision;if((overlapBA=SAT._overlapAxes(bodyB.vertices,bodyA.vertices,bodyB.axes)).overlap<=0)return collision.collided=!1,collision;overlapAB.overlap<overlapBA.overlap?(minOverlap=overlapAB,collision.axisBody=bodyA):(minOverlap=overlapBA,collision.axisBody=bodyB),collision.axisNumber=minOverlap.axisNumber}collision.bodyA=bodyA.id<bodyB.id?bodyA:bodyB,collision.bodyB=bodyA.id<bodyB.id?bodyB:bodyA,collision.collided=!0,collision.depth=minOverlap.overlap,collision.parentA=collision.bodyA.parent,collision.parentB=collision.bodyB.parent,bodyA=collision.bodyA,bodyB=collision.bodyB,Vector.dot(minOverlap.axis,Vector.sub(bodyB.position,bodyA.position))<0?collision.normal={x:minOverlap.axis.x,y:minOverlap.axis.y}:collision.normal={x:-minOverlap.axis.x,y:-minOverlap.axis.y},collision.tangent=Vector.perp(collision.normal),collision.penetration=collision.penetration||{},collision.penetration.x=collision.normal.x*collision.depth,collision.penetration.y=collision.normal.y*collision.depth;var verticesB=SAT._findSupports(bodyA,bodyB,collision.normal),supports=[];if(Vertices.contains(bodyA.vertices,verticesB[0])&&supports.push(verticesB[0]),Vertices.contains(bodyA.vertices,verticesB[1])&&supports.push(verticesB[1]),supports.length<2){var verticesA=SAT._findSupports(bodyB,bodyA,Vector.neg(collision.normal));Vertices.contains(bodyB.vertices,verticesA[0])&&supports.push(verticesA[0]),supports.length<2&&Vertices.contains(bodyB.vertices,verticesA[1])&&supports.push(verticesA[1])}return supports.length<1&&(supports=[verticesB[0]]),collision.supports=supports,collision},SAT._overlapAxes=function(verticesA,verticesB,axes){for(var overlap,axis,projectionA=Vector._temp[0],projectionB=Vector._temp[1],result={overlap:Number.MAX_VALUE},i=0;i<axes.length;i++){if(axis=axes[i],SAT._projectToAxis(projectionA,verticesA,axis),SAT._projectToAxis(projectionB,verticesB,axis),(overlap=Math.min(projectionA.max-projectionB.min,projectionB.max-projectionA.min))<=0)return result.overlap=overlap,result;overlap<result.overlap&&(result.overlap=overlap,result.axis=axis,result.axisNumber=i)}return result},SAT._projectToAxis=function(projection,vertices,axis){for(var min=Vector.dot(vertices[0],axis),max=min,i=1;i<vertices.length;i+=1){var dot=Vector.dot(vertices[i],axis);dot>max?max=dot:dot<min&&(min=dot)}projection.min=min,projection.max=max},SAT._findSupports=function(bodyA,bodyB,normal){for(var distance,vertex,vertexA,vertexB,nearestDistance=Number.MAX_VALUE,vertexToBody=Vector._temp[0],vertices=bodyB.vertices,bodyAPosition=bodyA.position,i=0;i<vertices.length;i++)vertex=vertices[i],vertexToBody.x=vertex.x-bodyAPosition.x,vertexToBody.y=vertex.y-bodyAPosition.y,(distance=-Vector.dot(normal,vertexToBody))<nearestDistance&&(nearestDistance=distance,vertexA=vertex);return vertex=vertices[vertexA.index-1>=0?vertexA.index-1:vertices.length-1],vertexToBody.x=vertex.x-bodyAPosition.x,vertexToBody.y=vertex.y-bodyAPosition.y,nearestDistance=-Vector.dot(normal,vertexToBody),vertexB=vertex,vertex=vertices[(vertexA.index+1)%vertices.length],vertexToBody.x=vertex.x-bodyAPosition.x,vertexToBody.y=vertex.y-bodyAPosition.y,(distance=-Vector.dot(normal,vertexToBody))<nearestDistance&&(vertexB=vertex),[vertexA,vertexB]}},function(module,exports,__webpack_require__){var Matter=__webpack_require__(494);Matter.Body=__webpack_require__(26),Matter.Composite=__webpack_require__(77),Matter.World=__webpack_require__(241),Matter.Detector=__webpack_require__(237),Matter.Grid=__webpack_require__(495),Matter.Pairs=__webpack_require__(496),Matter.Pair=__webpack_require__(149),Matter.Query=__webpack_require__(1336),Matter.Resolver=__webpack_require__(497),Matter.SAT=__webpack_require__(238),Matter.Constraint=__webpack_require__(98),Matter.Common=__webpack_require__(19),Matter.Engine=__webpack_require__(498),Matter.Events=__webpack_require__(97),Matter.Sleeping=__webpack_require__(113),Matter.Plugin=__webpack_require__(240),Matter.Bodies=__webpack_require__(60),Matter.Composites=__webpack_require__(490),Matter.Axes=__webpack_require__(234),Matter.Bounds=__webpack_require__(39),Matter.Svg=__webpack_require__(1338),Matter.Vector=__webpack_require__(38),Matter.Vertices=__webpack_require__(32),Matter.World.add=Matter.Composite.add,Matter.World.remove=Matter.Composite.remove,Matter.World.addComposite=Matter.Composite.addComposite,Matter.World.addBody=Matter.Composite.addBody,Matter.World.addConstraint=Matter.Composite.addConstraint,Matter.World.clear=Matter.Composite.clear,module.exports=Matter},function(module,exports,__webpack_require__){var Plugin={};module.exports=Plugin;var Common=__webpack_require__(19);Plugin._registry={},Plugin.register=function(plugin){if(Plugin.isPlugin(plugin)||Common.warn("Plugin.register:",Plugin.toString(plugin),"does not implement all required fields."),plugin.name in Plugin._registry){var registered=Plugin._registry[plugin.name],pluginVersion=Plugin.versionParse(plugin.version).number,registeredVersion=Plugin.versionParse(registered.version).number;pluginVersion>registeredVersion?(Common.warn("Plugin.register:",Plugin.toString(registered),"was upgraded to",Plugin.toString(plugin)),Plugin._registry[plugin.name]=plugin):pluginVersion<registeredVersion?Common.warn("Plugin.register:",Plugin.toString(registered),"can not be downgraded to",Plugin.toString(plugin)):plugin!==registered&&Common.warn("Plugin.register:",Plugin.toString(plugin),"is already registered to different plugin object")}else Plugin._registry[plugin.name]=plugin;return plugin},Plugin.resolve=function(dependency){return Plugin._registry[Plugin.dependencyParse(dependency).name]},Plugin.toString=function(plugin){return"string"==typeof plugin?plugin:(plugin.name||"anonymous")+"@"+(plugin.version||plugin.range||"0.0.0")},Plugin.isPlugin=function(obj){return obj&&obj.name&&obj.version&&obj.install},Plugin.isUsed=function(module,name){return module.used.indexOf(name)>-1},Plugin.isFor=function(plugin,module){var parsed=plugin.for&&Plugin.dependencyParse(plugin.for);return!plugin.for||module.name===parsed.name&&Plugin.versionSatisfies(module.version,parsed.range)},Plugin.use=function(module,plugins){if(module.uses=(module.uses||[]).concat(plugins||[]),0!==module.uses.length){for(var dependencies=Plugin.dependencies(module),sortedDependencies=Common.topologicalSort(dependencies),status=[],i=0;i<sortedDependencies.length;i+=1)if(sortedDependencies[i]!==module.name){var plugin=Plugin.resolve(sortedDependencies[i]);plugin?Plugin.isUsed(module,plugin.name)||(Plugin.isFor(plugin,module)||(Common.warn("Plugin.use:",Plugin.toString(plugin),"is for",plugin.for,"but installed on",Plugin.toString(module)+"."),plugin._warned=!0),plugin.install?plugin.install(module):(Common.warn("Plugin.use:",Plugin.toString(plugin),"does not specify an install function."),plugin._warned=!0),plugin._warned?(status.push("🔶 "+Plugin.toString(plugin)),delete plugin._warned):status.push("✅ "+Plugin.toString(plugin)),module.used.push(plugin.name)):status.push("❌ "+sortedDependencies[i])}status.length>0&&!plugin.silent&&Common.info(status.join("  "))}else Common.warn("Plugin.use:",Plugin.toString(module),"does not specify any dependencies to install.")},Plugin.dependencies=function(module,tracked){var parsedBase=Plugin.dependencyParse(module),name=parsedBase.name;if(!(name in(tracked=tracked||{}))){module=Plugin.resolve(module)||module,tracked[name]=Common.map(module.uses||[],(function(dependency){Plugin.isPlugin(dependency)&&Plugin.register(dependency);var parsed=Plugin.dependencyParse(dependency),resolved=Plugin.resolve(dependency);return resolved&&!Plugin.versionSatisfies(resolved.version,parsed.range)?(Common.warn("Plugin.dependencies:",Plugin.toString(resolved),"does not satisfy",Plugin.toString(parsed),"used by",Plugin.toString(parsedBase)+"."),resolved._warned=!0,module._warned=!0):resolved||(Common.warn("Plugin.dependencies:",Plugin.toString(dependency),"used by",Plugin.toString(parsedBase),"could not be resolved."),module._warned=!0),parsed.name}));for(var i=0;i<tracked[name].length;i+=1)Plugin.dependencies(tracked[name][i],tracked);return tracked}},Plugin.dependencyParse=function(dependency){return Common.isString(dependency)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/.test(dependency)||Common.warn("Plugin.dependencyParse:",dependency,"is not a valid dependency string."),{name:dependency.split("@")[0],range:dependency.split("@")[1]||"*"}):{name:dependency.name,range:dependency.range||dependency.version}},Plugin.versionParse=function(range){/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/.test(range)||Common.warn("Plugin.versionParse:",range,"is not a valid version or range.");var identifiers=range.split("-");range=identifiers[0];var isRange=isNaN(Number(range[0])),version=isRange?range.substr(1):range,parts=Common.map(version.split("."),(function(part){return Number(part)}));return{isRange:isRange,version:version,range:range,operator:isRange?range[0]:"",parts:parts,prerelease:identifiers[1],number:1e8*parts[0]+1e4*parts[1]+parts[2]}},Plugin.versionSatisfies=function(version,range){range=range||"*";var rangeParsed=Plugin.versionParse(range),rangeParts=rangeParsed.parts,versionParsed=Plugin.versionParse(version),versionParts=versionParsed.parts;if(rangeParsed.isRange){if("*"===rangeParsed.operator||"*"===version)return!0;if("~"===rangeParsed.operator)return versionParts[0]===rangeParts[0]&&versionParts[1]===rangeParts[1]&&versionParts[2]>=rangeParts[2];if("^"===rangeParsed.operator)return rangeParts[0]>0?versionParts[0]===rangeParts[0]&&versionParsed.number>=rangeParsed.number:rangeParts[1]>0?versionParts[1]===rangeParts[1]&&versionParts[2]>=rangeParts[2]:versionParts[2]===rangeParts[2]}return version===range||"*"===version}},function(module,exports,__webpack_require__){var World={};module.exports=World;var Composite=__webpack_require__(77),Common=(__webpack_require__(98),__webpack_require__(19));World.create=function(options){var composite=Composite.create(),defaults={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}};return Common.extend(composite,defaults,options)}},function(module,exports,__webpack_require__){var GetTileAt=__webpack_require__(151);module.exports=function(tileX,tileY,layer){var tile=GetTileAt(tileX,tileY,!0,layer),above=GetTileAt(tileX,tileY-1,!0,layer),below=GetTileAt(tileX,tileY+1,!0,layer),left=GetTileAt(tileX-1,tileY,!0,layer),right=GetTileAt(tileX+1,tileY,!0,layer),tileCollides=tile&&tile.collides;return tileCollides&&(tile.faceTop=!0,tile.faceBottom=!0,tile.faceLeft=!0,tile.faceRight=!0),above&&above.collides&&(tileCollides&&(tile.faceTop=!1),above.faceBottom=!tileCollides),below&&below.collides&&(tileCollides&&(tile.faceBottom=!1),below.faceTop=!tileCollides),left&&left.collides&&(tileCollides&&(tile.faceLeft=!1),left.faceRight=!tileCollides),right&&right.collides&&(tileCollides&&(tile.faceRight=!1),right.faceLeft=!tileCollides),tile&&!tile.collides&&tile.resetFaces(),tile}},function(module,exports,__webpack_require__){var Tile=__webpack_require__(79),IsInLayerBounds=__webpack_require__(114),CalculateFacesAt=__webpack_require__(242),SetTileCollision=__webpack_require__(78);module.exports=function(tile,tileX,tileY,recalculateFaces,layer){if(!IsInLayerBounds(tileX,tileY,layer))return null;void 0===recalculateFaces&&(recalculateFaces=!0);var oldTile=layer.data[tileY][tileX],oldTileCollides=oldTile&&oldTile.collides;if(tile instanceof Tile)null===layer.data[tileY][tileX]&&(layer.data[tileY][tileX]=new Tile(layer,tile.index,tileX,tileY,tile.width,tile.height)),layer.data[tileY][tileX].copy(tile);else{var index=tile;null===layer.data[tileY][tileX]?layer.data[tileY][tileX]=new Tile(layer,index,tileX,tileY,layer.tileWidth,layer.tileHeight):layer.data[tileY][tileX].index=index}var newTile=layer.data[tileY][tileX],collides=-1!==layer.collideIndexes.indexOf(newTile.index);return SetTileCollision(newTile,collides),recalculateFaces&&oldTileCollides!==newTile.collides&&CalculateFacesAt(tileX,tileY,layer),newTile}},function(module,exports){module.exports=function(tileIndex,collides,layer){var loc=layer.collideIndexes.indexOf(tileIndex);collides&&-1===loc?layer.collideIndexes.push(tileIndex):collides||-1===loc||layer.collideIndexes.splice(loc,1)}},function(module,exports,__webpack_require__){var Formats=__webpack_require__(34),LayerData=__webpack_require__(115),MapData=__webpack_require__(116),Tile=__webpack_require__(79);module.exports=function(name,data,tileWidth,tileHeight,insertNull){for(var layerData=new LayerData({tileWidth:tileWidth,tileHeight:tileHeight}),mapData=new MapData({name:name,tileWidth:tileWidth,tileHeight:tileHeight,format:Formats.ARRAY_2D,layers:[layerData]}),tiles=[],height=data.length,width=0,y=0;y<data.length;y++){tiles[y]=[];for(var row=data[y],x=0;x<row.length;x++){var tileIndex=parseInt(row[x],10);isNaN(tileIndex)||-1===tileIndex?tiles[y][x]=insertNull?null:new Tile(layerData,-1,x,y,tileWidth,tileHeight):tiles[y][x]=new Tile(layerData,tileIndex,x,y,tileWidth,tileHeight)}0===width&&(width=row.length)}return mapData.width=layerData.width=width,mapData.height=layerData.height=height,mapData.widthInPixels=layerData.widthInPixels=width*tileWidth,mapData.heightInPixels=layerData.heightInPixels=height*tileHeight,layerData.data=tiles,mapData}},function(module,exports){module.exports=function(gid){var flippedHorizontal=Boolean(2147483648&gid),flippedVertical=Boolean(1073741824&gid),flippedAntiDiagonal=Boolean(536870912&gid);gid&=536870911;var rotation=0,flipped=!1;return flippedHorizontal&&flippedVertical&&flippedAntiDiagonal?(rotation=Math.PI/2,flipped=!0):flippedHorizontal&&flippedVertical&&!flippedAntiDiagonal?(rotation=Math.PI,flipped=!1):flippedHorizontal&&!flippedVertical&&flippedAntiDiagonal?(rotation=Math.PI/2,flipped=!1):!flippedHorizontal||flippedVertical||flippedAntiDiagonal?!flippedHorizontal&&flippedVertical&&flippedAntiDiagonal?(rotation=3*Math.PI/2,flipped=!1):flippedHorizontal||!flippedVertical||flippedAntiDiagonal?flippedHorizontal||flippedVertical||!flippedAntiDiagonal?flippedHorizontal||flippedVertical||flippedAntiDiagonal||(rotation=0,flipped=!1):(rotation=3*Math.PI/2,flipped=!0):(rotation=Math.PI,flipped=!0):(rotation=0,flipped=!0),{gid:gid,flippedHorizontal:flippedHorizontal,flippedVertical:flippedVertical,flippedAntiDiagonal:flippedAntiDiagonal,rotation:rotation,flipped:flipped}}},function(module,exports,__webpack_require__){var Pick=__webpack_require__(512),ParseGID=__webpack_require__(246),copyPoints=function(p){return{x:p.x,y:p.y}},commonObjectProps=["id","name","type","rotation","properties","visible","x","y","width","height"];module.exports=function(tiledObject,offsetX,offsetY){void 0===offsetX&&(offsetX=0),void 0===offsetY&&(offsetY=0);var parsedObject=Pick(tiledObject,commonObjectProps);if(parsedObject.x+=offsetX,parsedObject.y+=offsetY,tiledObject.gid){var gidInfo=ParseGID(tiledObject.gid);parsedObject.gid=gidInfo.gid,parsedObject.flippedHorizontal=gidInfo.flippedHorizontal,parsedObject.flippedVertical=gidInfo.flippedVertical,parsedObject.flippedAntiDiagonal=gidInfo.flippedAntiDiagonal}else tiledObject.polyline?parsedObject.polyline=tiledObject.polyline.map(copyPoints):tiledObject.polygon?parsedObject.polygon=tiledObject.polygon.map(copyPoints):tiledObject.ellipse?(parsedObject.ellipse=tiledObject.ellipse,parsedObject.width=tiledObject.width,parsedObject.height=tiledObject.height):tiledObject.text?(parsedObject.width=tiledObject.width,parsedObject.height=tiledObject.height,parsedObject.text=tiledObject.text):(parsedObject.rectangle=!0,parsedObject.width=tiledObject.width,parsedObject.height=tiledObject.height);return parsedObject}},function(module,exports,__webpack_require__){var Formats=__webpack_require__(34),MapData=__webpack_require__(116),Parse=__webpack_require__(504),Tilemap=__webpack_require__(520);module.exports=function(scene,key,tileWidth,tileHeight,width,height,data,insertNull){void 0===tileWidth&&(tileWidth=32),void 0===tileHeight&&(tileHeight=32),void 0===width&&(width=10),void 0===height&&(height=10),void 0===insertNull&&(insertNull=!1);var mapData=null;if(Array.isArray(data))mapData=Parse(void 0!==key?key:"map",Formats.ARRAY_2D,data,tileWidth,tileHeight,insertNull);else if(void 0!==key){var tilemapData=scene.cache.tilemap.get(key);tilemapData?mapData=Parse(key,tilemapData.format,tilemapData.data,tileWidth,tileHeight,insertNull):console.warn("No map data found for key "+key)}return null===mapData&&(mapData=new MapData({tileWidth:tileWidth,tileHeight:tileHeight,width:width,height:height})),new Tilemap(scene,mapData)}},function(module,exports,__webpack_require__){var GetValue=__webpack_require__(5);module.exports=function(config){var targets=GetValue(config,"targets",null);return null===targets?targets:("function"==typeof targets&&(targets=targets.call()),Array.isArray(targets)||(targets=[targets]),targets)}},function(module,exports){function hasGetActive(def){return!!def.getActive&&"function"==typeof def.getActive}function hasGetStart(def){return!!def.getStart&&"function"==typeof def.getStart}function hasGetEnd(def){return!!def.getEnd&&"function"==typeof def.getEnd}var GetValueOp=function(key,propertyValue){var callbacks,def,getEnd=function(target,key,value){return value},getStart=function(target,key,value){return value},getActive=null,t=typeof propertyValue;if("number"===t)getEnd=function(){return propertyValue};else if("string"===t){var op=propertyValue[0],num=parseFloat(propertyValue.substr(2));switch(op){case"+":getEnd=function(target,key,value){return value+num};break;case"-":getEnd=function(target,key,value){return value-num};break;case"*":getEnd=function(target,key,value){return value*num};break;case"/":getEnd=function(target,key,value){return value/num};break;default:getEnd=function(){return parseFloat(propertyValue)}}}else if("function"===t)getEnd=propertyValue;else if("object"===t)if(hasGetStart(def=propertyValue)||hasGetEnd(def)||hasGetActive(def))hasGetActive(propertyValue)&&(getActive=propertyValue.getActive),hasGetEnd(propertyValue)&&(getEnd=propertyValue.getEnd),hasGetStart(propertyValue)&&(getStart=propertyValue.getStart);else if(propertyValue.hasOwnProperty("value"))callbacks=GetValueOp(key,propertyValue.value);else{var hasTo=propertyValue.hasOwnProperty("to"),hasFrom=propertyValue.hasOwnProperty("from"),hasStart=propertyValue.hasOwnProperty("start");if(hasTo&&(hasFrom||hasStart)){if(callbacks=GetValueOp(key,propertyValue.to),hasStart){var startCallbacks=GetValueOp(key,propertyValue.start);callbacks.getActive=startCallbacks.getEnd}if(hasFrom){var fromCallbacks=GetValueOp(key,propertyValue.from);callbacks.getStart=fromCallbacks.getEnd}}}return callbacks||(callbacks={getActive:getActive,getEnd:getEnd,getStart:getStart}),callbacks};module.exports=GetValueOp},function(module,exports){module.exports={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),EventEmitter=__webpack_require__(9),Events=__webpack_require__(253),GameObjectCreator=__webpack_require__(16),GameObjectFactory=__webpack_require__(6),TWEEN_CONST=__webpack_require__(102),Tween=new Class({Extends:EventEmitter,initialize:function(parent,data,targets){EventEmitter.call(this),this.parent=parent,this.parentIsTimeline=parent.hasOwnProperty("isTimeline"),this.data=data,this.totalData=data.length,this.targets=targets,this.totalTargets=targets.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=TWEEN_CONST.PENDING_ADD,this._pausedState=TWEEN_CONST.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(){return this.data[0].current},setTimeScale:function(value){return this.timeScale=value,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===TWEEN_CONST.ACTIVE},isPaused:function(){return this.state===TWEEN_CONST.PAUSED},hasTarget:function(target){return-1!==this.targets.indexOf(target)},updateTo:function(key,value,startToCurrent){void 0===startToCurrent&&(startToCurrent=!1);for(var i=0;i<this.totalData;i++){var tweenData=this.data[i];if(tweenData.key===key){tweenData.end=value,startToCurrent&&(tweenData.start=tweenData.current);break}}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===TWEEN_CONST.ACTIVE?this.seek(0):this.state===TWEEN_CONST.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===TWEEN_CONST.PENDING_ADD?this:this.play()},calcDuration:function(){for(var maxDuration=0,minDelay=Number.MAX_SAFE_INTEGER,data=this.data,i=0;i<this.totalData;i++){var tweenData=data[i];tweenData.t1=tweenData.duration+tweenData.hold,tweenData.yoyo&&(tweenData.t1+=tweenData.duration),tweenData.t2=tweenData.t1+tweenData.repeatDelay,tweenData.totalDuration=tweenData.delay+tweenData.t1,-1===tweenData.repeat?tweenData.totalDuration+=999999999999*tweenData.t2:tweenData.repeat>0&&(tweenData.totalDuration+=tweenData.t2*tweenData.repeat),tweenData.totalDuration>maxDuration&&(maxDuration=tweenData.totalDuration),tweenData.delay<minDelay&&(minDelay=tweenData.delay)}this.duration=Math.max(maxDuration,.001),this.loopCounter=-1===this.loop?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=minDelay},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=TWEEN_CONST.PENDING_ADD,this._pausedState=TWEEN_CONST.INIT,!1;for(var data=this.data,totalTargets=this.totalTargets,i=0;i<this.totalData;i++){var tweenData=data[i],target=tweenData.target,gen=tweenData.gen,key=tweenData.key,targetIndex=tweenData.index;tweenData.delay=gen.delay(target,key,0,targetIndex,totalTargets,this),tweenData.duration=Math.max(gen.duration(target,key,0,targetIndex,totalTargets,this),.001),tweenData.hold=gen.hold(target,key,0,targetIndex,totalTargets,this),tweenData.repeat=gen.repeat(target,key,0,targetIndex,totalTargets,this),tweenData.repeatDelay=gen.repeatDelay(target,key,0,targetIndex,totalTargets,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=TWEEN_CONST.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent(Events.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=TWEEN_CONST.LOOP_DELAY):(this.state=TWEEN_CONST.ACTIVE,this.dispatchTweenEvent(Events.TWEEN_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=TWEEN_CONST.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=TWEEN_CONST.PENDING_REMOVE,this.dispatchTweenEvent(Events.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===TWEEN_CONST.PAUSED?this:(this.paused=!0,this._pausedState=this.state,this.state=TWEEN_CONST.PAUSED,this)},play:function(resetFromTimeline){void 0===resetFromTimeline&&(resetFromTimeline=!1);var state=this.state;return state!==TWEEN_CONST.INIT||this.parentIsTimeline?state===TWEEN_CONST.ACTIVE||state===TWEEN_CONST.PENDING_ADD&&this._pausedState===TWEEN_CONST.PENDING_ADD?this:this.parentIsTimeline||state!==TWEEN_CONST.PENDING_REMOVE&&state!==TWEEN_CONST.REMOVED?(this.parentIsTimeline?(this.resetTweenData(resetFromTimeline),0===this.calculatedOffset?this.state=TWEEN_CONST.ACTIVE:(this.countdown=this.calculatedOffset,this.state=TWEEN_CONST.OFFSET_DELAY)):this.paused?(this.paused=!1,this.makeActive()):(this.resetTweenData(resetFromTimeline),this.state=TWEEN_CONST.ACTIVE,this.makeActive()),this):(this.seek(0),this.parent.makeActive(this),this):(this.resetTweenData(!1),this.state=TWEEN_CONST.ACTIVE,this)},resetTweenData:function(resetFromLoop){for(var data=this.data,total=this.totalData,totalTargets=this.totalTargets,i=0;i<total;i++){var tweenData=data[i],target=tweenData.target,key=tweenData.key,targetIndex=tweenData.index;tweenData.progress=0,tweenData.elapsed=0,tweenData.repeatCounter=-1===tweenData.repeat?999999999999:tweenData.repeat,resetFromLoop?(tweenData.start=tweenData.getStartValue(target,key,tweenData.start,targetIndex,totalTargets,this),tweenData.end=tweenData.getEndValue(target,key,tweenData.end,targetIndex,totalTargets,this),tweenData.current=tweenData.start,tweenData.state=TWEEN_CONST.PLAYING_FORWARD):tweenData.state=TWEEN_CONST.PENDING_RENDER,tweenData.delay>0&&(tweenData.elapsed=tweenData.delay,tweenData.state=TWEEN_CONST.DELAY),tweenData.getActiveValue&&(target[key]=tweenData.getActiveValue(tweenData.target,tweenData.key,tweenData.start))}},resume:function(){return this.state===TWEEN_CONST.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(toPosition,delta){if(void 0===delta&&(delta=16.6),this.totalDuration>=36e5)return console.warn("Tween.seek duration too long"),this;this.state===TWEEN_CONST.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var data=this.data,totalTargets=this.totalTargets,i=0;i<this.totalData;i++){var tweenData=data[i],target=tweenData.target,gen=tweenData.gen,key=tweenData.key,targetIndex=tweenData.index;tweenData.progress=0,tweenData.elapsed=0,tweenData.repeatCounter=-1===tweenData.repeat?999999999999:tweenData.repeat,tweenData.delay=gen.delay(target,key,0,targetIndex,totalTargets,this),tweenData.duration=Math.max(gen.duration(target,key,0,targetIndex,totalTargets,this),.001),tweenData.hold=gen.hold(target,key,0,targetIndex,totalTargets,this),tweenData.repeat=gen.repeat(target,key,0,targetIndex,totalTargets,this),tweenData.repeatDelay=gen.repeatDelay(target,key,0,targetIndex,totalTargets,this),tweenData.current=tweenData.start,tweenData.state=TWEEN_CONST.PLAYING_FORWARD,this.updateTweenData(this,tweenData,0,targetIndex,totalTargets),tweenData.delay>0&&(tweenData.elapsed=tweenData.delay,tweenData.state=TWEEN_CONST.DELAY)}this.calcDuration();var wasPaused=!1;this.state===TWEEN_CONST.PAUSED&&(wasPaused=!0,this.state=TWEEN_CONST.ACTIVE),this.isSeeking=!0;do{this.update(0,delta)}while(this.totalProgress<toPosition);return this.isSeeking=!1,wasPaused&&(this.state=TWEEN_CONST.PAUSED),this},setCallback:function(type,callback,params,scope){return this.callbacks[type]={func:callback,scope:scope,params:params},this},complete:function(delay){return void 0===delay&&(delay=0),delay?(this.state=TWEEN_CONST.COMPLETE_DELAY,this.countdown=delay):(this.state=TWEEN_CONST.PENDING_REMOVE,this.dispatchTweenEvent(Events.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(resetTo){return this.state===TWEEN_CONST.ACTIVE&&void 0!==resetTo&&this.seek(resetTo),this.state!==TWEEN_CONST.REMOVED&&(this.state!==TWEEN_CONST.PAUSED&&this.state!==TWEEN_CONST.PENDING_ADD||(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.removeAllListeners(),this.state=TWEEN_CONST.PENDING_REMOVE),this},update:function(timestamp,delta){if(this.state===TWEEN_CONST.PAUSED)return!1;switch(this.useFrames&&(delta=1*this.parent.timeScale),delta*=this.timeScale,this.elapsed+=delta,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=delta,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case TWEEN_CONST.ACTIVE:this.hasStarted||this.isSeeking||(this.startDelay-=delta,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(Events.TWEEN_START,this.callbacks.onStart)));for(var stillRunning=!1,i=0;i<this.totalData;i++){var tweenData=this.data[i];this.updateTweenData(this,tweenData,delta)&&(stillRunning=!0)}stillRunning||this.nextState();break;case TWEEN_CONST.LOOP_DELAY:this.countdown-=delta,this.countdown<=0&&(this.state=TWEEN_CONST.ACTIVE,this.dispatchTweenEvent(Events.TWEEN_LOOP,this.callbacks.onLoop));break;case TWEEN_CONST.OFFSET_DELAY:this.countdown-=delta,this.countdown<=0&&(this.state=TWEEN_CONST.ACTIVE);break;case TWEEN_CONST.COMPLETE_DELAY:this.countdown-=delta,this.countdown<=0&&(this.state=TWEEN_CONST.PENDING_REMOVE,this.dispatchTweenEvent(Events.TWEEN_COMPLETE,this.callbacks.onComplete))}return this.state===TWEEN_CONST.PENDING_REMOVE},dispatchTweenDataEvent:function(event,callback,tweenData){this.isSeeking||(this.emit(event,this,tweenData.key,tweenData.target),callback&&(callback.params[1]=tweenData.target,callback.func.apply(callback.scope,callback.params)))},dispatchTweenEvent:function(event,callback){this.isSeeking||(this.emit(event,this,this.targets),callback&&(callback.params[1]=this.targets,callback.func.apply(callback.scope,callback.params)))},setStateFromEnd:function(tween,tweenData,diff){return tweenData.yoyo?(tweenData.elapsed=diff,tweenData.progress=diff/tweenData.duration,tweenData.flipX&&tweenData.target.toggleFlipX(),tweenData.flipY&&tweenData.target.toggleFlipY(),this.dispatchTweenDataEvent(Events.TWEEN_YOYO,tween.callbacks.onYoyo,tweenData),tweenData.start=tweenData.getStartValue(tweenData.target,tweenData.key,tweenData.start,tweenData.index,tween.totalTargets,tween),TWEEN_CONST.PLAYING_BACKWARD):tweenData.repeatCounter>0?(tweenData.repeatCounter--,tweenData.elapsed=diff,tweenData.progress=diff/tweenData.duration,tweenData.flipX&&tweenData.target.toggleFlipX(),tweenData.flipY&&tweenData.target.toggleFlipY(),tweenData.start=tweenData.getStartValue(tweenData.target,tweenData.key,tweenData.start,tweenData.index,tween.totalTargets,tween),tweenData.end=tweenData.getEndValue(tweenData.target,tweenData.key,tweenData.start,tweenData.index,tween.totalTargets,tween),tweenData.repeatDelay>0?(tweenData.elapsed=tweenData.repeatDelay-diff,tweenData.current=tweenData.start,tweenData.target[tweenData.key]=tweenData.current,TWEEN_CONST.REPEAT_DELAY):(this.dispatchTweenDataEvent(Events.TWEEN_REPEAT,tween.callbacks.onRepeat,tweenData),TWEEN_CONST.PLAYING_FORWARD)):TWEEN_CONST.COMPLETE},setStateFromStart:function(tween,tweenData,diff){return tweenData.repeatCounter>0?(tweenData.repeatCounter--,tweenData.elapsed=diff,tweenData.progress=diff/tweenData.duration,tweenData.flipX&&tweenData.target.toggleFlipX(),tweenData.flipY&&tweenData.target.toggleFlipY(),tweenData.end=tweenData.getEndValue(tweenData.target,tweenData.key,tweenData.start,tweenData.index,tween.totalTargets,tween),tweenData.repeatDelay>0?(tweenData.elapsed=tweenData.repeatDelay-diff,tweenData.current=tweenData.start,tweenData.target[tweenData.key]=tweenData.current,TWEEN_CONST.REPEAT_DELAY):(this.dispatchTweenDataEvent(Events.TWEEN_REPEAT,tween.callbacks.onRepeat,tweenData),TWEEN_CONST.PLAYING_FORWARD)):TWEEN_CONST.COMPLETE},updateTweenData:function(tween,tweenData,delta){var target=tweenData.target;switch(tweenData.state){case TWEEN_CONST.PLAYING_FORWARD:case TWEEN_CONST.PLAYING_BACKWARD:if(!target){tweenData.state=TWEEN_CONST.COMPLETE;break}var elapsed=tweenData.elapsed,duration=tweenData.duration,diff=0;(elapsed+=delta)>duration&&(diff=elapsed-duration,elapsed=duration);var forward=tweenData.state===TWEEN_CONST.PLAYING_FORWARD,progress=elapsed/duration;if(tweenData.elapsed=elapsed,tweenData.progress=progress,1===progress)forward?(tweenData.current=tweenData.end,target[tweenData.key]=tweenData.end,tweenData.hold>0?(tweenData.elapsed=tweenData.hold-diff,tweenData.state=TWEEN_CONST.HOLD_DELAY):tweenData.state=this.setStateFromEnd(tween,tweenData,diff)):(tweenData.current=tweenData.start,target[tweenData.key]=tweenData.start,tweenData.state=this.setStateFromStart(tween,tweenData,diff));else{var v=forward?tweenData.ease(progress):tweenData.ease(1-progress);tweenData.current=tweenData.start+(tweenData.end-tweenData.start)*v,target[tweenData.key]=tweenData.current}this.dispatchTweenDataEvent(Events.TWEEN_UPDATE,tween.callbacks.onUpdate,tweenData);break;case TWEEN_CONST.DELAY:tweenData.elapsed-=delta,tweenData.elapsed<=0&&(tweenData.elapsed=Math.abs(tweenData.elapsed),tweenData.state=TWEEN_CONST.PENDING_RENDER);break;case TWEEN_CONST.REPEAT_DELAY:tweenData.elapsed-=delta,tweenData.elapsed<=0&&(tweenData.elapsed=Math.abs(tweenData.elapsed),tweenData.state=TWEEN_CONST.PLAYING_FORWARD,this.dispatchTweenDataEvent(Events.TWEEN_REPEAT,tween.callbacks.onRepeat,tweenData));break;case TWEEN_CONST.HOLD_DELAY:tweenData.elapsed-=delta,tweenData.elapsed<=0&&(tweenData.state=this.setStateFromEnd(tween,tweenData,Math.abs(tweenData.elapsed)));break;case TWEEN_CONST.PENDING_RENDER:target?(tweenData.start=tweenData.getStartValue(target,tweenData.key,target[tweenData.key],tweenData.index,tween.totalTargets,tween),tweenData.end=tweenData.getEndValue(target,tweenData.key,tweenData.start,tweenData.index,tween.totalTargets,tween),tweenData.current=tweenData.start,target[tweenData.key]=tweenData.start,tweenData.state=TWEEN_CONST.PLAYING_FORWARD):tweenData.state=TWEEN_CONST.COMPLETE}return tweenData.state!==TWEEN_CONST.COMPLETE}});Tween.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onUpdate","onYoyo"],GameObjectFactory.register("tween",(function(config){return this.scene.sys.tweens.add(config)})),GameObjectCreator.register("tween",(function(config){return this.scene.sys.tweens.create(config)})),module.exports=Tween},function(module,exports,__webpack_require__){module.exports={TIMELINE_COMPLETE:__webpack_require__(1401),TIMELINE_LOOP:__webpack_require__(1402),TIMELINE_PAUSE:__webpack_require__(1403),TIMELINE_RESUME:__webpack_require__(1404),TIMELINE_START:__webpack_require__(1405),TIMELINE_UPDATE:__webpack_require__(1406),TWEEN_ACTIVE:__webpack_require__(1407),TWEEN_COMPLETE:__webpack_require__(1408),TWEEN_LOOP:__webpack_require__(1409),TWEEN_REPEAT:__webpack_require__(1410),TWEEN_START:__webpack_require__(1411),TWEEN_UPDATE:__webpack_require__(1412),TWEEN_YOYO:__webpack_require__(1413)}},function(module,exports){module.exports=function(target,index,key,getEnd,getStart,getActive,ease,delay,duration,yoyo,hold,repeat,repeatDelay,flipX,flipY){return{target:target,index:index,key:key,getActiveValue:getActive,getEndValue:getEnd,getStartValue:getStart,ease:ease,duration:0,totalDuration:0,delay:0,yoyo:yoyo,hold:0,repeat:0,repeatDelay:0,flipX:flipX,flipY:flipY,progress:0,elapsed:0,repeatCounter:0,start:0,current:0,end:0,t1:0,t2:0,gen:{delay:delay,duration:duration,hold:hold,repeat:repeat,repeatDelay:repeatDelay},state:0}}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Matrix4=__webpack_require__(187),RandomXYZ=__webpack_require__(333),RandomXYZW=__webpack_require__(334),RotateVec3=__webpack_require__(340),Set=__webpack_require__(90),Sprite3D=__webpack_require__(157),Vector2=__webpack_require__(3),Vector3=__webpack_require__(85),Vector4=__webpack_require__(130),tmpVec3=new Vector3,tmpVec4=new Vector4,dirvec=new Vector3,rightvec=new Vector3,billboardMatrix=new Matrix4,Camera=new Class({initialize:function(scene){this.scene=scene,this.displayList=scene.sys.displayList,this.updateList=scene.sys.updateList,this.name="",this.direction=new Vector3(0,0,-1),this.up=new Vector3(0,1,0),this.position=new Vector3,this.pixelScale=128,this.projection=new Matrix4,this.view=new Matrix4,this.combined=new Matrix4,this.invProjectionView=new Matrix4,this.near=1,this.far=100,this.ray={origin:new Vector3,direction:new Vector3},this.viewportWidth=0,this.viewportHeight=0,this.billboardMatrixDirty=!0,this.children=new Set},setPosition:function(x,y,z){return this.position.set(x,y,z),this.update()},setScene:function(scene){return this.scene=scene,this},setPixelScale:function(value){return this.pixelScale=value,this.update()},add:function(sprite3D){return this.children.set(sprite3D),this.displayList.add(sprite3D.gameObject),this.updateList.add(sprite3D.gameObject),this.updateChildren(),sprite3D},remove:function(child){return this.displayList.remove(child.gameObject),this.updateList.remove(child.gameObject),this.children.delete(child),this},clear:function(){for(var children=this.getChildren(),i=0;i<children.length;i++)this.remove(children[i]);return this},getChildren:function(){return this.children.entries},create:function(x,y,z,key,frame,visible){void 0===visible&&(visible=!0);var child=new Sprite3D(this.scene,x,y,z,key,frame);return this.displayList.add(child.gameObject),this.updateList.add(child.gameObject),child.visible=visible,this.children.set(child),this.updateChildren(),child},createMultiple:function(quantity,key,frame,visible){void 0===visible&&(visible=!0);for(var output=[],i=0;i<quantity;i++){var child=new Sprite3D(this.scene,0,0,0,key,frame);this.displayList.add(child.gameObject),this.updateList.add(child.gameObject),child.visible=visible,this.children.set(child),output.push(child)}return output},createRect:function(size,spacing,key,frame){"number"==typeof size&&(size={x:size,y:size,z:size}),"number"==typeof spacing&&(spacing={x:spacing,y:spacing,z:spacing});for(var quantity=size.x*size.y*size.z,sprites=this.createMultiple(quantity,key,frame),i=0,z=.5-size.z/2;z<size.z/2;z++)for(var y=.5-size.y/2;y<size.y/2;y++)for(var x=.5-size.x/2;x<size.x/2;x++){var bx=x*spacing.x,by=y*spacing.y,bz=z*spacing.z;sprites[i].position.set(bx,by,bz),i++}return this.update(),sprites},randomSphere:function(radius,sprites){void 0===sprites&&(sprites=this.getChildren());for(var i=0;i<sprites.length;i++)RandomXYZ(sprites[i].position,radius);return this.update()},randomCube:function(scale,sprites){void 0===sprites&&(sprites=this.getChildren());for(var i=0;i<sprites.length;i++)RandomXYZW(sprites[i].position,scale);return this.update()},translateChildren:function(vec3,sprites){void 0===sprites&&(sprites=this.getChildren());for(var i=0;i<sprites.length;i++)sprites[i].position.add(vec3);return this.update()},transformChildren:function(mat4,sprites){void 0===sprites&&(sprites=this.getChildren());for(var i=0;i<sprites.length;i++)sprites[i].position.transformMat4(mat4);return this.update()},setViewport:function(width,height){return this.viewportWidth=width,this.viewportHeight=height,this.update()},translate:function(x,y,z){return"object"==typeof x?(this.position.x+=x.x||0,this.position.y+=x.y||0,this.position.z+=x.z||0):(this.position.x+=x||0,this.position.y+=y||0,this.position.z+=z||0),this.update()},lookAt:function(x,y,z){var dir=this.direction,up=this.up;return"object"==typeof x?dir.copy(x):dir.set(x,y,z),dir.subtract(this.position).normalize(),tmpVec3.copy(dir).cross(up).normalize(),up.copy(tmpVec3).cross(dir).normalize(),this.update()},rotate:function(radians,axis){return RotateVec3(this.direction,axis,radians),RotateVec3(this.up,axis,radians),this.update()},rotateAround:function(point,radians,axis){return tmpVec3.copy(point).subtract(this.position),this.translate(tmpVec3),this.rotate(radians,axis),this.translate(tmpVec3.negate()),this.update()},project:function(vec,out){void 0===out&&(out=new Vector4);var viewportWidth=this.viewportWidth,viewportHeight=this.viewportHeight,n=Camera.NEAR_RANGE,f=Camera.FAR_RANGE;return tmpVec4.set(vec.x,vec.y,vec.z,1),tmpVec4.transformMat4(this.combined),0===tmpVec4.w&&(tmpVec4.w=1),tmpVec4.x=tmpVec4.x/tmpVec4.w,tmpVec4.y=tmpVec4.y/tmpVec4.w,tmpVec4.z=tmpVec4.z/tmpVec4.w,out.x=viewportWidth/2*tmpVec4.x+(0+viewportWidth/2),out.y=viewportHeight/2*tmpVec4.y+(0+viewportHeight/2),out.z=(f-n)/2*tmpVec4.z+(f+n)/2,(0===out.w||out.w)&&(out.w=1/tmpVec4.w),out},unproject:function(vec,out){void 0===out&&(out=new Vector3);var viewport=tmpVec4.set(0,0,this.viewportWidth,this.viewportHeight);return out.copy(vec).unproject(viewport,this.invProjectionView)},getPickRay:function(x,y){var origin=this.ray.origin.set(x,y,0),direction=this.ray.direction.set(x,y,1),viewport=tmpVec4.set(0,0,this.viewportWidth,this.viewportHeight),mtx=this.invProjectionView;return origin.unproject(viewport,mtx),direction.unproject(viewport,mtx),direction.subtract(origin).normalize(),this.ray},updateChildren:function(){for(var children=this.children.entries,i=0;i<children.length;i++)children[i].project(this);return this},update:function(){return this.updateChildren()},updateBillboardMatrix:function(){var dir=dirvec.set(this.direction).negate(),right=rightvec.set(this.up).cross(dir).normalize(),up=tmpVec3.set(dir).cross(right).normalize(),out=billboardMatrix.val;out[0]=right.x,out[1]=right.y,out[2]=right.z,out[3]=0,out[4]=up.x,out[5]=up.y,out[6]=up.z,out[7]=0,out[8]=dir.x,out[9]=dir.y,out[10]=dir.z,out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=1,this.billboardMatrixDirty=!1},getPointSize:function(vec,size,out){void 0===out&&(out=new Vector2),this.billboardMatrixDirty&&this.updateBillboardMatrix();var tmp=tmpVec3,dx=size.x/this.pixelScale/2,dy=size.y/this.pixelScale/2;tmp.set(-dx,-dy,0).transformMat4(billboardMatrix).add(vec),this.project(tmp,tmp);var tlx=tmp.x,tly=tmp.y;tmp.set(dx,dy,0).transformMat4(billboardMatrix).add(vec),this.project(tmp,tmp);var w=tmp.x-tlx,h=tmp.y-tly;return out.set(w,h)},destroy:function(){this.children.clear(),this.scene=void 0,this.children=void 0},setX:function(value){return this.position.x=value,this.update()},setY:function(value){return this.position.y=value,this.update()},setZ:function(value){return this.position.z=value,this.update()},x:{get:function(){return this.position.x},set:function(value){this.position.x=value,this.update()}},y:{get:function(){return this.position.y},set:function(value){this.position.y=value,this.update()}},z:{get:function(){return this.position.z},set:function(value){this.position.z=value,this.update()}}});Camera.FAR_RANGE=1,Camera.NEAR_RANGE=0,module.exports=Camera},function(module,exports,__webpack_require__){module.exports={Angle:__webpack_require__(542),Call:__webpack_require__(543),GetFirst:__webpack_require__(544),GetLast:__webpack_require__(545),GridAlign:__webpack_require__(546),IncAlpha:__webpack_require__(596),IncX:__webpack_require__(597),IncXY:__webpack_require__(598),IncY:__webpack_require__(599),PlaceOnCircle:__webpack_require__(600),PlaceOnEllipse:__webpack_require__(601),PlaceOnLine:__webpack_require__(602),PlaceOnRectangle:__webpack_require__(603),PlaceOnTriangle:__webpack_require__(604),PlayAnimation:__webpack_require__(605),PropertyValueInc:__webpack_require__(40),PropertyValueSet:__webpack_require__(31),RandomCircle:__webpack_require__(606),RandomEllipse:__webpack_require__(607),RandomLine:__webpack_require__(608),RandomRectangle:__webpack_require__(609),RandomTriangle:__webpack_require__(610),Rotate:__webpack_require__(611),RotateAround:__webpack_require__(612),RotateAroundDistance:__webpack_require__(613),ScaleX:__webpack_require__(614),ScaleXY:__webpack_require__(615),ScaleY:__webpack_require__(616),SetAlpha:__webpack_require__(617),SetBlendMode:__webpack_require__(618),SetDepth:__webpack_require__(619),SetHitArea:__webpack_require__(620),SetOrigin:__webpack_require__(621),SetRotation:__webpack_require__(622),SetScale:__webpack_require__(623),SetScaleX:__webpack_require__(624),SetScaleY:__webpack_require__(625),SetTint:__webpack_require__(626),SetVisible:__webpack_require__(627),SetX:__webpack_require__(628),SetXY:__webpack_require__(629),SetY:__webpack_require__(630),ShiftPosition:__webpack_require__(631),Shuffle:__webpack_require__(632),SmootherStep:__webpack_require__(633),SmoothStep:__webpack_require__(634),Spread:__webpack_require__(635),ToggleVisible:__webpack_require__(636),WrapInRectangle:__webpack_require__(637)}},function(module,exports,__webpack_require__){var ALIGN_CONST=__webpack_require__(159),AlignInMap=[];AlignInMap[ALIGN_CONST.BOTTOM_CENTER]=__webpack_require__(258),AlignInMap[ALIGN_CONST.BOTTOM_LEFT]=__webpack_require__(259),AlignInMap[ALIGN_CONST.BOTTOM_RIGHT]=__webpack_require__(260),AlignInMap[ALIGN_CONST.CENTER]=__webpack_require__(261),AlignInMap[ALIGN_CONST.LEFT_CENTER]=__webpack_require__(263),AlignInMap[ALIGN_CONST.RIGHT_CENTER]=__webpack_require__(264),AlignInMap[ALIGN_CONST.TOP_CENTER]=__webpack_require__(265),AlignInMap[ALIGN_CONST.TOP_LEFT]=__webpack_require__(266),AlignInMap[ALIGN_CONST.TOP_RIGHT]=__webpack_require__(267);module.exports=function(child,alignIn,position,offsetX,offsetY){return AlignInMap[position](child,alignIn,offsetX,offsetY)}},function(module,exports,__webpack_require__){var GetBottom=__webpack_require__(44),GetCenterX=__webpack_require__(80),SetBottom=__webpack_require__(45),SetCenterX=__webpack_require__(81);module.exports=function(gameObject,alignIn,offsetX,offsetY){return void 0===offsetX&&(offsetX=0),void 0===offsetY&&(offsetY=0),SetCenterX(gameObject,GetCenterX(alignIn)+offsetX),SetBottom(gameObject,GetBottom(alignIn)+offsetY),gameObject}},function(module,exports,__webpack_require__){var GetBottom=__webpack_require__(44),GetLeft=__webpack_require__(46),SetBottom=__webpack_require__(45),SetLeft=__webpack_require__(47);module.exports=function(gameObject,alignIn,offsetX,offsetY){return void 0===offsetX&&(offsetX=0),void 0===offsetY&&(offsetY=0),SetLeft(gameObject,GetLeft(alignIn)-offsetX),SetBottom(gameObject,GetBottom(alignIn)+offsetY),gameObject}},function(module,exports,__webpack_require__){var GetBottom=__webpack_require__(44),GetRight=__webpack_require__(48),SetBottom=__webpack_require__(45),SetRight=__webpack_require__(49);module.exports=function(gameObject,alignIn,offsetX,offsetY){return void 0===offsetX&&(offsetX=0),void 0===offsetY&&(offsetY=0),SetRight(gameObject,GetRight(alignIn)+offsetX),SetBottom(gameObject,GetBottom(alignIn)+offsetY),gameObject}},function(module,exports,__webpack_require__){var CenterOn=__webpack_require__(262),GetCenterX=__webpack_require__(80),GetCenterY=__webpack_require__(83);module.exports=function(gameObject,alignIn,offsetX,offsetY){return void 0===offsetX&&(offsetX=0),void 0===offsetY&&(offsetY=0),CenterOn(gameObject,GetCenterX(alignIn)+offsetX,GetCenterY(alignIn)+offsetY),gameObject}},function(module,exports,__webpack_require__){var SetCenterX=__webpack_require__(81),SetCenterY=__webpack_require__(82);module.exports=function(gameObject,x,y){return SetCenterX(gameObject,x),SetCenterY(gameObject,y)}},function(module,exports,__webpack_require__){var GetCenterY=__webpack_require__(83),GetLeft=__webpack_require__(46),SetCenterY=__webpack_require__(82),SetLeft=__webpack_require__(47);module.exports=function(gameObject,alignIn,offsetX,offsetY){return void 0===offsetX&&(offsetX=0),void 0===offsetY&&(offsetY=0),SetLeft(gameObject,GetLeft(alignIn)-offsetX),SetCenterY(gameObject,GetCenterY(alignIn)+offsetY),gameObject}},function(module,exports,__webpack_require__){var GetCenterY=__webpack_require__(83),GetRight=__webpack_require__(48),SetCenterY=__webpack_require__(82),SetRight=__webpack_require__(49);module.exports=function(gameObject,alignIn,offsetX,offsetY){return void 0===offsetX&&(offsetX=0),void 0===offsetY&&(offsetY=0),SetRight(gameObject,GetRight(alignIn)+offsetX),SetCenterY(gameObject,GetCenterY(alignIn)+offsetY),gameObject}},function(module,exports,__webpack_require__){var GetCenterX=__webpack_require__(80),GetTop=__webpack_require__(50),SetCenterX=__webpack_require__(81),SetTop=__webpack_require__(51);module.exports=function(gameObject,alignIn,offsetX,offsetY){return void 0===offsetX&&(offsetX=0),void 0===offsetY&&(offsetY=0),SetCenterX(gameObject,GetCenterX(alignIn)+offsetX),SetTop(gameObject,GetTop(alignIn)-offsetY),gameObject}},function(module,exports,__webpack_require__){var GetLeft=__webpack_require__(46),GetTop=__webpack_require__(50),SetLeft=__webpack_require__(47),SetTop=__webpack_require__(51);module.exports=function(gameObject,alignIn,offsetX,offsetY){return void 0===offsetX&&(offsetX=0),void 0===offsetY&&(offsetY=0),SetLeft(gameObject,GetLeft(alignIn)-offsetX),SetTop(gameObject,GetTop(alignIn)-offsetY),gameObject}},function(module,exports,__webpack_require__){var GetRight=__webpack_require__(48),GetTop=__webpack_require__(50),SetRight=__webpack_require__(49),SetTop=__webpack_require__(51);module.exports=function(gameObject,alignIn,offsetX,offsetY){return void 0===offsetX&&(offsetX=0),void 0===offsetY&&(offsetY=0),SetRight(gameObject,GetRight(alignIn)+offsetX),SetTop(gameObject,GetTop(alignIn)-offsetY),gameObject}},function(module,exports,__webpack_require__){var CircumferencePoint=__webpack_require__(160),FromPercent=__webpack_require__(100),MATH_CONST=__webpack_require__(22),Point=__webpack_require__(4);module.exports=function(circle,position,out){void 0===out&&(out=new Point);var angle=FromPercent(position,0,MATH_CONST.PI2);return CircumferencePoint(circle,angle,out)}},function(module,exports,__webpack_require__){var Circumference=__webpack_require__(270),CircumferencePoint=__webpack_require__(160),FromPercent=__webpack_require__(100),MATH_CONST=__webpack_require__(22);module.exports=function(circle,quantity,stepRate,out){void 0===out&&(out=[]),quantity||(quantity=Circumference(circle)/stepRate);for(var i=0;i<quantity;i++){var angle=FromPercent(i/quantity,0,MATH_CONST.PI2);out.push(CircumferencePoint(circle,angle))}return out}},function(module,exports){module.exports=function(circle){return Math.PI*circle.radius*2}},function(module,exports,__webpack_require__){var Clamp=__webpack_require__(25),Alpha={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(topLeft,topRight,bottomLeft,bottomRight){return void 0===topLeft&&(topLeft=1),void 0===topRight?this.alpha=topLeft:(this._alphaTL=Clamp(topLeft,0,1),this._alphaTR=Clamp(topRight,0,1),this._alphaBL=Clamp(bottomLeft,0,1),this._alphaBR=Clamp(bottomRight,0,1)),this},alpha:{get:function(){return this._alpha},set:function(value){var v=Clamp(value,0,1);this._alpha=v,this._alphaTL=v,this._alphaTR=v,this._alphaBL=v,this._alphaBR=v,0===v?this.renderFlags&=-3:this.renderFlags|=2}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(value){var v=Clamp(value,0,1);this._alphaTL=v,0!==v&&(this.renderFlags|=2)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(value){var v=Clamp(value,0,1);this._alphaTR=v,0!==v&&(this.renderFlags|=2)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(value){var v=Clamp(value,0,1);this._alphaBL=v,0!==v&&(this.renderFlags|=2)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(value){var v=Clamp(value,0,1);this._alphaBR=v,0!==v&&(this.renderFlags|=2)}}};module.exports=Alpha},function(module,exports,__webpack_require__){var BaseAnimation=__webpack_require__(162),Class=__webpack_require__(0),Events=__webpack_require__(119),Animation=new Class({initialize:function(parent){this.parent=parent,this.animationManager=parent.scene.sys.anims,this.animationManager.once(Events.REMOVE_ANIMATION,this.remove,this),this.isPlaying=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this._timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this._delay=0,this._repeat=0,this._repeatDelay=0,this._yoyo=!1,this.forward=!0,this._reverse=!1,this.accumulator=0,this.nextTick=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(key){return key instanceof BaseAnimation&&(key=key.key),this.nextAnim=key,this.parent},setDelay:function(value){return void 0===value&&(value=0),this._delay=value,this.parent},getDelay:function(){return this._delay},delayedPlay:function(delay,key,startFrame){return this.play(key,!0,startFrame),this.nextTick+=delay,this.parent},getCurrentKey:function(){if(this.currentAnim)return this.currentAnim.key},load:function(key,startFrame){return void 0===startFrame&&(startFrame=0),this.isPlaying&&this.stop(),this.animationManager.load(this,key,startFrame),this.parent},pause:function(atFrame){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),void 0!==atFrame&&this.updateFrame(atFrame),this.parent},resume:function(fromFrame){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),void 0!==fromFrame&&this.updateFrame(fromFrame),this.parent},isPaused:{get:function(){return this._paused}},play:function(key,ignoreIfPlaying,startFrame){return void 0===ignoreIfPlaying&&(ignoreIfPlaying=!1),void 0===startFrame&&(startFrame=0),key instanceof BaseAnimation&&(key=key.key),ignoreIfPlaying&&this.isPlaying&&this.currentAnim.key===key?this.parent:(this.forward=!0,this._reverse=!1,this._startAnimation(key,startFrame))},playReverse:function(key,ignoreIfPlaying,startFrame){return void 0===ignoreIfPlaying&&(ignoreIfPlaying=!1),void 0===startFrame&&(startFrame=0),key instanceof BaseAnimation&&(key=key.key),ignoreIfPlaying&&this.isPlaying&&this.currentAnim.key===key?this.parent:(this.forward=!1,this._reverse=!0,this._startAnimation(key,startFrame))},_startAnimation:function(key,startFrame){this.load(key,startFrame);var anim=this.currentAnim,gameObject=this.parent;if(!anim)return gameObject;this.repeatCounter=-1===this._repeat?Number.MAX_VALUE:this._repeat,anim.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,anim.showOnStart&&(gameObject.visible=!0);var frame=this.currentFrame;return anim.emit(Events.ANIMATION_START,anim,frame,gameObject),gameObject.emit(Events.SPRITE_ANIMATION_KEY_START+key,anim,frame,gameObject),gameObject.emit(Events.SPRITE_ANIMATION_START,anim,frame,gameObject),gameObject},reverse:function(){return this.isPlaying&&(this._reverse=!this._reverse,this.forward=!this.forward),this.parent},getProgress:function(){var p=this.currentFrame.progress;return this.forward||(p=1-p),p},setProgress:function(value){return this.forward||(value=1-value),this.setCurrentFrame(this.currentAnim.getFrameByProgress(value)),this.parent},remove:function(key,animation){void 0===animation&&(animation=this.currentAnim),this.isPlaying&&animation.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},getRepeat:function(){return this._repeat},setRepeat:function(value){return this._repeat=value,this.repeatCounter=-1===value?Number.MAX_VALUE:value,this.parent},getRepeatDelay:function(){return this._repeatDelay},setRepeatDelay:function(value){return this._repeatDelay=value,this.parent},restart:function(includeDelay){void 0===includeDelay&&(includeDelay=!1);var anim=this.currentAnim;anim.getFirstTick(this,includeDelay),this.forward=!0,this.isPlaying=!0,this.pendingRepeat=!1,this._paused=!1,this.updateFrame(anim.frames[0]);var gameObject=this.parent,frame=this.currentFrame;return anim.emit(Events.ANIMATION_RESTART,anim,frame,gameObject),gameObject.emit(Events.SPRITE_ANIMATION_KEY_RESTART+anim.key,anim,frame,gameObject),gameObject.emit(Events.SPRITE_ANIMATION_RESTART,anim,frame,gameObject),this.parent},stop:function(){this._pendingStop=0,this.isPlaying=!1;var gameObject=this.parent,anim=this.currentAnim,frame=this.currentFrame;if(anim&&(anim.emit(Events.ANIMATION_COMPLETE,anim,frame,gameObject),gameObject.emit(Events.SPRITE_ANIMATION_KEY_COMPLETE+anim.key,anim,frame,gameObject),gameObject.emit(Events.SPRITE_ANIMATION_COMPLETE,anim,frame,gameObject)),this.nextAnim){var key=this.nextAnim;this.nextAnim=null,this.play(key)}return gameObject},stopAfterDelay:function(delay){return this._pendingStop=1,this._pendingStopValue=delay,this.parent},stopOnRepeat:function(){return this._pendingStop=2,this.parent},stopOnFrame:function(frame){return this._pendingStop=3,this._pendingStopValue=frame,this.parent},setTimeScale:function(value){return void 0===value&&(value=1),this._timeScale=value,this.parent},getTimeScale:function(){return this._timeScale},getTotalFrames:function(){return this.currentAnim.frames.length},update:function(time,delta){if(this.currentAnim&&this.isPlaying&&!this.currentAnim.paused){if(this.accumulator+=delta*this._timeScale,1===this._pendingStop&&(this._pendingStopValue-=delta,this._pendingStopValue<=0))return this.currentAnim.completeAnimation(this);this.accumulator>=this.nextTick&&this.currentAnim.setFrame(this)}},setCurrentFrame:function(animationFrame){var gameObject=this.parent;return this.currentFrame=animationFrame,gameObject.texture=animationFrame.frame.texture,gameObject.frame=animationFrame.frame,gameObject.isCropped&&gameObject.frame.updateCropUVs(gameObject._crop,gameObject.flipX,gameObject.flipY),gameObject.setSizeToFrame(),animationFrame.frame.customPivot?gameObject.setOrigin(animationFrame.frame.pivotX,animationFrame.frame.pivotY):gameObject.updateDisplayOrigin(),gameObject},updateFrame:function(animationFrame){var gameObject=this.setCurrentFrame(animationFrame);if(this.isPlaying){animationFrame.setAlpha&&(gameObject.alpha=animationFrame.alpha);var anim=this.currentAnim;gameObject.emit(Events.SPRITE_ANIMATION_KEY_UPDATE+anim.key,anim,animationFrame,gameObject),gameObject.emit(Events.SPRITE_ANIMATION_UPDATE,anim,animationFrame,gameObject),3===this._pendingStop&&this._pendingStopValue===animationFrame&&this.currentAnim.completeAnimation(this)}},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},setYoyo:function(value){return void 0===value&&(value=!1),this._yoyo=value,this.parent},getYoyo:function(){return this._yoyo},destroy:function(){this.animationManager.off(Events.REMOVE_ANIMATION,this.remove,this),this.animationManager=null,this.parent=null,this.currentAnim=null,this.currentFrame=null}});module.exports=Animation},function(module,exports){module.exports=function(value,array,key){if(!array.length)return NaN;if(1===array.length)return array[0];var low,high,i=1;if(key){if(value<array[0][key])return array[0];for(;array[i][key]<value;)i++}else for(;array[i]<value;)i++;return i>array.length&&(i=array.length),key?(low=array[i-1][key],(high=array[i][key])-value<=value-low?array[i]:array[i-1]):(low=array[i-1],(high=array[i])-value<=value-low?high:low)}},function(module,exports,__webpack_require__){var AnimationFrame=new(__webpack_require__(0))({initialize:function(textureKey,textureFrame,index,frame){this.textureKey=textureKey,this.textureFrame=textureFrame,this.index=index,this.frame=frame,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration}},destroy:function(){this.frame=void 0}});module.exports=AnimationFrame},function(module,exports,__webpack_require__){var BlendModes=__webpack_require__(43),BlendMode={_blendMode:BlendModes.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(value){"string"==typeof value&&(value=BlendModes[value]),(value|=0)>=-1&&(this._blendMode=value)}},setBlendMode:function(value){return this.blendMode=value,this}};module.exports=BlendMode},function(module,exports){var Depth={_depth:0,depth:{get:function(){return this._depth},set:function(value){this.scene.sys.queueDepthSort(),this._depth=value}},setDepth:function(value){return void 0===value&&(value=0),this.depth=value,this}};module.exports=Depth},function(module,exports,__webpack_require__){var GetPoint=__webpack_require__(163),Perimeter=__webpack_require__(120);module.exports=function(rectangle,quantity,stepRate,out){void 0===out&&(out=[]),quantity||(quantity=Perimeter(rectangle)/stepRate);for(var i=0;i<quantity;i++){var position=i/quantity;out.push(GetPoint(rectangle,position))}return out}},function(module,exports,__webpack_require__){var Point=__webpack_require__(4);module.exports=function(line,position,out){return void 0===out&&(out=new Point),out.x=line.x1+(line.x2-line.x1)*position,out.y=line.y1+(line.y2-line.y1)*position,out}},function(module,exports){module.exports=function(point,x,y,angle){var c=Math.cos(angle),s=Math.sin(angle),tx=point.x-x,ty=point.y-y;return point.x=tx*c-ty*s+x,point.y=tx*s+ty*c+y,point}},function(module,exports,__webpack_require__){var BitmapMask=__webpack_require__(281),GeometryMask=__webpack_require__(282),Mask={mask:null,setMask:function(mask){return this.mask=mask,this},clearMask:function(destroyMask){return void 0===destroyMask&&(destroyMask=!1),destroyMask&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(renderable){return void 0===renderable&&(this.texture||this.shader)&&(renderable=this),new BitmapMask(this.scene,renderable)},createGeometryMask:function(graphics){return void 0===graphics&&"Graphics"===this.type&&(graphics=this),new GeometryMask(this.scene,graphics)}};module.exports=Mask},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),GameEvents=__webpack_require__(23),BitmapMask=new Class({initialize:function(scene,renderable){var renderer=scene.sys.game.renderer;if(this.renderer=renderer,this.bitmapMask=renderable,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.prevFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,renderer&&renderer.gl){var width=renderer.width,height=renderer.height,pot=0==(width&width-1)&&0==(height&height-1),gl=renderer.gl,wrap=pot?gl.REPEAT:gl.CLAMP_TO_EDGE,filter=gl.LINEAR;this.mainTexture=renderer.createTexture2D(0,filter,filter,wrap,wrap,gl.RGBA,null,width,height),this.maskTexture=renderer.createTexture2D(0,filter,filter,wrap,wrap,gl.RGBA,null,width,height),this.mainFramebuffer=renderer.createFramebuffer(width,height,this.mainTexture,!0),this.maskFramebuffer=renderer.createFramebuffer(width,height,this.maskTexture,!0),scene.sys.game.events.on(GameEvents.CONTEXT_RESTORED,(function(renderer){var width=renderer.width,height=renderer.height,pot=0==(width&width-1)&&0==(height&height-1),gl=renderer.gl,wrap=pot?gl.REPEAT:gl.CLAMP_TO_EDGE,filter=gl.LINEAR;this.mainTexture=renderer.createTexture2D(0,filter,filter,wrap,wrap,gl.RGBA,null,width,height),this.maskTexture=renderer.createTexture2D(0,filter,filter,wrap,wrap,gl.RGBA,null,width,height),this.mainFramebuffer=renderer.createFramebuffer(width,height,this.mainTexture,!0),this.maskFramebuffer=renderer.createFramebuffer(width,height,this.maskTexture,!0)}),this)}},setBitmap:function(renderable){this.bitmapMask=renderable},preRenderWebGL:function(renderer,maskedObject,camera){renderer.pipelines.BitmapMaskPipeline.beginMask(this,maskedObject,camera)},postRenderWebGL:function(renderer,camera){renderer.pipelines.BitmapMaskPipeline.endMask(this,camera)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null;var renderer=this.renderer;renderer&&renderer.gl&&(renderer.deleteTexture(this.mainTexture),renderer.deleteTexture(this.maskTexture),renderer.deleteFramebuffer(this.mainFramebuffer),renderer.deleteFramebuffer(this.maskFramebuffer)),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null,this.prevFramebuffer=null,this.renderer=null}});module.exports=BitmapMask},function(module,exports,__webpack_require__){var GeometryMask=new(__webpack_require__(0))({initialize:function(scene,graphicsGeometry){this.geometryMask=graphicsGeometry,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(graphicsGeometry){return this.geometryMask=graphicsGeometry,this},setInvertAlpha:function(value){return void 0===value&&(value=!0),this.invertAlpha=value,this},preRenderWebGL:function(renderer,child,camera){var gl=renderer.gl;renderer.flush(),0===renderer.maskStack.length&&(gl.enable(gl.STENCIL_TEST),gl.clear(gl.STENCIL_BUFFER_BIT),renderer.maskCount=0),renderer.currentCameraMask.mask!==this&&(renderer.currentMask.mask=this),renderer.maskStack.push({mask:this,camera:camera}),this.applyStencil(renderer,camera,!0),renderer.maskCount++},applyStencil:function(renderer,camera,inc){var gl=renderer.gl,geometryMask=this.geometryMask,level=renderer.maskCount;gl.colorMask(!1,!1,!1,!1),inc?(gl.stencilFunc(gl.EQUAL,level,255),gl.stencilOp(gl.KEEP,gl.KEEP,gl.INCR)):(gl.stencilFunc(gl.EQUAL,level+1,255),gl.stencilOp(gl.KEEP,gl.KEEP,gl.DECR)),geometryMask.renderWebGL(renderer,geometryMask,0,camera),renderer.flush(),gl.colorMask(!0,!0,!0,!0),gl.stencilOp(gl.KEEP,gl.KEEP,gl.KEEP),inc?this.invertAlpha?gl.stencilFunc(gl.NOTEQUAL,level+1,255):gl.stencilFunc(gl.EQUAL,level+1,255):this.invertAlpha?gl.stencilFunc(gl.NOTEQUAL,level,255):gl.stencilFunc(gl.EQUAL,level,255)},postRenderWebGL:function(renderer){var gl=renderer.gl;if(renderer.maskStack.pop(),renderer.maskCount--,0===renderer.maskStack.length)renderer.flush(),renderer.currentMask.mask=null,gl.disable(gl.STENCIL_TEST);else{renderer.flush();var prev=renderer.maskStack[renderer.maskStack.length-1];prev.mask.applyStencil(renderer,prev.camera,!1),renderer.currentCameraMask.mask!==prev.mask?(renderer.currentMask.mask=prev.mask,renderer.currentMask.camera=prev.camera):renderer.currentMask.mask=null}},preRenderCanvas:function(renderer,mask,camera){var geometryMask=this.geometryMask;renderer.currentContext.save(),geometryMask.renderCanvas(renderer,geometryMask,0,camera,null,null,!0),renderer.currentContext.clip()},postRenderCanvas:function(renderer){renderer.currentContext.restore()},destroy:function(){this.geometryMask=null}});module.exports=GeometryMask},function(module,exports){var ScrollFactor={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(x,y){return void 0===y&&(y=x),this.scrollFactorX=x,this.scrollFactorY=y,this}};module.exports=ScrollFactor},function(module,exports){module.exports=function(gameObject){var out={name:gameObject.name,type:gameObject.type,x:gameObject.x,y:gameObject.y,depth:gameObject.depth,scale:{x:gameObject.scaleX,y:gameObject.scaleY},origin:{x:gameObject.originX,y:gameObject.originY},flipX:gameObject.flipX,flipY:gameObject.flipY,rotation:gameObject.rotation,alpha:gameObject.alpha,visible:gameObject.visible,scaleMode:gameObject.scaleMode,blendMode:gameObject.blendMode,textureKey:"",frameKey:"",data:{}};return gameObject.texture&&(out.textureKey=gameObject.texture.key,out.frameKey=gameObject.frame.name),out}},function(module,exports,__webpack_require__){var MATH_CONST=__webpack_require__(22),TransformMatrix=__webpack_require__(36),WrapAngle=__webpack_require__(167),WrapAngleDegrees=__webpack_require__(168),Transform={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(value){this._scaleX=value,this._scaleY=value,0===value?this.renderFlags&=-5:this.renderFlags|=4}},scaleX:{get:function(){return this._scaleX},set:function(value){this._scaleX=value,0===value?this.renderFlags&=-5:this.renderFlags|=4}},scaleY:{get:function(){return this._scaleY},set:function(value){this._scaleY=value,0===value?this.renderFlags&=-5:this.renderFlags|=4}},angle:{get:function(){return WrapAngleDegrees(this._rotation*MATH_CONST.RAD_TO_DEG)},set:function(value){this.rotation=WrapAngleDegrees(value)*MATH_CONST.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(value){this._rotation=WrapAngle(value)}},setPosition:function(x,y,z,w){return void 0===x&&(x=0),void 0===y&&(y=x),void 0===z&&(z=0),void 0===w&&(w=0),this.x=x,this.y=y,this.z=z,this.w=w,this},setRandomPosition:function(x,y,width,height){return void 0===x&&(x=0),void 0===y&&(y=0),void 0===width&&(width=this.scene.sys.scale.width),void 0===height&&(height=this.scene.sys.scale.height),this.x=x+Math.random()*width,this.y=y+Math.random()*height,this},setRotation:function(radians){return void 0===radians&&(radians=0),this.rotation=radians,this},setAngle:function(degrees){return void 0===degrees&&(degrees=0),this.angle=degrees,this},setScale:function(x,y){return void 0===x&&(x=1),void 0===y&&(y=x),this.scaleX=x,this.scaleY=y,this},setX:function(value){return void 0===value&&(value=0),this.x=value,this},setY:function(value){return void 0===value&&(value=0),this.y=value,this},setZ:function(value){return void 0===value&&(value=0),this.z=value,this},setW:function(value){return void 0===value&&(value=0),this.w=value,this},getLocalTransformMatrix:function(tempMatrix){return void 0===tempMatrix&&(tempMatrix=new TransformMatrix),tempMatrix.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(tempMatrix,parentMatrix){void 0===tempMatrix&&(tempMatrix=new TransformMatrix),void 0===parentMatrix&&(parentMatrix=new TransformMatrix);var parent=this.parentContainer;if(!parent)return this.getLocalTransformMatrix(tempMatrix);for(tempMatrix.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);parent;)parentMatrix.applyITRS(parent.x,parent.y,parent._rotation,parent._scaleX,parent._scaleY),parentMatrix.multiply(tempMatrix,tempMatrix),parent=parent.parentContainer;return tempMatrix},getParentRotation:function(){for(var rotation=0,parent=this.parentContainer;parent;)rotation+=parent.rotation,parent=parent.parentContainer;return rotation}};module.exports=Transform},function(module,exports){var Visible={_visible:!0,visible:{get:function(){return this._visible},set:function(value){value?(this._visible=!0,this.renderFlags|=1):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function(value){return this.visible=value,this}};module.exports=Visible},function(module,exports,__webpack_require__){module.exports={CHANGE_DATA:__webpack_require__(591),CHANGE_DATA_KEY:__webpack_require__(592),REMOVE_DATA:__webpack_require__(593),SET_DATA:__webpack_require__(594)}},function(module,exports,__webpack_require__){var Perimeter=__webpack_require__(120),Point=__webpack_require__(4);module.exports=function(rect,step,quantity,out){if(void 0===out&&(out=[]),!step&&!quantity)return out;step?quantity=Math.round(Perimeter(rect)/step):step=Perimeter(rect)/quantity;for(var x=rect.x,y=rect.y,face=0,i=0;i<quantity;i++)switch(out.push(new Point(x,y)),face){case 0:(x+=step)>=rect.right&&(face=1,y+=x-rect.right,x=rect.right);break;case 1:(y+=step)>=rect.bottom&&(face=2,x-=y-rect.bottom,y=rect.bottom);break;case 2:(x-=step)<=rect.left&&(face=3,y-=rect.left-x,x=rect.left);break;case 3:(y-=step)<=rect.top&&(face=0,y=rect.top)}return out}},function(module,exports){module.exports=function(array,total){void 0===total&&(total=1);for(var element=null,i=0;i<total;i++)element=array.shift(),array.push(element);return element}},function(module,exports){module.exports=function(array,total){void 0===total&&(total=1);for(var element=null,i=0;i<total;i++)element=array.pop(),array.unshift(element);return element}},function(module,exports){module.exports=function(line,stepRate,results){void 0===stepRate&&(stepRate=1),void 0===results&&(results=[]);var x1=Math.round(line.x1),y1=Math.round(line.y1),x2=Math.round(line.x2),y2=Math.round(line.y2),dx=Math.abs(x2-x1),dy=Math.abs(y2-y1),sx=x1<x2?1:-1,sy=y1<y2?1:-1,err=dx-dy;results.push({x:x1,y:y1});for(var i=1;x1!==x2||y1!==y2;){var e2=err<<1;e2>-dy&&(err-=dy,x1+=sx),e2<dx&&(err+=dx,y1+=sy),i%stepRate==0&&results.push({x:x1,y:y1}),i++}return results}},function(module,exports,__webpack_require__){var Animation=__webpack_require__(162),Class=__webpack_require__(0),CustomMap=__webpack_require__(174),EventEmitter=__webpack_require__(9),Events=__webpack_require__(119),GameEvents=__webpack_require__(23),GetValue=__webpack_require__(5),Pad=__webpack_require__(175),AnimationManager=new Class({Extends:EventEmitter,initialize:function(game){EventEmitter.call(this),this.game=game,this.textureManager=null,this.globalTimeScale=1,this.anims=new CustomMap,this.paused=!1,this.name="AnimationManager",game.events.once(GameEvents.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(GameEvents.DESTROY,this.destroy,this)},add:function(key,animation){if(!this.anims.has(key))return animation.key=key,this.anims.set(key,animation),this.emit(Events.ADD_ANIMATION,key,animation),this;console.warn("Animation key exists: "+key)},exists:function(key){return this.anims.has(key)},create:function(config){var key=config.key,anim=!1;return key&&((anim=this.get(key))||(anim=new Animation(this,key,config),this.anims.set(key,anim),this.emit(Events.ADD_ANIMATION,key,anim))),anim},fromJSON:function(data,clearCurrentAnimations){void 0===clearCurrentAnimations&&(clearCurrentAnimations=!1),clearCurrentAnimations&&this.anims.clear(),"string"==typeof data&&(data=JSON.parse(data));var output=[];if(data.hasOwnProperty("anims")&&Array.isArray(data.anims)){for(var i=0;i<data.anims.length;i++)output.push(this.create(data.anims[i]));data.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=data.globalTimeScale)}else data.hasOwnProperty("key")&&"frame"===data.type&&output.push(this.create(data));return output},generateFrameNames:function(key,config){var prefix=GetValue(config,"prefix",""),start=GetValue(config,"start",0),end=GetValue(config,"end",0),suffix=GetValue(config,"suffix",""),zeroPad=GetValue(config,"zeroPad",0),out=GetValue(config,"outputArray",[]),frames=GetValue(config,"frames",!1),texture=this.textureManager.get(key);if(!texture)return out;var i,frame,diff=start<end?1:-1;if(end+=diff,config)if(Array.isArray(frames))for(i=0;i<frames.length;i++)frame=prefix+Pad(frames[i],zeroPad,"0",1)+suffix,texture.has(frame)&&out.push({key:key,frame:frame});else for(i=start;i!==end;i+=diff)frame=prefix+Pad(i,zeroPad,"0",1)+suffix,texture.has(frame)&&out.push({key:key,frame:frame});else for(frames=texture.getFrameNames(),i=0;i<frames.length;i++)out.push({key:key,frame:frames[i]});return out},generateFrameNumbers:function(key,config){var i,startFrame=GetValue(config,"start",0),endFrame=GetValue(config,"end",-1),firstFrame=GetValue(config,"first",!1),out=GetValue(config,"outputArray",[]),frames=GetValue(config,"frames",!1),texture=this.textureManager.get(key);if(!texture)return out;if(firstFrame&&texture.has(firstFrame)&&out.push({key:key,frame:firstFrame}),Array.isArray(frames))for(i=0;i<frames.length;i++)texture.has(frames[i])&&out.push({key:key,frame:frames[i]});else{-1===endFrame&&(endFrame=texture.frameTotal);var diff=startFrame<endFrame?1:-1;for(endFrame+=diff,i=startFrame;i!==endFrame;i+=diff)texture.has(i)&&out.push({key:key,frame:i})}return out},get:function(key){return this.anims.get(key)},load:function(child,key,startFrame){var anim=this.get(key);return anim?anim.load(child,startFrame):console.warn("Missing animation: "+key),child},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(Events.PAUSE_ALL)),this},play:function(key,child){if(Array.isArray(child)||(child=[child]),this.get(key)){for(var i=0;i<child.length;i++)child[i].anims.play(key);return this}},remove:function(key){var anim=this.get(key);return anim&&(this.emit(Events.REMOVE_ANIMATION,key,anim),this.anims.delete(key)),anim},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(Events.RESUME_ALL)),this},staggerPlay:function(key,children,stagger){if(void 0===stagger&&(stagger=0),Array.isArray(children)||(children=[children]),this.get(key)){for(var i=0;i<children.length;i++)children[i].anims.delayedPlay(stagger*i,key);return this}},toJSON:function(key){if(void 0!==key&&""!==key)return this.anims.get(key).toJSON();var output={anims:[],globalTimeScale:this.globalTimeScale};return this.anims.each((function(animationKey,animation){output.anims.push(animation.toJSON())})),output},destroy:function(){this.anims.clear(),this.textureManager=null,this.game=null}});module.exports=AnimationManager},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),CustomMap=__webpack_require__(174),EventEmitter=__webpack_require__(9),Events=__webpack_require__(294),BaseCache=new Class({initialize:function(){this.entries=new CustomMap,this.events=new EventEmitter},add:function(key,data){return this.entries.set(key,data),this.events.emit(Events.ADD,this,key,data),this},has:function(key){return this.entries.has(key)},exists:function(key){return this.entries.has(key)},get:function(key){return this.entries.get(key)},remove:function(key){var entry=this.get(key);return entry&&(this.entries.delete(key),this.events.emit(Events.REMOVE,this,key,entry.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});module.exports=BaseCache},function(module,exports,__webpack_require__){module.exports={ADD:__webpack_require__(640),REMOVE:__webpack_require__(641)}},function(module,exports,__webpack_require__){var BaseCache=__webpack_require__(293),Class=__webpack_require__(0),GameEvents=__webpack_require__(23),CacheManager=new Class({initialize:function(game){this.game=game,this.binary=new BaseCache,this.bitmapFont=new BaseCache,this.json=new BaseCache,this.physics=new BaseCache,this.shader=new BaseCache,this.audio=new BaseCache,this.text=new BaseCache,this.html=new BaseCache,this.obj=new BaseCache,this.tilemap=new BaseCache,this.xml=new BaseCache,this.custom={},this.game.events.once(GameEvents.DESTROY,this.destroy,this)},addCustom:function(key){return this.custom.hasOwnProperty(key)||(this.custom[key]=new BaseCache),this.custom[key]},destroy:function(){for(var keys=["binary","bitmapFont","json","physics","shader","audio","text","html","obj","tilemap","xml"],i=0;i<keys.length;i++)this[keys[i]].destroy(),this[keys[i]]=null;for(var key in this.custom)this.custom[key].destroy();this.custom=null,this.game=null}});module.exports=CacheManager},function(module,exports,__webpack_require__){var BaseCamera=__webpack_require__(124),CanvasPool=__webpack_require__(28),CenterOn=__webpack_require__(179),Clamp=__webpack_require__(25),Class=__webpack_require__(0),Components=__webpack_require__(12),Effects=__webpack_require__(304),Linear=__webpack_require__(126),Rectangle=__webpack_require__(11),Vector2=__webpack_require__(3),Camera=new Class({Extends:BaseCamera,Mixins:[Components.Flip,Components.Tint],initialize:function(x,y,width,height){BaseCamera.call(this,x,y,width,height),this.inputEnabled=!0,this.fadeEffect=new Effects.Fade(this),this.flashEffect=new Effects.Flash(this),this.shakeEffect=new Effects.Shake(this),this.panEffect=new Effects.Pan(this),this.zoomEffect=new Effects.Zoom(this),this.lerp=new Vector2(1,1),this.followOffset=new Vector2,this.deadzone=null,this._follow=null,this.renderToTexture=!1,this.canvas=null,this.context=null,this.glTexture=null,this.framebuffer=null,this.pipeline=null},setRenderToTexture:function(pipeline){var renderer=this.scene.sys.game.renderer;return renderer.gl?(this.glTexture=renderer.createTextureFromSource(null,this.width,this.height,0),this.framebuffer=renderer.createFramebuffer(this.width,this.height,this.glTexture,!1)):(this.canvas=CanvasPool.create2D(this,this.width,this.height),this.context=this.canvas.getContext("2d")),this.renderToTexture=!0,pipeline&&this.setPipeline(pipeline),this},setPipeline:function(pipeline){if("string"==typeof pipeline){var renderer=this.scene.sys.game.renderer;renderer.gl&&renderer.hasPipeline(pipeline)&&(this.pipeline=renderer.getPipeline(pipeline))}else this.pipeline=pipeline;return this},clearRenderToTexture:function(){if(this.scene){var renderer=this.scene.sys.game.renderer;if(renderer)return renderer.gl?(this.framebuffer&&renderer.deleteFramebuffer(this.framebuffer),this.glTexture&&renderer.deleteTexture(this.glTexture),this.framebuffer=null,this.glTexture=null,this.pipeline=null):(CanvasPool.remove(this),this.canvas=null,this.context=null),this.renderToTexture=!1,this}},setDeadzone:function(width,height){if(void 0===width)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=width,this.deadzone.height=height):this.deadzone=new Rectangle(0,0,width,height),this._follow){var originX=this.width/2,originY=this.height/2,fx=this._follow.x-this.followOffset.x,fy=this._follow.y-this.followOffset.y;this.midPoint.set(fx,fy),this.scrollX=fx-originX,this.scrollY=fy-originY}CenterOn(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(duration,red,green,blue,callback,context){return this.fadeEffect.start(!1,duration,red,green,blue,!0,callback,context)},fadeOut:function(duration,red,green,blue,callback,context){return this.fadeEffect.start(!0,duration,red,green,blue,!0,callback,context)},fadeFrom:function(duration,red,green,blue,force,callback,context){return this.fadeEffect.start(!1,duration,red,green,blue,force,callback,context)},fade:function(duration,red,green,blue,force,callback,context){return this.fadeEffect.start(!0,duration,red,green,blue,force,callback,context)},flash:function(duration,red,green,blue,force,callback,context){return this.flashEffect.start(duration,red,green,blue,force,callback,context)},shake:function(duration,intensity,force,callback,context){return this.shakeEffect.start(duration,intensity,force,callback,context)},pan:function(x,y,duration,ease,force,callback,context){return this.panEffect.start(x,y,duration,ease,force,callback,context)},zoomTo:function(zoom,duration,ease,force,callback,context){return this.zoomEffect.start(zoom,duration,ease,force,callback,context)},preRender:function(resolution){var width=this.width,height=this.height,halfWidth=.5*width,halfHeight=.5*height,zoom=this.zoom*resolution,matrix=this.matrix,originX=width*this.originX,originY=height*this.originY,follow=this._follow,deadzone=this.deadzone,sx=this.scrollX,sy=this.scrollY;if(deadzone&&CenterOn(deadzone,this.midPoint.x,this.midPoint.y),follow&&!this.panEffect.isRunning){var fx=follow.x-this.followOffset.x,fy=follow.y-this.followOffset.y;deadzone?(fx<deadzone.x?sx=Linear(sx,sx-(deadzone.x-fx),this.lerp.x):fx>deadzone.right&&(sx=Linear(sx,sx+(fx-deadzone.right),this.lerp.x)),fy<deadzone.y?sy=Linear(sy,sy-(deadzone.y-fy),this.lerp.y):fy>deadzone.bottom&&(sy=Linear(sy,sy+(fy-deadzone.bottom),this.lerp.y))):(sx=Linear(sx,fx-originX,this.lerp.x),sy=Linear(sy,fy-originY,this.lerp.y))}this.useBounds&&(sx=this.clampX(sx),sy=this.clampY(sy)),this.roundPixels&&(originX=Math.round(originX),originY=Math.round(originY)),this.scrollX=sx,this.scrollY=sy;var midX=sx+halfWidth,midY=sy+halfHeight;this.midPoint.set(midX,midY);var displayWidth=width/zoom,displayHeight=height/zoom;this.worldView.setTo(midX-displayWidth/2,midY-displayHeight/2,displayWidth,displayHeight),matrix.applyITRS(this.x+originX,this.y+originY,this.rotation,zoom,zoom),matrix.translate(-originX,-originY),this.shakeEffect.preRender()},setLerp:function(x,y){return void 0===x&&(x=1),void 0===y&&(y=x),this.lerp.set(x,y),this},setFollowOffset:function(x,y){return void 0===x&&(x=0),void 0===y&&(y=0),this.followOffset.set(x,y),this},startFollow:function(target,roundPixels,lerpX,lerpY,offsetX,offsetY){void 0===roundPixels&&(roundPixels=!1),void 0===lerpX&&(lerpX=1),void 0===lerpY&&(lerpY=lerpX),void 0===offsetX&&(offsetX=0),void 0===offsetY&&(offsetY=offsetX),this._follow=target,this.roundPixels=roundPixels,lerpX=Clamp(lerpX,0,1),lerpY=Clamp(lerpY,0,1),this.lerp.set(lerpX,lerpY),this.followOffset.set(offsetX,offsetY);var originX=this.width/2,originY=this.height/2,fx=target.x-offsetX,fy=target.y-offsetY;return this.midPoint.set(fx,fy),this.scrollX=fx-originX,this.scrollY=fy-originY,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(time,delta){this.visible&&(this.panEffect.update(time,delta),this.zoomEffect.update(time,delta),this.shakeEffect.update(time,delta),this.flashEffect.update(time,delta),this.fadeEffect.update(time,delta))},destroy:function(){this.clearRenderToTexture(),this.resetFX(),BaseCamera.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});module.exports=Camera},function(module,exports,__webpack_require__){var Color=__webpack_require__(37);module.exports=function(hex){var color=new Color;hex=hex.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,(function(m,r,g,b){return r+r+g+g+b+b}));var result=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);if(result){var r=parseInt(result[1],16),g=parseInt(result[2],16),b=parseInt(result[3],16);color.setTo(r,g,b)}return color}},function(module,exports){module.exports=function(red,green,blue,alpha){return alpha<<24|red<<16|green<<8|blue}},function(module,exports){module.exports=function(r,g,b,out){void 0===out&&(out={h:0,s:0,v:0}),r/=255,g/=255,b/=255;var min=Math.min(r,g,b),max=Math.max(r,g,b),d=max-min,h=0,s=0===max?0:d/max,v=max;return max!==min&&(max===r?h=(g-b)/d+(g<b?6:0):max===g?h=(b-r)/d+2:max===b&&(h=(r-g)/d+4),h/=6),out.hasOwnProperty("_h")?(out._h=h,out._s=s,out._v=v):(out.h=h,out.s=s,out.v=v),out}},function(module,exports,__webpack_require__){var Color=__webpack_require__(37),IntegerToRGB=__webpack_require__(301);module.exports=function(input){var rgb=IntegerToRGB(input);return new Color(rgb.r,rgb.g,rgb.b,rgb.a)}},function(module,exports){module.exports=function(color){return color>16777215?{a:color>>>24,r:color>>16&255,g:color>>8&255,b:255&color}:{a:255,r:color>>16&255,g:color>>8&255,b:255&color}}},function(module,exports,__webpack_require__){var Color=__webpack_require__(37);module.exports=function(input){return new Color(input.r,input.g,input.b,input.a)}},function(module,exports,__webpack_require__){var Color=__webpack_require__(37);module.exports=function(rgb){var color=new Color,result=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(rgb.toLowerCase());if(result){var r=parseInt(result[1],10),g=parseInt(result[2],10),b=parseInt(result[3],10),a=void 0!==result[4]?parseFloat(result[4]):1;color.setTo(r,g,b,255*a)}return color}},function(module,exports,__webpack_require__){module.exports={Fade:__webpack_require__(662),Flash:__webpack_require__(663),Pan:__webpack_require__(664),Shake:__webpack_require__(697),Zoom:__webpack_require__(698)}},function(module,exports,__webpack_require__){module.exports={In:__webpack_require__(665),Out:__webpack_require__(666),InOut:__webpack_require__(667)}},function(module,exports,__webpack_require__){module.exports={In:__webpack_require__(668),Out:__webpack_require__(669),InOut:__webpack_require__(670)}},function(module,exports,__webpack_require__){module.exports={In:__webpack_require__(671),Out:__webpack_require__(672),InOut:__webpack_require__(673)}},function(module,exports,__webpack_require__){module.exports={In:__webpack_require__(674),Out:__webpack_require__(675),InOut:__webpack_require__(676)}},function(module,exports,__webpack_require__){module.exports={In:__webpack_require__(677),Out:__webpack_require__(678),InOut:__webpack_require__(679)}},function(module,exports,__webpack_require__){module.exports={In:__webpack_require__(680),Out:__webpack_require__(681),InOut:__webpack_require__(682)}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(683)},function(module,exports,__webpack_require__){module.exports={In:__webpack_require__(684),Out:__webpack_require__(685),InOut:__webpack_require__(686)}},function(module,exports,__webpack_require__){module.exports={In:__webpack_require__(687),Out:__webpack_require__(688),InOut:__webpack_require__(689)}},function(module,exports,__webpack_require__){module.exports={In:__webpack_require__(690),Out:__webpack_require__(691),InOut:__webpack_require__(692)}},function(module,exports,__webpack_require__){module.exports={In:__webpack_require__(693),Out:__webpack_require__(694),InOut:__webpack_require__(695)}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(696)},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),CONST=__webpack_require__(35),Device=__webpack_require__(318),GetFastValue=__webpack_require__(1),GetValue=__webpack_require__(5),IsPlainObject=__webpack_require__(7),PhaserMath=__webpack_require__(182),NOOP=__webpack_require__(2),DefaultPlugins=__webpack_require__(188),ValueToColor=__webpack_require__(176),Config=new Class({initialize:function(config){void 0===config&&(config={});this.width=GetValue(config,"width",1024),this.height=GetValue(config,"height",768),this.zoom=GetValue(config,"zoom",1),this.resolution=GetValue(config,"resolution",1),this.parent=GetValue(config,"parent",void 0),this.scaleMode=GetValue(config,"scaleMode",0),this.expandParent=GetValue(config,"expandParent",!0),this.autoRound=GetValue(config,"autoRound",!1),this.autoCenter=GetValue(config,"autoCenter",0),this.resizeInterval=GetValue(config,"resizeInterval",500),this.fullscreenTarget=GetValue(config,"fullscreenTarget",null),this.minWidth=GetValue(config,"minWidth",0),this.maxWidth=GetValue(config,"maxWidth",0),this.minHeight=GetValue(config,"minHeight",0),this.maxHeight=GetValue(config,"maxHeight",0);var scaleConfig=GetValue(config,"scale",null);scaleConfig&&(this.width=GetValue(scaleConfig,"width",this.width),this.height=GetValue(scaleConfig,"height",this.height),this.zoom=GetValue(scaleConfig,"zoom",this.zoom),this.resolution=GetValue(scaleConfig,"resolution",this.resolution),this.parent=GetValue(scaleConfig,"parent",this.parent),this.scaleMode=GetValue(scaleConfig,"mode",this.scaleMode),this.expandParent=GetValue(scaleConfig,"expandParent",this.expandParent),this.autoRound=GetValue(scaleConfig,"autoRound",this.autoRound),this.autoCenter=GetValue(scaleConfig,"autoCenter",this.autoCenter),this.resizeInterval=GetValue(scaleConfig,"resizeInterval",this.resizeInterval),this.fullscreenTarget=GetValue(scaleConfig,"fullscreenTarget",this.fullscreenTarget),this.minWidth=GetValue(scaleConfig,"min.width",this.minWidth),this.maxWidth=GetValue(scaleConfig,"max.width",this.maxWidth),this.minHeight=GetValue(scaleConfig,"min.height",this.minHeight),this.maxHeight=GetValue(scaleConfig,"max.height",this.maxHeight)),this.renderType=GetValue(config,"type",CONST.AUTO),this.canvas=GetValue(config,"canvas",null),this.context=GetValue(config,"context",null),this.canvasStyle=GetValue(config,"canvasStyle",null),this.customEnvironment=GetValue(config,"customEnvironment",!1),this.sceneConfig=GetValue(config,"scene",null),this.seed=GetValue(config,"seed",[(Date.now()*Math.random()).toString()]),PhaserMath.RND=new PhaserMath.RandomDataGenerator(this.seed),this.gameTitle=GetValue(config,"title",""),this.gameURL=GetValue(config,"url","https://phaser.io"),this.gameVersion=GetValue(config,"version",""),this.autoFocus=GetValue(config,"autoFocus",!0),this.domCreateContainer=GetValue(config,"dom.createContainer",!1),this.domBehindCanvas=GetValue(config,"dom.behindCanvas",!1),this.inputKeyboard=GetValue(config,"input.keyboard",!0),this.inputKeyboardEventTarget=GetValue(config,"input.keyboard.target",window),this.inputKeyboardCapture=GetValue(config,"input.keyboard.capture",[]),this.inputMouse=GetValue(config,"input.mouse",!0),this.inputMouseEventTarget=GetValue(config,"input.mouse.target",null),this.inputMouseCapture=GetValue(config,"input.mouse.capture",!0),this.inputTouch=GetValue(config,"input.touch",Device.input.touch),this.inputTouchEventTarget=GetValue(config,"input.touch.target",null),this.inputTouchCapture=GetValue(config,"input.touch.capture",!0),this.inputActivePointers=GetValue(config,"input.activePointers",1),this.inputSmoothFactor=GetValue(config,"input.smoothFactor",0),this.inputWindowEvents=GetValue(config,"input.windowEvents",!0),this.inputGamepad=GetValue(config,"input.gamepad",!1),this.inputGamepadEventTarget=GetValue(config,"input.gamepad.target",window),this.disableContextMenu=GetValue(config,"disableContextMenu",!1),this.audio=GetValue(config,"audio"),this.hideBanner=!1===GetValue(config,"banner",null),this.hidePhaser=GetValue(config,"banner.hidePhaser",!1),this.bannerTextColor=GetValue(config,"banner.text","#ffffff"),this.bannerBackgroundColor=GetValue(config,"banner.background",["#ff0000","#ffff00","#00ff00","#00ffff","#000000"]),""===this.gameTitle&&this.hidePhaser&&(this.hideBanner=!0),this.fps=GetValue(config,"fps",null);var renderConfig=GetValue(config,"render",config);this.antialias=GetValue(renderConfig,"antialias",!0),this.desynchronized=GetValue(renderConfig,"desynchronized",!1),this.roundPixels=GetValue(renderConfig,"roundPixels",!1),this.pixelArt=GetValue(renderConfig,"pixelArt",1!==this.zoom),this.pixelArt&&(this.antialias=!1,this.roundPixels=!0),this.transparent=GetValue(renderConfig,"transparent",!1),this.clearBeforeRender=GetValue(renderConfig,"clearBeforeRender",!0),this.premultipliedAlpha=GetValue(renderConfig,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=GetValue(renderConfig,"failIfMajorPerformanceCaveat",!1),this.powerPreference=GetValue(renderConfig,"powerPreference","default"),this.batchSize=GetValue(renderConfig,"batchSize",2e3),this.maxLights=GetValue(renderConfig,"maxLights",10);var bgc=GetValue(config,"backgroundColor",0);this.backgroundColor=ValueToColor(bgc),0===bgc&&this.transparent&&(this.backgroundColor.alpha=0),this.preBoot=GetValue(config,"callbacks.preBoot",NOOP),this.postBoot=GetValue(config,"callbacks.postBoot",NOOP),this.physics=GetValue(config,"physics",{}),this.defaultPhysicsSystem=GetValue(this.physics,"default",!1),this.loaderBaseURL=GetValue(config,"loader.baseURL",""),this.loaderPath=GetValue(config,"loader.path",""),this.loaderMaxParallelDownloads=GetValue(config,"loader.maxParallelDownloads",32),this.loaderCrossOrigin=GetValue(config,"loader.crossOrigin",void 0),this.loaderResponseType=GetValue(config,"loader.responseType",""),this.loaderAsync=GetValue(config,"loader.async",!0),this.loaderUser=GetValue(config,"loader.user",""),this.loaderPassword=GetValue(config,"loader.password",""),this.loaderTimeout=GetValue(config,"loader.timeout",0),this.installGlobalPlugins=[],this.installScenePlugins=[];var plugins=GetValue(config,"plugins",null),defaultPlugins=DefaultPlugins.DefaultScene;plugins&&(Array.isArray(plugins)?this.defaultPlugins=plugins:IsPlainObject(plugins)&&(this.installGlobalPlugins=GetFastValue(plugins,"global",[]),this.installScenePlugins=GetFastValue(plugins,"scene",[]),Array.isArray(plugins.default)?defaultPlugins=plugins.default:Array.isArray(plugins.defaultMerge)&&(defaultPlugins=defaultPlugins.concat(plugins.defaultMerge)))),this.defaultPlugins=defaultPlugins;var pngPrefix="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=GetValue(config,"images.default",pngPrefix+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=GetValue(config,"images.missing",pngPrefix+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),window&&(window.FORCE_WEBGL?this.renderType=CONST.WEBGL:window.FORCE_CANVAS&&(this.renderType=CONST.CANVAS))}});module.exports=Config},function(module,exports,__webpack_require__){module.exports={os:__webpack_require__(127),browser:__webpack_require__(128),features:__webpack_require__(181),input:__webpack_require__(727),audio:__webpack_require__(728),video:__webpack_require__(729),fullscreen:__webpack_require__(730),canvasFeatures:__webpack_require__(319)}},function(module,exports,__webpack_require__){var pngHead,pngEnd,magenta,CanvasPool=__webpack_require__(28),CanvasFeatures={supportInverseAlpha:!1,supportNewBlendModes:!1};module.exports=(void 0!==document&&(CanvasFeatures.supportNewBlendModes=(pngHead="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",pngEnd="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",(magenta=new Image).onload=function(){var yellow=new Image;yellow.onload=function(){var context=CanvasPool.create(yellow,6,1).getContext("2d");if(context.globalCompositeOperation="multiply",context.drawImage(magenta,0,0),context.drawImage(yellow,2,0),!context.getImageData(2,0,1,1))return!1;var data=context.getImageData(2,0,1,1).data;CanvasPool.remove(yellow),CanvasFeatures.supportNewBlendModes=255===data[0]&&0===data[1]&&0===data[2]},yellow.src=pngHead+"/wCKxvRF"+pngEnd},magenta.src=pngHead+"AP804Oa6"+pngEnd,!1),CanvasFeatures.supportInverseAlpha=function(){var context=CanvasPool.create(this,2,1).getContext("2d");context.fillStyle="rgba(10, 20, 30, 0.5)",context.fillRect(0,0,1,1);var s1=context.getImageData(0,0,1,1);if(null===s1)return!1;context.putImageData(s1,1,0);var s2=context.getImageData(1,0,1,1);return s2.data[0]===s1.data[0]&&s2.data[1]===s1.data[1]&&s2.data[2]===s1.data[2]&&s2.data[3]===s1.data[3]}()),CanvasFeatures)},function(module,exports){module.exports=function(x1,y1,x2,y2){return Math.atan2(y2-y1,x2-x1)}},function(module,exports){module.exports=function(angle){return(angle%=2*Math.PI)>=0?angle:angle+2*Math.PI}},function(module,exports){module.exports=function(x1,y1,x2,y2){var dx=x1-x2,dy=y1-y2;return dx*dx+dy*dy}},function(module,exports){module.exports=function(a,b,epsilon){return void 0===epsilon&&(epsilon=1e-4),a>b-epsilon}},function(module,exports){module.exports=function(a,b,epsilon){return void 0===epsilon&&(epsilon=1e-4),a<b+epsilon}},function(module,exports,__webpack_require__){var Factorial=__webpack_require__(326);module.exports=function(n,i){return Factorial(n)/Factorial(i)/Factorial(n-i)}},function(module,exports){module.exports=function(value){if(0===value)return 1;for(var res=value;--value;)res*=value;return res}},function(module,exports){module.exports=function(t,p0,p1,p2,p3){return function(t,p){var k=1-t;return k*k*k*p}(t,p0)+function(t,p){var k=1-t;return 3*k*k*t*p}(t,p1)+function(t,p){return 3*(1-t)*t*t*p}(t,p2)+function(t,p){return t*t*t*p}(t,p3)}},function(module,exports){module.exports=function(t,p0,p1,p2){return function(t,p){var k=1-t;return k*k*p}(t,p0)+function(t,p){return 2*(1-t)*t*p}(t,p1)+function(t,p){return t*t*p}(t,p2)}},function(module,exports,__webpack_require__){var SmoothStep=__webpack_require__(173);module.exports=function(t,min,max){return min+(max-min)*SmoothStep(t,0,1)}},function(module,exports){module.exports=function(value){var index=Math.log(value)/.6931471805599453;return 1<<Math.ceil(index)}},function(module,exports){module.exports=function(value,gap,start,divide){return void 0===start&&(start=0),0===gap?value:(value-=start,value=gap*Math.ceil(value/gap),divide?(start+value)/gap:start+value)}},function(module,exports){module.exports=function(min,max){return Math.random()*(max-min)+min}},function(module,exports){module.exports=function(vec3,radius){void 0===radius&&(radius=1);var r=2*Math.random()*Math.PI,z=2*Math.random()-1,zScale=Math.sqrt(1-z*z)*radius;return vec3.x=Math.cos(r)*zScale,vec3.y=Math.sin(r)*zScale,vec3.z=z*radius,vec3}},function(module,exports){module.exports=function(vec4,scale){return void 0===scale&&(scale=1),vec4.x=(2*Math.random()-1)*scale,vec4.y=(2*Math.random()-1)*scale,vec4.z=(2*Math.random()-1)*scale,vec4.w=(2*Math.random()-1)*scale,vec4}},function(module,exports){module.exports=function(point,angle){var x=point.x,y=point.y;return point.x=x*Math.cos(angle)-y*Math.sin(angle),point.y=x*Math.sin(angle)+y*Math.cos(angle),point}},function(module,exports){module.exports=function(value){return value>0?Math.ceil(value):Math.floor(value)}},function(module,exports,__webpack_require__){var Vector2=__webpack_require__(3);module.exports=function(x,y,positionX,positionY,rotation,scaleX,scaleY,output){void 0===output&&(output=new Vector2);var radianSin=Math.sin(rotation),radianCos=Math.cos(rotation),a=radianCos*scaleX,b=radianSin*scaleX,c=-radianSin*scaleY,d=radianCos*scaleY,id=1/(a*d+c*-b);return output.x=d*id*x+-c*id*y+(positionY*c-positionX*d)*id,output.y=a*id*y+-b*id*x+(-positionY*a+positionX*b)*id,output}},function(module,exports,__webpack_require__){var Matrix3=new(__webpack_require__(0))({initialize:function(m){this.val=new Float32Array(9),m?this.copy(m):this.identity()},clone:function(){return new Matrix3(this)},set:function(src){return this.copy(src)},copy:function(src){var out=this.val,a=src.val;return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[4]=a[4],out[5]=a[5],out[6]=a[6],out[7]=a[7],out[8]=a[8],this},fromMat4:function(m){var a=m.val,out=this.val;return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[4],out[4]=a[5],out[5]=a[6],out[6]=a[8],out[7]=a[9],out[8]=a[10],this},fromArray:function(a){var out=this.val;return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[4]=a[4],out[5]=a[5],out[6]=a[6],out[7]=a[7],out[8]=a[8],this},identity:function(){var out=this.val;return out[0]=1,out[1]=0,out[2]=0,out[3]=0,out[4]=1,out[5]=0,out[6]=0,out[7]=0,out[8]=1,this},transpose:function(){var a=this.val,a01=a[1],a02=a[2],a12=a[5];return a[1]=a[3],a[2]=a[6],a[3]=a01,a[5]=a[7],a[6]=a02,a[7]=a12,this},invert:function(){var a=this.val,a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4],a12=a[5],a20=a[6],a21=a[7],a22=a[8],b01=a22*a11-a12*a21,b11=-a22*a10+a12*a20,b21=a21*a10-a11*a20,det=a00*b01+a01*b11+a02*b21;return det?(det=1/det,a[0]=b01*det,a[1]=(-a22*a01+a02*a21)*det,a[2]=(a12*a01-a02*a11)*det,a[3]=b11*det,a[4]=(a22*a00-a02*a20)*det,a[5]=(-a12*a00+a02*a10)*det,a[6]=b21*det,a[7]=(-a21*a00+a01*a20)*det,a[8]=(a11*a00-a01*a10)*det,this):null},adjoint:function(){var a=this.val,a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4],a12=a[5],a20=a[6],a21=a[7],a22=a[8];return a[0]=a11*a22-a12*a21,a[1]=a02*a21-a01*a22,a[2]=a01*a12-a02*a11,a[3]=a12*a20-a10*a22,a[4]=a00*a22-a02*a20,a[5]=a02*a10-a00*a12,a[6]=a10*a21-a11*a20,a[7]=a01*a20-a00*a21,a[8]=a00*a11-a01*a10,this},determinant:function(){var a=this.val,a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4],a12=a[5],a20=a[6],a21=a[7],a22=a[8];return a00*(a22*a11-a12*a21)+a01*(-a22*a10+a12*a20)+a02*(a21*a10-a11*a20)},multiply:function(src){var a=this.val,a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4],a12=a[5],a20=a[6],a21=a[7],a22=a[8],b=src.val,b00=b[0],b01=b[1],b02=b[2],b10=b[3],b11=b[4],b12=b[5],b20=b[6],b21=b[7],b22=b[8];return a[0]=b00*a00+b01*a10+b02*a20,a[1]=b00*a01+b01*a11+b02*a21,a[2]=b00*a02+b01*a12+b02*a22,a[3]=b10*a00+b11*a10+b12*a20,a[4]=b10*a01+b11*a11+b12*a21,a[5]=b10*a02+b11*a12+b12*a22,a[6]=b20*a00+b21*a10+b22*a20,a[7]=b20*a01+b21*a11+b22*a21,a[8]=b20*a02+b21*a12+b22*a22,this},translate:function(v){var a=this.val,x=v.x,y=v.y;return a[6]=x*a[0]+y*a[3]+a[6],a[7]=x*a[1]+y*a[4]+a[7],a[8]=x*a[2]+y*a[5]+a[8],this},rotate:function(rad){var a=this.val,a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4],a12=a[5],s=Math.sin(rad),c=Math.cos(rad);return a[0]=c*a00+s*a10,a[1]=c*a01+s*a11,a[2]=c*a02+s*a12,a[3]=c*a10-s*a00,a[4]=c*a11-s*a01,a[5]=c*a12-s*a02,this},scale:function(v){var a=this.val,x=v.x,y=v.y;return a[0]=x*a[0],a[1]=x*a[1],a[2]=x*a[2],a[3]=y*a[3],a[4]=y*a[4],a[5]=y*a[5],this},fromQuat:function(q){var x=q.x,y=q.y,z=q.z,w=q.w,x2=x+x,y2=y+y,z2=z+z,xx=x*x2,xy=x*y2,xz=x*z2,yy=y*y2,yz=y*z2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2,out=this.val;return out[0]=1-(yy+zz),out[3]=xy+wz,out[6]=xz-wy,out[1]=xy-wz,out[4]=1-(xx+zz),out[7]=yz+wx,out[2]=xz+wy,out[5]=yz-wx,out[8]=1-(xx+yy),this},normalFromMat4:function(m){var a=m.val,out=this.val,a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15],b00=a00*a11-a01*a10,b01=a00*a12-a02*a10,b02=a00*a13-a03*a10,b03=a01*a12-a02*a11,b04=a01*a13-a03*a11,b05=a02*a13-a03*a12,b06=a20*a31-a21*a30,b07=a20*a32-a22*a30,b08=a20*a33-a23*a30,b09=a21*a32-a22*a31,b10=a21*a33-a23*a31,b11=a22*a33-a23*a32,det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;return det?(det=1/det,out[0]=(a11*b11-a12*b10+a13*b09)*det,out[1]=(a12*b08-a10*b11-a13*b07)*det,out[2]=(a10*b10-a11*b08+a13*b06)*det,out[3]=(a02*b10-a01*b11-a03*b09)*det,out[4]=(a00*b11-a02*b08+a03*b07)*det,out[5]=(a01*b08-a00*b10-a03*b06)*det,out[6]=(a31*b05-a32*b04+a33*b03)*det,out[7]=(a32*b02-a30*b05-a33*b01)*det,out[8]=(a30*b04-a31*b02+a33*b00)*det,this):null}});module.exports=Matrix3},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Vector3=__webpack_require__(85),Matrix3=__webpack_require__(338),siNext=new Int8Array([1,2,0]),tmp=new Float32Array([0,0,0]),xUnitVec3=new Vector3(1,0,0),yUnitVec3=new Vector3(0,1,0),tmpvec=new Vector3,tmpMat3=new Matrix3,Quaternion=new Class({initialize:function(x,y,z,w){"object"==typeof x?(this.x=x.x||0,this.y=x.y||0,this.z=x.z||0,this.w=x.w||0):(this.x=x||0,this.y=y||0,this.z=z||0,this.w=w||0)},copy:function(src){return this.x=src.x,this.y=src.y,this.z=src.z,this.w=src.w,this},set:function(x,y,z,w){return"object"==typeof x?(this.x=x.x||0,this.y=x.y||0,this.z=x.z||0,this.w=x.w||0):(this.x=x||0,this.y=y||0,this.z=z||0,this.w=w||0),this},add:function(v){return this.x+=v.x,this.y+=v.y,this.z+=v.z,this.w+=v.w,this},subtract:function(v){return this.x-=v.x,this.y-=v.y,this.z-=v.z,this.w-=v.w,this},scale:function(scale){return this.x*=scale,this.y*=scale,this.z*=scale,this.w*=scale,this},length:function(){var x=this.x,y=this.y,z=this.z,w=this.w;return Math.sqrt(x*x+y*y+z*z+w*w)},lengthSq:function(){var x=this.x,y=this.y,z=this.z,w=this.w;return x*x+y*y+z*z+w*w},normalize:function(){var x=this.x,y=this.y,z=this.z,w=this.w,len=x*x+y*y+z*z+w*w;return len>0&&(len=1/Math.sqrt(len),this.x=x*len,this.y=y*len,this.z=z*len,this.w=w*len),this},dot:function(v){return this.x*v.x+this.y*v.y+this.z*v.z+this.w*v.w},lerp:function(v,t){void 0===t&&(t=0);var ax=this.x,ay=this.y,az=this.z,aw=this.w;return this.x=ax+t*(v.x-ax),this.y=ay+t*(v.y-ay),this.z=az+t*(v.z-az),this.w=aw+t*(v.w-aw),this},rotationTo:function(a,b){var dot=a.x*b.x+a.y*b.y+a.z*b.z;return dot<-.999999?(tmpvec.copy(xUnitVec3).cross(a).length()<1e-6&&tmpvec.copy(yUnitVec3).cross(a),tmpvec.normalize(),this.setAxisAngle(tmpvec,Math.PI)):dot>.999999?(this.x=0,this.y=0,this.z=0,this.w=1,this):(tmpvec.copy(a).cross(b),this.x=tmpvec.x,this.y=tmpvec.y,this.z=tmpvec.z,this.w=1+dot,this.normalize())},setAxes:function(view,right,up){var m=tmpMat3.val;return m[0]=right.x,m[3]=right.y,m[6]=right.z,m[1]=up.x,m[4]=up.y,m[7]=up.z,m[2]=-view.x,m[5]=-view.y,m[8]=-view.z,this.fromMat3(tmpMat3).normalize()},identity:function(){return this.x=0,this.y=0,this.z=0,this.w=1,this},setAxisAngle:function(axis,rad){rad*=.5;var s=Math.sin(rad);return this.x=s*axis.x,this.y=s*axis.y,this.z=s*axis.z,this.w=Math.cos(rad),this},multiply:function(b){var ax=this.x,ay=this.y,az=this.z,aw=this.w,bx=b.x,by=b.y,bz=b.z,bw=b.w;return this.x=ax*bw+aw*bx+ay*bz-az*by,this.y=ay*bw+aw*by+az*bx-ax*bz,this.z=az*bw+aw*bz+ax*by-ay*bx,this.w=aw*bw-ax*bx-ay*by-az*bz,this},slerp:function(b,t){var ax=this.x,ay=this.y,az=this.z,aw=this.w,bx=b.x,by=b.y,bz=b.z,bw=b.w,cosom=ax*bx+ay*by+az*bz+aw*bw;cosom<0&&(cosom=-cosom,bx=-bx,by=-by,bz=-bz,bw=-bw);var scale0=1-t,scale1=t;if(1-cosom>1e-6){var omega=Math.acos(cosom),sinom=Math.sin(omega);scale0=Math.sin((1-t)*omega)/sinom,scale1=Math.sin(t*omega)/sinom}return this.x=scale0*ax+scale1*bx,this.y=scale0*ay+scale1*by,this.z=scale0*az+scale1*bz,this.w=scale0*aw+scale1*bw,this},invert:function(){var a0=this.x,a1=this.y,a2=this.z,a3=this.w,dot=a0*a0+a1*a1+a2*a2+a3*a3,invDot=dot?1/dot:0;return this.x=-a0*invDot,this.y=-a1*invDot,this.z=-a2*invDot,this.w=a3*invDot,this},conjugate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},rotateX:function(rad){rad*=.5;var ax=this.x,ay=this.y,az=this.z,aw=this.w,bx=Math.sin(rad),bw=Math.cos(rad);return this.x=ax*bw+aw*bx,this.y=ay*bw+az*bx,this.z=az*bw-ay*bx,this.w=aw*bw-ax*bx,this},rotateY:function(rad){rad*=.5;var ax=this.x,ay=this.y,az=this.z,aw=this.w,by=Math.sin(rad),bw=Math.cos(rad);return this.x=ax*bw-az*by,this.y=ay*bw+aw*by,this.z=az*bw+ax*by,this.w=aw*bw-ay*by,this},rotateZ:function(rad){rad*=.5;var ax=this.x,ay=this.y,az=this.z,aw=this.w,bz=Math.sin(rad),bw=Math.cos(rad);return this.x=ax*bw+ay*bz,this.y=ay*bw-ax*bz,this.z=az*bw+aw*bz,this.w=aw*bw-az*bz,this},calculateW:function(){var x=this.x,y=this.y,z=this.z;return this.w=-Math.sqrt(1-x*x-y*y-z*z),this},fromMat3:function(mat){var fRoot,m=mat.val,fTrace=m[0]+m[4]+m[8];if(fTrace>0)fRoot=Math.sqrt(fTrace+1),this.w=.5*fRoot,fRoot=.5/fRoot,this.x=(m[7]-m[5])*fRoot,this.y=(m[2]-m[6])*fRoot,this.z=(m[3]-m[1])*fRoot;else{var i=0;m[4]>m[0]&&(i=1),m[8]>m[3*i+i]&&(i=2);var j=siNext[i],k=siNext[j];fRoot=Math.sqrt(m[3*i+i]-m[3*j+j]-m[3*k+k]+1),tmp[i]=.5*fRoot,fRoot=.5/fRoot,tmp[j]=(m[3*j+i]+m[3*i+j])*fRoot,tmp[k]=(m[3*k+i]+m[3*i+k])*fRoot,this.x=tmp[0],this.y=tmp[1],this.z=tmp[2],this.w=(m[3*k+j]-m[3*j+k])*fRoot}return this}});module.exports=Quaternion},function(module,exports,__webpack_require__){var Vector3=__webpack_require__(85),Matrix4=__webpack_require__(187),Quaternion=__webpack_require__(339),tmpMat4=new Matrix4,tmpQuat=new Quaternion,tmpVec3=new Vector3;module.exports=function(vec,axis,radians){return tmpQuat.setAxisAngle(axis,radians),tmpMat4.fromRotationTranslation(tmpQuat,tmpVec3.set(0,0,0)),vec.transformMat4(tmpMat4)}},function(module,exports,__webpack_require__){var CanvasInterpolation=__webpack_require__(342),CanvasPool=__webpack_require__(28),CONST=__webpack_require__(35),Features=__webpack_require__(181);module.exports=function(game){var config=game.config;if((config.customEnvironment||config.canvas)&&config.renderType===CONST.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!config.customEnvironment&&!config.canvas&&config.renderType!==CONST.HEADLESS)if(config.renderType===CONST.CANVAS||config.renderType!==CONST.CANVAS&&!Features.webGL){if(!Features.canvas)throw new Error("Cannot create Canvas or WebGL context, aborting.");config.renderType=CONST.CANVAS}else config.renderType=CONST.WEBGL;config.antialias||CanvasPool.disableSmoothing();var CanvasRenderer,WebGLRenderer,baseSize=game.scale.baseSize,width=baseSize.width,height=baseSize.height;(config.canvas?(game.canvas=config.canvas,game.canvas.width=width,game.canvas.height=height):game.canvas=CanvasPool.create(game,width,height,config.renderType),config.canvasStyle&&(game.canvas.style=config.canvasStyle),config.antialias||CanvasInterpolation.setCrisp(game.canvas),config.renderType!==CONST.HEADLESS)&&(CanvasRenderer=__webpack_require__(189),WebGLRenderer=__webpack_require__(190),config.renderType===CONST.WEBGL?game.renderer=new WebGLRenderer(game):(game.renderer=new CanvasRenderer(game),game.context=game.renderer.gameContext))}},function(module,exports){module.exports={setCrisp:function(canvas){return["optimizeSpeed","crisp-edges","-moz-crisp-edges","-webkit-optimize-contrast","optimize-contrast","pixelated"].forEach((function(type){canvas.style["image-rendering"]=type})),canvas.style.msInterpolationMode="nearest-neighbor",canvas},setBicubic:function(canvas){return canvas.style["image-rendering"]="auto",canvas.style.msInterpolationMode="bicubic",canvas}}},function(module,exports,__webpack_require__){var CanvasPool=__webpack_require__(28),Color=__webpack_require__(37),GetFastValue=__webpack_require__(1);module.exports=function(canvas,config){var callback=GetFastValue(config,"callback"),type=GetFastValue(config,"type","image/png"),encoderOptions=GetFastValue(config,"encoder",.92),x=Math.abs(Math.round(GetFastValue(config,"x",0))),y=Math.abs(Math.round(GetFastValue(config,"y",0))),width=GetFastValue(config,"width",canvas.width),height=GetFastValue(config,"height",canvas.height);if(GetFastValue(config,"getPixel",!1)){var data=canvas.getContext("2d").getImageData(x,y,1,1).data;callback.call(null,new Color(data[0],data[1],data[2],data[3]/255))}else if(0!==x||0!==y||width!==canvas.width||height!==canvas.height){var copyCanvas=CanvasPool.createWebGL(this,width,height);copyCanvas.getContext("2d").drawImage(canvas,x,y,width,height,0,0,width,height);var image1=new Image;image1.onerror=function(){callback.call(null),CanvasPool.remove(copyCanvas)},image1.onload=function(){callback.call(null,image1),CanvasPool.remove(copyCanvas)},image1.src=copyCanvas.toDataURL(type,encoderOptions)}else{var image2=new Image;image2.onerror=function(){callback.call(null)},image2.onload=function(){callback.call(null,image2)},image2.src=canvas.toDataURL(type,encoderOptions)}}},function(module,exports,__webpack_require__){var modes=__webpack_require__(43),CanvasFeatures=__webpack_require__(319);module.exports=function(){var output=[],useNew=CanvasFeatures.supportNewBlendModes,so="source-over";return output[modes.NORMAL]=so,output[modes.ADD]="lighter",output[modes.MULTIPLY]=useNew?"multiply":so,output[modes.SCREEN]=useNew?"screen":so,output[modes.OVERLAY]=useNew?"overlay":so,output[modes.DARKEN]=useNew?"darken":so,output[modes.LIGHTEN]=useNew?"lighten":so,output[modes.COLOR_DODGE]=useNew?"color-dodge":so,output[modes.COLOR_BURN]=useNew?"color-burn":so,output[modes.HARD_LIGHT]=useNew?"hard-light":so,output[modes.SOFT_LIGHT]=useNew?"soft-light":so,output[modes.DIFFERENCE]=useNew?"difference":so,output[modes.EXCLUSION]=useNew?"exclusion":so,output[modes.HUE]=useNew?"hue":so,output[modes.SATURATION]=useNew?"saturation":so,output[modes.COLOR]=useNew?"color":so,output[modes.LUMINOSITY]=useNew?"luminosity":so,output[modes.ERASE]="destination-out",output[modes.SOURCE_IN]="source-in",output[modes.SOURCE_OUT]="source-out",output[modes.SOURCE_ATOP]="source-atop",output[modes.DESTINATION_OVER]="destination-over",output[modes.DESTINATION_IN]="destination-in",output[modes.DESTINATION_OUT]="destination-out",output[modes.DESTINATION_ATOP]="destination-atop",output[modes.LIGHTER]="lighter",output[modes.COPY]="copy",output[modes.XOR]="xor",output}},function(module,exports,__webpack_require__){var CanvasPool=__webpack_require__(28),Color=__webpack_require__(37),GetFastValue=__webpack_require__(1);module.exports=function(sourceCanvas,config){var gl=sourceCanvas.getContext("experimental-webgl"),callback=GetFastValue(config,"callback"),type=GetFastValue(config,"type","image/png"),encoderOptions=GetFastValue(config,"encoder",.92),x=GetFastValue(config,"x",0),y=GetFastValue(config,"y",0),getPixel=GetFastValue(config,"getPixel",!1),isFramebuffer=GetFastValue(config,"isFramebuffer",!1),bufferWidth=isFramebuffer?GetFastValue(config,"bufferWidth",1):gl.drawingBufferWidth,bufferHeight=isFramebuffer?GetFastValue(config,"bufferHeight",1):gl.drawingBufferHeight;if(getPixel){var pixel=new Uint8Array(4),destY=isFramebuffer?y:bufferHeight-y;gl.readPixels(x,destY,1,1,gl.RGBA,gl.UNSIGNED_BYTE,pixel),callback.call(null,new Color(pixel[0],pixel[1],pixel[2],pixel[3]/255))}else{var width=GetFastValue(config,"width",bufferWidth),height=GetFastValue(config,"height",bufferHeight),total=width*height*4,pixels=new Uint8Array(total);gl.readPixels(x,bufferHeight-y-height,width,height,gl.RGBA,gl.UNSIGNED_BYTE,pixels);for(var canvas=CanvasPool.createWebGL(this,width,height),ctx=canvas.getContext("2d"),imageData=ctx.getImageData(0,0,width,height),data=imageData.data,py=0;py<height;py++)for(var px=0;px<width;px++){var sourceIndex=4*((height-py)*width+px),destIndex=isFramebuffer?total-4*(py*width+(width-px)):4*(py*width+px);data[destIndex+0]=pixels[sourceIndex+0],data[destIndex+1]=pixels[sourceIndex+1],data[destIndex+2]=pixels[sourceIndex+2],data[destIndex+3]=pixels[sourceIndex+3]}ctx.putImageData(imageData,0,0);var image=new Image;image.onerror=function(){callback.call(null),CanvasPool.remove(canvas)},image.onload=function(){callback.call(null,image),CanvasPool.remove(canvas)},image.src=canvas.toDataURL(type,encoderOptions)}}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),ShaderSourceFS=__webpack_require__(775),ShaderSourceVS=__webpack_require__(776),WebGLPipeline=__webpack_require__(191),BitmapMaskPipeline=new Class({Extends:WebGLPipeline,initialize:function(config){WebGLPipeline.call(this,{game:config.game,renderer:config.renderer,gl:config.renderer.gl,topology:config.topology?config.topology:config.renderer.gl.TRIANGLES,vertShader:config.vertShader?config.vertShader:ShaderSourceVS,fragShader:config.fragShader?config.fragShader:ShaderSourceFS,vertexCapacity:config.vertexCapacity?config.vertexCapacity:3,vertexSize:config.vertexSize?config.vertexSize:2*Float32Array.BYTES_PER_ELEMENT,vertices:new Float32Array([-1,1,-1,-7,7,1]).buffer,attributes:[{name:"inPosition",size:2,type:config.renderer.gl.FLOAT,normalized:!1,offset:0}]}),this.vertexViewF32=new Float32Array(this.vertexData),this.maxQuads=1,this.resolutionDirty=!0},onBind:function(){WebGLPipeline.prototype.onBind.call(this);var renderer=this.renderer,program=this.program;return this.resolutionDirty&&(renderer.setFloat2(program,"uResolution",this.width,this.height),renderer.setInt1(program,"uMainSampler",0),renderer.setInt1(program,"uMaskSampler",1),this.resolutionDirty=!1),this},resize:function(width,height,resolution){return WebGLPipeline.prototype.resize.call(this,width,height,resolution),this.resolutionDirty=!0,this},beginMask:function(mask,maskedObject,camera){var renderer=this.renderer,gl=this.gl;mask.bitmapMask&&gl&&(renderer.flush(),mask.prevFramebuffer=renderer.currentFramebuffer,renderer.setFramebuffer(mask.mainFramebuffer),gl.disable(gl.STENCIL_TEST),gl.clearColor(0,0,0,0),gl.clear(gl.COLOR_BUFFER_BIT),renderer.currentCameraMask.mask!==mask&&(renderer.currentMask.mask=mask,renderer.currentMask.camera=camera))},endMask:function(mask,camera){var gl=this.gl,renderer=this.renderer,bitmapMask=mask.bitmapMask;if(bitmapMask&&gl){renderer.flush(),renderer.setFramebuffer(mask.maskFramebuffer),gl.clearColor(0,0,0,0),gl.clear(gl.COLOR_BUFFER_BIT),renderer.setBlendMode(0,!0),bitmapMask.renderWebGL(renderer,bitmapMask,0,camera),renderer.flush(),renderer.setFramebuffer(mask.prevFramebuffer);var prev=renderer.getCurrentStencilMask();prev?(gl.enable(gl.STENCIL_TEST),prev.mask.applyStencil(renderer,prev.camera,!0)):renderer.currentMask.mask=null,renderer.setPipeline(this),gl.activeTexture(gl.TEXTURE1),gl.bindTexture(gl.TEXTURE_2D,mask.maskTexture),gl.activeTexture(gl.TEXTURE0),gl.bindTexture(gl.TEXTURE_2D,mask.mainTexture),gl.uniform1i(gl.getUniformLocation(this.program,"uInvertMaskAlpha"),mask.invertAlpha),gl.drawArrays(this.topology,0,3)}}});module.exports=BitmapMaskPipeline},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),ShaderSourceFS=__webpack_require__(777),TextureTintPipeline=__webpack_require__(192),LIGHT_COUNT=10,ForwardDiffuseLightPipeline=new Class({Extends:TextureTintPipeline,initialize:function(config){LIGHT_COUNT=config.maxLights,config.fragShader=ShaderSourceFS.replace("%LIGHT_COUNT%",LIGHT_COUNT.toString()),TextureTintPipeline.call(this,config),this.defaultNormalMap,this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1])},boot:function(){this.defaultNormalMap=this.game.textures.getFrame("__DEFAULT")},onBind:function(gameObject){TextureTintPipeline.prototype.onBind.call(this);var renderer=this.renderer,program=this.program;return this.mvpUpdate(),renderer.setInt1(program,"uNormSampler",1),renderer.setFloat2(program,"uResolution",this.width,this.height),gameObject&&this.setNormalMap(gameObject),this},onRender:function(scene,camera){this.active=!1;var lightManager=scene.sys.lights;if(!lightManager||lightManager.lights.length<=0||!lightManager.active)return this;var lights=lightManager.cull(camera),lightCount=Math.min(lights.length,LIGHT_COUNT);if(0===lightCount)return this;this.active=!0;var index,renderer=this.renderer,program=this.program,cameraMatrix=camera.matrix,point={x:0,y:0},height=renderer.height;for(index=0;index<LIGHT_COUNT;++index)renderer.setFloat1(program,"uLights["+index+"].radius",0);for(renderer.setFloat4(program,"uCamera",camera.x,camera.y,camera.rotation,camera.zoom),renderer.setFloat3(program,"uAmbientLightColor",lightManager.ambientColor.r,lightManager.ambientColor.g,lightManager.ambientColor.b),index=0;index<lightCount;++index){var light=lights[index],lightName="uLights["+index+"].";cameraMatrix.transformPoint(light.x,light.y,point),renderer.setFloat2(program,lightName+"position",point.x-camera.scrollX*light.scrollFactorX*camera.zoom,height-(point.y-camera.scrollY*light.scrollFactorY*camera.zoom)),renderer.setFloat3(program,lightName+"color",light.r,light.g,light.b),renderer.setFloat1(program,lightName+"intensity",light.intensity),renderer.setFloat1(program,lightName+"radius",light.radius)}return this},batchTexture:function(gameObject,texture,textureWidth,textureHeight,srcX,srcY,srcWidth,srcHeight,scaleX,scaleY,rotation,flipX,flipY,scrollFactorX,scrollFactorY,displayOriginX,displayOriginY,frameX,frameY,frameWidth,frameHeight,tintTL,tintTR,tintBL,tintBR,tintEffect,uOffset,vOffset,camera,parentTransformMatrix){var normalTexture;if(this.active)if(this.renderer.setPipeline(this),gameObject.displayTexture?normalTexture=gameObject.displayTexture.dataSource[gameObject.displayFrame.sourceIndex]:gameObject.texture?normalTexture=gameObject.texture.dataSource[gameObject.frame.sourceIndex]:gameObject.tileset&&(normalTexture=gameObject.tileset.image.dataSource[0]),normalTexture){this.setTexture2D(normalTexture.glTexture,1),this.setNormalMapRotation(rotation);var camMatrix=this._tempMatrix1,spriteMatrix=this._tempMatrix2,calcMatrix=this._tempMatrix3,u0=frameX/textureWidth+uOffset,v0=frameY/textureHeight+vOffset,u1=(frameX+frameWidth)/textureWidth+uOffset,v1=(frameY+frameHeight)/textureHeight+vOffset,width=srcWidth,height=srcHeight,x=-displayOriginX,y=-displayOriginY;if(gameObject.isCropped){var crop=gameObject._crop;width=crop.width,height=crop.height,srcWidth=crop.width,srcHeight=crop.height;var ox=frameX=crop.x,oy=frameY=crop.y;flipX&&(ox=frameWidth-crop.x-crop.width),flipY&&!texture.isRenderTexture&&(oy=frameHeight-crop.y-crop.height),u0=ox/textureWidth+uOffset,v0=oy/textureHeight+vOffset,u1=(ox+crop.width)/textureWidth+uOffset,v1=(oy+crop.height)/textureHeight+vOffset,x=-displayOriginX+frameX,y=-displayOriginY+frameY}flipX&&(width*=-1,x+=srcWidth),(flipY^=texture.isRenderTexture?1:0)&&(height*=-1,y+=srcHeight);var xw=x+width,yh=y+height;spriteMatrix.applyITRS(srcX,srcY,rotation,scaleX,scaleY),camMatrix.copyFrom(camera.matrix),parentTransformMatrix?(camMatrix.multiplyWithOffset(parentTransformMatrix,-camera.scrollX*scrollFactorX,-camera.scrollY*scrollFactorY),spriteMatrix.e=srcX,spriteMatrix.f=srcY,camMatrix.multiply(spriteMatrix,calcMatrix)):(spriteMatrix.e-=camera.scrollX*scrollFactorX,spriteMatrix.f-=camera.scrollY*scrollFactorY,camMatrix.multiply(spriteMatrix,calcMatrix));var tx0=calcMatrix.getX(x,y),ty0=calcMatrix.getY(x,y),tx1=calcMatrix.getX(x,yh),ty1=calcMatrix.getY(x,yh),tx2=calcMatrix.getX(xw,yh),ty2=calcMatrix.getY(xw,yh),tx3=calcMatrix.getX(xw,y),ty3=calcMatrix.getY(xw,y);camera.roundPixels&&(tx0=Math.round(tx0),ty0=Math.round(ty0),tx1=Math.round(tx1),ty1=Math.round(ty1),tx2=Math.round(tx2),ty2=Math.round(ty2),tx3=Math.round(tx3),ty3=Math.round(ty3)),this.setTexture2D(texture,0),this.batchQuad(tx0,ty0,tx1,ty1,tx2,ty2,tx3,ty3,u0,v0,u1,v1,tintTL,tintTR,tintBL,tintBR,tintEffect,texture,0)}else console.warn("Normal map missing or invalid")},setNormalMap:function(gameObject){var normalTexture;this.active&&gameObject&&(gameObject.texture&&(normalTexture=gameObject.texture.dataSource[gameObject.frame.sourceIndex]),normalTexture||(normalTexture=this.defaultNormalMap),this.setTexture2D(normalTexture.glTexture,1),this.renderer.setPipeline(gameObject.defaultPipeline))},setNormalMapRotation:function(rotation){var inverseRotationMatrix=this.inverseRotationMatrix;if(rotation){var rot=-rotation,c=Math.cos(rot),s=Math.sin(rot);inverseRotationMatrix[1]=s,inverseRotationMatrix[3]=-s,inverseRotationMatrix[0]=inverseRotationMatrix[4]=c}else inverseRotationMatrix[0]=inverseRotationMatrix[4]=1,inverseRotationMatrix[1]=inverseRotationMatrix[3]=0;this.renderer.setMatrix3(this.program,"uInverseRotationMatrix",!1,inverseRotationMatrix)},batchSprite:function(sprite,camera,parentTransformMatrix){if(this.active){var normalTexture=sprite.texture.dataSource[sprite.frame.sourceIndex];normalTexture&&(this.renderer.setPipeline(this),this.setTexture2D(normalTexture.glTexture,1),this.setNormalMapRotation(sprite.rotation),TextureTintPipeline.prototype.batchSprite.call(this,sprite,camera,parentTransformMatrix))}}});ForwardDiffuseLightPipeline.LIGHT_COUNT=LIGHT_COUNT,module.exports=ForwardDiffuseLightPipeline},function(module,exports){var ModelViewProjection={modelMatrixDirty:!1,viewMatrixDirty:!1,projectionMatrixDirty:!1,modelMatrix:null,viewMatrix:null,projectionMatrix:null,mvpInit:function(){return this.modelMatrixDirty=!0,this.viewMatrixDirty=!0,this.projectionMatrixDirty=!0,this.modelMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},mvpUpdate:function(){var program=this.program;return this.modelMatrixDirty&&(this.renderer.setMatrix4(program,"uModelMatrix",!1,this.modelMatrix),this.modelMatrixDirty=!1),this.viewMatrixDirty&&(this.renderer.setMatrix4(program,"uViewMatrix",!1,this.viewMatrix),this.viewMatrixDirty=!1),this.projectionMatrixDirty&&(this.renderer.setMatrix4(program,"uProjectionMatrix",!1,this.projectionMatrix),this.projectionMatrixDirty=!1),this},modelIdentity:function(){var modelMatrix=this.modelMatrix;return modelMatrix[0]=1,modelMatrix[1]=0,modelMatrix[2]=0,modelMatrix[3]=0,modelMatrix[4]=0,modelMatrix[5]=1,modelMatrix[6]=0,modelMatrix[7]=0,modelMatrix[8]=0,modelMatrix[9]=0,modelMatrix[10]=1,modelMatrix[11]=0,modelMatrix[12]=0,modelMatrix[13]=0,modelMatrix[14]=0,modelMatrix[15]=1,this.modelMatrixDirty=!0,this},modelScale:function(x,y,z){var modelMatrix=this.modelMatrix;return modelMatrix[0]=modelMatrix[0]*x,modelMatrix[1]=modelMatrix[1]*x,modelMatrix[2]=modelMatrix[2]*x,modelMatrix[3]=modelMatrix[3]*x,modelMatrix[4]=modelMatrix[4]*y,modelMatrix[5]=modelMatrix[5]*y,modelMatrix[6]=modelMatrix[6]*y,modelMatrix[7]=modelMatrix[7]*y,modelMatrix[8]=modelMatrix[8]*z,modelMatrix[9]=modelMatrix[9]*z,modelMatrix[10]=modelMatrix[10]*z,modelMatrix[11]=modelMatrix[11]*z,this.modelMatrixDirty=!0,this},modelTranslate:function(x,y,z){var modelMatrix=this.modelMatrix;return modelMatrix[12]=modelMatrix[0]*x+modelMatrix[4]*y+modelMatrix[8]*z+modelMatrix[12],modelMatrix[13]=modelMatrix[1]*x+modelMatrix[5]*y+modelMatrix[9]*z+modelMatrix[13],modelMatrix[14]=modelMatrix[2]*x+modelMatrix[6]*y+modelMatrix[10]*z+modelMatrix[14],modelMatrix[15]=modelMatrix[3]*x+modelMatrix[7]*y+modelMatrix[11]*z+modelMatrix[15],this.modelMatrixDirty=!0,this},modelRotateX:function(radians){var modelMatrix=this.modelMatrix,s=Math.sin(radians),c=Math.cos(radians),a10=modelMatrix[4],a11=modelMatrix[5],a12=modelMatrix[6],a13=modelMatrix[7],a20=modelMatrix[8],a21=modelMatrix[9],a22=modelMatrix[10],a23=modelMatrix[11];return modelMatrix[4]=a10*c+a20*s,modelMatrix[5]=a11*c+a21*s,modelMatrix[6]=a12*c+a22*s,modelMatrix[7]=a13*c+a23*s,modelMatrix[8]=a20*c-a10*s,modelMatrix[9]=a21*c-a11*s,modelMatrix[10]=a22*c-a12*s,modelMatrix[11]=a23*c-a13*s,this.modelMatrixDirty=!0,this},modelRotateY:function(radians){var modelMatrix=this.modelMatrix,s=Math.sin(radians),c=Math.cos(radians),a00=modelMatrix[0],a01=modelMatrix[1],a02=modelMatrix[2],a03=modelMatrix[3],a20=modelMatrix[8],a21=modelMatrix[9],a22=modelMatrix[10],a23=modelMatrix[11];return modelMatrix[0]=a00*c-a20*s,modelMatrix[1]=a01*c-a21*s,modelMatrix[2]=a02*c-a22*s,modelMatrix[3]=a03*c-a23*s,modelMatrix[8]=a00*s+a20*c,modelMatrix[9]=a01*s+a21*c,modelMatrix[10]=a02*s+a22*c,modelMatrix[11]=a03*s+a23*c,this.modelMatrixDirty=!0,this},modelRotateZ:function(radians){var modelMatrix=this.modelMatrix,s=Math.sin(radians),c=Math.cos(radians),a00=modelMatrix[0],a01=modelMatrix[1],a02=modelMatrix[2],a03=modelMatrix[3],a10=modelMatrix[4],a11=modelMatrix[5],a12=modelMatrix[6],a13=modelMatrix[7];return modelMatrix[0]=a00*c+a10*s,modelMatrix[1]=a01*c+a11*s,modelMatrix[2]=a02*c+a12*s,modelMatrix[3]=a03*c+a13*s,modelMatrix[4]=a10*c-a00*s,modelMatrix[5]=a11*c-a01*s,modelMatrix[6]=a12*c-a02*s,modelMatrix[7]=a13*c-a03*s,this.modelMatrixDirty=!0,this},viewIdentity:function(){var viewMatrix=this.viewMatrix;return viewMatrix[0]=1,viewMatrix[1]=0,viewMatrix[2]=0,viewMatrix[3]=0,viewMatrix[4]=0,viewMatrix[5]=1,viewMatrix[6]=0,viewMatrix[7]=0,viewMatrix[8]=0,viewMatrix[9]=0,viewMatrix[10]=1,viewMatrix[11]=0,viewMatrix[12]=0,viewMatrix[13]=0,viewMatrix[14]=0,viewMatrix[15]=1,this.viewMatrixDirty=!0,this},viewScale:function(x,y,z){var viewMatrix=this.viewMatrix;return viewMatrix[0]=viewMatrix[0]*x,viewMatrix[1]=viewMatrix[1]*x,viewMatrix[2]=viewMatrix[2]*x,viewMatrix[3]=viewMatrix[3]*x,viewMatrix[4]=viewMatrix[4]*y,viewMatrix[5]=viewMatrix[5]*y,viewMatrix[6]=viewMatrix[6]*y,viewMatrix[7]=viewMatrix[7]*y,viewMatrix[8]=viewMatrix[8]*z,viewMatrix[9]=viewMatrix[9]*z,viewMatrix[10]=viewMatrix[10]*z,viewMatrix[11]=viewMatrix[11]*z,this.viewMatrixDirty=!0,this},viewTranslate:function(x,y,z){var viewMatrix=this.viewMatrix;return viewMatrix[12]=viewMatrix[0]*x+viewMatrix[4]*y+viewMatrix[8]*z+viewMatrix[12],viewMatrix[13]=viewMatrix[1]*x+viewMatrix[5]*y+viewMatrix[9]*z+viewMatrix[13],viewMatrix[14]=viewMatrix[2]*x+viewMatrix[6]*y+viewMatrix[10]*z+viewMatrix[14],viewMatrix[15]=viewMatrix[3]*x+viewMatrix[7]*y+viewMatrix[11]*z+viewMatrix[15],this.viewMatrixDirty=!0,this},viewRotateX:function(radians){var viewMatrix=this.viewMatrix,s=Math.sin(radians),c=Math.cos(radians),a10=viewMatrix[4],a11=viewMatrix[5],a12=viewMatrix[6],a13=viewMatrix[7],a20=viewMatrix[8],a21=viewMatrix[9],a22=viewMatrix[10],a23=viewMatrix[11];return viewMatrix[4]=a10*c+a20*s,viewMatrix[5]=a11*c+a21*s,viewMatrix[6]=a12*c+a22*s,viewMatrix[7]=a13*c+a23*s,viewMatrix[8]=a20*c-a10*s,viewMatrix[9]=a21*c-a11*s,viewMatrix[10]=a22*c-a12*s,viewMatrix[11]=a23*c-a13*s,this.viewMatrixDirty=!0,this},viewRotateY:function(radians){var viewMatrix=this.viewMatrix,s=Math.sin(radians),c=Math.cos(radians),a00=viewMatrix[0],a01=viewMatrix[1],a02=viewMatrix[2],a03=viewMatrix[3],a20=viewMatrix[8],a21=viewMatrix[9],a22=viewMatrix[10],a23=viewMatrix[11];return viewMatrix[0]=a00*c-a20*s,viewMatrix[1]=a01*c-a21*s,viewMatrix[2]=a02*c-a22*s,viewMatrix[3]=a03*c-a23*s,viewMatrix[8]=a00*s+a20*c,viewMatrix[9]=a01*s+a21*c,viewMatrix[10]=a02*s+a22*c,viewMatrix[11]=a03*s+a23*c,this.viewMatrixDirty=!0,this},viewRotateZ:function(radians){var viewMatrix=this.viewMatrix,s=Math.sin(radians),c=Math.cos(radians),a00=viewMatrix[0],a01=viewMatrix[1],a02=viewMatrix[2],a03=viewMatrix[3],a10=viewMatrix[4],a11=viewMatrix[5],a12=viewMatrix[6],a13=viewMatrix[7];return viewMatrix[0]=a00*c+a10*s,viewMatrix[1]=a01*c+a11*s,viewMatrix[2]=a02*c+a12*s,viewMatrix[3]=a03*c+a13*s,viewMatrix[4]=a10*c-a00*s,viewMatrix[5]=a11*c-a01*s,viewMatrix[6]=a12*c-a02*s,viewMatrix[7]=a13*c-a03*s,this.viewMatrixDirty=!0,this},viewLoad2D:function(matrix2D){var vm=this.viewMatrix;return vm[0]=matrix2D[0],vm[1]=matrix2D[1],vm[2]=0,vm[3]=0,vm[4]=matrix2D[2],vm[5]=matrix2D[3],vm[6]=0,vm[7]=0,vm[8]=matrix2D[4],vm[9]=matrix2D[5],vm[10]=1,vm[11]=0,vm[12]=0,vm[13]=0,vm[14]=0,vm[15]=1,this.viewMatrixDirty=!0,this},viewLoad:function(matrix){var vm=this.viewMatrix;return vm[0]=matrix[0],vm[1]=matrix[1],vm[2]=matrix[2],vm[3]=matrix[3],vm[4]=matrix[4],vm[5]=matrix[5],vm[6]=matrix[6],vm[7]=matrix[7],vm[8]=matrix[8],vm[9]=matrix[9],vm[10]=matrix[10],vm[11]=matrix[11],vm[12]=matrix[12],vm[13]=matrix[13],vm[14]=matrix[14],vm[15]=matrix[15],this.viewMatrixDirty=!0,this},projIdentity:function(){var projectionMatrix=this.projectionMatrix;return projectionMatrix[0]=1,projectionMatrix[1]=0,projectionMatrix[2]=0,projectionMatrix[3]=0,projectionMatrix[4]=0,projectionMatrix[5]=1,projectionMatrix[6]=0,projectionMatrix[7]=0,projectionMatrix[8]=0,projectionMatrix[9]=0,projectionMatrix[10]=1,projectionMatrix[11]=0,projectionMatrix[12]=0,projectionMatrix[13]=0,projectionMatrix[14]=0,projectionMatrix[15]=1,this.projectionMatrixDirty=!0,this},projOrtho:function(left,right,bottom,top,near,far){var projectionMatrix=this.projectionMatrix,leftRight=1/(left-right),bottomTop=1/(bottom-top),nearFar=1/(near-far);return projectionMatrix[0]=-2*leftRight,projectionMatrix[1]=0,projectionMatrix[2]=0,projectionMatrix[3]=0,projectionMatrix[4]=0,projectionMatrix[5]=-2*bottomTop,projectionMatrix[6]=0,projectionMatrix[7]=0,projectionMatrix[8]=0,projectionMatrix[9]=0,projectionMatrix[10]=2*nearFar,projectionMatrix[11]=0,projectionMatrix[12]=(left+right)*leftRight,projectionMatrix[13]=(top+bottom)*bottomTop,projectionMatrix[14]=(far+near)*nearFar,projectionMatrix[15]=1,this.projectionMatrixDirty=!0,this},projPersp:function(fovY,aspectRatio,near,far){var projectionMatrix=this.projectionMatrix,fov=1/Math.tan(fovY/2),nearFar=1/(near-far);return projectionMatrix[0]=fov/aspectRatio,projectionMatrix[1]=0,projectionMatrix[2]=0,projectionMatrix[3]=0,projectionMatrix[4]=0,projectionMatrix[5]=fov,projectionMatrix[6]=0,projectionMatrix[7]=0,projectionMatrix[8]=0,projectionMatrix[9]=0,projectionMatrix[10]=(far+near)*nearFar,projectionMatrix[11]=-1,projectionMatrix[12]=0,projectionMatrix[13]=0,projectionMatrix[14]=2*far*near*nearFar,projectionMatrix[15]=0,this.projectionMatrixDirty=!0,this}};module.exports=ModelViewProjection},function(module,exports,__webpack_require__){var CONST=__webpack_require__(35);module.exports=function(game){var config=game.config;if(!config.hideBanner){var renderType="WebGL";config.renderType===CONST.CANVAS?renderType="Canvas":config.renderType===CONST.HEADLESS&&(renderType="Headless");var audioType,audioConfig=config.audio,deviceAudio=game.device.audio;if(audioType=!deviceAudio.webAudio||audioConfig&&audioConfig.disableWebAudio?audioConfig&&audioConfig.noAudio||!deviceAudio.webAudio&&!deviceAudio.audioData?"No Audio":"HTML5 Audio":"Web Audio",game.device.browser.ie)window.console&&console.log("Phaser v"+CONST.VERSION+" / https://phaser.io");else{var lastColor,c="",args=[c];if(Array.isArray(config.bannerBackgroundColor))config.bannerBackgroundColor.forEach((function(color){c=c.concat("%c "),args.push("background: "+color),lastColor=color})),args[args.length-1]="color: "+config.bannerTextColor+"; background: "+lastColor;else c=c.concat("%c "),args.push("color: "+config.bannerTextColor+"; background: "+config.bannerBackgroundColor);args.push("background: #fff"),config.gameTitle&&(c=c.concat(config.gameTitle),config.gameVersion&&(c=c.concat(" v"+config.gameVersion)),config.hidePhaser||(c=c.concat(" / ")));config.hidePhaser||(c=c.concat("Phaser v"+CONST.VERSION+"-FB ("+renderType+" | "+audioType+")")),c=c.concat(" %c "+config.gameURL),args[0]=c,console.log.apply(console,args)}}}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),GetValue=__webpack_require__(5),NOOP=__webpack_require__(2),RequestAnimationFrame=__webpack_require__(351),TimeStep=new Class({initialize:function(game,config){this.game=game,this.raf=new RequestAnimationFrame,this.started=!1,this.running=!1,this.minFps=GetValue(config,"min",5),this.targetFps=GetValue(config,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=NOOP,this.forceSetTimeOut=GetValue(config,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=GetValue(config,"deltaHistory",10),this.panicMax=GetValue(config,"panicMax",120),this.rawDelta=0,this.now=0},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var now=window.performance.now();this.time=now,this.lastTime=now,this.nextFpsUpdate=now+1e3,this.framesThisSecond=0;for(var i=0;i<this.deltaSmoothingMax;i++)this.deltaHistory[i]=Math.min(this._target,this.deltaHistory[i]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(callback){if(this.started)return this;this.started=!0,this.running=!0;for(var i=0;i<this.deltaSmoothingMax;i++)this.deltaHistory[i]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=callback,this.raf.start(this.step.bind(this),this.forceSetTimeOut)},step:function(){var time=window.performance.now();this.now=time;var before=time-this.lastTime;before<0&&(before=0),this.rawDelta=before;var idx=this.deltaIndex,history=this.deltaHistory,max=this.deltaSmoothingMax,dt=before;(this._coolDown>0||!this.inFocus)&&(this._coolDown--,dt=Math.min(dt,this._target)),dt>this._min&&(dt=history[idx],dt=Math.min(dt,this._min)),history[idx]=dt,this.deltaIndex++,this.deltaIndex>max&&(this.deltaIndex=0);for(var avg=0,i=0;i<max;i++)avg+=history[i];avg/=max,this.delta=avg,this.time+=this.rawDelta,time>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=time+1e3,this.framesThisSecond=0),this.framesThisSecond++;var interpolation=avg/this._target;this.callback(time,avg,interpolation),this.lastTime=time,this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(seamless){this.running?this.sleep():seamless&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step()},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=NOOP,this.raf=null,this.game=null}});module.exports=TimeStep},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),NOOP=__webpack_require__(2),RequestAnimationFrame=new Class({initialize:function(){this.isRunning=!1,this.callback=NOOP,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0;var _this=this;this.step=function step(){var timestamp=window.performance.now();_this.lastTime=_this.tick,_this.tick=timestamp,_this.callback(timestamp),_this.timeOutID=window.requestAnimationFrame(step)},this.stepTimeout=function stepTimeout(){var d=Date.now(),delay=Math.max(16+_this.lastTime-d,0);_this.lastTime=_this.tick,_this.tick=d,_this.callback(d),_this.timeOutID=window.setTimeout(stepTimeout,delay)}},start:function(callback,forceSetTimeOut){this.isRunning||(this.callback=callback,this.isSetTimeOut=forceSetTimeOut,this.isRunning=!0,this.timeOutID=forceSetTimeOut?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=NOOP}});module.exports=RequestAnimationFrame},function(module,exports,__webpack_require__){var Events=__webpack_require__(23);module.exports=function(game){var hiddenVar,eventEmitter=game.events;if(void 0!==document.hidden)hiddenVar="visibilitychange";else{["webkit","moz","ms"].forEach((function(prefix){void 0!==document[prefix+"Hidden"]&&(document.hidden=function(){return document[prefix+"Hidden"]},hiddenVar=prefix+"visibilitychange")}))}hiddenVar&&document.addEventListener(hiddenVar,(function(event){document.hidden||"pause"===event.type?eventEmitter.emit(Events.HIDDEN):eventEmitter.emit(Events.VISIBLE)}),!1),window.onblur=function(){eventEmitter.emit(Events.BLUR)},window.onfocus=function(){eventEmitter.emit(Events.FOCUS)},window.focus&&game.config.autoFocus&&window.focus()}},function(module,exports,__webpack_require__){var Arne16=__webpack_require__(354),CanvasPool=__webpack_require__(28),GetValue=__webpack_require__(5);module.exports=function(config){var data=GetValue(config,"data",[]),canvas=GetValue(config,"canvas",null),palette=GetValue(config,"palette",Arne16),pixelWidth=GetValue(config,"pixelWidth",1),pixelHeight=GetValue(config,"pixelHeight",pixelWidth),resizeCanvas=GetValue(config,"resizeCanvas",!0),clearCanvas=GetValue(config,"clearCanvas",!0),preRender=GetValue(config,"preRender",null),postRender=GetValue(config,"postRender",null),width=Math.floor(Math.abs(data[0].length*pixelWidth)),height=Math.floor(Math.abs(data.length*pixelHeight));canvas||(canvas=CanvasPool.create2D(this,width,height),resizeCanvas=!1,clearCanvas=!1),resizeCanvas&&(canvas.width=width,canvas.height=height);var ctx=canvas.getContext("2d");clearCanvas&&ctx.clearRect(0,0,width,height),preRender&&preRender(canvas,ctx);for(var y=0;y<data.length;y++)for(var row=data[y],x=0;x<row.length;x++){var d=row[x];"."!==d&&" "!==d&&(ctx.fillStyle=palette[d],ctx.fillRect(x*pixelWidth,y*pixelHeight,pixelWidth,pixelHeight))}return postRender&&postRender(canvas,ctx),canvas}},function(module,exports){module.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),CubicBezier=__webpack_require__(327),Curve=__webpack_require__(87),Vector2=__webpack_require__(3),CubicBezierCurve=new Class({Extends:Curve,initialize:function(p0,p1,p2,p3){Curve.call(this,"CubicBezierCurve"),Array.isArray(p0)&&(p3=new Vector2(p0[6],p0[7]),p2=new Vector2(p0[4],p0[5]),p1=new Vector2(p0[2],p0[3]),p0=new Vector2(p0[0],p0[1])),this.p0=p0,this.p1=p1,this.p2=p2,this.p3=p3},getStartPoint:function(out){return void 0===out&&(out=new Vector2),out.copy(this.p0)},getResolution:function(divisions){return divisions},getPoint:function(t,out){void 0===out&&(out=new Vector2);var p0=this.p0,p1=this.p1,p2=this.p2,p3=this.p3;return out.set(CubicBezier(t,p0.x,p1.x,p2.x,p3.x),CubicBezier(t,p0.y,p1.y,p2.y,p3.y))},draw:function(graphics,pointsTotal){void 0===pointsTotal&&(pointsTotal=32);var points=this.getPoints(pointsTotal);graphics.beginPath(),graphics.moveTo(this.p0.x,this.p0.y);for(var i=1;i<points.length;i++)graphics.lineTo(points[i].x,points[i].y);return graphics.strokePath(),graphics},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});CubicBezierCurve.fromJSON=function(data){var points=data.points,p0=new Vector2(points[0],points[1]),p1=new Vector2(points[2],points[3]),p2=new Vector2(points[4],points[5]),p3=new Vector2(points[6],points[7]);return new CubicBezierCurve(p0,p1,p2,p3)},module.exports=CubicBezierCurve},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Curve=__webpack_require__(87),DegToRad=__webpack_require__(41),GetValue=__webpack_require__(5),RadToDeg=__webpack_require__(186),Vector2=__webpack_require__(3),EllipseCurve=new Class({Extends:Curve,initialize:function(x,y,xRadius,yRadius,startAngle,endAngle,clockwise,rotation){if("object"==typeof x){var config=x;x=GetValue(config,"x",0),y=GetValue(config,"y",0),xRadius=GetValue(config,"xRadius",0),yRadius=GetValue(config,"yRadius",xRadius),startAngle=GetValue(config,"startAngle",0),endAngle=GetValue(config,"endAngle",360),clockwise=GetValue(config,"clockwise",!1),rotation=GetValue(config,"rotation",0)}else void 0===yRadius&&(yRadius=xRadius),void 0===startAngle&&(startAngle=0),void 0===endAngle&&(endAngle=360),void 0===clockwise&&(clockwise=!1),void 0===rotation&&(rotation=0);Curve.call(this,"EllipseCurve"),this.p0=new Vector2(x,y),this._xRadius=xRadius,this._yRadius=yRadius,this._startAngle=DegToRad(startAngle),this._endAngle=DegToRad(endAngle),this._clockwise=clockwise,this._rotation=DegToRad(rotation)},getStartPoint:function(out){return void 0===out&&(out=new Vector2),this.getPoint(0,out)},getResolution:function(divisions){return 2*divisions},getPoint:function(t,out){void 0===out&&(out=new Vector2);for(var twoPi=2*Math.PI,deltaAngle=this._endAngle-this._startAngle,samePoints=Math.abs(deltaAngle)<Number.EPSILON;deltaAngle<0;)deltaAngle+=twoPi;for(;deltaAngle>twoPi;)deltaAngle-=twoPi;deltaAngle<Number.EPSILON&&(deltaAngle=samePoints?0:twoPi),this._clockwise&&!samePoints&&(deltaAngle===twoPi?deltaAngle=-twoPi:deltaAngle-=twoPi);var angle=this._startAngle+t*deltaAngle,x=this.p0.x+this._xRadius*Math.cos(angle),y=this.p0.y+this._yRadius*Math.sin(angle);if(0!==this._rotation){var cos=Math.cos(this._rotation),sin=Math.sin(this._rotation),tx=x-this.p0.x,ty=y-this.p0.y;x=tx*cos-ty*sin+this.p0.x,y=tx*sin+ty*cos+this.p0.y}return out.set(x,y)},setXRadius:function(value){return this.xRadius=value,this},setYRadius:function(value){return this.yRadius=value,this},setWidth:function(value){return this.xRadius=2*value,this},setHeight:function(value){return this.yRadius=2*value,this},setStartAngle:function(value){return this.startAngle=value,this},setEndAngle:function(value){return this.endAngle=value,this},setClockwise:function(value){return this.clockwise=value,this},setRotation:function(value){return this.rotation=value,this},x:{get:function(){return this.p0.x},set:function(value){this.p0.x=value}},y:{get:function(){return this.p0.y},set:function(value){this.p0.y=value}},xRadius:{get:function(){return this._xRadius},set:function(value){this._xRadius=value}},yRadius:{get:function(){return this._yRadius},set:function(value){this._yRadius=value}},startAngle:{get:function(){return RadToDeg(this._startAngle)},set:function(value){this._startAngle=DegToRad(value)}},endAngle:{get:function(){return RadToDeg(this._endAngle)},set:function(value){this._endAngle=DegToRad(value)}},clockwise:{get:function(){return this._clockwise},set:function(value){this._clockwise=value}},angle:{get:function(){return RadToDeg(this._rotation)},set:function(value){this._rotation=DegToRad(value)}},rotation:{get:function(){return this._rotation},set:function(value){this._rotation=value}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:RadToDeg(this._startAngle),endAngle:RadToDeg(this._endAngle),clockwise:this._clockwise,rotation:RadToDeg(this._rotation)}}});EllipseCurve.fromJSON=function(data){return new EllipseCurve(data)},module.exports=EllipseCurve},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Curve=__webpack_require__(87),FromPoints=__webpack_require__(193),Rectangle=__webpack_require__(11),Vector2=__webpack_require__(3),tmpVec2=new Vector2,LineCurve=new Class({Extends:Curve,initialize:function(p0,p1){Curve.call(this,"LineCurve"),Array.isArray(p0)&&(p1=new Vector2(p0[2],p0[3]),p0=new Vector2(p0[0],p0[1])),this.p0=p0,this.p1=p1},getBounds:function(out){return void 0===out&&(out=new Rectangle),FromPoints([this.p0,this.p1],out)},getStartPoint:function(out){return void 0===out&&(out=new Vector2),out.copy(this.p0)},getResolution:function(divisions){return void 0===divisions&&(divisions=1),divisions},getPoint:function(t,out){return void 0===out&&(out=new Vector2),1===t?out.copy(this.p1):(out.copy(this.p1).subtract(this.p0).scale(t).add(this.p0),out)},getPointAt:function(u,out){return this.getPoint(u,out)},getTangent:function(){return tmpVec2.copy(this.p1).subtract(this.p0).normalize()},draw:function(graphics){return graphics.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),graphics},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});LineCurve.fromJSON=function(data){var points=data.points,p0=new Vector2(points[0],points[1]),p1=new Vector2(points[2],points[3]);return new LineCurve(p0,p1)},module.exports=LineCurve},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Curve=__webpack_require__(87),QuadraticBezierInterpolation=__webpack_require__(328),Vector2=__webpack_require__(3),QuadraticBezier=new Class({Extends:Curve,initialize:function(p0,p1,p2){Curve.call(this,"QuadraticBezier"),Array.isArray(p0)&&(p2=new Vector2(p0[4],p0[5]),p1=new Vector2(p0[2],p0[3]),p0=new Vector2(p0[0],p0[1])),this.p0=p0,this.p1=p1,this.p2=p2},getStartPoint:function(out){return void 0===out&&(out=new Vector2),out.copy(this.p0)},getResolution:function(divisions){return divisions},getPoint:function(t,out){void 0===out&&(out=new Vector2);var p0=this.p0,p1=this.p1,p2=this.p2;return out.set(QuadraticBezierInterpolation(t,p0.x,p1.x,p2.x),QuadraticBezierInterpolation(t,p0.y,p1.y,p2.y))},draw:function(graphics,pointsTotal){void 0===pointsTotal&&(pointsTotal=32);var points=this.getPoints(pointsTotal);graphics.beginPath(),graphics.moveTo(this.p0.x,this.p0.y);for(var i=1;i<points.length;i++)graphics.lineTo(points[i].x,points[i].y);return graphics.strokePath(),graphics},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});QuadraticBezier.fromJSON=function(data){var points=data.points,p0=new Vector2(points[0],points[1]),p1=new Vector2(points[2],points[3]),p2=new Vector2(points[4],points[5]);return new QuadraticBezier(p0,p1,p2)},module.exports=QuadraticBezier},function(module,exports,__webpack_require__){var CatmullRom=__webpack_require__(184),Class=__webpack_require__(0),Curve=__webpack_require__(87),Vector2=__webpack_require__(3),SplineCurve=new Class({Extends:Curve,initialize:function(points){void 0===points&&(points=[]),Curve.call(this,"SplineCurve"),this.points=[],this.addPoints(points)},addPoints:function(points){for(var i=0;i<points.length;i++){var p=new Vector2;"number"==typeof points[i]?(p.x=points[i],p.y=points[i+1],i++):Array.isArray(points[i])?(p.x=points[i][0],p.y=points[i][1]):(p.x=points[i].x,p.y=points[i].y),this.points.push(p)}return this},addPoint:function(x,y){var vec=new Vector2(x,y);return this.points.push(vec),vec},getStartPoint:function(out){return void 0===out&&(out=new Vector2),out.copy(this.points[0])},getResolution:function(divisions){return divisions*this.points.length},getPoint:function(t,out){void 0===out&&(out=new Vector2);var points=this.points,point=(points.length-1)*t,intPoint=Math.floor(point),weight=point-intPoint,p0=points[0===intPoint?intPoint:intPoint-1],p1=points[intPoint],p2=points[intPoint>points.length-2?points.length-1:intPoint+1],p3=points[intPoint>points.length-3?points.length-1:intPoint+2];return out.set(CatmullRom(weight,p0.x,p1.x,p2.x,p3.x),CatmullRom(weight,p0.y,p1.y,p2.y,p3.y))},toJSON:function(){for(var points=[],i=0;i<this.points.length;i++)points.push(this.points[i].x),points.push(this.points[i].y);return{type:this.type,points:points}}});SplineCurve.fromJSON=function(data){return new SplineCurve(data.points)},module.exports=SplineCurve},function(module,exports,__webpack_require__){var BaseShader=new(__webpack_require__(0))({initialize:function(key,fragmentSrc,vertexSrc,uniforms){fragmentSrc&&""!==fragmentSrc||(fragmentSrc=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join("\n")),vertexSrc&&""!==vertexSrc||(vertexSrc=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","void main () {","gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","}"].join("\n")),void 0===uniforms&&(uniforms=null),this.key=key,this.fragmentSrc=fragmentSrc,this.vertexSrc=vertexSrc,this.uniforms=uniforms}});module.exports=BaseShader},function(module,exports,__webpack_require__){var Color=__webpack_require__(37);Color.ColorToRGBA=__webpack_require__(813),Color.ComponentToHex=__webpack_require__(362),Color.GetColor=__webpack_require__(177),Color.GetColor32=__webpack_require__(298),Color.HexStringToColor=__webpack_require__(297),Color.HSLToColor=__webpack_require__(814),Color.HSVColorWheel=__webpack_require__(815),Color.HSVToRGB=__webpack_require__(178),Color.HueToComponent=__webpack_require__(363),Color.IntegerToColor=__webpack_require__(300),Color.IntegerToRGB=__webpack_require__(301),Color.Interpolate=__webpack_require__(816),Color.ObjectToColor=__webpack_require__(302),Color.RandomRGB=__webpack_require__(817),Color.RGBStringToColor=__webpack_require__(303),Color.RGBToHSV=__webpack_require__(299),Color.RGBToString=__webpack_require__(818),Color.ValueToColor=__webpack_require__(176),module.exports=Color},function(module,exports){module.exports=function(color){var hex=color.toString(16);return 1===hex.length?"0"+hex:hex}},function(module,exports){module.exports=function(p,q,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?p+6*(q-p)*t:t<.5?q:t<2/3?p+(q-p)*(2/3-t)*6:p}},function(module,exports,__webpack_require__){var OS=__webpack_require__(127);module.exports=function(callback){if("complete"!==document.readyState&&"interactive"!==document.readyState){var check=function(){document.removeEventListener("deviceready",check,!0),document.removeEventListener("DOMContentLoaded",check,!0),window.removeEventListener("load",check,!0),callback()};document.body?OS.cordova?document.addEventListener("deviceready",check,!1):(document.addEventListener("DOMContentLoaded",check,!0),window.addEventListener("load",check,!0)):window.setTimeout(check,20)}else callback()}},function(module,exports,__webpack_require__){var CONST=__webpack_require__(194);module.exports=function(width,height){var screen=window.screen,orientation=!!screen&&(screen.orientation||screen.mozOrientation||screen.msOrientation);if(orientation&&"string"==typeof orientation.type)return orientation.type;if("string"==typeof orientation)return orientation;if(screen)return screen.height>screen.width?CONST.PORTRAIT:CONST.LANDSCAPE;if("number"==typeof window.orientation)return 0===window.orientation||180===window.orientation?CONST.PORTRAIT:CONST.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return CONST.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return CONST.LANDSCAPE}return height>width?CONST.PORTRAIT:CONST.LANDSCAPE}},function(module,exports){module.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(module,exports){module.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(module,exports){module.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(module,exports){module.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},function(module,exports){module.exports=function(element){var target;return""!==element&&("string"==typeof element?target=document.getElementById(element):element&&1===element.nodeType&&(target=element)),target||(target=document.body),target}},function(module,exports){module.exports=function(data){var xml="";try{if(window.DOMParser)xml=(new DOMParser).parseFromString(data,"text/xml");else(xml=new ActiveXObject("Microsoft.XMLDOM")).loadXML(data)}catch(e){xml=null}return xml&&xml.documentElement&&!xml.getElementsByTagName("parsererror").length?xml:null}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),CONST=__webpack_require__(196),EventEmitter=__webpack_require__(9),Events=__webpack_require__(56),GameEvents=__webpack_require__(23),Keyboard=__webpack_require__(373),Mouse=__webpack_require__(374),Pointer=__webpack_require__(375),Touch=__webpack_require__(376),TransformMatrix=__webpack_require__(36),TransformXY=__webpack_require__(337),InputManager=new Class({initialize:function(game,config){this.game=game,this.scaleManager,this.canvas,this.config=config,this.enabled=!0,this.events=new EventEmitter,this.isOver=!0,this.defaultCursor="",this.keyboard=config.inputKeyboard?new Keyboard(this):null,this.mouse=config.inputMouse?new Mouse(this):null,this.touch=config.inputTouch?new Touch(this):null,this.pointers=[],this.pointersTotal=config.inputActivePointers,config.inputTouch&&1===this.pointersTotal&&(this.pointersTotal=2);for(var i=0;i<=this.pointersTotal;i++){var pointer=new Pointer(this,i);pointer.smoothFactor=config.inputSmoothFactor,this.pointers.push(pointer)}this.mousePointer=config.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new TransformMatrix,this._tempMatrix2=new TransformMatrix,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],game.events.once(GameEvents.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(Events.MANAGER_BOOT),this.game.events.on(GameEvents.PRE_RENDER,this.preRender,this),this.game.events.once(GameEvents.DESTROY,this.destroy,this)},setCanvasOver:function(event){this.isOver=!0,this.events.emit(Events.GAME_OVER,event)},setCanvasOut:function(event){this.isOver=!1,this.events.emit(Events.GAME_OUT,event)},preRender:function(){var time=this.game.loop.now,delta=this.game.loop.delta,scenes=this.game.scene.getScenes(!0,!0);this.time=time,this.events.emit(Events.MANAGER_UPDATE);for(var i=0;i<scenes.length;i++){var scene=scenes[i];if(scene.sys.input&&scene.sys.input.updatePoll(time,delta)&&this.globalTopOnly)return}},setDefaultCursor:function(cursor){this.defaultCursor=cursor,this.canvas.style.cursor!==cursor&&(this.canvas.style.cursor=cursor)},setCursor:function(interactiveObject){interactiveObject.cursor&&(this.canvas.style.cursor=interactiveObject.cursor)},resetCursor:function(interactiveObject){interactiveObject.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(quantity){void 0===quantity&&(quantity=1);var output=[];this.pointersTotal+quantity>10&&(quantity=10-this.pointersTotal);for(var i=0;i<quantity;i++){var id=this.pointers.length,pointer=new Pointer(this,id);pointer.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(pointer),this.pointersTotal++,output.push(pointer)}return output},updateInputPlugins:function(type,pointers){var scenes=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var i=0;i<scenes.length;i++){var scene=scenes[i];if(scene.sys.input)if(scene.sys.input.update(type,pointers)&&this.globalTopOnly||this._tempSkip)return}},onTouchStart:function(event){for(var pointers=this.pointers,changed=[],c=0;c<event.changedTouches.length;c++)for(var changedTouch=event.changedTouches[c],i=1;i<this.pointersTotal;i++){var pointer=pointers[i];if(!pointer.active){pointer.touchstart(changedTouch,event),this.activePointer=pointer,changed.push(pointer);break}}this.updateInputPlugins(CONST.TOUCH_START,changed)},onTouchMove:function(event){for(var pointers=this.pointers,changed=[],c=0;c<event.changedTouches.length;c++)for(var changedTouch=event.changedTouches[c],i=1;i<this.pointersTotal;i++){var pointer=pointers[i];if(pointer.active&&pointer.identifier===changedTouch.identifier){pointer.touchmove(changedTouch,event),this.activePointer=pointer,changed.push(pointer);break}}this.updateInputPlugins(CONST.TOUCH_MOVE,changed)},onTouchEnd:function(event){for(var pointers=this.pointers,changed=[],c=0;c<event.changedTouches.length;c++)for(var changedTouch=event.changedTouches[c],i=1;i<this.pointersTotal;i++){var pointer=pointers[i];if(pointer.active&&pointer.identifier===changedTouch.identifier){pointer.touchend(changedTouch,event),changed.push(pointer);break}}this.updateInputPlugins(CONST.TOUCH_END,changed)},onTouchCancel:function(event){for(var pointers=this.pointers,changed=[],c=0;c<event.changedTouches.length;c++)for(var changedTouch=event.changedTouches[c],i=1;i<this.pointersTotal;i++){var pointer=pointers[i];if(pointer.active&&pointer.identifier===changedTouch.identifier){pointer.touchcancel(changedTouch,event),changed.push(pointer);break}}this.updateInputPlugins(CONST.TOUCH_CANCEL,changed)},onMouseDown:function(event){this.mousePointer.down(event),this.mousePointer.updateMotion(),this.updateInputPlugins(CONST.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(event){this.mousePointer.move(event),this.mousePointer.updateMotion(),this.updateInputPlugins(CONST.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(event){this.mousePointer.up(event),this.mousePointer.updateMotion(),this.updateInputPlugins(CONST.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(event){this.mousePointer.wheel(event),this.updateInputPlugins(CONST.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(event){var isLocked=this.mouse.locked;this.mousePointer.locked=isLocked,this.events.emit(Events.POINTERLOCK_CHANGE,event,isLocked)},inputCandidate:function(gameObject,camera){var input=gameObject.input;if(!input||!input.enabled||!gameObject.willRender(camera))return!1;var visible=!0,parent=gameObject.parentContainer;if(parent)do{if(!parent.willRender(camera)){visible=!1;break}parent=parent.parentContainer}while(parent);return visible},hitTest:function(pointer,gameObjects,camera,output){void 0===output&&(output=this._tempHitTest);var tempPoint=this._tempPoint,csx=camera.scrollX,csy=camera.scrollY;output.length=0;var x=pointer.x,y=pointer.y;1!==camera.resolution&&(x+=camera._x,y+=camera._y),camera.getWorldPoint(x,y,tempPoint),pointer.worldX=tempPoint.x,pointer.worldY=tempPoint.y;for(var point={x:0,y:0},matrix=this._tempMatrix,parentMatrix=this._tempMatrix2,i=0;i<gameObjects.length;i++){var gameObject=gameObjects[i];if(this.inputCandidate(gameObject,camera)){var px=tempPoint.x+csx*gameObject.scrollFactorX-csx,py=tempPoint.y+csy*gameObject.scrollFactorY-csy;gameObject.parentContainer?(gameObject.getWorldTransformMatrix(matrix,parentMatrix),matrix.applyInverse(px,py,point)):TransformXY(px,py,gameObject.x,gameObject.y,gameObject.rotation,gameObject.scaleX,gameObject.scaleY,point),this.pointWithinHitArea(gameObject,point.x,point.y)&&output.push(gameObject)}}return output},pointWithinHitArea:function(gameObject,x,y){x+=gameObject.displayOriginX,y+=gameObject.displayOriginY;var input=gameObject.input;return!(!input||!input.hitAreaCallback(input.hitArea,x,y,gameObject))&&(input.localX=x,input.localY=y,!0)},pointWithinInteractiveObject:function(object,x,y){return!!object.hitArea&&(x+=object.gameObject.displayOriginX,y+=object.gameObject.displayOriginY,object.localX=x,object.localY=y,object.hitAreaCallback(object.hitArea,x,y,object))},transformPointer:function(pointer,pageX,pageY,wasMove){var p0=pointer.position,p1=pointer.prevPosition;p1.x=p0.x,p1.y=p0.y;var x=this.scaleManager.transformX(pageX),y=this.scaleManager.transformY(pageY),a=pointer.smoothFactor;wasMove&&0!==a?(p0.x=x*a+p1.x*(1-a),p0.y=y*a+p1.y*(1-a)):(p0.x=x,p0.y=y)},destroy:function(){this.events.removeAllListeners(),this.game.events.off(GameEvents.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var i=0;i<this.pointers.length;i++)this.pointers[i].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});module.exports=InputManager},function(module,exports,__webpack_require__){var ArrayRemove=__webpack_require__(133),Class=__webpack_require__(0),GameEvents=__webpack_require__(23),InputEvents=__webpack_require__(56),KeyCodes=__webpack_require__(134),NOOP=__webpack_require__(0),KeyboardManager=new Class({initialize:function(inputManager){this.manager=inputManager,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=NOOP,this.onKeyUp=NOOP,inputManager.events.once(InputEvents.MANAGER_BOOT,this.boot,this)},boot:function(){var config=this.manager.config;this.enabled=config.inputKeyboard,this.target=config.inputKeyboardEventTarget,this.addCapture(config.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(GameEvents.POST_STEP,this.postUpdate,this)},startListeners:function(){var _this=this;this.onKeyDown=function(event){if(!event.defaultPrevented&&_this.enabled&&_this.manager){_this.queue.push(event),_this.manager.useQueue||_this.manager.events.emit(InputEvents.MANAGER_PROCESS);var modified=event.altKey||event.ctrlKey||event.shiftKey||event.metaKey;_this.preventDefault&&!modified&&_this.captures.indexOf(event.keyCode)>-1&&event.preventDefault()}},this.onKeyUp=function(event){if(!event.defaultPrevented&&_this.enabled&&_this.manager){_this.queue.push(event),_this.manager.useQueue||_this.manager.events.emit(InputEvents.MANAGER_PROCESS);var modified=event.altKey||event.ctrlKey||event.shiftKey||event.metaKey;_this.preventDefault&&!modified&&_this.captures.indexOf(event.keyCode)>-1&&event.preventDefault()}};var target=this.target;target&&(target.addEventListener("keydown",this.onKeyDown,!1),target.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var target=this.target;target.removeEventListener("keydown",this.onKeyDown,!1),target.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(keycode){"string"==typeof keycode&&(keycode=keycode.split(",")),Array.isArray(keycode)||(keycode=[keycode]);for(var captures=this.captures,i=0;i<keycode.length;i++){var code=keycode[i];"string"==typeof code&&(code=KeyCodes[code.trim().toUpperCase()]),-1===captures.indexOf(code)&&captures.push(code)}this.preventDefault=captures.length>0},removeCapture:function(keycode){"string"==typeof keycode&&(keycode=keycode.split(",")),Array.isArray(keycode)||(keycode=[keycode]);for(var captures=this.captures,i=0;i<keycode.length;i++){var code=keycode[i];"string"==typeof code&&(code=KeyCodes[code.toUpperCase()]),ArrayRemove(captures,code)}this.preventDefault=captures.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(GameEvents.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});module.exports=KeyboardManager},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Features=__webpack_require__(181),InputEvents=__webpack_require__(56),NOOP=__webpack_require__(0),MouseManager=new Class({initialize:function(inputManager){this.manager=inputManager,this.capture=!0,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=NOOP,this.onMouseDown=NOOP,this.onMouseUp=NOOP,this.onMouseDownWindow=NOOP,this.onMouseUpWindow=NOOP,this.onMouseOver=NOOP,this.onMouseOut=NOOP,this.onMouseWheel=NOOP,this.pointerLockChange=NOOP,inputManager.events.once(InputEvents.MANAGER_BOOT,this.boot,this)},boot:function(){var config=this.manager.config;this.enabled=config.inputMouse,this.target=config.inputMouseEventTarget,this.capture=config.inputMouseCapture,this.target||(this.target=this.manager.game.canvas),config.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",(function(event){return event.preventDefault(),!1})),this},requestPointerLock:function(){if(Features.pointerLock){var element=this.target;element.requestPointerLock=element.requestPointerLock||element.mozRequestPointerLock||element.webkitRequestPointerLock,element.requestPointerLock()}},releasePointerLock:function(){Features.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var _this=this,canvas=this.manager.canvas,autoFocus=window&&window.focus&&this.manager.game.config.autoFocus;this.onMouseMove=function(event){!event.defaultPrevented&&_this.enabled&&_this.manager&&_this.manager.enabled&&(_this.manager.onMouseMove(event),_this.capture&&event.preventDefault())},this.onMouseDown=function(event){autoFocus&&window.focus(),!event.defaultPrevented&&_this.enabled&&_this.manager&&_this.manager.enabled&&(_this.manager.onMouseDown(event),_this.capture&&event.target===canvas&&event.preventDefault())},this.onMouseDownWindow=function(event){!event.defaultPrevented&&_this.enabled&&_this.manager&&_this.manager.enabled&&event.target!==canvas&&_this.manager.onMouseDown(event)},this.onMouseUp=function(event){!event.defaultPrevented&&_this.enabled&&_this.manager&&_this.manager.enabled&&(_this.manager.onMouseUp(event),_this.capture&&event.target===canvas&&event.preventDefault())},this.onMouseUpWindow=function(event){!event.defaultPrevented&&_this.enabled&&_this.manager&&_this.manager.enabled&&event.target!==canvas&&_this.manager.onMouseUp(event)},this.onMouseOver=function(event){!event.defaultPrevented&&_this.enabled&&_this.manager&&_this.manager.enabled&&_this.manager.setCanvasOver(event)},this.onMouseOut=function(event){!event.defaultPrevented&&_this.enabled&&_this.manager&&_this.manager.enabled&&_this.manager.setCanvasOut(event)},this.onMouseWheel=function(event){!event.defaultPrevented&&_this.enabled&&_this.manager&&_this.manager.enabled&&_this.manager.onMouseWheel(event)};var target=this.target;if(target){var passive={passive:!0},nonPassive={passive:!1};target.addEventListener("mousemove",this.onMouseMove,this.capture?nonPassive:passive),target.addEventListener("mousedown",this.onMouseDown,this.capture?nonPassive:passive),target.addEventListener("mouseup",this.onMouseUp,this.capture?nonPassive:passive),target.addEventListener("mouseover",this.onMouseOver,this.capture?nonPassive:passive),target.addEventListener("mouseout",this.onMouseOut,this.capture?nonPassive:passive),target.addEventListener("wheel",this.onMouseWheel,this.capture?nonPassive:passive),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("mousedown",this.onMouseDownWindow,nonPassive),window.addEventListener("mouseup",this.onMouseUpWindow,nonPassive)),Features.pointerLock&&(this.pointerLockChange=function(event){var element=_this.target;_this.locked=document.pointerLockElement===element||document.mozPointerLockElement===element||document.webkitPointerLockElement===element,_this.manager.onPointerLockChange(event)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var target=this.target;target.removeEventListener("mousemove",this.onMouseMove),target.removeEventListener("mousedown",this.onMouseDown),target.removeEventListener("mouseup",this.onMouseUp),target.removeEventListener("mouseover",this.onMouseOver),target.removeEventListener("mouseout",this.onMouseOut),window&&(window.removeEventListener("mousedown",this.onMouseDownWindow),window.removeEventListener("mouseup",this.onMouseUpWindow)),Features.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});module.exports=MouseManager},function(module,exports,__webpack_require__){var Angle=__webpack_require__(320),Class=__webpack_require__(0),Distance=__webpack_require__(65),FuzzyEqual=__webpack_require__(183),SmoothStepInterpolation=__webpack_require__(329),Vector2=__webpack_require__(3),Pointer=new Class({initialize:function(manager,id){this.manager=manager,this.id=id,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new Vector2,this.prevPosition=new Vector2,this.midPoint=new Vector2(-1,-1),this.velocity=new Vector2,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=0===id,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(camera){var x=this.x,y=this.y;1!==camera.resolution&&(x+=camera._x,y+=camera._y);var temp=camera.getWorldPoint(x,y);return this.worldX=temp.x,this.worldY=temp.y,this},positionToCamera:function(camera,output){return camera.getWorldPoint(this.x,this.y,output)},updateMotion:function(){var cx=this.position.x,cy=this.position.y,mx=this.midPoint.x,my=this.midPoint.y;if(cx!==mx||cy!==my){var vx=SmoothStepInterpolation(this.motionFactor,mx,cx),vy=SmoothStepInterpolation(this.motionFactor,my,cy);FuzzyEqual(vx,cx,.1)&&(vx=cx),FuzzyEqual(vy,cy,.1)&&(vy=cy),this.midPoint.set(vx,vy);var dx=cx-vx,dy=cy-vy;this.velocity.set(dx,dy),this.angle=Angle(vx,vy,cx,cy),this.distance=Math.sqrt(dx*dx+dy*dy)}},up:function(event){"buttons"in event&&(this.buttons=event.buttons),this.event=event,this.button=event.button,this.upElement=event.target,this.manager.transformPointer(this,event.pageX,event.pageY,!1),0===event.button&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=event.timeStamp),this.isDown=!1,this.wasTouch=!1},down:function(event){"buttons"in event&&(this.buttons=event.buttons),this.event=event,this.button=event.button,this.downElement=event.target,this.manager.transformPointer(this,event.pageX,event.pageY,!1),0===event.button&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=event.timeStamp),this.isDown=!0,this.wasTouch=!1},move:function(event){"buttons"in event&&(this.buttons=event.buttons),this.event=event,this.manager.transformPointer(this,event.pageX,event.pageY,!0),this.locked&&(this.movementX=event.movementX||event.mozMovementX||event.webkitMovementX||0,this.movementY=event.movementY||event.mozMovementY||event.webkitMovementY||0),this.moveTime=event.timeStamp,this.wasTouch=!1},wheel:function(event){"buttons"in event&&(this.buttons=event.buttons),this.event=event,this.manager.transformPointer(this,event.pageX,event.pageY,!1),this.deltaX=event.deltaX,this.deltaY=event.deltaY,this.deltaZ=event.deltaZ,this.wasTouch=!1},touchstart:function(touch,event){touch.pointerId&&(this.pointerId=touch.pointerId),this.identifier=touch.identifier,this.target=touch.target,this.active=!0,this.buttons=1,this.event=event,this.downElement=touch.target,this.manager.transformPointer(this,touch.pageX,touch.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=event.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(touch,event){this.event=event,this.manager.transformPointer(this,touch.pageX,touch.pageY,!0),this.moveTime=event.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(touch,event){this.buttons=0,this.event=event,this.upElement=touch.target,this.manager.transformPointer(this,touch.pageX,touch.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=event.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(touch,event){this.buttons=0,this.event=event,this.upElement=touch.target,this.manager.transformPointer(this,touch.pageX,touch.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=event.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return 0===this.buttons},leftButtonDown:function(){return!!(1&this.buttons)},rightButtonDown:function(){return!!(2&this.buttons)},middleButtonDown:function(){return!!(4&this.buttons)},backButtonDown:function(){return!!(8&this.buttons)},forwardButtonDown:function(){return!!(16&this.buttons)},leftButtonReleased:function(){return 0===this.button&&!this.isDown},rightButtonReleased:function(){return 2===this.button&&!this.isDown},middleButtonReleased:function(){return 1===this.button&&!this.isDown},backButtonReleased:function(){return 3===this.button&&!this.isDown},forwardButtonReleased:function(){return 4===this.button&&!this.isDown},getDistance:function(){return this.isDown?Distance(this.downX,this.downY,this.x,this.y):Distance(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?Angle(this.downX,this.downY,this.x,this.y):Angle(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(steps,out){void 0===steps&&(steps=10),void 0===out&&(out=[]);for(var prevX=this.prevPosition.x,prevY=this.prevPosition.y,curX=this.position.x,curY=this.position.y,i=0;i<steps;i++){var t=1/steps*i;out[i]={x:SmoothStepInterpolation(t,prevX,curX),y:SmoothStepInterpolation(t,prevY,curY)}}return out},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(value){this.position.x=value}},y:{get:function(){return this.position.y},set:function(value){this.position.y=value}},time:{get:function(){return this.event?this.event.timeStamp:0}}});module.exports=Pointer},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),InputEvents=__webpack_require__(56),NOOP=__webpack_require__(2),TouchManager=new Class({initialize:function(inputManager){this.manager=inputManager,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=NOOP,this.onTouchStartWindow=NOOP,this.onTouchMove=NOOP,this.onTouchEnd=NOOP,this.onTouchEndWindow=NOOP,this.onTouchCancel=NOOP,this.onTouchCancelWindow=NOOP,this.onTouchOver=NOOP,this.onTouchOut=NOOP,inputManager.events.once(InputEvents.MANAGER_BOOT,this.boot,this)},boot:function(){var config=this.manager.config;this.enabled=config.inputTouch,this.target=config.inputTouchEventTarget,this.capture=config.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),this.enabled&&this.target&&this.startListeners()},startListeners:function(){var _this=this,canvas=this.manager.canvas,autoFocus=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(event){autoFocus&&window.focus(),!event.defaultPrevented&&_this.enabled&&_this.manager&&_this.manager.enabled&&(_this.manager.onTouchStart(event),_this.capture&&event.target===canvas&&event.preventDefault())},this.onTouchStartWindow=function(event){!event.defaultPrevented&&_this.enabled&&_this.manager&&_this.manager.enabled&&event.target!==canvas&&_this.manager.onTouchStart(event)},this.onTouchMove=function(event){!event.defaultPrevented&&_this.enabled&&_this.manager&&_this.manager.enabled&&(_this.manager.onTouchMove(event),_this.capture&&event.preventDefault())},this.onTouchEnd=function(event){!event.defaultPrevented&&_this.enabled&&_this.manager&&_this.manager.enabled&&(_this.manager.onTouchEnd(event),_this.capture&&event.target===canvas&&event.preventDefault())},this.onTouchEndWindow=function(event){!event.defaultPrevented&&_this.enabled&&_this.manager&&_this.manager.enabled&&event.target!==canvas&&_this.manager.onTouchEnd(event)},this.onTouchCancel=function(event){!event.defaultPrevented&&_this.enabled&&_this.manager&&_this.manager.enabled&&(_this.manager.onTouchCancel(event),_this.capture&&event.preventDefault())},this.onTouchCancelWindow=function(event){!event.defaultPrevented&&_this.enabled&&_this.manager&&_this.manager.enabled&&_this.manager.onTouchCancel(event)},this.onTouchOver=function(event){!event.defaultPrevented&&_this.enabled&&_this.manager&&_this.manager.enabled&&_this.manager.setCanvasOver(event)},this.onTouchOut=function(event){!event.defaultPrevented&&_this.enabled&&_this.manager&&_this.manager.enabled&&_this.manager.setCanvasOut(event)};var target=this.target;if(target){var passive={passive:!0},nonPassive={passive:!1};target.addEventListener("touchstart",this.onTouchStart,this.capture?nonPassive:passive),target.addEventListener("touchmove",this.onTouchMove,this.capture?nonPassive:passive),target.addEventListener("touchend",this.onTouchEnd,this.capture?nonPassive:passive),target.addEventListener("touchcancel",this.onTouchCancel,this.capture?nonPassive:passive),target.addEventListener("touchover",this.onTouchOver,this.capture?nonPassive:passive),target.addEventListener("touchout",this.onTouchOut,this.capture?nonPassive:passive),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,nonPassive),window.addEventListener("touchend",this.onTouchEndWindow,nonPassive),window.addEventListener("touchcancel",this.onTouchCancelWindow,nonPassive)),this.enabled=!0}},stopListeners:function(){var target=this.target;target.removeEventListener("touchstart",this.onTouchStart),target.removeEventListener("touchmove",this.onTouchMove),target.removeEventListener("touchend",this.onTouchEnd),target.removeEventListener("touchcancel",this.onTouchCancel),target.removeEventListener("touchover",this.onTouchOver),target.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});module.exports=TouchManager},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),GameEvents=__webpack_require__(23),EventEmitter=__webpack_require__(9),FileTypesManager=__webpack_require__(8),GameObjectCreator=__webpack_require__(16),GameObjectFactory=__webpack_require__(6),GetFastValue=__webpack_require__(1),PluginCache=__webpack_require__(18),Remove=__webpack_require__(133),PluginManager=new Class({Extends:EventEmitter,initialize:function(game){EventEmitter.call(this),this.game=game,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],game.isBooted?this.boot():game.events.once(GameEvents.BOOT,this.boot,this)},boot:function(){var i,entry,key,plugin,start,mapping,data,config=this.game.config,list=config.installGlobalPlugins;for(list=list.concat(this._pendingGlobal),i=0;i<list.length;i++)entry=list[i],key=GetFastValue(entry,"key",null),plugin=GetFastValue(entry,"plugin",null),start=GetFastValue(entry,"start",!1),mapping=GetFastValue(entry,"mapping",null),data=GetFastValue(entry,"data",null),key&&(plugin?this.install(key,plugin,start,mapping,data):console.warn("Missing `plugin` for key: "+key));for(list=(list=config.installScenePlugins).concat(this._pendingScene),i=0;i<list.length;i++)entry=list[i],key=GetFastValue(entry,"key",null),plugin=GetFastValue(entry,"plugin",null),mapping=GetFastValue(entry,"mapping",null),key&&(plugin?this.installScenePlugin(key,plugin,mapping):console.warn("Missing `plugin` for key: "+key));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(GameEvents.DESTROY,this.destroy,this)},addToScene:function(sys,globalPlugins,scenePlugins){var i,pluginKey,pluginList,game=this.game,scene=sys.scene,map=sys.settings.map,isBooted=sys.settings.isBooted;for(i=0;i<globalPlugins.length;i++)game[pluginKey=globalPlugins[i]]?(sys[pluginKey]=game[pluginKey],map.hasOwnProperty(pluginKey)&&(scene[map[pluginKey]]=sys[pluginKey])):"game"===pluginKey&&map.hasOwnProperty(pluginKey)&&(scene[map[pluginKey]]=game);for(var s=0;s<scenePlugins.length;s++)for(pluginList=scenePlugins[s],i=0;i<pluginList.length;i++)if(pluginKey=pluginList[i],PluginCache.hasCore(pluginKey)){var source=PluginCache.getCore(pluginKey),plugin=new source.plugin(scene,this);sys[source.mapping]=plugin,source.custom?scene[source.mapping]=plugin:map.hasOwnProperty(source.mapping)&&(scene[map[source.mapping]]=plugin),isBooted&&plugin.boot()}for(pluginList=this.plugins,i=0;i<pluginList.length;i++){var entry=pluginList[i];entry.mapping&&(scene[entry.mapping]=entry.plugin)}},getDefaultScenePlugins:function(){var list=this.game.config.defaultPlugins;return list=list.concat(this.scenePlugins)},installScenePlugin:function(key,plugin,mapping,addToScene,fromLoader){if(void 0===fromLoader&&(fromLoader=!1),"function"==typeof plugin){if(PluginCache.hasCore(key)){if(!fromLoader&&PluginCache.hasCore(key))return void console.warn("Scene Plugin key in use: "+key)}else PluginCache.register(key,plugin,mapping,!0),this.scenePlugins.push(key);if(addToScene){var instance=new plugin(addToScene,this);addToScene.sys[key]=instance,mapping&&""!==mapping&&(addToScene[mapping]=instance),instance.boot()}}else console.warn("Invalid Scene Plugin: "+key)},install:function(key,plugin,start,mapping,data){if(void 0===start&&(start=!1),void 0===mapping&&(mapping=null),void 0===data&&(data=null),"function"!=typeof plugin)return console.warn("Invalid Plugin: "+key),null;if(PluginCache.hasCustom(key))return console.warn("Plugin key in use: "+key),null;if(null!==mapping&&(start=!0),this.game.isBooted){if(PluginCache.registerCustom(key,plugin,mapping,data),start)return this.start(key)}else this._pendingGlobal.push({key:key,plugin:plugin,start:start,mapping:mapping,data:data});return null},getIndex:function(key){for(var list=this.plugins,i=0;i<list.length;i++){if(list[i].key===key)return i}return-1},getEntry:function(key){var idx=this.getIndex(key);if(-1!==idx)return this.plugins[idx]},isActive:function(key){var entry=this.getEntry(key);return entry&&entry.active},start:function(key,runAs){void 0===runAs&&(runAs=key);var entry=this.getEntry(runAs);return entry&&!entry.active?(entry.active=!0,entry.plugin.start()):entry||(entry=this.createEntry(key,runAs)),entry?entry.plugin:null},createEntry:function(key,runAs){var entry=PluginCache.getCustom(key);if(entry){var instance=new entry.plugin(this);entry={key:runAs,plugin:instance,active:!0,mapping:entry.mapping,data:entry.data},this.plugins.push(entry),instance.init(entry.data),instance.start()}return entry},stop:function(key){var entry=this.getEntry(key);return entry&&entry.active&&(entry.active=!1,entry.plugin.stop()),this},get:function(key,autoStart){void 0===autoStart&&(autoStart=!0);var entry=this.getEntry(key);if(entry)return entry.plugin;var plugin=this.getClass(key);return plugin&&autoStart?(entry=this.createEntry(key,key))?entry.plugin:null:plugin||null},getClass:function(key){return PluginCache.getCustomClass(key)},removeGlobalPlugin:function(key){var entry=this.getEntry(key);entry&&Remove(this.plugins,entry),PluginCache.removeCustom(key)},removeScenePlugin:function(key){Remove(this.scenePlugins,key),PluginCache.remove(key)},registerGameObject:function(key,factoryCallback,creatorCallback){return factoryCallback&&GameObjectFactory.register(key,factoryCallback),creatorCallback&&GameObjectCreator.register(key,creatorCallback),this},removeGameObject:function(key,removeFromFactory,removeFromCreator){return void 0===removeFromFactory&&(removeFromFactory=!0),void 0===removeFromCreator&&(removeFromCreator=!0),removeFromFactory&&GameObjectFactory.remove(key),removeFromCreator&&GameObjectCreator.remove(key),this},registerFileType:function(key,callback,addToScene){FileTypesManager.register(key,callback),addToScene&&addToScene.sys.load&&(addToScene.sys.load[key]=callback)},destroy:function(){for(var i=0;i<this.plugins.length;i++)this.plugins[i].plugin.destroy();PluginCache.destroyCustomPlugins(),this.game.noReturn&&PluginCache.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});module.exports=PluginManager},function(module,exports,__webpack_require__){var CONST=__webpack_require__(194),Class=__webpack_require__(0),EventEmitter=__webpack_require__(9),Events=__webpack_require__(104),GameEvents=__webpack_require__(23),GetInnerHeight=__webpack_require__(871),GetTarget=__webpack_require__(370),GetScreenOrientation=__webpack_require__(365),NOOP=__webpack_require__(2),Rectangle=__webpack_require__(11),Size=__webpack_require__(379),SnapFloor=__webpack_require__(105),Vector2=__webpack_require__(3),ScaleManager=new Class({Extends:EventEmitter,initialize:function(game){EventEmitter.call(this),this.game=game,this.canvas,this.canvasBounds=new Rectangle,this.parent=null,this.parentIsWindow=!1,this.parentSize=new Size,this.gameSize=new Size,this.baseSize=new Size,this.displaySize=new Size,this.scaleMode=CONST.SCALE_MODE.NONE,this.resolution=1,this.zoom=1,this._resetZoom=!1,this.displayScale=new Vector2(1,1),this.autoRound=!1,this.autoCenter=CONST.CENTER.NO_CENTER,this.orientation=CONST.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this._requestedFullscreenChange=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:NOOP,windowResize:NOOP,fullScreenChange:NOOP,fullScreenError:NOOP}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once("boot",this.boot,this)},boot:function(){var game=this.game;this.canvas=game.canvas,this.fullscreen=game.device.fullscreen,this.scaleMode!==CONST.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===CONST.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),game.events.on(GameEvents.PRE_STEP,this.step,this),this.startListeners()},parseConfig:function(config){this.getParent(config),this.getParentBounds();var width=config.width,height=config.height,scaleMode=config.scaleMode,resolution=config.resolution,zoom=config.zoom,autoRound=config.autoRound;if("string"==typeof width){var parentWidth=this.parentSize.width;0===parentWidth&&(parentWidth=window.innerWidth);var parentScaleX=parseInt(width,10)/100;width=Math.floor(parentWidth*parentScaleX)}if("string"==typeof height){var parentHeight=this.parentSize.height;0===parentHeight&&(parentHeight=window.innerHeight);var parentScaleY=parseInt(height,10)/100;height=Math.floor(parentHeight*parentScaleY)}this.resolution=1,this.scaleMode=scaleMode,this.autoRound=autoRound,this.autoCenter=config.autoCenter,this.resizeInterval=config.resizeInterval,autoRound&&(width=Math.floor(width),height=Math.floor(height)),this.gameSize.setSize(width,height),zoom===CONST.ZOOM.MAX_ZOOM&&(zoom=this.getMaxZoom()),this.zoom=zoom,1!==zoom&&(this._resetZoom=!0),this.baseSize.setSize(width*resolution,height*resolution),autoRound&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),config.minWidth>0&&this.displaySize.setMin(config.minWidth*zoom,config.minHeight*zoom),config.maxWidth>0&&this.displaySize.setMax(config.maxWidth*zoom,config.maxHeight*zoom),this.displaySize.setSize(width,height),this.orientation=GetScreenOrientation(width,height)},getParent:function(config){var parent=config.parent;if(null!==parent){if(this.parent=GetTarget(parent),this.parentIsWindow=this.parent===document.body,config.expandParent&&config.scaleMode!==CONST.SCALE_MODE.NONE){var DOMRect=this.parent.getBoundingClientRect();(this.parentIsWindow||0===DOMRect.height)&&(document.documentElement.style.height="100%",document.body.style.height="100%",DOMRect=this.parent.getBoundingClientRect(),this.parentIsWindow||0!==DOMRect.height||(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}config.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=GetTarget(config.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var parentSize=this.parentSize,DOMRect=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(DOMRect.height=GetInnerHeight(!0));var resolution=this.resolution,newWidth=DOMRect.width*resolution,newHeight=DOMRect.height*resolution;return(parentSize.width!==newWidth||parentSize.height!==newHeight)&&(parentSize.setSize(newWidth,newHeight),!0)},lockOrientation:function(orientation){var lock=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return!!lock&&lock(orientation)},setParentSize:function(width,height){return this.parentSize.setSize(width,height),this.refresh()},setGameSize:function(width,height){var autoRound=this.autoRound,resolution=this.resolution;autoRound&&(width=Math.floor(width),height=Math.floor(height));var previousWidth=this.width,previousHeight=this.height;return this.gameSize.resize(width,height),this.baseSize.resize(width*resolution,height*resolution),autoRound&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(width,height),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(previousWidth,previousHeight)},resize:function(width,height){var zoom=this.zoom,resolution=this.resolution,autoRound=this.autoRound;autoRound&&(width=Math.floor(width),height=Math.floor(height));var previousWidth=this.width,previousHeight=this.height;this.gameSize.resize(width,height),this.baseSize.resize(width*resolution,height*resolution),autoRound&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(width*zoom*resolution,height*zoom*resolution),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var style=this.canvas.style,styleWidth=width*zoom,styleHeight=height*zoom;return autoRound&&(styleWidth=Math.floor(styleWidth),styleHeight=Math.floor(styleHeight)),styleWidth===width&&styleHeight===height||(style.width=styleWidth+"px",style.height=styleHeight+"px"),this.refresh(previousWidth,previousHeight)},setZoom:function(value){return this.zoom=value,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(previousWidth,previousHeight){void 0===previousWidth&&(previousWidth=this.width),void 0===previousHeight&&(previousHeight=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var domContainer=this.game.domContainer;if(domContainer){this.baseSize.setCSS(domContainer);var canvasStyle=this.canvas.style,domStyle=domContainer.style;domStyle.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",domStyle.marginLeft=canvasStyle.marginLeft,domStyle.marginTop=canvasStyle.marginTop}return this.emit(Events.RESIZE,this.gameSize,this.baseSize,this.displaySize,this.resolution,previousWidth,previousHeight),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var newOrientation=GetScreenOrientation(this.width,this.height);newOrientation!==this.orientation&&(this.orientation=newOrientation,this.emit(Events.ORIENTATION_CHANGE,newOrientation))}},updateScale:function(){var styleWidth,styleHeight,style=this.canvas.style,width=this.gameSize.width,height=this.gameSize.height,zoom=this.zoom,autoRound=this.autoRound;this.scaleMode===CONST.SCALE_MODE.NONE?(this.displaySize.setSize(width*zoom*1,height*zoom*1),styleWidth=this.displaySize.width/1,styleHeight=this.displaySize.height/1,autoRound&&(styleWidth=Math.floor(styleWidth),styleHeight=Math.floor(styleHeight)),this._resetZoom&&(style.width=styleWidth+"px",style.height=styleHeight+"px",this._resetZoom=!1)):this.scaleMode===CONST.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(1*this.displaySize.width,1*this.displaySize.height),styleWidth=this.displaySize.width/1,styleHeight=this.displaySize.height/1,autoRound&&(styleWidth=Math.floor(styleWidth),styleHeight=Math.floor(styleHeight)),this.canvas.width=styleWidth,this.canvas.height=styleHeight):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),styleWidth=this.displaySize.width/1,styleHeight=this.displaySize.height/1,autoRound&&(styleWidth=Math.floor(styleWidth),styleHeight=Math.floor(styleHeight)),style.width=styleWidth+"px",style.height=styleHeight+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var zoomH=SnapFloor(this.parentSize.width,this.gameSize.width,0,!0),zoomV=SnapFloor(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(zoomH,zoomV),1)},updateCenter:function(){var autoCenter=this.autoCenter;if(autoCenter!==CONST.CENTER.NO_CENTER){var canvas=this.canvas,style=canvas.style,bounds=canvas.getBoundingClientRect(),width=bounds.width,height=bounds.height,offsetX=Math.floor((this.parentSize.width-width)/2),offsetY=Math.floor((this.parentSize.height-height)/2);autoCenter===CONST.CENTER.CENTER_HORIZONTALLY?offsetY=0:autoCenter===CONST.CENTER.CENTER_VERTICALLY&&(offsetX=0),style.marginLeft=offsetX+"px",style.marginTop=offsetY+"px"}},updateBounds:function(){var bounds=this.canvasBounds,clientRect=this.canvas.getBoundingClientRect();bounds.x=clientRect.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),bounds.y=clientRect.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),bounds.width=clientRect.width,bounds.height=clientRect.height},transformX:function(pageX){return(pageX-this.canvasBounds.left)*this.displayScale.x},transformY:function(pageY){return(pageY-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(fullscreenOptions){void 0===fullscreenOptions&&(fullscreenOptions={navigationUI:"hide"});var fullscreen=this.fullscreen;if(fullscreen.available){if(!fullscreen.active){var fsTarget=this.getFullscreenTarget();this._requestedFullscreenChange=!0,"undefined"!=typeof Promise?fullscreen.keyboard?fsTarget[fullscreen.request](Element.ALLOW_KEYBOARD_INPUT).then(this.fullscreenSuccessHandler.bind(this)).catch(this.fullscreenErrorHandler.bind(this)):fsTarget[fullscreen.request](fullscreenOptions).then(this.fullscreenSuccessHandler.bind(this)).catch(this.fullscreenErrorHandler.bind(this)):(fullscreen.keyboard?fsTarget[fullscreen.request](Element.ALLOW_KEYBOARD_INPUT):fsTarget[fullscreen.request](fullscreenOptions),fullscreen.active?this.fullscreenSuccessHandler():this.fullscreenErrorHandler())}}else this.emit(Events.FULLSCREEN_UNSUPPORTED)},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(Events.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(error){this.removeFullscreenTarget(),this.emit(Events.FULLSCREEN_FAILED,error)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var fsTarget=document.createElement("div");fsTarget.style.margin="0",fsTarget.style.padding="0",fsTarget.style.width="100%",fsTarget.style.height="100%",this.fullscreenTarget=fsTarget,this._createdFullscreenTarget=!0}this._createdFullscreenTarget&&(this.canvas.parentNode.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas));return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var fsTarget=this.fullscreenTarget;if(fsTarget&&fsTarget.parentNode){var parent=fsTarget.parentNode;parent.insertBefore(this.canvas,fsTarget),parent.removeChild(fsTarget)}}},stopFullscreen:function(){var fullscreen=this.fullscreen;if(!fullscreen.available)return this.emit(Events.FULLSCREEN_UNSUPPORTED),!1;fullscreen.active&&(this._requestedFullscreenChange=!0,document[fullscreen.cancel]()),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(Events.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(fullscreenOptions){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(fullscreenOptions)},startListeners:function(){var _this=this,listeners=this.listeners;if(listeners.orientationChange=function(){_this._checkOrientation=!0,_this.dirty=!0},listeners.windowResize=function(){_this.dirty=!0},window.addEventListener("orientationchange",listeners.orientationChange,!1),window.addEventListener("resize",listeners.windowResize,!1),this.fullscreen.available){listeners.fullScreenChange=function(event){return _this.onFullScreenChange(event)},listeners.fullScreenError=function(event){return _this.onFullScreenError(event)};["webkit","moz",""].forEach((function(prefix){document.addEventListener(prefix+"fullscreenchange",listeners.fullScreenChange,!1),document.addEventListener(prefix+"fullscreenerror",listeners.fullScreenError,!1)})),document.addEventListener("MSFullscreenChange",listeners.fullScreenChange,!1),document.addEventListener("MSFullscreenError",listeners.fullScreenError,!1)}},onFullScreenChange:function(){this._requestedFullscreenChange||this.stopFullscreen(),this._requestedFullscreenChange=!1},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(time,delta){this.parent&&(this._lastCheck+=delta,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var listeners=this.listeners;window.removeEventListener("orientationchange",listeners.orientationChange,!1),window.removeEventListener("resize",listeners.windowResize,!1);["webkit","moz",""].forEach((function(prefix){document.removeEventListener(prefix+"fullscreenchange",listeners.fullScreenChange,!1),document.removeEventListener(prefix+"fullscreenerror",listeners.fullScreenError,!1)})),document.removeEventListener("MSFullscreenChange",listeners.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",listeners.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===CONST.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===CONST.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});module.exports=ScaleManager},function(module,exports,__webpack_require__){var Clamp=__webpack_require__(25),Class=__webpack_require__(0),SnapFloor=__webpack_require__(105),Vector2=__webpack_require__(3),Size=new Class({initialize:function(width,height,aspectMode,parent){void 0===width&&(width=0),void 0===height&&(height=width),void 0===aspectMode&&(aspectMode=0),void 0===parent&&(parent=null),this._width=width,this._height=height,this._parent=parent,this.aspectMode=aspectMode,this.aspectRatio=0===height?1:width/height,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new Vector2},setAspectMode:function(value){return void 0===value&&(value=0),this.aspectMode=value,this.setSize(this._width,this._height)},setSnap:function(snapWidth,snapHeight){return void 0===snapWidth&&(snapWidth=0),void 0===snapHeight&&(snapHeight=snapWidth),this.snapTo.set(snapWidth,snapHeight),this.setSize(this._width,this._height)},setParent:function(parent){return this._parent=parent,this.setSize(this._width,this._height)},setMin:function(width,height){return void 0===width&&(width=0),void 0===height&&(height=width),this.minWidth=Clamp(width,0,this.maxWidth),this.minHeight=Clamp(height,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(width,height){return void 0===width&&(width=Number.MAX_VALUE),void 0===height&&(height=width),this.maxWidth=Clamp(width,this.minWidth,Number.MAX_VALUE),this.maxHeight=Clamp(height,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(width,height){switch(void 0===width&&(width=0),void 0===height&&(height=width),this.aspectMode){case Size.NONE:this._width=this.getNewWidth(SnapFloor(width,this.snapTo.x)),this._height=this.getNewHeight(SnapFloor(height,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height;break;case Size.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(SnapFloor(width,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case Size.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(SnapFloor(height,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case Size.FIT:this.constrain(width,height,!0);break;case Size.ENVELOP:this.constrain(width,height,!1)}return this},setAspectRatio:function(ratio){return this.aspectRatio=ratio,this.setSize(this._width,this._height)},resize:function(width,height){return this._width=this.getNewWidth(SnapFloor(width,this.snapTo.x)),this._height=this.getNewHeight(SnapFloor(height,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height,this},getNewWidth:function(value,checkParent){return void 0===checkParent&&(checkParent=!0),value=Clamp(value,this.minWidth,this.maxWidth),checkParent&&this._parent&&value>this._parent.width&&(value=Math.max(this.minWidth,this._parent.width)),value},getNewHeight:function(value,checkParent){return void 0===checkParent&&(checkParent=!0),value=Clamp(value,this.minHeight,this.maxHeight),checkParent&&this._parent&&value>this._parent.height&&(value=Math.max(this.minHeight,this._parent.height)),value},constrain:function(width,height,fit){void 0===width&&(width=0),void 0===height&&(height=width),void 0===fit&&(fit=!0),width=this.getNewWidth(width),height=this.getNewHeight(height);var snap=this.snapTo,newRatio=0===height?1:width/height;return fit&&this.aspectRatio>newRatio||!fit&&this.aspectRatio<newRatio?(height=(width=SnapFloor(width,snap.x))/this.aspectRatio,snap.y>0&&(width=(height=SnapFloor(height,snap.y))*this.aspectRatio)):(fit&&this.aspectRatio<newRatio||!fit&&this.aspectRatio>newRatio)&&(width=(height=SnapFloor(height,snap.y))*this.aspectRatio,snap.x>0&&(height=(width=SnapFloor(width,snap.x))*(1/this.aspectRatio))),this._width=width,this._height=height,this},fitTo:function(width,height){return this.constrain(width,height,!0)},envelop:function(width,height){return this.constrain(width,height,!1)},setWidth:function(value){return this.setSize(value,this._height)},setHeight:function(value){return this.setSize(this._width,value)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(element){element&&element.style&&(element.style.width=this._width+"px",element.style.height=this._height+"px")},copy:function(destination){return destination.setAspectMode(this.aspectMode),destination.aspectRatio=this.aspectRatio,destination.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(value){this.setSize(value,this._height)}},height:{get:function(){return this._height},set:function(value){this.setSize(this._width,value)}}});Size.NONE=0,Size.WIDTH_CONTROLS_HEIGHT=1,Size.HEIGHT_CONTROLS_WIDTH=2,Size.FIT=3,Size.ENVELOP=4,module.exports=Size},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),CONST=__webpack_require__(135),Events=__webpack_require__(20),GameEvents=__webpack_require__(23),GetValue=__webpack_require__(5),LoaderEvents=__webpack_require__(88),NOOP=__webpack_require__(2),Scene=__webpack_require__(381),Systems=__webpack_require__(197),SceneManager=new Class({initialize:function(game,sceneConfig){if(this.game=game,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,sceneConfig){Array.isArray(sceneConfig)||(sceneConfig=[sceneConfig]);for(var i=0;i<sceneConfig.length;i++)this._pending.push({key:"default",scene:sceneConfig[i],autoStart:0===i,data:{}})}game.events.once(GameEvents.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){var i,entry,key,sceneConfig;for(i=0;i<this._pending.length;i++){var newScene;key=(entry=this._pending[i]).key,(sceneConfig=entry.scene)instanceof Scene?newScene=this.createSceneFromInstance(key,sceneConfig):"object"==typeof sceneConfig?newScene=this.createSceneFromObject(key,sceneConfig):"function"==typeof sceneConfig&&(newScene=this.createSceneFromFunction(key,sceneConfig)),key=newScene.sys.settings.key,this.keys[key]=newScene,this.scenes.push(newScene),this._data[key]&&(newScene.sys.settings.data=this._data[key].data,this._data[key].autoStart&&(entry.autoStart=!0)),(entry.autoStart||newScene.sys.settings.active)&&this._start.push(key)}for(this._pending.length=0,this._data={},this.isBooted=!0,i=0;i<this._start.length;i++)entry=this._start[i],this.start(entry);this._start.length=0}},processQueue:function(){var pendingLength=this._pending.length,queueLength=this._queue.length;if(0!==pendingLength||0!==queueLength){var i,entry;if(pendingLength){for(i=0;i<pendingLength;i++)entry=this._pending[i],this.add(entry.key,entry.scene,entry.autoStart,entry.data);for(i=0;i<this._start.length;i++)entry=this._start[i],this.start(entry);return this._start.length=0,void(this._pending.length=0)}for(i=0;i<this._queue.length;i++)this[(entry=this._queue[i]).op](entry.keyA,entry.keyB);this._queue.length=0}},add:function(key,sceneConfig,autoStart,data){return void 0===autoStart&&(autoStart=!1),void 0===data&&(data={}),this.isProcessing||!this.isBooted?(this._pending.push({key:key,scene:sceneConfig,autoStart:autoStart,data:data}),this.isBooted||(this._data[key]={data:data}),null):(key=this.getKey(key,sceneConfig),sceneConfig instanceof Scene?newScene=this.createSceneFromInstance(key,sceneConfig):"object"==typeof sceneConfig?(sceneConfig.key=key,newScene=this.createSceneFromObject(key,sceneConfig)):"function"==typeof sceneConfig&&(newScene=this.createSceneFromFunction(key,sceneConfig)),newScene.sys.settings.data=data,key=newScene.sys.settings.key,this.keys[key]=newScene,this.scenes.push(newScene),(autoStart||newScene.sys.settings.active)&&(this._pending.length?this._start.push(key):this.start(key)),newScene);var newScene},remove:function(key){if(this.isProcessing)this._queue.push({op:"remove",keyA:key,keyB:null});else{var sceneToRemove=this.getScene(key);if(!sceneToRemove||sceneToRemove.sys.isTransitioning())return this;var index=this.scenes.indexOf(sceneToRemove),sceneKey=sceneToRemove.sys.settings.key;index>-1&&(delete this.keys[sceneKey],this.scenes.splice(index,1),this._start.indexOf(sceneKey)>-1&&(index=this._start.indexOf(sceneKey),this._start.splice(index,1)),sceneToRemove.sys.destroy())}return this},bootScene:function(scene){var loader,sys=scene.sys,settings=sys.settings;scene.init&&(scene.init.call(scene,settings.data),settings.status=CONST.INIT,settings.isTransition&&sys.events.emit(Events.TRANSITION_INIT,settings.transitionFrom,settings.transitionDuration)),sys.load&&(loader=sys.load).reset(),loader&&scene.preload?(scene.preload.call(scene),0===loader.list.size?this.create(scene):(settings.status=CONST.LOADING,loader.once(LoaderEvents.COMPLETE,this.loadComplete,this),loader.start())):this.create(scene)},loadComplete:function(loader){var scene=loader.scene;this.game.sound&&this.game.sound.onBlurPausedSounds&&this.game.sound.unlock(),this.create(scene)},payloadComplete:function(loader){this.bootScene(loader.scene)},update:function(time,delta){this.processQueue(),this.isProcessing=!0;for(var i=this.scenes.length-1;i>=0;i--){var sys=this.scenes[i].sys;sys.settings.status>CONST.START&&sys.settings.status<=CONST.RUNNING&&sys.step(time,delta)}},render:function(renderer){for(var i=0;i<this.scenes.length;i++){var sys=this.scenes[i].sys;sys.settings.visible&&sys.settings.status>=CONST.LOADING&&sys.settings.status<CONST.SLEEPING&&sys.render(renderer)}this.isProcessing=!1},create:function(scene){var sys=scene.sys,settings=sys.settings;scene.create&&(settings.status=CONST.CREATING,scene.create.call(scene,settings.data),settings.status===CONST.DESTROYED)||(settings.isTransition&&sys.events.emit(Events.TRANSITION_START,settings.transitionFrom,settings.transitionDuration),scene.update&&(sys.sceneUpdate=scene.update),settings.status=CONST.RUNNING,sys.events.emit(Events.CREATE,scene))},createSceneFromFunction:function(key,scene){var newScene=new scene;if(newScene instanceof Scene){var configKey=newScene.sys.settings.key;if(""!==configKey&&(key=configKey),this.keys.hasOwnProperty(key))throw new Error("Cannot add a Scene with duplicate key: "+key);return this.createSceneFromInstance(key,newScene)}return newScene.sys=new Systems(newScene),newScene.sys.settings.key=key,newScene.sys.init(this.game),newScene},createSceneFromInstance:function(key,newScene){var configKey=newScene.sys.settings.key;return""!==configKey?key=configKey:newScene.sys.settings.key=key,newScene.sys.init(this.game),newScene},createSceneFromObject:function(key,sceneConfig){var newScene=new Scene(sceneConfig),configKey=newScene.sys.settings.key;""!==configKey?key=configKey:newScene.sys.settings.key=key,newScene.sys.init(this.game);for(var defaults=["init","preload","create","update","render"],i=0;i<defaults.length;i++){var sceneCallback=GetValue(sceneConfig,defaults[i],null);sceneCallback&&(newScene[defaults[i]]=sceneCallback)}if(sceneConfig.hasOwnProperty("extend"))for(var propertyKey in sceneConfig.extend){var value=sceneConfig.extend[propertyKey];"data"===propertyKey&&newScene.hasOwnProperty("data")&&"object"==typeof value?newScene.data.merge(value):"sys"!==propertyKey&&(newScene[propertyKey]=value)}return newScene},getKey:function(key,sceneConfig){if(key||(key="default"),"function"==typeof sceneConfig)return key;if(sceneConfig instanceof Scene?key=sceneConfig.sys.settings.key:"object"==typeof sceneConfig&&sceneConfig.hasOwnProperty("key")&&(key=sceneConfig.key),this.keys.hasOwnProperty(key))throw new Error("Cannot add a Scene with duplicate key: "+key);return key},getScenes:function(isActive,inReverse){void 0===isActive&&(isActive=!0),void 0===inReverse&&(inReverse=!1);for(var out=[],scenes=this.scenes,i=0;i<scenes.length;i++){var scene=scenes[i];scene&&(!isActive||isActive&&scene.sys.isActive())&&out.push(scene)}return inReverse?out.reverse():out},getScene:function(key){if("string"==typeof key){if(this.keys[key])return this.keys[key]}else for(var i=0;i<this.scenes.length;i++)if(key===this.scenes[i])return key;return null},isActive:function(key){var scene=this.getScene(key);return scene?scene.sys.isActive():null},isPaused:function(key){var scene=this.getScene(key);return scene?scene.sys.isPaused():null},isVisible:function(key){var scene=this.getScene(key);return scene?scene.sys.isVisible():null},isSleeping:function(key){var scene=this.getScene(key);return scene?scene.sys.isSleeping():null},pause:function(key,data){var scene=this.getScene(key);return scene&&scene.sys.pause(data),this},resume:function(key,data){var scene=this.getScene(key);return scene&&scene.sys.resume(data),this},sleep:function(key,data){var scene=this.getScene(key);return scene&&!scene.sys.isTransitioning()&&scene.sys.sleep(data),this},wake:function(key,data){var scene=this.getScene(key);return scene&&scene.sys.wake(data),this},run:function(key,data){var scene=this.getScene(key);if(!scene){for(var i=0;i<this._pending.length;i++)if(this._pending[i].key===key){this.queueOp("start",key,data);break}return this}scene.sys.isSleeping()?scene.sys.wake(data):scene.sys.isBooted&&!scene.sys.isActive()?scene.sys.resume(data):this.start(key,data)},start:function(key,data){if(!this.isBooted)return this._data[key]={autoStart:!0,data:data},this;var scene=this.getScene(key);if(scene){var loader;if(scene.sys.isActive()||scene.sys.isPaused())scene.sys.shutdown(),scene.sys.start(data);else if(scene.sys.start(data),scene.sys.load&&(loader=scene.sys.load),loader&&scene.sys.settings.hasOwnProperty("pack")&&(loader.reset(),loader.addPack({payload:scene.sys.settings.pack})))return scene.sys.settings.status=CONST.LOADING,loader.once(LoaderEvents.COMPLETE,this.payloadComplete,this),loader.start(),this;this.bootScene(scene)}return this},stop:function(key){var scene=this.getScene(key);return scene&&!scene.sys.isTransitioning()&&scene.sys.shutdown(),this},switch:function(from,to){var sceneA=this.getScene(from),sceneB=this.getScene(to);return sceneA&&sceneB&&sceneA!==sceneB&&(this.sleep(from),this.isSleeping(to)?this.wake(to):this.start(to)),this},getAt:function(index){return this.scenes[index]},getIndex:function(key){var scene=this.getScene(key);return this.scenes.indexOf(scene)},bringToTop:function(key){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:key,keyB:null});else{var index=this.getIndex(key);if(-1!==index&&index<this.scenes.length){var scene=this.getScene(key);this.scenes.splice(index,1),this.scenes.push(scene)}}return this},sendToBack:function(key){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:key,keyB:null});else{var index=this.getIndex(key);if(-1!==index&&index>0){var scene=this.getScene(key);this.scenes.splice(index,1),this.scenes.unshift(scene)}}return this},moveDown:function(key){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:key,keyB:null});else{var indexA=this.getIndex(key);if(indexA>0){var indexB=indexA-1,sceneA=this.getScene(key),sceneB=this.getAt(indexB);this.scenes[indexA]=sceneB,this.scenes[indexB]=sceneA}}return this},moveUp:function(key){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:key,keyB:null});else{var indexA=this.getIndex(key);if(indexA<this.scenes.length-1){var indexB=indexA+1,sceneA=this.getScene(key),sceneB=this.getAt(indexB);this.scenes[indexA]=sceneB,this.scenes[indexB]=sceneA}}return this},moveAbove:function(keyA,keyB){if(keyA===keyB)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:keyA,keyB:keyB});else{var indexA=this.getIndex(keyA),indexB=this.getIndex(keyB);if(-1!==indexA&&-1!==indexB){var tempScene=this.getAt(indexB);this.scenes.splice(indexB,1),this.scenes.splice(indexA+1,0,tempScene)}}return this},moveBelow:function(keyA,keyB){if(keyA===keyB)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:keyA,keyB:keyB});else{var indexA=this.getIndex(keyA),indexB=this.getIndex(keyB);if(-1!==indexA&&-1!==indexB){var tempScene=this.getAt(indexB);this.scenes.splice(indexB,1),0===indexA?this.scenes.unshift(tempScene):this.scenes.splice(indexA,0,tempScene)}}return this},queueOp:function(op,keyA,keyB){return this._queue.push({op:op,keyA:keyA,keyB:keyB}),this},swapPosition:function(keyA,keyB){if(keyA===keyB)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:keyA,keyB:keyB});else{var indexA=this.getIndex(keyA),indexB=this.getIndex(keyB);if(indexA!==indexB&&-1!==indexA&&-1!==indexB){var tempScene=this.getAt(indexA);this.scenes[indexA]=this.scenes[indexB],this.scenes[indexB]=tempScene}}return this},dump:function(){for(var out=[],map=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],i=0;i<this.scenes.length;i++){var sys=this.scenes[i].sys,key=!sys.settings.visible||sys.settings.status!==CONST.RUNNING&&sys.settings.status!==CONST.PAUSED?"[-] ":"[*] ";key+=sys.settings.key+" ("+map[sys.settings.status]+")",out.push(key)}console.log(out.join("\n"))},destroy:function(){for(var i=0;i<this.scenes.length;i++){this.scenes[i].sys.destroy()}this.update=NOOP,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});module.exports=SceneManager},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Systems=__webpack_require__(197),Scene=new Class({initialize:function(config){this.sys=new Systems(this,config),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.impact,this.matter,this.facebook,this.scale,this.plugins},update:function(){}});module.exports=Scene},function(module,exports,__webpack_require__){var CONST=__webpack_require__(135),GetValue=__webpack_require__(5),Merge=__webpack_require__(89),InjectionMap=__webpack_require__(884),Settings={create:function(config){return"string"==typeof config?config={key:config}:void 0===config&&(config={}),{status:CONST.PENDING,key:GetValue(config,"key",""),active:GetValue(config,"active",!1),visible:GetValue(config,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:GetValue(config,"pack",!1),cameras:GetValue(config,"cameras",null),map:GetValue(config,"map",Merge(InjectionMap,GetValue(config,"mapAdd",{}))),physics:GetValue(config,"physics",{}),loader:GetValue(config,"loader",{}),plugins:GetValue(config,"plugins",!1),input:GetValue(config,"input",{})}}};module.exports=Settings},function(module,exports,__webpack_require__){var CanvasPool=__webpack_require__(28),CanvasTexture=__webpack_require__(384),Class=__webpack_require__(0),Color=__webpack_require__(37),CONST=__webpack_require__(35),EventEmitter=__webpack_require__(9),Events=__webpack_require__(131),GameEvents=__webpack_require__(23),GenerateTexture=__webpack_require__(353),GetValue=__webpack_require__(5),Parser=__webpack_require__(386),Texture=__webpack_require__(199),TextureManager=new Class({Extends:EventEmitter,initialize:function(game){EventEmitter.call(this),this.game=game,this.name="TextureManager",this.list={},this._tempCanvas=CanvasPool.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,game.events.once(GameEvents.BOOT,this.boot,this)},boot:function(){this._pending=2,this.on(Events.LOAD,this.updatePending,this),this.on(Events.ERROR,this.updatePending,this),this.addBase64("__DEFAULT",this.game.config.defaultImage),this.addBase64("__MISSING",this.game.config.missingImage),this.game.events.once(GameEvents.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,0===this._pending&&(this.off(Events.LOAD),this.off(Events.ERROR),this.emit(Events.READY))},checkKey:function(key){return!this.exists(key)||(console.error("Texture key already in use: "+key),!1)},remove:function(key){if("string"==typeof key){if(!this.exists(key))return console.warn("No texture found matching key: "+key),this;key=this.get(key)}return this.list.hasOwnProperty(key.key)&&(key.destroy(),this.emit(Events.REMOVE,key.key)),this},removeKey:function(key){return this.list.hasOwnProperty(key)&&delete this.list[key],this},addBase64:function(key,data){if(this.checkKey(key)){var _this=this,image=new Image;image.onerror=function(){_this.emit(Events.ERROR,key)},image.onload=function(){var texture=_this.create(key,image);Parser.Image(texture,0),_this.emit(Events.ADD,key,texture),_this.emit(Events.LOAD,key,texture)},image.src=data}return this},getBase64:function(key,frame,type,encoderOptions){void 0===type&&(type="image/png"),void 0===encoderOptions&&(encoderOptions=.92);var data="",textureFrame=this.getFrame(key,frame);if(textureFrame&&(textureFrame.source.isRenderTexture||textureFrame.source.isGLTexture))console.warn("Cannot getBase64 from WebGL Texture");else if(textureFrame){var cd=textureFrame.canvasData,canvas=CanvasPool.create2D(this,cd.width,cd.height);canvas.getContext("2d").drawImage(textureFrame.source.image,cd.x,cd.y,cd.width,cd.height,0,0,cd.width,cd.height),data=canvas.toDataURL(type,encoderOptions),CanvasPool.remove(canvas)}return data},addImage:function(key,source,dataSource){var texture=null;return this.checkKey(key)&&(texture=this.create(key,source),Parser.Image(texture,0),dataSource&&texture.setDataSource(dataSource),this.emit(Events.ADD,key,texture)),texture},addGLTexture:function(key,glTexture,width,height){var texture=null;return this.checkKey(key)&&((texture=this.create(key,glTexture,width,height)).add("__BASE",0,0,0,width,height),this.emit(Events.ADD,key,texture)),texture},addRenderTexture:function(key,renderTexture){var texture=null;return this.checkKey(key)&&((texture=this.create(key,renderTexture)).add("__BASE",0,0,0,renderTexture.width,renderTexture.height),this.emit(Events.ADD,key,texture)),texture},generate:function(key,config){if(this.checkKey(key)){var canvas=CanvasPool.create(this,1,1);return config.canvas=canvas,GenerateTexture(config),this.addCanvas(key,canvas)}return null},createCanvas:function(key,width,height){if(void 0===width&&(width=256),void 0===height&&(height=256),this.checkKey(key)){var canvas=CanvasPool.create(this,width,height,CONST.CANVAS,!0);return this.addCanvas(key,canvas)}return null},addCanvas:function(key,source,skipCache){void 0===skipCache&&(skipCache=!1);var texture=null;return skipCache?texture=new CanvasTexture(this,key,source,source.width,source.height):this.checkKey(key)&&(texture=new CanvasTexture(this,key,source,source.width,source.height),this.list[key]=texture,this.emit(Events.ADD,key,texture)),texture},addAtlas:function(key,source,data,dataSource){return Array.isArray(data.textures)||Array.isArray(data.frames)?this.addAtlasJSONArray(key,source,data,dataSource):this.addAtlasJSONHash(key,source,data,dataSource)},addAtlasJSONArray:function(key,source,data,dataSource){var texture=null;if(this.checkKey(key)){if(texture=this.create(key,source),Array.isArray(data))for(var singleAtlasFile=1===data.length,i=0;i<texture.source.length;i++){var atlasData=singleAtlasFile?data[0]:data[i];Parser.JSONArray(texture,i,atlasData)}else Parser.JSONArray(texture,0,data);dataSource&&texture.setDataSource(dataSource),this.emit(Events.ADD,key,texture)}return texture},addAtlasJSONHash:function(key,source,data,dataSource){var texture=null;if(this.checkKey(key)){if(texture=this.create(key,source),Array.isArray(data))for(var i=0;i<data.length;i++)Parser.JSONHash(texture,i,data[i]);else Parser.JSONHash(texture,0,data);dataSource&&texture.setDataSource(dataSource),this.emit(Events.ADD,key,texture)}return texture},addAtlasXML:function(key,source,data,dataSource){var texture=null;return this.checkKey(key)&&(texture=this.create(key,source),Parser.AtlasXML(texture,0,data),dataSource&&texture.setDataSource(dataSource),this.emit(Events.ADD,key,texture)),texture},addUnityAtlas:function(key,source,data,dataSource){var texture=null;return this.checkKey(key)&&(texture=this.create(key,source),Parser.UnityYAML(texture,0,data),dataSource&&texture.setDataSource(dataSource),this.emit(Events.ADD,key,texture)),texture},addSpriteSheet:function(key,source,config){var texture=null;if(this.checkKey(key)){var width=(texture=this.create(key,source)).source[0].width,height=texture.source[0].height;Parser.SpriteSheet(texture,0,0,0,width,height,config),this.emit(Events.ADD,key,texture)}return texture},addSpriteSheetFromAtlas:function(key,config){if(!this.checkKey(key))return null;var atlasKey=GetValue(config,"atlas",null),atlasFrame=GetValue(config,"frame",null);if(atlasKey&&atlasFrame){var sheet=this.get(atlasKey).get(atlasFrame);if(sheet){var texture=this.create(key,sheet.source.image);return sheet.trimmed?Parser.SpriteSheetFromAtlas(texture,sheet,config):Parser.SpriteSheet(texture,0,sheet.cutX,sheet.cutY,sheet.cutWidth,sheet.cutHeight,config),this.emit(Events.ADD,key,texture),texture}}},create:function(key,source,width,height){var texture=null;return this.checkKey(key)&&(texture=new Texture(this,key,source,width,height),this.list[key]=texture),texture},exists:function(key){return this.list.hasOwnProperty(key)},get:function(key){return void 0===key&&(key="__DEFAULT"),this.list[key]?this.list[key]:this.list.__MISSING},cloneFrame:function(key,frame){if(this.list[key])return this.list[key].get(frame).clone()},getFrame:function(key,frame){if(this.list[key])return this.list[key].get(frame)},getTextureKeys:function(){var output=[];for(var key in this.list)"__DEFAULT"!==key&&"__MISSING"!==key&&output.push(key);return output},getPixel:function(x,y,key,frame){var textureFrame=this.getFrame(key,frame);if(textureFrame){x-=textureFrame.x,y-=textureFrame.y;var data=textureFrame.data.cut;if(x+=data.x,y+=data.y,x>=data.x&&x<data.r&&y>=data.y&&y<data.b){var ctx=this._tempContext;ctx.clearRect(0,0,1,1),ctx.drawImage(textureFrame.source.image,x,y,1,1,0,0,1,1);var rgb=ctx.getImageData(0,0,1,1);return new Color(rgb.data[0],rgb.data[1],rgb.data[2],rgb.data[3])}}return null},getPixelAlpha:function(x,y,key,frame){var textureFrame=this.getFrame(key,frame);if(textureFrame){x-=textureFrame.x,y-=textureFrame.y;var data=textureFrame.data.cut;if(x+=data.x,y+=data.y,x>=data.x&&x<data.r&&y>=data.y&&y<data.b){var ctx=this._tempContext;return ctx.clearRect(0,0,1,1),ctx.drawImage(textureFrame.source.image,x,y,1,1,0,0,1,1),ctx.getImageData(0,0,1,1).data[3]}}return null},setTexture:function(gameObject,key,frame){return this.list[key]&&(gameObject.texture=this.list[key],gameObject.frame=gameObject.texture.get(frame)),gameObject},renameTexture:function(currentKey,newKey){var texture=this.get(currentKey);return!(!texture||currentKey===newKey)&&(texture.key=newKey,this.list[newKey]=texture,delete this.list[currentKey],!0)},each:function(callback,scope){for(var args=[null],i=1;i<arguments.length;i++)args.push(arguments[i]);for(var texture in this.list)args[0]=this.list[texture],callback.apply(scope,args)},destroy:function(){for(var texture in this.list)this.list[texture].destroy();this.list={},this.game=null,CanvasPool.remove(this._tempCanvas)}});module.exports=TextureManager},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Clamp=__webpack_require__(25),Color=__webpack_require__(37),CONST=__webpack_require__(35),IsSizePowerOfTwo=__webpack_require__(129),Texture=__webpack_require__(199),CanvasTexture=new Class({Extends:Texture,initialize:function(manager,key,source,width,height){Texture.call(this,manager,key,source,width,height),this.add("__BASE",0,0,0,width,height),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=width,this.height=height,this.imageData=this.context.getImageData(0,0,width,height),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===CONST.WEBGL&&this.refresh(),this},draw:function(x,y,source){return this.context.drawImage(source,x,y),this.update()},drawFrame:function(key,frame,x,y){void 0===x&&(x=0),void 0===y&&(y=0);var textureFrame=this.manager.getFrame(key,frame);if(textureFrame){var cd=textureFrame.canvasData,width=textureFrame.cutWidth,height=textureFrame.cutHeight,res=textureFrame.source.resolution;return this.context.drawImage(textureFrame.source.image,cd.x,cd.y,width,height,x,y,width/res,height/res),this.update()}return this},setPixel:function(x,y,red,green,blue,alpha){if(void 0===alpha&&(alpha=255),x=Math.abs(Math.floor(x)),y=Math.abs(Math.floor(y)),this.getIndex(x,y)>-1){var imageData=this.context.getImageData(x,y,1,1);imageData.data[0]=red,imageData.data[1]=green,imageData.data[2]=blue,imageData.data[3]=alpha,this.context.putImageData(imageData,x,y)}return this},putData:function(imageData,x,y,dirtyX,dirtyY,dirtyWidth,dirtyHeight){return void 0===dirtyX&&(dirtyX=0),void 0===dirtyY&&(dirtyY=0),void 0===dirtyWidth&&(dirtyWidth=imageData.width),void 0===dirtyHeight&&(dirtyHeight=imageData.height),this.context.putImageData(imageData,x,y,dirtyX,dirtyY,dirtyWidth,dirtyHeight),this},getData:function(x,y,width,height){return x=Clamp(Math.floor(x),0,this.width-1),y=Clamp(Math.floor(y),0,this.height-1),width=Clamp(width,1,this.width-x),height=Clamp(height,1,this.height-y),this.context.getImageData(x,y,width,height)},getPixel:function(x,y,out){out||(out=new Color);var index=this.getIndex(x,y);if(index>-1){var data=this.data,r=data[index+0],g=data[index+1],b=data[index+2],a=data[index+3];out.setTo(r,g,b,a)}return out},getPixels:function(x,y,width,height){void 0===x&&(x=0),void 0===y&&(y=0),void 0===width&&(width=this.width),void 0===height&&(height=width),x=Math.abs(Math.round(x)),y=Math.abs(Math.round(y));for(var left=Clamp(x,0,this.width),right=Clamp(x+width,0,this.width),top=Clamp(y,0,this.height),bottom=Clamp(y+height,0,this.height),pixel=new Color,out=[],py=top;py<bottom;py++){for(var row=[],px=left;px<right;px++)pixel=this.getPixel(px,py,pixel),row.push({x:px,y:py,color:pixel.color,alpha:pixel.alphaGL});out.push(row)}return out},getIndex:function(x,y){return x=Math.abs(Math.round(x)),y=Math.abs(Math.round(y)),x<this.width&&y<this.height?4*(x+y*this.width):-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(x,y,width,height){return void 0===x&&(x=0),void 0===y&&(y=0),void 0===width&&(width=this.width),void 0===height&&(height=this.height),this.context.clearRect(x,y,width,height),this.update()},setSize:function(width,height){return void 0===height&&(height=width),width===this.width&&height===this.height||(this.canvas.width=width,this.canvas.height=height,this._source.width=width,this._source.height=height,this._source.isPowerOf2=IsSizePowerOfTwo(width,height),this.frames.__BASE.setSize(width,height,0,0),this.refresh()),this},destroy:function(){Texture.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});module.exports=CanvasTexture},function(module,exports,__webpack_require__){var CanvasPool=__webpack_require__(28),Class=__webpack_require__(0),IsSizePowerOfTwo=__webpack_require__(129),ScaleModes=__webpack_require__(99),TextureSource=new Class({initialize:function(texture,source,width,height){var game=texture.manager.game;this.renderer=game.renderer,this.texture=texture,this.source=source,this.image=source,this.compressionAlgorithm=null,this.resolution=1,this.width=width||source.naturalWidth||source.width||0,this.height=height||source.naturalHeight||source.height||0,this.scaleMode=ScaleModes.DEFAULT,this.isCanvas=source instanceof HTMLCanvasElement,this.isRenderTexture="RenderTexture"===source.type,this.isGLTexture=source instanceof WebGLTexture,this.isPowerOf2=IsSizePowerOfTwo(this.width,this.height),this.glTexture=null,this.init(game)},init:function(game){this.renderer&&(this.renderer.gl?this.isCanvas?this.glTexture=this.renderer.canvasToTexture(this.image):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=this.renderer.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=this.renderer.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),game.config.antialias||this.setFilter(1)},setFilter:function(filterMode){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,filterMode)},update:function(){this.renderer.gl&&this.isCanvas&&(this.glTexture=this.renderer.canvasToTexture(this.image,this.glTexture))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture),this.isCanvas&&CanvasPool.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});module.exports=TextureSource},function(module,exports,__webpack_require__){module.exports={AtlasXML:__webpack_require__(885),Canvas:__webpack_require__(886),Image:__webpack_require__(887),JSONArray:__webpack_require__(888),JSONHash:__webpack_require__(889),SpriteSheet:__webpack_require__(890),SpriteSheetFromAtlas:__webpack_require__(891),UnityYAML:__webpack_require__(892)}},function(module,exports,__webpack_require__){var HTML5AudioSoundManager=__webpack_require__(388),NoAudioSoundManager=__webpack_require__(390),WebAudioSoundManager=__webpack_require__(392),SoundManagerCreator={create:function(game){var audioConfig=game.config.audio,deviceAudio=game.device.audio;return audioConfig&&audioConfig.noAudio||!deviceAudio.webAudio&&!deviceAudio.audioData?new NoAudioSoundManager(game):!deviceAudio.webAudio||audioConfig&&audioConfig.disableWebAudio?new HTML5AudioSoundManager(game):new WebAudioSoundManager(game)}};module.exports=SoundManagerCreator},function(module,exports,__webpack_require__){var BaseSoundManager=__webpack_require__(136),Class=__webpack_require__(0),Events=__webpack_require__(72),HTML5AudioSound=__webpack_require__(389),HTML5AudioSoundManager=new Class({Extends:BaseSoundManager,initialize:function(game){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,BaseSoundManager.call(this,game)},add:function(key,config){var sound=new HTML5AudioSound(this,key,config);return this.sounds.push(sound),sound},unlock:function(){this.locked=!1;var _this=this;if(this.game.cache.audio.entries.each((function(key,tags){for(var i=0;i<tags.length;i++)if("true"===tags[i].dataset.locked)return _this.locked=!0,!1;return!0})),this.locked){var moved=!1,detectMove=function(){moved=!0},unlock=function(){if(moved)moved=!1;else{document.body.removeEventListener("touchmove",detectMove),document.body.removeEventListener("touchend",unlock);var lockedTags=[];if(_this.game.cache.audio.entries.each((function(key,tags){for(var i=0;i<tags.length;i++){var tag=tags[i];"true"===tag.dataset.locked&&lockedTags.push(tag)}return!0})),0!==lockedTags.length){var lastTag=lockedTags[lockedTags.length-1];lastTag.oncanplaythrough=function(){lastTag.oncanplaythrough=null,lockedTags.forEach((function(tag){tag.dataset.locked="false"})),_this.unlocked=!0},lockedTags.forEach((function(tag){tag.load()}))}}};this.once(Events.UNLOCKED,(function(){for(this.forEachActiveSound((function(sound){null===sound.currentMarker&&0===sound.duration&&(sound.duration=sound.tags[0].duration),sound.totalDuration=sound.tags[0].duration}));this.lockedActionsQueue.length;){var lockedAction=this.lockedActionsQueue.shift();lockedAction.sound[lockedAction.prop].apply?lockedAction.sound[lockedAction.prop].apply(lockedAction.sound,lockedAction.value||[]):lockedAction.sound[lockedAction.prop]=lockedAction.value}}),this),document.body.addEventListener("touchmove",detectMove,!1),document.body.addEventListener("touchend",unlock,!1)}},onBlur:function(){this.forEachActiveSound((function(sound){sound.isPlaying&&(this.onBlurPausedSounds.push(sound),sound.onBlur())}))},onFocus:function(){this.onBlurPausedSounds.forEach((function(sound){sound.onFocus()})),this.onBlurPausedSounds.length=0},destroy:function(){BaseSoundManager.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(sound,prop,value){return"true"===sound.tags[0].dataset.locked&&(this.lockedActionsQueue.push({sound:sound,prop:prop,value:value}),!0)},setMute:function(value){return this.mute=value,this},mute:{get:function(){return this._mute},set:function(value){this._mute=value,this.forEachActiveSound((function(sound){sound.updateMute()})),this.emit(Events.GLOBAL_MUTE,this,value)}},setVolume:function(value){return this.volume=value,this},volume:{get:function(){return this._volume},set:function(value){this._volume=value,this.forEachActiveSound((function(sound){sound.updateVolume()})),this.emit(Events.GLOBAL_VOLUME,this,value)}}});module.exports=HTML5AudioSoundManager},function(module,exports,__webpack_require__){var BaseSound=__webpack_require__(137),Class=__webpack_require__(0),Events=__webpack_require__(72),HTML5AudioSound=new Class({Extends:BaseSound,initialize:function(manager,key,config){void 0===config&&(config={}),this.tags=manager.game.cache.audio.get(key),this.tags?(this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,BaseSound.call(this,manager,key,config)):console.warn("Audio cache entry missing: "+key)},play:function(markerName,config){return!this.manager.isLocked(this,"play",[markerName,config])&&(!!BaseSound.prototype.play.call(this,markerName,config)&&(!!this.pickAndPlayAudioTag()&&(this.emit(Events.PLAY,this),!0)))},pause:function(){return!this.manager.isLocked(this,"pause")&&(!(this.startTime>0)&&(!!BaseSound.prototype.pause.call(this)&&(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(Events.PAUSE,this),!0)))},resume:function(){return!this.manager.isLocked(this,"resume")&&(!(this.startTime>0)&&(!!BaseSound.prototype.resume.call(this)&&(!!this.pickAndPlayAudioTag()&&(this.emit(Events.RESUME,this),!0))))},stop:function(){return!this.manager.isLocked(this,"stop")&&(!!BaseSound.prototype.stop.call(this)&&(this.stopAndReleaseAudioTag(),this.emit(Events.STOP,this),!0))},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var seek=this.currentConfig.seek,delay=this.currentConfig.delay,offset=(this.currentMarker?this.currentMarker.start:0)+seek;return this.previousTime=offset,this.audio.currentTime=offset,this.applyConfig(),0===delay?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+1e3*delay,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var i=0;i<this.tags.length;i++){var audio=this.tags[i];if("false"===audio.dataset.used)return audio.dataset.used="true",this.audio=audio,!0}if(!this.manager.override)return!1;var otherSounds=[];this.manager.forEachActiveSound((function(sound){sound.key===this.key&&sound.audio&&otherSounds.push(sound)}),this),otherSounds.sort((function(a1,a2){return a1.loop===a2.loop?a2.seek/a2.duration-a1.seek/a1.duration:a1.loop?1:-1}));var selectedSound=otherSounds[0];return this.audio=selectedSound.audio,selectedSound.reset(),selectedSound.audio=null,selectedSound.startTime=0,selectedSound.previousTime=0,!0},playCatchPromise:function(){var playPromise=this.audio.play();playPromise&&playPromise.catch((function(reason){console.warn(reason)}))},stopAndReleaseAudioTag:function(){this.audio.pause(),this.audio.dataset.used="false",this.audio=null,this.startTime=0,this.previousTime=0},reset:function(){BaseSound.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(time,delta){if(this.isPlaying)if(this.startTime>0)this.startTime<time-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,time-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());else{var startTime=this.currentMarker?this.currentMarker.start:0,endTime=startTime+this.duration,currentTime=this.audio.currentTime;if(this.currentConfig.loop)currentTime>=endTime-this.manager.loopEndOffset?(this.audio.currentTime=startTime+Math.max(0,currentTime-endTime),currentTime=this.audio.currentTime):currentTime<startTime&&(this.audio.currentTime+=startTime,currentTime=this.audio.currentTime),currentTime<this.previousTime&&this.emit(Events.LOOPED,this);else if(currentTime>=endTime)return this.reset(),this.stopAndReleaseAudioTag(),void this.emit(Events.COMPLETE,this);this.previousTime=currentTime}},destroy:function(){BaseSound.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=this.currentConfig.volume*this.manager.volume)},calculateRate:function(){BaseSound.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(value){this.currentConfig.mute=value,this.manager.isLocked(this,"mute",value)||(this.updateMute(),this.emit(Events.MUTE,this,value))}},setMute:function(value){return this.mute=value,this},volume:{get:function(){return this.currentConfig.volume},set:function(value){this.currentConfig.volume=value,this.manager.isLocked(this,"volume",value)||(this.updateVolume(),this.emit(Events.VOLUME,this,value))}},setVolume:function(value){return this.volume=value,this},rate:{get:function(){return this.currentConfig.rate},set:function(value){this.currentConfig.rate=value,this.manager.isLocked(this,Events.RATE,value)||(this.calculateRate(),this.emit(Events.RATE,this,value))}},setRate:function(value){return this.rate=value,this},detune:{get:function(){return this.currentConfig.detune},set:function(value){this.currentConfig.detune=value,this.manager.isLocked(this,Events.DETUNE,value)||(this.calculateRate(),this.emit(Events.DETUNE,this,value))}},setDetune:function(value){return this.detune=value,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(value){this.manager.isLocked(this,"seek",value)||this.startTime>0||(this.isPlaying||this.isPaused)&&(value=Math.min(Math.max(0,value),this.duration),this.isPlaying?(this.previousTime=value,this.audio.currentTime=value):this.isPaused&&(this.currentConfig.seek=value),this.emit(Events.SEEK,this,value))}},setSeek:function(value){return this.seek=value,this},loop:{get:function(){return this.currentConfig.loop},set:function(value){this.currentConfig.loop=value,this.manager.isLocked(this,"loop",value)||(this.audio&&(this.audio.loop=value),this.emit(Events.LOOP,this,value))}},setLoop:function(value){return this.loop=value,this}});module.exports=HTML5AudioSound},function(module,exports,__webpack_require__){var BaseSoundManager=__webpack_require__(136),Class=__webpack_require__(0),EventEmitter=__webpack_require__(9),NoAudioSound=__webpack_require__(391),NOOP=__webpack_require__(2),NoAudioSoundManager=new Class({Extends:EventEmitter,initialize:function(game){EventEmitter.call(this),this.game=game,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(key,config){var sound=new NoAudioSound(this,key,config);return this.sounds.push(sound),sound},addAudioSprite:function(key,config){var sound=this.add(key,config);return sound.spritemap={},sound},play:function(key,extra){return!1},playAudioSprite:function(key,spriteName,config){return!1},remove:function(sound){return BaseSoundManager.prototype.remove.call(this,sound)},removeByKey:function(key){return BaseSoundManager.prototype.removeByKey.call(this,key)},pauseAll:NOOP,resumeAll:NOOP,stopAll:NOOP,update:NOOP,setRate:NOOP,setDetune:NOOP,setMute:NOOP,setVolume:NOOP,forEachActiveSound:function(callbackfn,scope){BaseSoundManager.prototype.forEachActiveSound.call(this,callbackfn,scope)},destroy:function(){BaseSoundManager.prototype.destroy.call(this)}});module.exports=NoAudioSoundManager},function(module,exports,__webpack_require__){var BaseSound=__webpack_require__(137),Class=__webpack_require__(0),EventEmitter=__webpack_require__(9),Extend=__webpack_require__(17),NoAudioSound=new Class({Extends:EventEmitter,initialize:function(manager,key,config){void 0===config&&(config={}),EventEmitter.call(this),this.manager=manager,this.key=key,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=Extend({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0},config),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(marker){return!1},updateMarker:function(marker){return!1},removeMarker:function(markerName){return null},play:function(markerName,config){return!1},pause:function(){return!1},resume:function(){return!1},stop:function(){return!1},destroy:function(){this.manager.remove(this),BaseSound.prototype.destroy.call(this)}});module.exports=NoAudioSound},function(module,exports,__webpack_require__){var Base64ToArrayBuffer=__webpack_require__(393),BaseSoundManager=__webpack_require__(136),Class=__webpack_require__(0),Events=__webpack_require__(72),WebAudioSound=__webpack_require__(394),WebAudioSoundManager=new Class({Extends:BaseSoundManager,initialize:function(game){this.context=this.createAudioContext(game),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked="suspended"===this.context.state&&("ontouchstart"in window||"onclick"in window),BaseSoundManager.call(this,game),this.locked&&this.unlock()},createAudioContext:function(game){var audioConfig=game.config.audio;return audioConfig&&audioConfig.context?(audioConfig.context.resume(),audioConfig.context):new AudioContext},add:function(key,config){var sound=new WebAudioSound(this,key,config);return this.sounds.push(sound),sound},decodeAudio:function(audioKey,audioData){var audioFiles;audioFiles=Array.isArray(audioKey)?audioKey:[{key:audioKey,data:audioData}];for(var cache=this.game.cache.audio,remaining=audioFiles.length,i=0;i<audioFiles.length;i++){var entry=audioFiles[i],key=entry.key,data=entry.data;"string"==typeof data&&(data=Base64ToArrayBuffer(data));var success=function(key,audioBuffer){cache.add(key,audioBuffer),this.emit(Events.DECODED,key),0===--remaining&&this.emit(Events.DECODED_ALL)}.bind(this,key),failure=function(key,error){console.error("Error decoding audio: "+key+" - ",error?error.message:""),0===--remaining&&this.emit(Events.DECODED_ALL)}.bind(this,key);this.context.decodeAudioData(data,success,failure)}},unlock:function(){var _this=this,unlockHandler=function unlockHandler(){_this.context&&_this.context.resume().then((function(){document.body.removeEventListener("touchstart",unlockHandler),document.body.removeEventListener("touchend",unlockHandler),document.body.removeEventListener("click",unlockHandler),_this.unlocked=!0}),(function(){document.body.removeEventListener("touchstart",unlockHandler),document.body.removeEventListener("touchend",unlockHandler),document.body.removeEventListener("click",unlockHandler)}))};document.body&&(document.body.addEventListener("touchstart",unlockHandler,!1),document.body.addEventListener("touchend",unlockHandler,!1),document.body.addEventListener("click",unlockHandler,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){this.locked||this.context.resume()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio&&this.game.config.audio.context)this.context.suspend();else{var _this=this;this.context.close().then((function(){_this.context=null}))}BaseSoundManager.prototype.destroy.call(this)},setMute:function(value){return this.mute=value,this},mute:{get:function(){return 0===this.masterMuteNode.gain.value},set:function(value){this.masterMuteNode.gain.setValueAtTime(value?0:1,0),this.emit(Events.GLOBAL_MUTE,this,value)}},setVolume:function(value){return this.volume=value,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(value){this.masterVolumeNode.gain.setValueAtTime(value,0),this.emit(Events.GLOBAL_VOLUME,this,value)}}});module.exports=WebAudioSoundManager},function(module,exports){for(var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=new Uint8Array(256),i=0;i<chars.length;i++)lookup[chars.charCodeAt(i)]=i;module.exports=function(base64){var encoded1,encoded2,encoded3,encoded4,len=(base64=base64.substr(base64.indexOf(",")+1)).length,bufferLength=.75*len,p=0;"="===base64[len-1]&&(bufferLength--,"="===base64[len-2]&&bufferLength--);for(var arrayBuffer=new ArrayBuffer(bufferLength),bytes=new Uint8Array(arrayBuffer),i=0;i<len;i+=4)encoded1=lookup[base64.charCodeAt(i)],encoded2=lookup[base64.charCodeAt(i+1)],encoded3=lookup[base64.charCodeAt(i+2)],encoded4=lookup[base64.charCodeAt(i+3)],bytes[p++]=encoded1<<2|encoded2>>4,bytes[p++]=(15&encoded2)<<4|encoded3>>2,bytes[p++]=(3&encoded3)<<6|63&encoded4;return arrayBuffer}},function(module,exports,__webpack_require__){var BaseSound=__webpack_require__(137),Class=__webpack_require__(0),Events=__webpack_require__(72),WebAudioSound=new Class({Extends:BaseSound,initialize:function(manager,key,config){void 0===config&&(config={}),this.audioBuffer=manager.game.cache.audio.get(key),this.audioBuffer?(this.source=null,this.loopSource=null,this.muteNode=manager.context.createGain(),this.volumeNode=manager.context.createGain(),this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),this.volumeNode.connect(manager.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,BaseSound.call(this,manager,key,config)):console.warn("Audio cache entry missing: "+key)},play:function(markerName,config){return!!BaseSound.prototype.play.call(this,markerName,config)&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(Events.PLAY,this),!0)},pause:function(){return!(this.manager.context.currentTime<this.startTime)&&(!!BaseSound.prototype.pause.call(this)&&(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(Events.PAUSE,this),!0))},resume:function(){return!(this.manager.context.currentTime<this.startTime)&&(!!BaseSound.prototype.resume.call(this)&&(this.createAndStartBufferSource(),this.emit(Events.RESUME,this),!0))},stop:function(){return!!BaseSound.prototype.stop.call(this)&&(this.stopAndRemoveBufferSource(),this.emit(Events.STOP,this),!0)},createAndStartBufferSource:function(){var seek=this.currentConfig.seek,delay=this.currentConfig.delay,when=this.manager.context.currentTime+delay,offset=(this.currentMarker?this.currentMarker.start:0)+seek,duration=this.duration-seek;this.playTime=when-seek,this.startTime=when,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,when),Math.max(0,offset),Math.max(0,duration)),this.resetConfig()},createAndStartLoopBufferSource:function(){var when=this.getLoopTime(),offset=this.currentMarker?this.currentMarker.start:0,duration=this.duration;this.loopTime=when,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,when),Math.max(0,offset),Math.max(0,duration))},createBufferSource:function(){var _this=this,source=this.manager.context.createBufferSource();return source.buffer=this.audioBuffer,source.connect(this.muteNode),source.onended=function(ev){ev.target===_this.source&&(_this.currentConfig.loop?_this.hasLooped=!0:_this.hasEnded=!0)},source},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),BaseSound.prototype.applyConfig.call(this)},update:function(time,delta){this.hasEnded?(this.hasEnded=!1,BaseSound.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(Events.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(Events.LOOPED,this))},destroy:function(){BaseSound.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){BaseSound.prototype.calculateRate.call(this);var now=this.manager.context.currentTime;this.source&&"number"==typeof this.totalRate&&this.source.playbackRate.setValueAtTime(this.totalRate,now),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,now)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var currentTime=0,i=0;i<this.rateUpdates.length;i++){currentTime+=((i<this.rateUpdates.length-1?this.rateUpdates[i+1].time:this.manager.context.currentTime-this.playTime)-this.rateUpdates[i].time)*this.rateUpdates[i].rate}return currentTime},getLoopTime:function(){for(var lastRateUpdateCurrentTime=0,i=0;i<this.rateUpdates.length-1;i++)lastRateUpdateCurrentTime+=(this.rateUpdates[i+1].time-this.rateUpdates[i].time)*this.rateUpdates[i].rate;var lastRateUpdate=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+lastRateUpdate.time+(this.duration-lastRateUpdateCurrentTime)/lastRateUpdate.rate},rate:{get:function(){return this.currentConfig.rate},set:function(value){this.currentConfig.rate=value,this.calculateRate(),this.emit(Events.RATE,this,value)}},setRate:function(value){return this.rate=value,this},detune:{get:function(){return this.currentConfig.detune},set:function(value){this.currentConfig.detune=value,this.calculateRate(),this.emit(Events.DETUNE,this,value)}},setDetune:function(value){return this.detune=value,this},mute:{get:function(){return 0===this.muteNode.gain.value},set:function(value){this.currentConfig.mute=value,this.muteNode.gain.setValueAtTime(value?0:1,0),this.emit(Events.MUTE,this,value)}},setMute:function(value){return this.mute=value,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(value){this.currentConfig.volume=value,this.volumeNode.gain.setValueAtTime(value,0),this.emit(Events.VOLUME,this,value)}},setVolume:function(value){return this.volume=value,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(value){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(value=Math.min(Math.max(0,value),this.duration),this.currentConfig.seek=value,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(Events.SEEK,this,value))}},setSeek:function(value){return this.seek=value,this},loop:{get:function(){return this.currentConfig.loop},set:function(value){this.currentConfig.loop=value,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),value&&this.createAndStartLoopBufferSource()),this.emit(Events.LOOP,this,value)}},setLoop:function(value){return this.loop=value,this}});module.exports=WebAudioSound},function(module,exports,__webpack_require__){var AdInstance=__webpack_require__(916),Class=__webpack_require__(0),DataManager=__webpack_require__(103),EventEmitter=__webpack_require__(9),Leaderboard=__webpack_require__(917),Product=__webpack_require__(919),Purchase=__webpack_require__(920),FacebookInstantGamesPlugin=new Class({Extends:EventEmitter,initialize:function(game){EventEmitter.call(this),this.game=game,this.data=new DataManager(this),this.on("setdata",this.setDataHandler,this),this.on("changedata",this.changeDataHandler,this),this.hasLoaded=!1,this.dataLocked=!1,this.supportedAPIs=[],this.entryPoint="",this.entryPointData=null,this.contextID=null,this.contextType=null,this.locale=null,this.platform=null,this.version=null,this.playerID=null,this.playerName=null,this.playerPhotoURL=null,this.playerCanSubscribeBot=!1,this.paymentsReady=!1,this.catalog=[],this.purchases=[],this.leaderboards={},this.ads=[]},setDataHandler:function(parent,key,value){if(!this.dataLocked){var data={};data[key]=value;var _this=this;FBInstant.player.setDataAsync(data).then((function(){_this.emit("savedata",data)}))}},changeDataHandler:function(parent,key,value){if(!this.dataLocked){var data={};data[key]=value;var _this=this;FBInstant.player.setDataAsync(data).then((function(){_this.emit("savedata",data)}))}},showLoadProgress:function(scene){return scene.load.on("progress",(function(value){this.hasLoaded||FBInstant.setLoadingProgress(100*value)}),this),scene.load.on("complete",(function(){this.hasLoaded||(this.hasLoaded=!0,FBInstant.startGameAsync().then(this.gameStarted.bind(this)))}),this),this},gameStarted:function(){var APIs=FBInstant.getSupportedAPIs(),supported={},dotToUpper=function(match){return match[1].toUpperCase()};APIs.forEach((function(api){api=api.replace(/\../g,dotToUpper),supported[api]=!0})),this.supportedAPIs=supported,this.getID(),this.getType(),this.getLocale(),this.getPlatform(),this.getSDKVersion(),this.getPlayerID(),this.getPlayerName(),this.getPlayerPhotoURL();var _this=this;FBInstant.onPause((function(){_this.emit("pause")})),FBInstant.getEntryPointAsync().then((function(entrypoint){_this.entryPoint=entrypoint,_this.entryPointData=FBInstant.getEntryPointData(),_this.emit("startgame")})).catch((function(e){console.warn(e)})),this.supportedAPIs.paymentsPurchaseAsync&&FBInstant.payments.onReady((function(){_this.paymentsReady=!0})).catch((function(e){console.warn(e)}))},checkAPI:function(api){return!!this.supportedAPIs[api]},getID:function(){return!this.contextID&&this.supportedAPIs.contextGetID&&(this.contextID=FBInstant.context.getID()),this.contextID},getType:function(){return!this.contextType&&this.supportedAPIs.contextGetType&&(this.contextType=FBInstant.context.getType()),this.contextType},getLocale:function(){return!this.locale&&this.supportedAPIs.getLocale&&(this.locale=FBInstant.getLocale()),this.locale},getPlatform:function(){return!this.platform&&this.supportedAPIs.getPlatform&&(this.platform=FBInstant.getPlatform()),this.platform},getSDKVersion:function(){return!this.version&&this.supportedAPIs.getSDKVersion&&(this.version=FBInstant.getSDKVersion()),this.version},getPlayerID:function(){return!this.playerID&&this.supportedAPIs.playerGetID&&(this.playerID=FBInstant.player.getID()),this.playerID},getPlayerName:function(){return!this.playerName&&this.supportedAPIs.playerGetName&&(this.playerName=FBInstant.player.getName()),this.playerName},getPlayerPhotoURL:function(){return!this.playerPhotoURL&&this.supportedAPIs.playerGetPhoto&&(this.playerPhotoURL=FBInstant.player.getPhoto()),this.playerPhotoURL},loadPlayerPhoto:function(scene,key){return this.playerPhotoURL&&(scene.load.setCORS("anonymous"),scene.load.image(key,this.playerPhotoURL),scene.load.once("filecomplete-image-"+key,(function(){this.emit("photocomplete",key)}),this),scene.load.start()),this},canSubscribeBot:function(){if(this.supportedAPIs.playerCanSubscribeBotAsync){var _this=this;FBInstant.player.canSubscribeBotAsync().then((function(){_this.playerCanSubscribeBot=!0,_this.emit("cansubscribebot")})).catch((function(e){_this.emit("cansubscribebotfail",e)}))}else this.emit("cansubscribebotfail");return this},subscribeBot:function(){if(this.playerCanSubscribeBot){var _this=this;FBInstant.player.subscribeBotAsync().then((function(){_this.emit("subscribebot")})).catch((function(e){_this.emit("subscribebotfail",e)}))}else this.emit("subscribebotfail");return this},getData:function(keys){if(!this.checkAPI("playerGetDataAsync"))return this;Array.isArray(keys)||(keys=[keys]);var _this=this;return FBInstant.player.getDataAsync(keys).then((function(data){for(var key in _this.dataLocked=!0,data)_this.data.set(key,data[key]);_this.dataLocked=!1,_this.emit("getdata",data)})),this},saveData:function(data){if(!this.checkAPI("playerSetDataAsync"))return this;var _this=this;return FBInstant.player.setDataAsync(data).then((function(){_this.emit("savedata",data)})).catch((function(e){_this.emit("savedatafail",e)})),this},flushData:function(){if(!this.checkAPI("playerFlushDataAsync"))return this;var _this=this;return FBInstant.player.flushDataAsync().then((function(){_this.emit("flushdata")})).catch((function(e){_this.emit("flushdatafail",e)})),this},getStats:function(keys){if(!this.checkAPI("playerGetStatsAsync"))return this;var _this=this;return FBInstant.player.getStatsAsync(keys).then((function(data){_this.emit("getstats",data)})).catch((function(e){_this.emit("getstatsfail",e)})),this},saveStats:function(data){if(!this.checkAPI("playerSetStatsAsync"))return this;var output={};for(var key in data)"number"==typeof data[key]&&(output[key]=data[key]);var _this=this;return FBInstant.player.setStatsAsync(output).then((function(){_this.emit("savestats",output)})).catch((function(e){_this.emit("savestatsfail",e)})),this},incStats:function(data){if(!this.checkAPI("playerIncrementStatsAsync"))return this;var output={};for(var key in data)"number"==typeof data[key]&&(output[key]=data[key]);var _this=this;return FBInstant.player.incrementStatsAsync(output).then((function(stats){_this.emit("incstats",stats)})).catch((function(e){_this.emit("incstatsfail",e)})),this},saveSession:function(data){return this.checkAPI("setSessionData")?(JSON.stringify(data).length<=1e3?FBInstant.setSessionData(data):console.warn("Session data too long. Max 1000 chars."),this):this},openShare:function(text,key,frame,sessionData){return this._share("SHARE",text,key,frame,sessionData)},openInvite:function(text,key,frame,sessionData){return this._share("INVITE",text,key,frame,sessionData)},openRequest:function(text,key,frame,sessionData){return this._share("REQUEST",text,key,frame,sessionData)},openChallenge:function(text,key,frame,sessionData){return this._share("CHALLENGE",text,key,frame,sessionData)},_share:function(intent,text,key,frame,sessionData){if(!this.checkAPI("shareAsync"))return this;if(void 0===sessionData&&(sessionData={}),key)var imageData=this.game.textures.getBase64(key,frame);var payload={intent:intent,image:imageData,text:text,data:sessionData},_this=this;return FBInstant.shareAsync(payload).then((function(){_this.emit("resume")})),this},isSizeBetween:function(min,max){return this.checkAPI("contextIsSizeBetween")?FBInstant.context.isSizeBetween(min,max):this},switchContext:function(contextID){if(!this.checkAPI("contextSwitchAsync"))return this;if(contextID!==this.contextID){var _this=this;FBInstant.context.switchAsync(contextID).then((function(){_this.contextID=FBInstant.context.getID(),_this.emit("switch",_this.contextID)})).catch((function(e){_this.emit("switchfail",e)}))}return this},chooseContext:function(options){if(!this.checkAPI("contextChooseAsync"))return this;var _this=this;return FBInstant.context.chooseAsync(options).then((function(){_this.contextID=FBInstant.context.getID(),_this.emit("choose",_this.contextID)})).catch((function(e){_this.emit("choosefail",e)})),this},createContext:function(playerID){if(!this.checkAPI("contextCreateAsync"))return this;var _this=this;return FBInstant.context.createAsync(playerID).then((function(){_this.contextID=FBInstant.context.getID(),_this.emit("create",_this.contextID)})).catch((function(e){_this.emit("createfail",e)})),this},getPlayers:function(){if(!this.checkAPI("playerGetConnectedPlayersAsync"))return this;var _this=this;return FBInstant.player.getConnectedPlayersAsync().then((function(players){_this.emit("players",players)})).catch((function(e){_this.emit("playersfail",e)})),this},getCatalog:function(){if(!this.paymentsReady)return this;var _this=this,catalog=this.catalog;return FBInstant.payments.getCatalogAsync().then((function(data){catalog=[],data.forEach((function(item){catalog.push(Product(item))})),_this.emit("getcatalog",catalog)})).catch((function(e){_this.emit("getcatalogfail",e)})),this},getProduct:function(productID){for(var i=0;i<this.catalog.length;i++)if(this.catalog[i].productID===productID)return this.catalog[i];return null},purchase:function(productID,developerPayload){if(!this.paymentsReady)return this;var config={productID:productID};developerPayload&&(config.developerPayload=developerPayload);var _this=this;return FBInstant.payments.purchaseAsync(config).then((function(data){var purchase=Purchase(data);_this.emit("purchase",purchase)})).catch((function(e){_this.emit("purchasefail",e)})),this},getPurchases:function(){if(!this.paymentsReady)return this;var _this=this,purchases=this.purchases;return FBInstant.payments.getPurchasesAsync().then((function(data){purchases=[],data.forEach((function(item){purchases.push(Purchase(item))})),_this.emit("getpurchases",purchases)})).catch((function(e){_this.emit("getpurchasesfail",e)})),this},consumePurchase:function(purchaseToken){if(!this.paymentsReady)return this;var _this=this;return FBInstant.payments.consumePurchaseAsync(purchaseToken).then((function(){_this.emit("consumepurchase",purchaseToken)})).catch((function(e){_this.emit("consumepurchasefail",e)})),this},update:function(cta,text,key,frame,template,updateData){return this._update("CUSTOM",cta,text,key,frame,template,updateData)},updateLeaderboard:function(cta,text,key,frame,template,updateData){return this._update("LEADERBOARD",cta,text,key,frame,template,updateData)},_update:function(action,cta,text,key,frame,template,updateData){if(!this.checkAPI("shareAsync"))return this;if(void 0===cta&&(cta=""),"string"==typeof text&&(text={default:text}),void 0===updateData&&(updateData={}),key)var imageData=this.game.textures.getBase64(key,frame);var payload={action:action,cta:cta,image:imageData,text:text,template:template,data:updateData,strategy:"IMMEDIATE",notification:"NO_PUSH"},_this=this;return FBInstant.updateAsync(payload).then((function(){_this.emit("update")})).catch((function(e){_this.emit("updatefail",e)})),this},switchGame:function(appID,data){if(!this.checkAPI("switchGameAsync"))return this;if(data&&JSON.stringify(data).length>1e3)return console.warn("Switch Game data too long. Max 1000 chars."),this;var _this=this;return FBInstant.switchGameAsync(appID,data).then((function(){_this.emit("switchgame",appID)})).catch((function(e){_this.emit("switchgamefail",e)})),this},createShortcut:function(){var _this=this;return FBInstant.canCreateShortcutAsync().then((function(canCreateShortcut){canCreateShortcut&&FBInstant.createShortcutAsync().then((function(){_this.emit("shortcutcreated")})).catch((function(e){_this.emit("shortcutfailed",e)}))})),this},quit:function(){FBInstant.quit()},log:function(name,value,params){return this.checkAPI("logEvent")?(void 0===params&&(params={}),name.length>=2&&name.length<=40&&FBInstant.logEvent(name,parseFloat(value),params),this):this},preloadAds:function(placementID){if(!this.checkAPI("getInterstitialAdAsync"))return this;var i;Array.isArray(placementID)||(placementID=[placementID]);var _this=this,total=0;for(i=0;i<this.ads.length;i++)this.ads[i].shown||total++;if(total+placementID.length>=3)return console.warn("Too many AdInstances. Show an ad before loading more"),this;for(i=0;i<placementID.length;i++){var data,id=placementID[i];FBInstant.getInterstitialAdAsync(id).then((function(interstitial){return data=interstitial,interstitial.loadAsync()})).then((function(){var ad=AdInstance(id,data,!1);_this.ads.push(ad),_this.emit("adloaded",ad)})).catch((function(e){"ADS_NO_FILL"===e.code?_this.emit("adsnofill",id):"ADS_FREQUENT_LOAD"===e.code?_this.emit("adsfrequentload",id):console.warn(e)}))}return this},preloadVideoAds:function(placementID){if(!this.checkAPI("getRewardedVideoAsync"))return this;var i;Array.isArray(placementID)||(placementID=[placementID]);var _this=this,total=0;for(i=0;i<this.ads.length;i++)this.ads[i].shown||total++;if(total+placementID.length>=3)return console.warn("Too many AdInstances. Show an ad before loading more"),this;for(i=0;i<placementID.length;i++){var data,id=placementID[i];FBInstant.getRewardedVideoAsync(id).then((function(reward){return data=reward,reward.loadAsync()})).then((function(){var ad=AdInstance(id,data,!0);_this.ads.push(ad),_this.emit("adloaded",ad)})).catch((function(e){"ADS_NO_FILL"===e.code?_this.emit("adsnofill",id):"ADS_FREQUENT_LOAD"===e.code?_this.emit("adsfrequentload",id):console.warn(e)}))}return this},showAd:function(placementID){for(var _this=this,i=0;i<this.ads.length;i++){var ad=this.ads[i];ad.placementID===placementID&&ad.instance.showAsync().then((function(){ad.shown=!0,_this.emit("adfinished",ad)})).catch((function(e){"ADS_NOT_LOADED"===e.code?_this.emit("adsnotloaded",ad):"RATE_LIMITED"===e.code&&_this.emit("adratelimited",ad),_this.emit("adshowerror",e,ad)}))}return this},showVideo:function(placementID){for(var _this=this,i=0;i<this.ads.length;i++){var ad=this.ads[i];ad.placementID===placementID&&ad.video&&ad.instance.showAsync().then((function(){ad.shown=!0,_this.emit("adfinished",ad)})).catch((function(e){"ADS_NOT_LOADED"===e.code?_this.emit("adsnotloaded",ad):"RATE_LIMITED"===e.code&&_this.emit("adratelimited",ad),_this.emit("adshowerror",e,ad)}))}return this},matchPlayer:function(matchTag,switchImmediately){if(void 0===matchTag&&(matchTag=null),void 0===switchImmediately&&(switchImmediately=!1),!this.checkAPI("matchPlayerAsync"))return this;var _this=this;return FBInstant.matchPlayerAsync(matchTag,switchImmediately).then((function(){_this.getID(),_this.getType(),_this.emit("matchplayer",_this.contextID,_this.contextType)})),this},getLeaderboard:function(name){if(!this.checkAPI("getLeaderboardAsync"))return this;var _this=this;return FBInstant.getLeaderboardAsync(name).then((function(data){var leaderboard=new Leaderboard(_this,data);_this.leaderboards[name]=leaderboard,_this.emit("getleaderboard",leaderboard)})).catch((function(e){console.warn(e)})),this},destroy:function(){FBInstant.quit(),this.data.destroy(),this.removeAllListeners(),this.catalog=[],this.purchases=[],this.leaderboards=[],this.ads=[],this.game=null}});module.exports=FacebookInstantGamesPlugin},function(module,exports){module.exports=function(array){for(var sourceRowCount=array.length,sourceColCount=array[0].length,result=new Array(sourceColCount),i=0;i<sourceColCount;i++){result[i]=new Array(sourceRowCount);for(var j=sourceRowCount-1;j>-1;j--)result[i][j]=array[j][i]}return result}},function(module,exports){function swap(arr,i,j){var tmp=arr[i];arr[i]=arr[j],arr[j]=tmp}function defaultCompare(a,b){return a<b?-1:a>b?1:0}var QuickSelect=function(arr,k,left,right,compare){for(void 0===left&&(left=0),void 0===right&&(right=arr.length-1),void 0===compare&&(compare=defaultCompare);right>left;){if(right-left>600){var n=right-left+1,m=k-left+1,z=Math.log(n),s=.5*Math.exp(2*z/3),sd=.5*Math.sqrt(z*s*(n-s)/n)*(m-n/2<0?-1:1),newLeft=Math.max(left,Math.floor(k-m*s/n+sd)),newRight=Math.min(right,Math.floor(k+(n-m)*s/n+sd));QuickSelect(arr,k,newLeft,newRight,compare)}var t=arr[k],i=left,j=right;for(swap(arr,left,k),compare(arr[right],t)>0&&swap(arr,left,right);i<j;){for(swap(arr,i,j),i++,j--;compare(arr[i],t)<0;)i++;for(;compare(arr[j],t)>0;)j--}0===compare(arr[left],t)?swap(arr,left,j):swap(arr,++j,right),j<=k&&(left=j+1),k<=j&&(right=j-1)}};module.exports=QuickSelect},function(module,exports,__webpack_require__){var GetValue=__webpack_require__(5),Shuffle=__webpack_require__(123),BuildChunk=function(a,b,qty){for(var out=[],aIndex=0;aIndex<a.length;aIndex++)for(var bIndex=0;bIndex<b.length;bIndex++)for(var i=0;i<qty;i++)out.push({a:a[aIndex],b:b[bIndex]});return out};module.exports=function(a,b,options){var max=GetValue(options,"max",0),qty=GetValue(options,"qty",1),random=GetValue(options,"random",!1),randomB=GetValue(options,"randomB",!1),repeat=GetValue(options,"repeat",0),yoyo=GetValue(options,"yoyo",!1),out=[];if(randomB&&Shuffle(b),-1===repeat)if(0===max)repeat=0;else{var total=a.length*b.length*qty;yoyo&&(total*=2),repeat=Math.ceil(max/total)}for(var i=0;i<=repeat;i++){var chunk=BuildChunk(a,b,qty);random&&Shuffle(chunk),out=out.concat(chunk),yoyo&&(chunk.reverse(),out=out.concat(chunk))}return max&&out.splice(max),out}},function(module,exports,__webpack_require__){var Rectangle=__webpack_require__(11);module.exports=function(rectA,rectB,out){void 0===out&&(out=new Rectangle);var x=Math.min(rectA.x,rectB.x),y=Math.min(rectA.y,rectB.y),w=Math.max(rectA.right,rectB.right)-x,h=Math.max(rectA.bottom,rectB.bottom)-y;return out.setTo(x,y,w,h)}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Components=__webpack_require__(12),DOMElementRender=__webpack_require__(963),GameObject=__webpack_require__(13),IsPlainObject=__webpack_require__(7),RemoveFromDOM=__webpack_require__(195),Vector4=__webpack_require__(130),DOMElement=new Class({Extends:GameObject,Mixins:[Components.Alpha,Components.BlendMode,Components.Depth,Components.Origin,Components.ScrollFactor,Components.Transform,Components.Visible,DOMElementRender],initialize:function(scene,x,y,element,style,innerText){GameObject.call(this,scene,"DOMElement"),this.parent=scene.sys.game.domContainer,this.cache=scene.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new Vector4,this.rotate3dAngle="deg",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(x,y),"string"==typeof element?"#"===element[0]?this.setElement(element.substr(1),style,innerText):this.createElement(element,style,innerText):element&&this.setElement(element,style,innerText)},setSkew:function(x,y){return void 0===x&&(x=0),void 0===y&&(y=x),this.skewX=x,this.skewY=y,this},setPerspective:function(value){return this.parent.style.perspective=value+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(value){this.parent.style.perspective=value+"px"}},addListener:function(events){if(this.node){events=events.split(" ");for(var i=0;i<events.length;i++)this.node.addEventListener(events[i],this.handler,!1)}return this},removeListener:function(events){if(this.node){events=events.split(" ");for(var i=0;i<events.length;i++)this.node.removeEventListener(events[i],this.handler)}return this},dispatchNativeEvent:function(event){this.emit(event.type,event)},createElement:function(tagName,style,innerText){return this.setElement(document.createElement(tagName),style,innerText)},setElement:function(element,style,innerText){var target;if(this.removeElement(),"string"==typeof element?("#"===element[0]&&(element=element.substr(1)),target=document.getElementById(element)):"object"==typeof element&&1===element.nodeType&&(target=element),!target)return this;if(this.node=target,style&&IsPlainObject(style))for(var key in style)target.style[key]=style[key];else"string"==typeof style&&(target.style=style);return target.style.zIndex="0",target.style.display="inline",target.style.position="absolute",target.phaser=this,this.parent&&this.parent.appendChild(target),innerText&&(target.innerText=innerText),this.updateSize()},createFromCache:function(key,tagName){var html=this.cache.get(key);return html&&this.createFromHTML(html,tagName),this},createFromHTML:function(html,tagName){void 0===tagName&&(tagName="div"),this.removeElement();var element=document.createElement(tagName);return this.node=element,element.style.zIndex="0",element.style.display="inline",element.style.position="absolute",element.phaser=this,this.parent&&this.parent.appendChild(element),element.innerHTML=html,this.updateSize()},removeElement:function(){return this.node&&(RemoveFromDOM(this.node),this.node=null),this},updateSize:function(){var node=this.node,nodeBounds=node.getBoundingClientRect();return this.width=node.clientWidth,this.height=node.clientHeight,this.displayWidth=nodeBounds.width||0,this.displayHeight=nodeBounds.height||0,this},getChildByProperty:function(property,value){if(this.node)for(var children=this.node.querySelectorAll("*"),i=0;i<children.length;i++)if(children[i][property]===value)return children[i];return null},getChildByID:function(id){return this.getChildByProperty("id",id)},getChildByName:function(name){return this.getChildByProperty("name",name)},setClassName:function(className){return this.node&&(this.node.className=className,this.updateSize()),this},setText:function(text){return this.node&&(this.node.innerText=text,this.updateSize()),this},setHTML:function(html){return this.node&&(this.node.innerHTML=html,this.updateSize()),this},preUpdate:function(){var parent=this.parentContainer,node=this.node;node&&parent&&!parent.willRender()&&(node.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement()}});module.exports=DOMElement},function(module,exports,__webpack_require__){var CSSBlendModes=__webpack_require__(964),GameObject=__webpack_require__(13);module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){var node=src.node,style=node.style;if(!node||!style||GameObject.RENDER_MASK!==src.renderFlags||0!==src.cameraFilter&&src.cameraFilter&camera.id||src.parentContainer&&!src.parentContainer.willRender())node&&(style.display="none");else{var parent=src.parentContainer,alpha=camera.alpha*src.alpha;parent&&(alpha*=parent.alpha);var camMatrix=renderer._tempMatrix1,srcMatrix=renderer._tempMatrix2,calcMatrix=renderer._tempMatrix3,dx=0,dy=0,tx="0%",ty="0%";parentMatrix?(dx=src.width*src.scaleX*src.originX,dy=src.height*src.scaleY*src.originY,srcMatrix.applyITRS(src.x-dx,src.y-dy,src.rotation,src.scaleX,src.scaleY),camMatrix.copyFrom(camera.matrix),camMatrix.multiplyWithOffset(parentMatrix,-camera.scrollX*src.scrollFactorX,-camera.scrollY*src.scrollFactorY),srcMatrix.e=src.x-dx,srcMatrix.f=src.y-dy,camMatrix.multiply(srcMatrix,calcMatrix)):(dx=src.width*src.originX,dy=src.height*src.originY,srcMatrix.applyITRS(src.x-dx,src.y-dy,src.rotation,src.scaleX,src.scaleY),camMatrix.copyFrom(camera.matrix),tx=100*src.originX+"%",ty=100*src.originY+"%",srcMatrix.e-=camera.scrollX*src.scrollFactorX,srcMatrix.f-=camera.scrollY*src.scrollFactorY,camMatrix.multiply(srcMatrix,calcMatrix)),src.transformOnly||(style.display="block",style.opacity=alpha,style.zIndex=src._depth,style.pointerEvents="auto",style.mixBlendMode=CSSBlendModes[src._blendMode]),style.transform=calcMatrix.getCSSMatrix()+" skew("+src.skewX+"rad, "+src.skewY+"rad) rotate3d("+src.rotate3d.x+","+src.rotate3d.y+","+src.rotate3d.z+","+src.rotate3d.w+src.rotate3dAngle+")",style.transformOrigin=tx+" "+ty}}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Components=__webpack_require__(12),GameObject=__webpack_require__(13),ExternRender=__webpack_require__(968),Extern=new Class({Extends:GameObject,Mixins:[Components.Alpha,Components.BlendMode,Components.Depth,Components.Flip,Components.Origin,Components.ScrollFactor,Components.Size,Components.Texture,Components.Tint,Components.Transform,Components.Visible,ExternRender],initialize:function(scene){GameObject.call(this,scene,"Extern")},preUpdate:function(){},render:function(){}});module.exports=Extern},function(module,exports,__webpack_require__){var CircumferencePoint=__webpack_require__(210),FromPercent=__webpack_require__(100),MATH_CONST=__webpack_require__(22),Point=__webpack_require__(4);module.exports=function(ellipse,position,out){void 0===out&&(out=new Point);var angle=FromPercent(position,0,MATH_CONST.PI2);return CircumferencePoint(ellipse,angle,out)}},function(module,exports,__webpack_require__){var Circumference=__webpack_require__(405),CircumferencePoint=__webpack_require__(210),FromPercent=__webpack_require__(100),MATH_CONST=__webpack_require__(22);module.exports=function(ellipse,quantity,stepRate,out){void 0===out&&(out=[]),quantity||(quantity=Circumference(ellipse)/stepRate);for(var i=0;i<quantity;i++){var angle=FromPercent(i/quantity,0,MATH_CONST.PI2);out.push(CircumferencePoint(ellipse,angle))}return out}},function(module,exports){module.exports=function(ellipse){var rx=ellipse.width/2,ry=ellipse.height/2,h=Math.pow(rx-ry,2)/Math.pow(rx+ry,2);return Math.PI*(rx+ry)*(1+3*h/(10+Math.sqrt(4-3*h)))}},function(module,exports,__webpack_require__){var Commands=__webpack_require__(209),SetTransform=__webpack_require__(29);module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix,renderTargetCtx,allowClip){var commandBuffer=src.commandBuffer,commandBufferLength=commandBuffer.length,ctx=renderTargetCtx||renderer.currentContext;if(0!==commandBufferLength&&SetTransform(renderer,ctx,src,camera,parentMatrix)){var lineAlpha=1,fillAlpha=1,lineColor=0,fillColor=0,lineWidth=1,red=0,green=0,blue=0;ctx.beginPath();for(var index=0;index<commandBufferLength;++index){switch(commandBuffer[index]){case Commands.ARC:ctx.arc(commandBuffer[index+1],commandBuffer[index+2],commandBuffer[index+3],commandBuffer[index+4],commandBuffer[index+5],commandBuffer[index+6]),index+=7;break;case Commands.LINE_STYLE:lineWidth=commandBuffer[index+1],lineColor=commandBuffer[index+2],lineAlpha=commandBuffer[index+3],red=(16711680&lineColor)>>>16,green=(65280&lineColor)>>>8,blue=255&lineColor,ctx.strokeStyle="rgba("+red+","+green+","+blue+","+lineAlpha+")",ctx.lineWidth=lineWidth,index+=3;break;case Commands.FILL_STYLE:fillColor=commandBuffer[index+1],fillAlpha=commandBuffer[index+2],red=(16711680&fillColor)>>>16,green=(65280&fillColor)>>>8,blue=255&fillColor,ctx.fillStyle="rgba("+red+","+green+","+blue+","+fillAlpha+")",index+=2;break;case Commands.BEGIN_PATH:ctx.beginPath();break;case Commands.CLOSE_PATH:ctx.closePath();break;case Commands.FILL_PATH:allowClip||ctx.fill();break;case Commands.STROKE_PATH:allowClip||ctx.stroke();break;case Commands.FILL_RECT:allowClip?ctx.rect(commandBuffer[index+1],commandBuffer[index+2],commandBuffer[index+3],commandBuffer[index+4]):ctx.fillRect(commandBuffer[index+1],commandBuffer[index+2],commandBuffer[index+3],commandBuffer[index+4]),index+=4;break;case Commands.FILL_TRIANGLE:ctx.beginPath(),ctx.moveTo(commandBuffer[index+1],commandBuffer[index+2]),ctx.lineTo(commandBuffer[index+3],commandBuffer[index+4]),ctx.lineTo(commandBuffer[index+5],commandBuffer[index+6]),ctx.closePath(),allowClip||ctx.fill(),index+=6;break;case Commands.STROKE_TRIANGLE:ctx.beginPath(),ctx.moveTo(commandBuffer[index+1],commandBuffer[index+2]),ctx.lineTo(commandBuffer[index+3],commandBuffer[index+4]),ctx.lineTo(commandBuffer[index+5],commandBuffer[index+6]),ctx.closePath(),allowClip||ctx.stroke(),index+=6;break;case Commands.LINE_TO:ctx.lineTo(commandBuffer[index+1],commandBuffer[index+2]),index+=2;break;case Commands.MOVE_TO:ctx.moveTo(commandBuffer[index+1],commandBuffer[index+2]),index+=2;break;case Commands.LINE_FX_TO:ctx.lineTo(commandBuffer[index+1],commandBuffer[index+2]),index+=5;break;case Commands.MOVE_FX_TO:ctx.moveTo(commandBuffer[index+1],commandBuffer[index+2]),index+=5;break;case Commands.SAVE:ctx.save();break;case Commands.RESTORE:ctx.restore();break;case Commands.TRANSLATE:ctx.translate(commandBuffer[index+1],commandBuffer[index+2]),index+=2;break;case Commands.SCALE:ctx.scale(commandBuffer[index+1],commandBuffer[index+2]),index+=2;break;case Commands.ROTATE:ctx.rotate(commandBuffer[index+1]),index+=1;break;case Commands.GRADIENT_FILL_STYLE:index+=5;break;case Commands.GRADIENT_LINE_STYLE:index+=6;break;case Commands.SET_TEXTURE:index+=2}}ctx.restore()}}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),GetFastValue=__webpack_require__(1),GravityWell=new Class({initialize:function(x,y,power,epsilon,gravity){if("object"==typeof x){var config=x;x=GetFastValue(config,"x",0),y=GetFastValue(config,"y",0),power=GetFastValue(config,"power",0),epsilon=GetFastValue(config,"epsilon",100),gravity=GetFastValue(config,"gravity",50)}else void 0===x&&(x=0),void 0===y&&(y=0),void 0===power&&(power=0),void 0===epsilon&&(epsilon=100),void 0===gravity&&(gravity=50);this.x=x,this.y=y,this.active=!0,this._gravity=gravity,this._power=0,this._epsilon=0,this.power=power,this.epsilon=epsilon},update:function(particle,delta){var x=this.x-particle.x,y=this.y-particle.y,dSq=x*x+y*y;if(0!==dSq){var d=Math.sqrt(dSq);dSq<this._epsilon&&(dSq=this._epsilon);var factor=this._power*delta/(dSq*d)*100;particle.velocityX+=x*factor,particle.velocityY+=y*factor}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(value){this._epsilon=value*value}},power:{get:function(){return this._power/this._gravity},set:function(value){this._power=value*this._gravity}},gravity:{get:function(){return this._gravity},set:function(value){var pwr=this.power;this._gravity=value,this.power=pwr}}});module.exports=GravityWell},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),DegToRad=__webpack_require__(41),DistanceBetween=__webpack_require__(65),Particle=new Class({initialize:function(emitter){this.emitter=emitter,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return this.lifeCurrent>0},resetPosition:function(){this.x=0,this.y=0},fire:function(x,y){var emitter=this.emitter;this.frame=emitter.getFrame(),emitter.emitZone&&emitter.emitZone.getPoint(this),void 0===x?(emitter.follow&&(this.x+=emitter.follow.x+emitter.followOffset.x),this.x+=emitter.x.onEmit(this,"x")):this.x+=x,void 0===y?(emitter.follow&&(this.y+=emitter.follow.y+emitter.followOffset.y),this.y+=emitter.y.onEmit(this,"y")):this.y+=y,this.life=emitter.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var sx=emitter.speedX.onEmit(this,"speedX"),sy=emitter.speedY?emitter.speedY.onEmit(this,"speedY"):sx;if(emitter.radial){var rad=DegToRad(emitter.angle.onEmit(this,"angle"));this.velocityX=Math.cos(rad)*Math.abs(sx),this.velocityY=Math.sin(rad)*Math.abs(sy)}else if(emitter.moveTo){var mx=emitter.moveToX.onEmit(this,"moveToX"),my=emitter.moveToY?emitter.moveToY.onEmit(this,"moveToY"):mx,angle=Math.atan2(my-this.y,mx-this.x),speed=DistanceBetween(this.x,this.y,mx,my)/(this.life/1e3);this.velocityX=Math.cos(angle)*speed,this.velocityY=Math.sin(angle)*speed}else this.velocityX=sx,this.velocityY=sy;emitter.acceleration&&(this.accelerationX=emitter.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=emitter.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=emitter.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=emitter.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=emitter.delay.onEmit(this,"delay"),this.scaleX=emitter.scaleX.onEmit(this,"scaleX"),this.scaleY=emitter.scaleY?emitter.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=emitter.rotate.onEmit(this,"rotate"),this.rotation=DegToRad(this.angle),this.bounce=emitter.bounce.onEmit(this,"bounce"),this.alpha=emitter.alpha.onEmit(this,"alpha"),this.tint=emitter.tint.onEmit(this,"tint")},computeVelocity:function(emitter,delta,step,processors){var vx=this.velocityX,vy=this.velocityY,ax=this.accelerationX,ay=this.accelerationY,mx=this.maxVelocityX,my=this.maxVelocityY;vx+=emitter.gravityX*step,vy+=emitter.gravityY*step,ax&&(vx+=ax*step),ay&&(vy+=ay*step),vx>mx?vx=mx:vx<-mx&&(vx=-mx),vy>my?vy=my:vy<-my&&(vy=-my),this.velocityX=vx,this.velocityY=vy;for(var i=0;i<processors.length;i++)processors[i].update(this,delta,step)},checkBounds:function(emitter){var bounds=emitter.bounds,bounce=-this.bounce;this.x<bounds.x&&emitter.collideLeft?(this.x=bounds.x,this.velocityX*=bounce):this.x>bounds.right&&emitter.collideRight&&(this.x=bounds.right,this.velocityX*=bounce),this.y<bounds.y&&emitter.collideTop?(this.y=bounds.y,this.velocityY*=bounce):this.y>bounds.bottom&&emitter.collideBottom&&(this.y=bounds.bottom,this.velocityY*=bounce)},update:function(delta,step,processors){if(this.delayCurrent>0)return this.delayCurrent-=delta,!1;var emitter=this.emitter,t=1-this.lifeCurrent/this.life;return this.lifeT=t,this.computeVelocity(emitter,delta,step,processors),this.x+=this.velocityX*step,this.y+=this.velocityY*step,emitter.bounds&&this.checkBounds(emitter),emitter.deathZone&&emitter.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=emitter.scaleX.onUpdate(this,"scaleX",t,this.scaleX),emitter.scaleY?this.scaleY=emitter.scaleY.onUpdate(this,"scaleY",t,this.scaleY):this.scaleY=this.scaleX,this.angle=emitter.rotate.onUpdate(this,"rotate",t,this.angle),this.rotation=DegToRad(this.angle),this.alpha=emitter.alpha.onUpdate(this,"alpha",t,this.alpha),this.tint=emitter.tint.onUpdate(this,"tint",t,this.tint),this.lifeCurrent-=delta,this.lifeCurrent<=0)}});module.exports=Particle},function(module,exports,__webpack_require__){var BlendModes=__webpack_require__(43),Class=__webpack_require__(0),Components=__webpack_require__(12),DeathZone=__webpack_require__(410),EdgeZone=__webpack_require__(411),EmitterOp=__webpack_require__(980),GetFastValue=__webpack_require__(1),GetRandom=__webpack_require__(202),HasAny=__webpack_require__(412),HasValue=__webpack_require__(93),Particle=__webpack_require__(408),RandomZone=__webpack_require__(413),Rectangle=__webpack_require__(11),StableSort=__webpack_require__(140),Vector2=__webpack_require__(3),Wrap=__webpack_require__(64),ParticleEmitter=new Class({Mixins:[Components.BlendMode,Components.Mask,Components.ScrollFactor,Components.Visible],initialize:function(manager,config){this.manager=manager,this.texture=manager.texture,this.frames=[manager.defaultFrame],this.defaultFrame=manager.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=Particle,this.x=new EmitterOp(config,"x",0,!0),this.y=new EmitterOp(config,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new EmitterOp(config,"accelerationX",0,!0),this.accelerationY=new EmitterOp(config,"accelerationY",0,!0),this.maxVelocityX=new EmitterOp(config,"maxVelocityX",1e4,!0),this.maxVelocityY=new EmitterOp(config,"maxVelocityY",1e4,!0),this.speedX=new EmitterOp(config,"speedX",0,!0),this.speedY=new EmitterOp(config,"speedY",0,!0),this.moveTo=!1,this.moveToX=new EmitterOp(config,"moveToX",0,!0),this.moveToY=new EmitterOp(config,"moveToY",0,!0),this.bounce=new EmitterOp(config,"bounce",0,!0),this.scaleX=new EmitterOp(config,"scaleX",1),this.scaleY=new EmitterOp(config,"scaleY",1),this.tint=new EmitterOp(config,"tint",4294967295),this.alpha=new EmitterOp(config,"alpha",1),this.lifespan=new EmitterOp(config,"lifespan",1e3,!0),this.angle=new EmitterOp(config,"angle",{min:0,max:360},!0),this.rotate=new EmitterOp(config,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new EmitterOp(config,"quantity",1,!0),this.delay=new EmitterOp(config,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=BlendModes.NORMAL,this.follow=null,this.followOffset=new Vector2,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,config&&this.fromJSON(config)},fromJSON:function(config){if(!config)return this;var i=0,key="";for(i=0;i<this.configFastMap.length;i++)key=this.configFastMap[i],HasValue(config,key)&&(this[key]=GetFastValue(config,key));for(i=0;i<this.configOpMap.length;i++)key=this.configOpMap[i],HasValue(config,key)&&this[key].loadConfig(config);if(this.acceleration=0!==this.accelerationX.propertyValue||0!==this.accelerationY.propertyValue,this.moveTo=0!==this.moveToX.propertyValue||0!==this.moveToY.propertyValue,HasValue(config,"speed")&&(this.speedX.loadConfig(config,"speed"),this.speedY=null),(HasAny(config,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),HasValue(config,"scale")&&(this.scaleX.loadConfig(config,"scale"),this.scaleY=null),HasValue(config,"callbackScope")){var callbackScope=GetFastValue(config,"callbackScope",null);this.emitCallbackScope=callbackScope,this.deathCallbackScope=callbackScope}return HasValue(config,"emitZone")&&this.setEmitZone(config.emitZone),HasValue(config,"deathZone")&&this.setDeathZone(config.deathZone),HasValue(config,"bounds")&&this.setBounds(config.bounds),HasValue(config,"followOffset")&&this.followOffset.setFromObject(GetFastValue(config,"followOffset",0)),HasValue(config,"frame")&&this.setFrame(config.frame),this},toJSON:function(output){void 0===output&&(output={});var i=0,key="";for(i=0;i<this.configFastMap.length;i++)output[key=this.configFastMap[i]]=this[key];for(i=0;i<this.configOpMap.length;i++)this[key=this.configOpMap[i]]&&(output[key]=this[key].toJSON());return this.speedY||(delete output.speedX,output.speed=this.speedX.toJSON()),this.scaleY||(delete output.scaleX,output.scale=this.scaleX.toJSON()),output},startFollow:function(target,offsetX,offsetY,trackVisible){return void 0===offsetX&&(offsetX=0),void 0===offsetY&&(offsetY=0),void 0===trackVisible&&(trackVisible=!1),this.follow=target,this.followOffset.set(offsetX,offsetY),this.trackVisible=trackVisible,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(1===this.frames.length)return this.defaultFrame;if(this.randomFrame)return GetRandom(this.frames);var frame=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=Wrap(this.currentFrame+1,0,this._frameLength)),frame},setFrame:function(frames,pickRandom,quantity){void 0===pickRandom&&(pickRandom=!0),void 0===quantity&&(quantity=1),this.randomFrame=pickRandom,this.frameQuantity=quantity,this.currentFrame=0,this._frameCounter=0;var t=typeof frames;if(Array.isArray(frames)||"string"===t||"number"===t)this.manager.setEmitterFrames(frames,this);else if("object"===t){var frameConfig=frames;(frames=GetFastValue(frameConfig,"frames",null))&&this.manager.setEmitterFrames(frames,this);var isCycle=GetFastValue(frameConfig,"cycle",!1);this.randomFrame=!isCycle,this.frameQuantity=GetFastValue(frameConfig,"quantity",quantity)}return this._frameLength=this.frames.length,1===this._frameLength&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(value){return void 0===value&&(value=!0),this.radial=value,this},setPosition:function(x,y){return this.x.onChange(x),this.y.onChange(y),this},setBounds:function(x,y,width,height){if("object"==typeof x){var obj=x;x=obj.x,y=obj.y,width=HasValue(obj,"w")?obj.w:obj.width,height=HasValue(obj,"h")?obj.h:obj.height}return this.bounds?this.bounds.setTo(x,y,width,height):this.bounds=new Rectangle(x,y,width,height),this},setSpeedX:function(value){return this.speedX.onChange(value),this.radial=!1,this},setSpeedY:function(value){return this.speedY&&(this.speedY.onChange(value),this.radial=!1),this},setSpeed:function(value){return this.speedX.onChange(value),this.speedY=null,this.radial=!0,this},setScaleX:function(value){return this.scaleX.onChange(value),this},setScaleY:function(value){return this.scaleY.onChange(value),this},setScale:function(value){return this.scaleX.onChange(value),this.scaleY=null,this},setGravityX:function(value){return this.gravityX=value,this},setGravityY:function(value){return this.gravityY=value,this},setGravity:function(x,y){return this.gravityX=x,this.gravityY=y,this},setAlpha:function(value){return this.alpha.onChange(value),this},setEmitterAngle:function(value){return this.angle.onChange(value),this},setAngle:function(value){return this.angle.onChange(value),this},setLifespan:function(value){return this.lifespan.onChange(value),this},setQuantity:function(quantity){return this.quantity.onChange(quantity),this},setFrequency:function(frequency,quantity){return this.frequency=frequency,this._counter=0,quantity&&this.quantity.onChange(quantity),this},setEmitZone:function(zoneConfig){if(void 0===zoneConfig)this.emitZone=null;else{var type=GetFastValue(zoneConfig,"type","random"),source=GetFastValue(zoneConfig,"source",null);switch(type){case"random":this.emitZone=new RandomZone(source);break;case"edge":var quantity=GetFastValue(zoneConfig,"quantity",1),stepRate=GetFastValue(zoneConfig,"stepRate",0),yoyo=GetFastValue(zoneConfig,"yoyo",!1),seamless=GetFastValue(zoneConfig,"seamless",!0);this.emitZone=new EdgeZone(source,quantity,stepRate,yoyo,seamless)}}return this},setDeathZone:function(zoneConfig){if(void 0===zoneConfig)this.deathZone=null;else{var type=GetFastValue(zoneConfig,"type","onEnter"),source=GetFastValue(zoneConfig,"source",null);if(source&&"function"==typeof source.contains){var killOnEnter="onEnter"===type;this.deathZone=new DeathZone(source,killOnEnter)}}return this},reserve:function(particleCount){for(var dead=this.dead,i=0;i<particleCount;i++)dead.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(callback,context){return void 0===callback?(this.emitCallback=null,this.emitCallbackScope=null):"function"==typeof callback&&(this.emitCallback=callback,context&&(this.emitCallbackScope=context)),this},onParticleDeath:function(callback,context){return void 0===callback?(this.deathCallback=null,this.deathCallbackScope=null):"function"==typeof callback&&(this.deathCallback=callback,context&&(this.deathCallbackScope=context)),this},killAll:function(){for(var dead=this.dead,alive=this.alive;alive.length>0;)dead.push(alive.pop());return this},forEachAlive:function(callback,context){for(var alive=this.alive,length=alive.length,index=0;index<length;++index)callback.call(context,alive[index],this);return this},forEachDead:function(callback,context){for(var dead=this.dead,length=dead.length,index=0;index<length;++index)callback.call(context,dead[index],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},depthSort:function(){return StableSort.inplace(this.alive,this.depthSortCallback),this},flow:function(frequency,count){return void 0===count&&(count=1),this.frequency=frequency,this.quantity.onChange(count),this.start()},explode:function(count,x,y){return this.frequency=-1,this.emitParticle(count,x,y)},emitParticleAt:function(x,y,count){return this.emitParticle(count,x,y)},emitParticle:function(count,x,y){if(!this.atLimit()){void 0===count&&(count=this.quantity.onEmit());for(var dead=this.dead,i=0;i<count;i++){var particle=dead.pop();if(particle||(particle=new this.particleClass(this)),particle.fire(x,y),this.particleBringToTop?this.alive.push(particle):this.alive.unshift(particle),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,particle,this),this.atLimit())break}return particle}},preUpdate:function(time,delta){var step=(delta*=this.timeScale)/1e3;this.trackVisible&&(this.visible=this.follow.visible);var processors=this.manager.getProcessors(),particles=this.alive,dead=this.dead,i=0,rip=[],length=particles.length;for(i=0;i<length;i++){var particle=particles[i];particle.update(delta,step,processors)&&rip.push({index:i,particle:particle})}if((length=rip.length)>0){var deathCallback=this.deathCallback,deathCallbackScope=this.deathCallbackScope;for(i=length-1;i>=0;i--){var entry=rip[i];particles.splice(entry.index,1),dead.push(entry.particle),deathCallback&&deathCallback.call(deathCallbackScope,entry.particle),entry.particle.resetPosition()}}this.on&&(0===this.frequency?this.emitParticle():this.frequency>0&&(this._counter-=delta,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(a,b){return a.y-b.y}});module.exports=ParticleEmitter},function(module,exports,__webpack_require__){var DeathZone=new(__webpack_require__(0))({initialize:function(source,killOnEnter){this.source=source,this.killOnEnter=killOnEnter},willKill:function(particle){var withinZone=this.source.contains(particle.x,particle.y);return withinZone&&this.killOnEnter||!withinZone&&!this.killOnEnter}});module.exports=DeathZone},function(module,exports,__webpack_require__){var EdgeZone=new(__webpack_require__(0))({initialize:function(source,quantity,stepRate,yoyo,seamless){void 0===yoyo&&(yoyo=!1),void 0===seamless&&(seamless=!0),this.source=source,this.points=[],this.quantity=quantity,this.stepRate=stepRate,this.yoyo=yoyo,this.counter=-1,this.seamless=seamless,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var a=this.points[0],b=this.points[this.points.length-1];a.x===b.x&&a.y===b.y&&this.points.pop()}var oldLength=this._length;return this._length=this.points.length,this._length<oldLength&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(source){return this.source=source,this.updateSource()},getPoint:function(particle){0===this._direction?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,-1===this.counter&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var point=this.points[this.counter];point&&(particle.x=point.x,particle.y=point.y)}});module.exports=EdgeZone},function(module,exports){module.exports=function(source,keys){for(var i=0;i<keys.length;i++)if(source.hasOwnProperty(keys[i]))return!0;return!1}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Vector2=__webpack_require__(3),RandomZone=new Class({initialize:function(source){this.source=source,this._tempVec=new Vector2},getPoint:function(particle){var vec=this._tempVec;this.source.getRandomPoint(vec),particle.x=vec.x,particle.y=vec.y}});module.exports=RandomZone},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Components=__webpack_require__(12),Sprite=__webpack_require__(57),PathFollower=new Class({Extends:Sprite,Mixins:[Components.PathFollower],initialize:function(scene,path,x,y,texture,frame){Sprite.call(this,scene,x,y,texture,frame),this.path=path},preUpdate:function(time,delta){this.anims.update(time,delta),this.pathUpdate(time)}});module.exports=PathFollower},function(module,exports){module.exports=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(c){var r=16*Math.random()|0;return("x"===c?r:3&r|8).toString(16)}))}},function(module,exports,__webpack_require__){var ArcRender=__webpack_require__(1e3),Class=__webpack_require__(0),DegToRad=__webpack_require__(41),Earcut=__webpack_require__(70),GeomCircle=__webpack_require__(84),MATH_CONST=__webpack_require__(22),Shape=__webpack_require__(33),Arc=new Class({Extends:Shape,Mixins:[ArcRender],initialize:function(scene,x,y,radius,startAngle,endAngle,anticlockwise,fillColor,fillAlpha){void 0===x&&(x=0),void 0===y&&(y=0),void 0===radius&&(radius=128),void 0===startAngle&&(startAngle=0),void 0===endAngle&&(endAngle=360),void 0===anticlockwise&&(anticlockwise=!1),Shape.call(this,scene,"Arc",new GeomCircle(0,0,radius)),this._startAngle=startAngle,this._endAngle=endAngle,this._anticlockwise=anticlockwise,this._iterations=.01,this.setPosition(x,y);var diameter=2*this.geom.radius;this.setSize(diameter,diameter),void 0!==fillColor&&this.setFillStyle(fillColor,fillAlpha),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(value){this._iterations=value,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(value){this.geom.radius=value;var diameter=2*value;this.setSize(diameter,diameter),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(value){this._startAngle=value,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(value){this._endAngle=value,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(value){this._anticlockwise=value,this.updateData()}},setRadius:function(value){return this.radius=value,this},setIterations:function(value){return void 0===value&&(value=.01),this.iterations=value,this},setStartAngle:function(angle,anticlockwise){return this._startAngle=angle,void 0!==anticlockwise&&(this._anticlockwise=anticlockwise),this.updateData()},setEndAngle:function(angle,anticlockwise){return this._endAngle=angle,void 0!==anticlockwise&&(this._anticlockwise=anticlockwise),this.updateData()},updateData:function(){var step=this._iterations,iteration=step,radius=this.geom.radius,startAngle=DegToRad(this._startAngle),endAngle=DegToRad(this._endAngle),x=radius,y=radius;endAngle-=startAngle,this._anticlockwise?endAngle<-MATH_CONST.PI2?endAngle=-MATH_CONST.PI2:endAngle>0&&(endAngle=-MATH_CONST.PI2+endAngle%MATH_CONST.PI2):endAngle>MATH_CONST.PI2?endAngle=MATH_CONST.PI2:endAngle<0&&(endAngle=MATH_CONST.PI2+endAngle%MATH_CONST.PI2);for(var ta,path=[x+Math.cos(startAngle)*radius,y+Math.sin(startAngle)*radius];iteration<1;)ta=endAngle*iteration+startAngle,path.push(x+Math.cos(ta)*radius,y+Math.sin(ta)*radius),iteration+=step;return ta=endAngle+startAngle,path.push(x+Math.cos(ta)*radius,y+Math.sin(ta)*radius),path.push(x+Math.cos(startAngle)*radius,y+Math.sin(startAngle)*radius),this.pathIndexes=Earcut(path),this.pathData=path,this}});module.exports=Arc},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),CurveRender=__webpack_require__(1003),Earcut=__webpack_require__(70),Rectangle=__webpack_require__(11),Shape=__webpack_require__(33),Curve=new Class({Extends:Shape,Mixins:[CurveRender],initialize:function(scene,x,y,curve,fillColor,fillAlpha){void 0===x&&(x=0),void 0===y&&(y=0),Shape.call(this,scene,"Curve",curve),this._smoothness=32,this._curveBounds=new Rectangle,this.closePath=!1,this.setPosition(x,y),void 0!==fillColor&&this.setFillStyle(fillColor,fillAlpha),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(value){this._smoothness=value,this.updateData()}},setSmoothness:function(value){return this._smoothness=value,this.updateData()},updateData:function(){var bounds=this._curveBounds,smoothness=this._smoothness;this.geom.getBounds(bounds,smoothness),this.setSize(bounds.width,bounds.height),this.updateDisplayOrigin();for(var path=[],points=this.geom.getPoints(smoothness),i=0;i<points.length;i++)path.push(points[i].x,points[i].y);return path.push(points[0].x,points[0].y),this.pathIndexes=Earcut(path),this.pathData=path,this}});module.exports=Curve},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Earcut=__webpack_require__(70),EllipseRender=__webpack_require__(1006),GeomEllipse=__webpack_require__(107),Shape=__webpack_require__(33),Ellipse=new Class({Extends:Shape,Mixins:[EllipseRender],initialize:function(scene,x,y,width,height,fillColor,fillAlpha){void 0===x&&(x=0),void 0===y&&(y=0),void 0===width&&(width=128),void 0===height&&(height=128),Shape.call(this,scene,"Ellipse",new GeomEllipse(width/2,height/2,width,height)),this._smoothness=64,this.setPosition(x,y),this.width=width,this.height=height,void 0!==fillColor&&this.setFillStyle(fillColor,fillAlpha),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(value){this._smoothness=value,this.updateData()}},setSize:function(width,height){return this.geom.setSize(width,height),this.updateData()},setSmoothness:function(value){return this._smoothness=value,this.updateData()},updateData:function(){for(var path=[],points=this.geom.getPoints(this._smoothness),i=0;i<points.length;i++)path.push(points[i].x,points[i].y);return path.push(points[0].x,points[0].y),this.pathIndexes=Earcut(path),this.pathData=path,this}});module.exports=Ellipse},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Shape=__webpack_require__(33),GridRender=__webpack_require__(1009),Grid=new Class({Extends:Shape,Mixins:[GridRender],initialize:function(scene,x,y,width,height,cellWidth,cellHeight,fillColor,fillAlpha,outlineFillColor,outlineFillAlpha){void 0===x&&(x=0),void 0===y&&(y=0),void 0===width&&(width=128),void 0===height&&(height=128),void 0===cellWidth&&(cellWidth=32),void 0===cellHeight&&(cellHeight=32),Shape.call(this,scene,"Grid",null),this.cellWidth=cellWidth,this.cellHeight=cellHeight,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(x,y),this.setSize(width,height),void 0!==fillColor&&this.setFillStyle(fillColor,fillAlpha),void 0!==outlineFillColor&&this.setOutlineStyle(outlineFillColor,outlineFillAlpha),this.updateDisplayOrigin()},setFillStyle:function(fillColor,fillAlpha){return void 0===fillAlpha&&(fillAlpha=1),void 0===fillColor?this.showCells=!1:(this.fillColor=fillColor,this.fillAlpha=fillAlpha,this.showCells=!0),this},setAltFillStyle:function(fillColor,fillAlpha){return void 0===fillAlpha&&(fillAlpha=1),void 0===fillColor?this.showAltCells=!1:(this.altFillColor=fillColor,this.altFillAlpha=fillAlpha,this.showAltCells=!0),this},setOutlineStyle:function(fillColor,fillAlpha){return void 0===fillAlpha&&(fillAlpha=1),void 0===fillColor?this.showOutline=!1:(this.outlineFillColor=fillColor,this.outlineFillAlpha=fillAlpha,this.showOutline=!0),this}});module.exports=Grid},function(module,exports,__webpack_require__){var IsoBoxRender=__webpack_require__(1012),Class=__webpack_require__(0),Shape=__webpack_require__(33),IsoBox=new Class({Extends:Shape,Mixins:[IsoBoxRender],initialize:function(scene,x,y,size,height,fillTop,fillLeft,fillRight){void 0===x&&(x=0),void 0===y&&(y=0),void 0===size&&(size=48),void 0===height&&(height=32),void 0===fillTop&&(fillTop=15658734),void 0===fillLeft&&(fillLeft=10066329),void 0===fillRight&&(fillRight=13421772),Shape.call(this,scene,"IsoBox",null),this.projection=4,this.fillTop=fillTop,this.fillLeft=fillLeft,this.fillRight=fillRight,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(x,y),this.setSize(size,height),this.updateDisplayOrigin()},setProjection:function(value){return this.projection=value,this},setFaces:function(showTop,showLeft,showRight){return void 0===showTop&&(showTop=!0),void 0===showLeft&&(showLeft=!0),void 0===showRight&&(showRight=!0),this.showTop=showTop,this.showLeft=showLeft,this.showRight=showRight,this},setFillStyle:function(fillTop,fillLeft,fillRight){return this.fillTop=fillTop,this.fillLeft=fillLeft,this.fillRight=fillRight,this.isFilled=!0,this}});module.exports=IsoBox},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),IsoTriangleRender=__webpack_require__(1015),Shape=__webpack_require__(33),IsoTriangle=new Class({Extends:Shape,Mixins:[IsoTriangleRender],initialize:function(scene,x,y,size,height,reversed,fillTop,fillLeft,fillRight){void 0===x&&(x=0),void 0===y&&(y=0),void 0===size&&(size=48),void 0===height&&(height=32),void 0===reversed&&(reversed=!1),void 0===fillTop&&(fillTop=15658734),void 0===fillLeft&&(fillLeft=10066329),void 0===fillRight&&(fillRight=13421772),Shape.call(this,scene,"IsoTriangle",null),this.projection=4,this.fillTop=fillTop,this.fillLeft=fillLeft,this.fillRight=fillRight,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=reversed,this.isFilled=!0,this.setPosition(x,y),this.setSize(size,height),this.updateDisplayOrigin()},setProjection:function(value){return this.projection=value,this},setReversed:function(reversed){return this.isReversed=reversed,this},setFaces:function(showTop,showLeft,showRight){return void 0===showTop&&(showTop=!0),void 0===showLeft&&(showLeft=!0),void 0===showRight&&(showRight=!0),this.showTop=showTop,this.showLeft=showLeft,this.showRight=showRight,this},setFillStyle:function(fillTop,fillLeft,fillRight){return this.fillTop=fillTop,this.fillLeft=fillLeft,this.fillRight=fillRight,this.isFilled=!0,this}});module.exports=IsoTriangle},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Shape=__webpack_require__(33),GeomLine=__webpack_require__(62),LineRender=__webpack_require__(1018),Line=new Class({Extends:Shape,Mixins:[LineRender],initialize:function(scene,x,y,x1,y1,x2,y2,strokeColor,strokeAlpha){void 0===x&&(x=0),void 0===y&&(y=0),void 0===x1&&(x1=0),void 0===y1&&(y1=0),void 0===x2&&(x2=128),void 0===y2&&(y2=0),Shape.call(this,scene,"Line",new GeomLine(x1,y1,x2,y2));var width=this.geom.right-this.geom.left,height=this.geom.bottom-this.geom.top;this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(x,y),this.setSize(width,height),void 0!==strokeColor&&this.setStrokeStyle(1,strokeColor,strokeAlpha),this.updateDisplayOrigin()},setLineWidth:function(startWidth,endWidth){return void 0===endWidth&&(endWidth=startWidth),this._startWidth=startWidth,this._endWidth=endWidth,this.lineWidth=startWidth,this},setTo:function(x1,y1,x2,y2){return this.geom.setTo(x1,y1,x2,y2),this}});module.exports=Line},function(module,exports,__webpack_require__){var PolygonRender=__webpack_require__(1021),Class=__webpack_require__(0),Earcut=__webpack_require__(70),GetAABB=__webpack_require__(424),GeomPolygon=__webpack_require__(215),Shape=__webpack_require__(33),Smooth=__webpack_require__(427),Polygon=new Class({Extends:Shape,Mixins:[PolygonRender],initialize:function(scene,x,y,points,fillColor,fillAlpha){void 0===x&&(x=0),void 0===y&&(y=0),Shape.call(this,scene,"Polygon",new GeomPolygon(points));var bounds=GetAABB(this.geom);this.setPosition(x,y),this.setSize(bounds.width,bounds.height),void 0!==fillColor&&this.setFillStyle(fillColor,fillAlpha),this.updateDisplayOrigin(),this.updateData()},smooth:function(iterations){void 0===iterations&&(iterations=1);for(var i=0;i<iterations;i++)Smooth(this.geom);return this.updateData()},updateData:function(){for(var path=[],points=this.geom.points,i=0;i<points.length;i++)path.push(points[i].x,points[i].y);return path.push(points[0].x,points[0].y),this.pathIndexes=Earcut(path),this.pathData=path,this}});module.exports=Polygon},function(module,exports,__webpack_require__){var Rectangle=__webpack_require__(11);module.exports=function(polygon,out){void 0===out&&(out=new Rectangle);for(var p,minX=1/0,minY=1/0,maxX=-minX,maxY=-minY,i=0;i<polygon.points.length;i++)p=polygon.points[i],minX=Math.min(minX,p.x),minY=Math.min(minY,p.y),maxX=Math.max(maxX,p.x),maxY=Math.max(maxY,p.y);return out.x=minX,out.y=minY,out.width=maxX-minX,out.height=maxY-minY,out}},function(module,exports,__webpack_require__){var Length=__webpack_require__(63),Line=__webpack_require__(62),Perimeter=__webpack_require__(426);module.exports=function(polygon,quantity,stepRate,out){void 0===out&&(out=[]);var points=polygon.points,perimeter=Perimeter(polygon);quantity||(quantity=perimeter/stepRate);for(var i=0;i<quantity;i++)for(var position=perimeter*(i/quantity),accumulatedPerimeter=0,j=0;j<points.length;j++){var pointA=points[j],pointB=points[(j+1)%points.length],line=new Line(pointA.x,pointA.y,pointB.x,pointB.y),length=Length(line);if(!(position<accumulatedPerimeter||position>accumulatedPerimeter+length)){var point=line.getPoint((position-accumulatedPerimeter)/length);out.push(point);break}accumulatedPerimeter+=length}return out}},function(module,exports,__webpack_require__){var Length=__webpack_require__(63),Line=__webpack_require__(62);module.exports=function(polygon){for(var points=polygon.points,perimeter=0,i=0;i<points.length;i++){var pointA=points[i],pointB=points[(i+1)%points.length],line=new Line(pointA.x,pointA.y,pointB.x,pointB.y);perimeter+=Length(line)}return perimeter}},function(module,exports){var copy=function(out,a){return out[0]=a[0],out[1]=a[1],out};module.exports=function(polygon){var i,points=[],data=polygon.points;for(i=0;i<data.length;i++)points.push([data[i].x,data[i].y]);var output=[];for(points.length>0&&output.push(copy([0,0],points[0])),i=0;i<points.length-1;i++){var p0=points[i],p1=points[i+1],p0x=p0[0],p0y=p0[1],p1x=p1[0],p1y=p1[1];output.push([.85*p0x+.15*p1x,.85*p0y+.15*p1y]),output.push([.15*p0x+.85*p1x,.15*p0y+.85*p1y])}return points.length>1&&output.push(copy([0,0],points[points.length-1])),polygon.setTo(output)}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),GeomRectangle=__webpack_require__(11),Shape=__webpack_require__(33),RectangleRender=__webpack_require__(1024),Rectangle=new Class({Extends:Shape,Mixins:[RectangleRender],initialize:function(scene,x,y,width,height,fillColor,fillAlpha){void 0===x&&(x=0),void 0===y&&(y=0),void 0===width&&(width=128),void 0===height&&(height=128),Shape.call(this,scene,"Rectangle",new GeomRectangle(0,0,width,height)),this.setPosition(x,y),this.setSize(width,height),void 0!==fillColor&&this.setFillStyle(fillColor,fillAlpha),this.updateDisplayOrigin(),this.updateData()},updateData:function(){var path=[],rect=this.geom,line=this._tempLine;return rect.getLineA(line),path.push(line.x1,line.y1,line.x2,line.y2),rect.getLineB(line),path.push(line.x2,line.y2),rect.getLineC(line),path.push(line.x2,line.y2),rect.getLineD(line),path.push(line.x2,line.y2),this.pathData=path,this}});module.exports=Rectangle},function(module,exports,__webpack_require__){var StarRender=__webpack_require__(1027),Class=__webpack_require__(0),Earcut=__webpack_require__(70),Shape=__webpack_require__(33),Star=new Class({Extends:Shape,Mixins:[StarRender],initialize:function(scene,x,y,points,innerRadius,outerRadius,fillColor,fillAlpha){void 0===x&&(x=0),void 0===y&&(y=0),void 0===points&&(points=5),void 0===innerRadius&&(innerRadius=32),void 0===outerRadius&&(outerRadius=64),Shape.call(this,scene,"Star",null),this._points=points,this._innerRadius=innerRadius,this._outerRadius=outerRadius,this.setPosition(x,y),this.setSize(2*outerRadius,2*outerRadius),void 0!==fillColor&&this.setFillStyle(fillColor,fillAlpha),this.updateDisplayOrigin(),this.updateData()},setPoints:function(value){return this._points=value,this.updateData()},setInnerRadius:function(value){return this._innerRadius=value,this.updateData()},setOuterRadius:function(value){return this._outerRadius=value,this.updateData()},points:{get:function(){return this._points},set:function(value){this._points=value,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(value){this._innerRadius=value,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(value){this._outerRadius=value,this.updateData()}},updateData:function(){var path=[],points=this._points,innerRadius=this._innerRadius,outerRadius=this._outerRadius,rot=Math.PI/2*3,step=Math.PI/points,x=outerRadius,y=outerRadius;path.push(x,y+-outerRadius);for(var i=0;i<points;i++)path.push(x+Math.cos(rot)*outerRadius,y+Math.sin(rot)*outerRadius),rot+=step,path.push(x+Math.cos(rot)*innerRadius,y+Math.sin(rot)*innerRadius),rot+=step;return path.push(x,y+-outerRadius),this.pathIndexes=Earcut(path),this.pathData=path,this}});module.exports=Star},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Shape=__webpack_require__(33),GeomTriangle=__webpack_require__(75),TriangleRender=__webpack_require__(1030),Triangle=new Class({Extends:Shape,Mixins:[TriangleRender],initialize:function(scene,x,y,x1,y1,x2,y2,x3,y3,fillColor,fillAlpha){void 0===x&&(x=0),void 0===y&&(y=0),void 0===x1&&(x1=0),void 0===y1&&(y1=128),void 0===x2&&(x2=64),void 0===y2&&(y2=0),void 0===x3&&(x3=128),void 0===y3&&(y3=128),Shape.call(this,scene,"Triangle",new GeomTriangle(x1,y1,x2,y2,x3,y3));var width=this.geom.right-this.geom.left,height=this.geom.bottom-this.geom.top;this.setPosition(x,y),this.setSize(width,height),void 0!==fillColor&&this.setFillStyle(fillColor,fillAlpha),this.updateDisplayOrigin(),this.updateData()},setTo:function(x1,y1,x2,y2,x3,y3){return this.geom.setTo(x1,y1,x2,y2,x3,y3),this.updateData()},updateData:function(){var path=[],tri=this.geom,line=this._tempLine;return tri.getLineA(line),path.push(line.x1,line.y1,line.x2,line.y2),tri.getLineB(line),path.push(line.x2,line.y2),tri.getLineC(line),path.push(line.x2,line.y2),this.pathData=path,this}});module.exports=Triangle},function(module,exports,__webpack_require__){var Point=__webpack_require__(4),Length=__webpack_require__(63);module.exports=function(triangle,position,out){void 0===out&&(out=new Point);var line1=triangle.getLineA(),line2=triangle.getLineB(),line3=triangle.getLineC();if(position<=0||position>=1)return out.x=line1.x1,out.y=line1.y1,out;var length1=Length(line1),length2=Length(line2),length3=Length(line3),p=(length1+length2+length3)*position,localPosition=0;return p<length1?(localPosition=p/length1,out.x=line1.x1+(line1.x2-line1.x1)*localPosition,out.y=line1.y1+(line1.y2-line1.y1)*localPosition):p>length1+length2?(localPosition=(p-=length1+length2)/length3,out.x=line3.x1+(line3.x2-line3.x1)*localPosition,out.y=line3.y1+(line3.y2-line3.y1)*localPosition):(localPosition=(p-=length1)/length2,out.x=line2.x1+(line2.x2-line2.x1)*localPosition,out.y=line2.y1+(line2.y2-line2.y1)*localPosition),out}},function(module,exports,__webpack_require__){var Length=__webpack_require__(63),Point=__webpack_require__(4);module.exports=function(triangle,quantity,stepRate,out){void 0===out&&(out=[]);var line1=triangle.getLineA(),line2=triangle.getLineB(),line3=triangle.getLineC(),length1=Length(line1),length2=Length(line2),length3=Length(line3),perimeter=length1+length2+length3;quantity||(quantity=perimeter/stepRate);for(var i=0;i<quantity;i++){var p=perimeter*(i/quantity),localPosition=0,point=new Point;p<length1?(localPosition=p/length1,point.x=line1.x1+(line1.x2-line1.x1)*localPosition,point.y=line1.y1+(line1.y2-line1.y1)*localPosition):p>length1+length2?(localPosition=(p-=length1+length2)/length3,point.x=line3.x1+(line3.x2-line3.x1)*localPosition,point.y=line3.y1+(line3.y2-line3.y1)*localPosition):(localPosition=(p-=length1)/length2,point.x=line2.x1+(line2.x2-line2.x1)*localPosition,point.y=line2.y1+(line2.y2-line2.y1)*localPosition),out.push(point)}return out}},function(module,exports){module.exports=function(source,key,value){if(!source||"number"==typeof source)return!1;if(source.hasOwnProperty(key))return source[key]=value,!0;if(-1!==key.indexOf(".")){for(var keys=key.split("."),parent=source,prev=source,i=0;i<keys.length;i++){if(!parent.hasOwnProperty(keys[i]))return!1;prev=parent,parent=parent[keys[i]]}return prev[keys[keys.length-1]]=value,!0}return!1}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Utils=__webpack_require__(10),Light=new Class({initialize:function(x,y,radius,r,g,b,intensity){this.x=x,this.y=y,this.radius=radius,this.r=r,this.g=g,this.b=b,this.intensity=intensity,this.scrollFactorX=1,this.scrollFactorY=1},set:function(x,y,radius,r,g,b,intensity){return this.x=x,this.y=y,this.radius=radius,this.r=r,this.g=g,this.b=b,this.intensity=intensity,this.scrollFactorX=1,this.scrollFactorY=1,this},setScrollFactor:function(x,y){return void 0===x&&(x=1),void 0===y&&(y=x),this.scrollFactorX=x,this.scrollFactorY=y,this},setColor:function(rgb){var color=Utils.getFloatsFromUintRGB(rgb);return this.r=color[0],this.g=color[1],this.b=color[2],this},setIntensity:function(intensity){return this.intensity=intensity,this},setPosition:function(x,y){return this.x=x,this.y=y,this},setRadius:function(radius){return this.radius=radius,this}});module.exports=Light},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Light=__webpack_require__(434),Utils=__webpack_require__(10),LightsManager=new Class({initialize:function(){this.lightPool=[],this.lights=[],this.culledLights=[],this.ambientColor={r:.1,g:.1,b:.1},this.active=!1,this.maxLights=-1},enable:function(){return-1===this.maxLights&&(this.maxLights=this.scene.sys.game.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},cull:function(camera){var lights=this.lights,culledLights=this.culledLights,length=lights.length,cameraCenterX=camera.x+camera.width/2,cameraCenterY=camera.y+camera.height/2,cameraRadius=(camera.width+camera.height)/2,point={x:0,y:0},cameraMatrix=camera.matrix,viewportHeight=this.systems.game.config.height;culledLights.length=0;for(var index=0;index<length&&culledLights.length<this.maxLights;index++){var light=lights[index];cameraMatrix.transformPoint(light.x,light.y,point);var dx=cameraCenterX-(point.x-camera.scrollX*light.scrollFactorX*camera.zoom),dy=cameraCenterY-(viewportHeight-(point.y-camera.scrollY*light.scrollFactorY*camera.zoom));Math.sqrt(dx*dx+dy*dy)<light.radius+cameraRadius&&culledLights.push(lights[index])}return culledLights},forEachLight:function(callback){if(callback){for(var lights=this.lights,length=lights.length,index=0;index<length;++index)callback(lights[index]);return this}},setAmbientColor:function(rgb){var color=Utils.getFloatsFromUintRGB(rgb);return this.ambientColor.r=color[0],this.ambientColor.g=color[1],this.ambientColor.b=color[2],this},getMaxVisibleLights:function(){return 10},getLightCount:function(){return this.lights.length},addLight:function(x,y,radius,rgb,intensity){var color,light=null;return x=void 0===x?0:x,y=void 0===y?0:y,rgb=void 0===rgb?16777215:rgb,radius=void 0===radius?100:radius,intensity=void 0===intensity?1:intensity,color=Utils.getFloatsFromUintRGB(rgb),light=null,this.lightPool.length>0?(light=this.lightPool.pop()).set(x,y,radius,color[0],color[1],color[2],intensity):light=new Light(x,y,radius,color[0],color[1],color[2],intensity),this.lights.push(light),light},removeLight:function(light){var index=this.lights.indexOf(light);return index>=0&&(this.lightPool.push(light),this.lights.splice(index,1)),this},shutdown:function(){for(;this.lights.length>0;)this.lightPool.push(this.lights.pop());this.ambientColor={r:.1,g:.1,b:.1},this.culledLights.length=0,this.lights.length=0},destroy:function(){this.shutdown()}});module.exports=LightsManager},function(module,exports,__webpack_require__){var CONST=__webpack_require__(53),Extend=__webpack_require__(17),Geom={Circle:__webpack_require__(1086),Ellipse:__webpack_require__(1096),Intersects:__webpack_require__(437),Line:__webpack_require__(1115),Point:__webpack_require__(1136),Polygon:__webpack_require__(1150),Rectangle:__webpack_require__(452),Triangle:__webpack_require__(1180)};Geom=Extend(!1,Geom,CONST),module.exports=Geom},function(module,exports,__webpack_require__){module.exports={CircleToCircle:__webpack_require__(438),CircleToRectangle:__webpack_require__(439),GetCircleToCircle:__webpack_require__(1106),GetCircleToRectangle:__webpack_require__(1107),GetLineToCircle:__webpack_require__(219),GetLineToRectangle:__webpack_require__(221),GetRectangleIntersection:__webpack_require__(1108),GetRectangleToRectangle:__webpack_require__(1109),GetRectangleToTriangle:__webpack_require__(1110),GetTriangleToCircle:__webpack_require__(1111),GetTriangleToLine:__webpack_require__(444),GetTriangleToTriangle:__webpack_require__(1112),LineToCircle:__webpack_require__(220),LineToLine:__webpack_require__(95),LineToRectangle:__webpack_require__(440),PointToLine:__webpack_require__(448),PointToLineSegment:__webpack_require__(1113),RectangleToRectangle:__webpack_require__(143),RectangleToTriangle:__webpack_require__(441),RectangleToValues:__webpack_require__(1114),TriangleToCircle:__webpack_require__(443),TriangleToLine:__webpack_require__(445),TriangleToTriangle:__webpack_require__(446)}},function(module,exports,__webpack_require__){var DistanceBetween=__webpack_require__(65);module.exports=function(circleA,circleB){return DistanceBetween(circleA.x,circleA.y,circleB.x,circleB.y)<=circleA.radius+circleB.radius}},function(module,exports){module.exports=function(circle,rect){var halfWidth=rect.width/2,halfHeight=rect.height/2,cx=Math.abs(circle.x-rect.x-halfWidth),cy=Math.abs(circle.y-rect.y-halfHeight),xDist=halfWidth+circle.radius,yDist=halfHeight+circle.radius;if(cx>xDist||cy>yDist)return!1;if(cx<=halfWidth||cy<=halfHeight)return!0;var xCornerDist=cx-halfWidth,yCornerDist=cy-halfHeight;return xCornerDist*xCornerDist+yCornerDist*yCornerDist<=circle.radius*circle.radius}},function(module,exports){module.exports=function(line,rect){var x1=line.x1,y1=line.y1,x2=line.x2,y2=line.y2,bx1=rect.x,by1=rect.y,bx2=rect.right,by2=rect.bottom,t=0;if(x1>=bx1&&x1<=bx2&&y1>=by1&&y1<=by2||x2>=bx1&&x2<=bx2&&y2>=by1&&y2<=by2)return!0;if(x1<bx1&&x2>=bx1){if((t=y1+(y2-y1)*(bx1-x1)/(x2-x1))>by1&&t<=by2)return!0}else if(x1>bx2&&x2<=bx2&&(t=y1+(y2-y1)*(bx2-x1)/(x2-x1))>=by1&&t<=by2)return!0;if(y1<by1&&y2>=by1){if((t=x1+(x2-x1)*(by1-y1)/(y2-y1))>=bx1&&t<=bx2)return!0}else if(y1>by2&&y2<=by2&&(t=x1+(x2-x1)*(by2-y1)/(y2-y1))>=bx1&&t<=bx2)return!0;return!1}},function(module,exports,__webpack_require__){var LineToLine=__webpack_require__(95),Contains=__webpack_require__(54),ContainsArray=__webpack_require__(222),Decompose=__webpack_require__(442);module.exports=function(rect,triangle){if(triangle.left>rect.right||triangle.right<rect.left||triangle.top>rect.bottom||triangle.bottom<rect.top)return!1;var triA=triangle.getLineA(),triB=triangle.getLineB(),triC=triangle.getLineC();if(Contains(rect,triA.x1,triA.y1)||Contains(rect,triA.x2,triA.y2))return!0;if(Contains(rect,triB.x1,triB.y1)||Contains(rect,triB.x2,triB.y2))return!0;if(Contains(rect,triC.x1,triC.y1)||Contains(rect,triC.x2,triC.y2))return!0;var rectA=rect.getLineA(),rectB=rect.getLineB(),rectC=rect.getLineC(),rectD=rect.getLineD();if(LineToLine(triA,rectA)||LineToLine(triA,rectB)||LineToLine(triA,rectC)||LineToLine(triA,rectD))return!0;if(LineToLine(triB,rectA)||LineToLine(triB,rectB)||LineToLine(triB,rectC)||LineToLine(triB,rectD))return!0;if(LineToLine(triC,rectA)||LineToLine(triC,rectB)||LineToLine(triC,rectC)||LineToLine(triC,rectD))return!0;var points=Decompose(rect);return ContainsArray(triangle,points,!0).length>0}},function(module,exports){module.exports=function(rect,out){return void 0===out&&(out=[]),out.push({x:rect.x,y:rect.y}),out.push({x:rect.right,y:rect.y}),out.push({x:rect.right,y:rect.bottom}),out.push({x:rect.x,y:rect.bottom}),out}},function(module,exports,__webpack_require__){var LineToCircle=__webpack_require__(220),Contains=__webpack_require__(94);module.exports=function(triangle,circle){return!(triangle.left>circle.right||triangle.right<circle.left||triangle.top>circle.bottom||triangle.bottom<circle.top)&&(!!Contains(triangle,circle.x,circle.y)||(!!LineToCircle(triangle.getLineA(),circle)||(!!LineToCircle(triangle.getLineB(),circle)||!!LineToCircle(triangle.getLineC(),circle))))}},function(module,exports,__webpack_require__){var Point=__webpack_require__(4),TriangleToLine=__webpack_require__(445),LineToLine=__webpack_require__(95);module.exports=function(triangle,line,out){if(void 0===out&&(out=[]),TriangleToLine(triangle,line))for(var lineA=triangle.getLineA(),lineB=triangle.getLineB(),lineC=triangle.getLineC(),output=[new Point,new Point,new Point],result=[LineToLine(lineA,line,output[0]),LineToLine(lineB,line,output[1]),LineToLine(lineC,line,output[2])],i=0;i<3;i++)result[i]&&out.push(output[i]);return out}},function(module,exports,__webpack_require__){var Contains=__webpack_require__(94),LineToLine=__webpack_require__(95);module.exports=function(triangle,line){return!(!Contains(triangle,line.getPointA())&&!Contains(triangle,line.getPointB()))||(!!LineToLine(triangle.getLineA(),line)||(!!LineToLine(triangle.getLineB(),line)||!!LineToLine(triangle.getLineC(),line)))}},function(module,exports,__webpack_require__){var ContainsArray=__webpack_require__(222),Decompose=__webpack_require__(447),LineToLine=__webpack_require__(95);module.exports=function(triangleA,triangleB){if(triangleA.left>triangleB.right||triangleA.right<triangleB.left||triangleA.top>triangleB.bottom||triangleA.bottom<triangleB.top)return!1;var lineAA=triangleA.getLineA(),lineAB=triangleA.getLineB(),lineAC=triangleA.getLineC(),lineBA=triangleB.getLineA(),lineBB=triangleB.getLineB(),lineBC=triangleB.getLineC();if(LineToLine(lineAA,lineBA)||LineToLine(lineAA,lineBB)||LineToLine(lineAA,lineBC))return!0;if(LineToLine(lineAB,lineBA)||LineToLine(lineAB,lineBB)||LineToLine(lineAB,lineBC))return!0;if(LineToLine(lineAC,lineBA)||LineToLine(lineAC,lineBB)||LineToLine(lineAC,lineBC))return!0;var points=Decompose(triangleA),within=ContainsArray(triangleB,points,!0);return within.length>0||(points=Decompose(triangleB),(within=ContainsArray(triangleA,points,!0)).length>0)}},function(module,exports){module.exports=function(triangle,out){return void 0===out&&(out=[]),out.push({x:triangle.x1,y:triangle.y1}),out.push({x:triangle.x2,y:triangle.y2}),out.push({x:triangle.x3,y:triangle.y3}),out}},function(module,exports){module.exports=function(point,line,lineThickness){void 0===lineThickness&&(lineThickness=1);var x1=line.x1,y1=line.y1,x2=line.x2,y2=line.y2,px=point.x,py=point.y,L2=(x2-x1)*(x2-x1)+(y2-y1)*(y2-y1);if(0===L2)return!1;var r=((px-x1)*(x2-x1)+(py-y1)*(y2-y1))/L2;if(r<0)return Math.sqrt((x1-px)*(x1-px)+(y1-py)*(y1-py))<=lineThickness;if(r>=0&&r<=1){var s=((y1-py)*(x2-x1)-(x1-px)*(y2-y1))/L2;return Math.abs(s)*Math.sqrt(L2)<=lineThickness}return Math.sqrt((x2-px)*(x2-px)+(y2-py)*(y2-py))<=lineThickness}},function(module,exports,__webpack_require__){var MATH_CONST=__webpack_require__(22),Wrap=__webpack_require__(64),Angle=__webpack_require__(96);module.exports=function(line){var angle=Angle(line)-MATH_CONST.TAU;return Wrap(angle,-Math.PI,Math.PI)}},function(module,exports){module.exports=function(point){return Math.sqrt(point.x*point.x+point.y*point.y)}},function(module,exports){module.exports=function(point){return point.x*point.x+point.y*point.y}},function(module,exports,__webpack_require__){var Rectangle=__webpack_require__(11);Rectangle.Area=__webpack_require__(1155),Rectangle.Ceil=__webpack_require__(1156),Rectangle.CeilAll=__webpack_require__(1157),Rectangle.CenterOn=__webpack_require__(179),Rectangle.Clone=__webpack_require__(1158),Rectangle.Contains=__webpack_require__(54),Rectangle.ContainsPoint=__webpack_require__(1159),Rectangle.ContainsRect=__webpack_require__(453),Rectangle.CopyFrom=__webpack_require__(1160),Rectangle.Decompose=__webpack_require__(442),Rectangle.Equals=__webpack_require__(1161),Rectangle.FitInside=__webpack_require__(1162),Rectangle.FitOutside=__webpack_require__(1163),Rectangle.Floor=__webpack_require__(1164),Rectangle.FloorAll=__webpack_require__(1165),Rectangle.FromPoints=__webpack_require__(193),Rectangle.GetAspectRatio=__webpack_require__(224),Rectangle.GetCenter=__webpack_require__(1166),Rectangle.GetPoint=__webpack_require__(163),Rectangle.GetPoints=__webpack_require__(277),Rectangle.GetSize=__webpack_require__(1167),Rectangle.Inflate=__webpack_require__(1168),Rectangle.Intersection=__webpack_require__(1169),Rectangle.MarchingAnts=__webpack_require__(288),Rectangle.MergePoints=__webpack_require__(1170),Rectangle.MergeRect=__webpack_require__(1171),Rectangle.MergeXY=__webpack_require__(1172),Rectangle.Offset=__webpack_require__(1173),Rectangle.OffsetPoint=__webpack_require__(1174),Rectangle.Overlaps=__webpack_require__(1175),Rectangle.Perimeter=__webpack_require__(120),Rectangle.PerimeterPoint=__webpack_require__(1176),Rectangle.Random=__webpack_require__(166),Rectangle.RandomOutside=__webpack_require__(1177),Rectangle.SameDimensions=__webpack_require__(1178),Rectangle.Scale=__webpack_require__(1179),Rectangle.Union=__webpack_require__(399),module.exports=Rectangle},function(module,exports){module.exports=function(rectA,rectB){return!(rectB.width*rectB.height>rectA.width*rectA.height)&&(rectB.x>rectA.x&&rectB.x<rectA.right&&rectB.right>rectA.x&&rectB.right<rectA.right&&rectB.y>rectA.y&&rectB.y<rectA.bottom&&rectB.bottom>rectA.y&&rectB.bottom<rectA.bottom)}},function(module,exports,__webpack_require__){var Point=__webpack_require__(4);module.exports=function(triangle,out){return void 0===out&&(out=new Point),out.x=(triangle.x1+triangle.x2+triangle.x3)/3,out.y=(triangle.y1+triangle.y2+triangle.y3)/3,out}},function(module,exports){module.exports=function(triangle,x,y){return triangle.x1+=x,triangle.y1+=y,triangle.x2+=x,triangle.y2+=y,triangle.x3+=x,triangle.y3+=y,triangle}},function(module,exports,__webpack_require__){var Point=__webpack_require__(4);function getLength(x1,y1,x2,y2){var x=x1-x2,y=y1-y2,magnitude=x*x+y*y;return Math.sqrt(magnitude)}module.exports=function(triangle,out){void 0===out&&(out=new Point);var x1=triangle.x1,y1=triangle.y1,x2=triangle.x2,y2=triangle.y2,x3=triangle.x3,y3=triangle.y3,d1=getLength(x3,y3,x2,y2),d2=getLength(x1,y1,x3,y3),d3=getLength(x2,y2,x1,y1),p=d1+d2+d3;return out.x=(x1*d1+x2*d2+x3*d3)/p,out.y=(y1*d1+y2*d2+y3*d3)/p,out}},function(module,exports){module.exports=function(gameObject,hitArea,hitAreaCallback){return{gameObject:gameObject,enabled:!0,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:hitArea,hitAreaCallback:hitAreaCallback,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}}},function(module,exports,__webpack_require__){var Axis=new(__webpack_require__(0))({initialize:function(pad,index){this.pad=pad,this.events=pad.events,this.index=index,this.value=0,this.threshold=.1},update:function(value){this.value=value},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});module.exports=Axis},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Events=__webpack_require__(226),Button=new Class({initialize:function(pad,index){this.pad=pad,this.events=pad.manager,this.index=index,this.value=0,this.threshold=1,this.pressed=!1},update:function(value){this.value=value;var pad=this.pad,index=this.index;value>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(Events.BUTTON_DOWN,pad,this,value),this.pad.emit(Events.GAMEPAD_BUTTON_DOWN,index,value,this)):this.pressed&&(this.pressed=!1,this.events.emit(Events.BUTTON_UP,pad,this,value),this.pad.emit(Events.GAMEPAD_BUTTON_UP,index,value,this))},destroy:function(){this.pad=null,this.events=null}});module.exports=Button},function(module,exports,__webpack_require__){var Axis=__webpack_require__(458),Button=__webpack_require__(459),Class=__webpack_require__(0),EventEmitter=__webpack_require__(9),Vector2=__webpack_require__(3),Gamepad=new Class({Extends:EventEmitter,initialize:function(manager,pad){EventEmitter.call(this),this.manager=manager,this.pad=pad,this.id=pad.id,this.index=pad.index;for(var buttons=[],i=0;i<pad.buttons.length;i++)buttons.push(new Button(this,i));this.buttons=buttons;var axes=[];for(i=0;i<pad.axes.length;i++)axes.push(new Axis(this,i));this.axes=axes,this.vibration=pad.vibrationActuator;var _noButton={value:0,pressed:!1};this._LCLeft=buttons[14]?buttons[14]:_noButton,this._LCRight=buttons[15]?buttons[15]:_noButton,this._LCTop=buttons[12]?buttons[12]:_noButton,this._LCBottom=buttons[13]?buttons[13]:_noButton,this._RCLeft=buttons[2]?buttons[2]:_noButton,this._RCRight=buttons[1]?buttons[1]:_noButton,this._RCTop=buttons[3]?buttons[3]:_noButton,this._RCBottom=buttons[0]?buttons[0]:_noButton,this._FBLeftTop=buttons[4]?buttons[4]:_noButton,this._FBLeftBottom=buttons[6]?buttons[6]:_noButton,this._FBRightTop=buttons[5]?buttons[5]:_noButton,this._FBRightBottom=buttons[7]?buttons[7]:_noButton;var _noAxis={value:0};this._HAxisLeft=axes[0]?axes[0]:_noAxis,this._VAxisLeft=axes[1]?axes[1]:_noAxis,this._HAxisRight=axes[2]?axes[2]:_noAxis,this._VAxisRight=axes[3]?axes[3]:_noAxis,this.leftStick=new Vector2,this.rightStick=new Vector2},getAxisTotal:function(){return this.axes.length},getAxisValue:function(index){return this.axes[index].getValue()},setAxisThreshold:function(value){for(var i=0;i<this.axes.length;i++)this.axes[i].threshold=value},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(index){return this.buttons[index].value},isButtonDown:function(index){return this.buttons[index].pressed},update:function(pad){var i,localButtons=this.buttons,gamepadButtons=pad.buttons,len=localButtons.length;for(i=0;i<len;i++)localButtons[i].update(gamepadButtons[i].value);var localAxes=this.axes,gamepadAxes=pad.axes;for(len=localAxes.length,i=0;i<len;i++)localAxes[i].update(gamepadAxes[i]);len>=2&&(this.leftStick.set(localAxes[0].getValue(),localAxes[1].getValue()),len>=4&&this.rightStick.set(localAxes[2].getValue(),localAxes[3].getValue()))},destroy:function(){var i;for(this.removeAllListeners(),this.manager=null,this.pad=null,i=0;i<this.buttons.length;i++)this.buttons[i].destroy();for(i=0;i<this.axes.length;i++)this.axes[i].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});module.exports=Gamepad},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),EventEmitter=__webpack_require__(9),Events=__webpack_require__(145),Key=new Class({Extends:EventEmitter,initialize:function(plugin,keyCode){EventEmitter.call(this),this.plugin=plugin,this.keyCode=keyCode,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(value){return this.emitOnRepeat=value,this},onDown:function(event){this.originalEvent=event,this.enabled&&(this.altKey=event.altKey,this.ctrlKey=event.ctrlKey,this.shiftKey=event.shiftKey,this.metaKey=event.metaKey,this.location=event.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(Events.DOWN,this,event):(this.isDown=!0,this.isUp=!1,this.timeDown=event.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(Events.DOWN,this,event)))},onUp:function(event){this.originalEvent=event,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=event.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(Events.UP,this,event))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});module.exports=Key},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Events=__webpack_require__(145),GetFastValue=__webpack_require__(1),ProcessKeyCombo=__webpack_require__(1219),ResetKeyCombo=__webpack_require__(1221),KeyCombo=new Class({initialize:function(keyboardPlugin,keys,config){if(void 0===config&&(config={}),keys.length<2)return!1;this.manager=keyboardPlugin,this.enabled=!0,this.keyCodes=[];for(var i=0;i<keys.length;i++){var char=keys[i];"string"==typeof char?this.keyCodes.push(char.toUpperCase().charCodeAt(0)):"number"==typeof char?this.keyCodes.push(char):char.hasOwnProperty("keyCode")&&this.keyCodes.push(char.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=GetFastValue(config,"resetOnWrongKey",!0),this.maxKeyDelay=GetFastValue(config,"maxKeyDelay",0),this.resetOnMatch=GetFastValue(config,"resetOnMatch",!1),this.deleteOnMatch=GetFastValue(config,"deleteOnMatch",!1);var _this=this;this.onKeyDown=function(event){!_this.matched&&_this.enabled&&(ProcessKeyCombo(event,_this)&&(_this.manager.emit(Events.COMBO_MATCH,_this,event),_this.resetOnMatch?ResetKeyCombo(_this):_this.deleteOnMatch&&_this.destroy()))},this.manager.on(Events.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(Events.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});module.exports=KeyCombo},function(module,exports,__webpack_require__){var MergeXHRSettings=__webpack_require__(228);module.exports=function(file,globalXHRSettings){var config=MergeXHRSettings(globalXHRSettings,file.xhrSettings),xhr=new XMLHttpRequest;return xhr.open("GET",file.src,config.async,config.user,config.password),xhr.responseType=file.xhrSettings.responseType,xhr.timeout=config.timeout,config.header&&config.headerValue&&xhr.setRequestHeader(config.header,config.headerValue),config.requestedWith&&xhr.setRequestHeader("X-Requested-With",config.requestedWith),config.overrideMimeType&&xhr.overrideMimeType(config.overrideMimeType),xhr.onload=file.onLoad.bind(file,xhr),xhr.onerror=file.onError.bind(file,xhr),xhr.onprogress=file.onProgress.bind(file),xhr.send(),xhr}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),CONST=__webpack_require__(35),File=__webpack_require__(24),FileTypesManager=__webpack_require__(8),GetFastValue=__webpack_require__(1),HTML5AudioFile=__webpack_require__(465),IsPlainObject=__webpack_require__(7),AudioFile=new Class({Extends:File,initialize:function(loader,key,urlConfig,xhrSettings,audioContext){if(IsPlainObject(key)){var config=key;key=GetFastValue(config,"key"),xhrSettings=GetFastValue(config,"xhrSettings"),audioContext=GetFastValue(config,"context",audioContext)}var fileConfig={type:"audio",cache:loader.cacheManager.audio,extension:urlConfig.type,responseType:"arraybuffer",key:key,url:urlConfig.url,xhrSettings:xhrSettings,config:{context:audioContext}};File.call(this,loader,fileConfig)},onProcess:function(){this.state=CONST.FILE_PROCESSING;var _this=this;this.config.context.decodeAudioData(this.xhrLoader.response,(function(audioBuffer){_this.data=audioBuffer,_this.onProcessComplete()}),(function(e){console.error("Error decoding audio: "+this.key+" - ",e?e.message:null),_this.onProcessError()})),this.config.context=null}});AudioFile.create=function(loader,key,urls,config,xhrSettings){var game=loader.systems.game,audioConfig=game.config.audio,deviceAudio=game.device.audio;IsPlainObject(key)&&(urls=GetFastValue(key,"url",[]),config=GetFastValue(key,"config",{}));var urlConfig=AudioFile.getAudioURL(game,urls);return urlConfig?!deviceAudio.webAudio||audioConfig&&audioConfig.disableWebAudio?new HTML5AudioFile(loader,key,urlConfig,config):new AudioFile(loader,key,urlConfig,xhrSettings,game.sound.context):null},AudioFile.getAudioURL=function(game,urls){Array.isArray(urls)||(urls=[urls]);for(var i=0;i<urls.length;i++){var url=GetFastValue(urls[i],"url",urls[i]);if(0===url.indexOf("blob:")||0===url.indexOf("data:"))return url;var audioType=url.match(/\.([a-zA-Z0-9]+)($|\?)/);if(audioType=GetFastValue(urls[i],"type",audioType?audioType[1]:"").toLowerCase(),game.device.audio[audioType])return{url:url,type:audioType}}return null},FileTypesManager.register("audio",(function(key,urls,config,xhrSettings){var audioFile,game=this.systems.game,audioConfig=game.config.audio,deviceAudio=game.device.audio;if(audioConfig&&audioConfig.noAudio||!deviceAudio.webAudio&&!deviceAudio.audioData)return this;if(Array.isArray(key))for(var i=0;i<key.length;i++)(audioFile=AudioFile.create(this,key[i]))&&this.addFile(audioFile);else(audioFile=AudioFile.create(this,key,urls,config,xhrSettings))&&this.addFile(audioFile);return this})),module.exports=AudioFile},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Events=__webpack_require__(88),File=__webpack_require__(24),GetFastValue=__webpack_require__(1),GetURL=__webpack_require__(227),IsPlainObject=__webpack_require__(7),HTML5AudioFile=new Class({Extends:File,initialize:function(loader,key,urlConfig,audioConfig){if(IsPlainObject(key)){var config=key;key=GetFastValue(config,"key"),audioConfig=GetFastValue(config,"config",audioConfig)}var fileConfig={type:"audio",cache:loader.cacheManager.audio,extension:urlConfig.type,key:key,url:urlConfig.url,config:audioConfig};File.call(this,loader,fileConfig),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var i=0;i<this.data.length;i++){var audio=this.data[i];audio.oncanplaythrough=null,audio.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(event){var audio=event.target;audio.oncanplaythrough=null,audio.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(Events.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var instances=this.config&&this.config.instances||1;this.filesTotal=instances,this.filesLoaded=0,this.percentComplete=0;for(var i=0;i<instances;i++){var audio=new Audio;audio.dataset={},audio.dataset.name=this.key+("0"+i).slice(-2),audio.dataset.used="false",this.locked?audio.dataset.locked="true":(audio.dataset.locked="false",audio.preload="auto",audio.oncanplaythrough=this.onProgress.bind(this),audio.onerror=this.onError.bind(this)),this.data.push(audio)}for(i=0;i<this.data.length;i++)(audio=this.data[i]).src=GetURL(this,this.loader.baseURL),this.locked||audio.load();this.locked&&setTimeout(this.onLoad.bind(this))}});module.exports=HTML5AudioFile},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),CONST=__webpack_require__(21),File=__webpack_require__(24),FileTypesManager=__webpack_require__(8),GetFastValue=__webpack_require__(1),IsPlainObject=__webpack_require__(7),ScriptFile=new Class({Extends:File,initialize:function(loader,key,url,xhrSettings){var extension="js";if(IsPlainObject(key)){var config=key;key=GetFastValue(config,"key"),url=GetFastValue(config,"url"),xhrSettings=GetFastValue(config,"xhrSettings"),extension=GetFastValue(config,"extension",extension)}var fileConfig={type:"script",cache:!1,extension:extension,responseType:"text",key:key,url:url,xhrSettings:xhrSettings};File.call(this,loader,fileConfig)},onProcess:function(){this.state=CONST.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});FileTypesManager.register("script",(function(key,url,xhrSettings){if(Array.isArray(key))for(var i=0;i<key.length;i++)this.addFile(new ScriptFile(this,key[i]));else this.addFile(new ScriptFile(this,key,url,xhrSettings));return this})),module.exports=ScriptFile},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),CONST=__webpack_require__(21),File=__webpack_require__(24),FileTypesManager=__webpack_require__(8),GetFastValue=__webpack_require__(1),IsPlainObject=__webpack_require__(7),TextFile=new Class({Extends:File,initialize:function(loader,key,url,xhrSettings){var extension="txt";if(IsPlainObject(key)){var config=key;key=GetFastValue(config,"key"),url=GetFastValue(config,"url"),xhrSettings=GetFastValue(config,"xhrSettings"),extension=GetFastValue(config,"extension",extension)}var fileConfig={type:"text",cache:loader.cacheManager.text,extension:extension,responseType:"text",key:key,url:url,xhrSettings:xhrSettings};File.call(this,loader,fileConfig)},onProcess:function(){this.state=CONST.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});FileTypesManager.register("text",(function(key,url,xhrSettings){if(Array.isArray(key))for(var i=0;i<key.length;i++)this.addFile(new TextFile(this,key[i]));else this.addFile(new TextFile(this,key,url,xhrSettings));return this})),module.exports=TextFile},function(module,exports,__webpack_require__){var ArcadeImage=__webpack_require__(469),ArcadeSprite=__webpack_require__(147),Class=__webpack_require__(0),CONST=__webpack_require__(59),PhysicsGroup=__webpack_require__(470),StaticPhysicsGroup=__webpack_require__(471),Factory=new Class({initialize:function(world){this.world=world,this.scene=world.scene,this.sys=world.scene.sys},collider:function(object1,object2,collideCallback,processCallback,callbackContext){return this.world.addCollider(object1,object2,collideCallback,processCallback,callbackContext)},overlap:function(object1,object2,collideCallback,processCallback,callbackContext){return this.world.addOverlap(object1,object2,collideCallback,processCallback,callbackContext)},existing:function(gameObject,isStatic){var type=isStatic?CONST.STATIC_BODY:CONST.DYNAMIC_BODY;return this.world.enableBody(gameObject,type),gameObject},staticImage:function(x,y,key,frame){var image=new ArcadeImage(this.scene,x,y,key,frame);return this.sys.displayList.add(image),this.world.enableBody(image,CONST.STATIC_BODY),image},image:function(x,y,key,frame){var image=new ArcadeImage(this.scene,x,y,key,frame);return this.sys.displayList.add(image),this.world.enableBody(image,CONST.DYNAMIC_BODY),image},staticSprite:function(x,y,key,frame){var sprite=new ArcadeSprite(this.scene,x,y,key,frame);return this.sys.displayList.add(sprite),this.sys.updateList.add(sprite),this.world.enableBody(sprite,CONST.STATIC_BODY),sprite},sprite:function(x,y,key,frame){var sprite=new ArcadeSprite(this.scene,x,y,key,frame);return this.sys.displayList.add(sprite),this.sys.updateList.add(sprite),this.world.enableBody(sprite,CONST.DYNAMIC_BODY),sprite},staticGroup:function(children,config){return this.sys.updateList.add(new StaticPhysicsGroup(this.world,this.world.scene,children,config))},group:function(children,config){return this.sys.updateList.add(new PhysicsGroup(this.world,this.world.scene,children,config))},destroy:function(){this.world=null,this.scene=null,this.sys=null}});module.exports=Factory},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Components=__webpack_require__(230),Image=__webpack_require__(91),ArcadeImage=new Class({Extends:Image,Mixins:[Components.Acceleration,Components.Angular,Components.Bounce,Components.Debug,Components.Drag,Components.Enable,Components.Friction,Components.Gravity,Components.Immovable,Components.Mass,Components.Size,Components.Velocity],initialize:function(scene,x,y,texture,frame){Image.call(this,scene,x,y,texture,frame),this.body=null}});module.exports=ArcadeImage},function(module,exports,__webpack_require__){var ArcadeSprite=__webpack_require__(147),Class=__webpack_require__(0),CONST=__webpack_require__(59),GetFastValue=__webpack_require__(1),Group=__webpack_require__(109),IsPlainObject=__webpack_require__(7),PhysicsGroup=new Class({Extends:Group,initialize:function(world,scene,children,config){if(children||config)if(IsPlainObject(children))config=children,children=null,config.createCallback=this.createCallbackHandler,config.removeCallback=this.removeCallbackHandler;else if(Array.isArray(children)&&IsPlainObject(children[0])){config=children[0];var _this=this;children.forEach((function(singleConfig){singleConfig.createCallback=_this.createCallbackHandler,singleConfig.removeCallback=_this.removeCallbackHandler}))}else config={createCallback:this.createCallbackHandler,removeCallback:this.removeCallbackHandler};else config={createCallback:this.createCallbackHandler,removeCallback:this.removeCallbackHandler};this.world=world,config.classType=GetFastValue(config,"classType",ArcadeSprite),this.physicsType=CONST.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:GetFastValue(config,"collideWorldBounds",!1),setAccelerationX:GetFastValue(config,"accelerationX",0),setAccelerationY:GetFastValue(config,"accelerationY",0),setAllowDrag:GetFastValue(config,"allowDrag",!0),setAllowGravity:GetFastValue(config,"allowGravity",!0),setAllowRotation:GetFastValue(config,"allowRotation",!0),setBounceX:GetFastValue(config,"bounceX",0),setBounceY:GetFastValue(config,"bounceY",0),setDragX:GetFastValue(config,"dragX",0),setDragY:GetFastValue(config,"dragY",0),setEnable:GetFastValue(config,"enable",!0),setGravityX:GetFastValue(config,"gravityX",0),setGravityY:GetFastValue(config,"gravityY",0),setFrictionX:GetFastValue(config,"frictionX",0),setFrictionY:GetFastValue(config,"frictionY",0),setVelocityX:GetFastValue(config,"velocityX",0),setVelocityY:GetFastValue(config,"velocityY",0),setAngularVelocity:GetFastValue(config,"angularVelocity",0),setAngularAcceleration:GetFastValue(config,"angularAcceleration",0),setAngularDrag:GetFastValue(config,"angularDrag",0),setMass:GetFastValue(config,"mass",1),setImmovable:GetFastValue(config,"immovable",!1)},Array.isArray(children)&&(config=null),Group.call(this,scene,children,config)},createCallbackHandler:function(child){child.body||this.world.enableBody(child,CONST.DYNAMIC_BODY);var body=child.body;for(var key in this.defaults)body[key](this.defaults[key])},removeCallbackHandler:function(child){child.body&&this.world.disableBody(child)},setVelocity:function(x,y,step){void 0===step&&(step=0);for(var items=this.getChildren(),i=0;i<items.length;i++)items[i].body.velocity.set(x+i*step,y+i*step);return this},setVelocityX:function(value,step){void 0===step&&(step=0);for(var items=this.getChildren(),i=0;i<items.length;i++)items[i].body.velocity.x=value+i*step;return this},setVelocityY:function(value,step){void 0===step&&(step=0);for(var items=this.getChildren(),i=0;i<items.length;i++)items[i].body.velocity.y=value+i*step;return this}});module.exports=PhysicsGroup},function(module,exports,__webpack_require__){var ArcadeSprite=__webpack_require__(147),Class=__webpack_require__(0),CONST=__webpack_require__(59),GetFastValue=__webpack_require__(1),Group=__webpack_require__(109),IsPlainObject=__webpack_require__(7),StaticPhysicsGroup=new Class({Extends:Group,initialize:function(world,scene,children,config){children||config?IsPlainObject(children)?(config=children,children=null,config.createCallback=this.createCallbackHandler,config.removeCallback=this.removeCallbackHandler,config.createMultipleCallback=this.createMultipleCallbackHandler,config.classType=GetFastValue(config,"classType",ArcadeSprite)):Array.isArray(children)&&IsPlainObject(children[0])&&(config=children,children=null,config.forEach((function(singleConfig){singleConfig.createCallback=this.createCallbackHandler,singleConfig.removeCallback=this.removeCallbackHandler,singleConfig.createMultipleCallback=this.createMultipleCallbackHandler,singleConfig.classType=GetFastValue(singleConfig,"classType",ArcadeSprite)}))):config={createCallback:this.createCallbackHandler,removeCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:ArcadeSprite},this.world=world,this.physicsType=CONST.STATIC_BODY,Group.call(this,scene,children,config)},createCallbackHandler:function(child){child.body||this.world.enableBody(child,CONST.STATIC_BODY)},removeCallbackHandler:function(child){child.body&&this.world.disableBody(child)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var children=this.children.entries,i=0;i<children.length;i++)children[i].body.reset();return this}});module.exports=StaticPhysicsGroup},function(module,exports,__webpack_require__){var Body=__webpack_require__(473),Clamp=__webpack_require__(25),Class=__webpack_require__(0),Collider=__webpack_require__(474),CONST=__webpack_require__(59),DistanceBetween=__webpack_require__(65),EventEmitter=__webpack_require__(9),Events=__webpack_require__(231),FuzzyEqual=__webpack_require__(183),FuzzyGreaterThan=__webpack_require__(323),FuzzyLessThan=__webpack_require__(324),GetOverlapX=__webpack_require__(475),GetOverlapY=__webpack_require__(476),GetValue=__webpack_require__(5),ProcessQueue=__webpack_require__(477),ProcessTileCallbacks=__webpack_require__(1278),Rectangle=__webpack_require__(11),RTree=__webpack_require__(478),SeparateTile=__webpack_require__(1279),SeparateX=__webpack_require__(1284),SeparateY=__webpack_require__(1285),Set=__webpack_require__(90),StaticBody=__webpack_require__(480),TileIntersectsBody=__webpack_require__(479),TransformMatrix=__webpack_require__(36),Vector2=__webpack_require__(3),Wrap=__webpack_require__(64),World=new Class({Extends:EventEmitter,initialize:function(scene,config){EventEmitter.call(this),this.scene=scene,this.bodies=new Set,this.staticBodies=new Set,this.pendingDestroy=new Set,this.colliders=new ProcessQueue,this.gravity=new Vector2(GetValue(config,"gravity.x",0),GetValue(config,"gravity.y",0)),this.bounds=new Rectangle(GetValue(config,"x",0),GetValue(config,"y",0),GetValue(config,"width",scene.sys.scale.width),GetValue(config,"height",scene.sys.scale.height)),this.checkCollision={up:GetValue(config,"checkCollision.up",!0),down:GetValue(config,"checkCollision.down",!0),left:GetValue(config,"checkCollision.left",!0),right:GetValue(config,"checkCollision.right",!0)},this.fps=GetValue(config,"fps",60),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=GetValue(config,"timeScale",1),this.OVERLAP_BIAS=GetValue(config,"overlapBias",4),this.TILE_BIAS=GetValue(config,"tileBias",16),this.forceX=GetValue(config,"forceX",!1),this.isPaused=GetValue(config,"isPaused",!1),this._total=0,this.drawDebug=GetValue(config,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:GetValue(config,"debugShowBody",!0),debugShowStaticBody:GetValue(config,"debugShowStaticBody",!0),debugShowVelocity:GetValue(config,"debugShowVelocity",!0),bodyDebugColor:GetValue(config,"debugBodyColor",16711935),staticBodyDebugColor:GetValue(config,"debugStaticBodyColor",255),velocityDebugColor:GetValue(config,"debugVelocityColor",65280)},this.maxEntries=GetValue(config,"maxEntries",16),this.useTree=GetValue(config,"useTree",!0),this.tree=new RTree(this.maxEntries),this.staticTree=new RTree(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new TransformMatrix,this._tempMatrix2=new TransformMatrix,this.drawDebug&&this.createDebugGraphic()},enable:function(object,bodyType){void 0===bodyType&&(bodyType=CONST.DYNAMIC_BODY),Array.isArray(object)||(object=[object]);for(var i=0;i<object.length;i++){var entry=object[i];if(entry.isParent)for(var children=entry.getChildren(),c=0;c<children.length;c++){var child=children[c];child.isParent?this.enable(child,bodyType):this.enableBody(child,bodyType)}else this.enableBody(entry,bodyType)}},enableBody:function(object,bodyType){return void 0===bodyType&&(bodyType=CONST.DYNAMIC_BODY),object.body||(bodyType===CONST.DYNAMIC_BODY?object.body=new Body(this,object):bodyType===CONST.STATIC_BODY&&(object.body=new StaticBody(this,object))),this.add(object.body),object},add:function(body){return body.physicsType===CONST.DYNAMIC_BODY?this.bodies.set(body):body.physicsType===CONST.STATIC_BODY&&(this.staticBodies.set(body),this.staticTree.insert(body)),body.enable=!0,body},disable:function(object){Array.isArray(object)||(object=[object]);for(var i=0;i<object.length;i++){var entry=object[i];if(entry.isParent)for(var children=entry.getChildren(),c=0;c<children.length;c++){var child=children[c];child.isParent?this.disable(child):this.disableBody(child.body)}else this.disableBody(entry.body)}},disableBody:function(body){this.remove(body),body.enable=!1},remove:function(body){body.physicsType===CONST.DYNAMIC_BODY?(this.tree.remove(body),this.bodies.delete(body)):body.physicsType===CONST.STATIC_BODY&&(this.staticBodies.delete(body),this.staticTree.remove(body))},createDebugGraphic:function(){var graphic=this.scene.sys.add.graphics({x:0,y:0});return graphic.setDepth(Number.MAX_VALUE),this.debugGraphic=graphic,this.drawDebug=!0,graphic},setBounds:function(x,y,width,height,checkLeft,checkRight,checkUp,checkDown){return this.bounds.setTo(x,y,width,height),void 0!==checkLeft&&this.setBoundsCollision(checkLeft,checkRight,checkUp,checkDown),this},setBoundsCollision:function(left,right,up,down){return void 0===left&&(left=!0),void 0===right&&(right=!0),void 0===up&&(up=!0),void 0===down&&(down=!0),this.checkCollision.left=left,this.checkCollision.right=right,this.checkCollision.up=up,this.checkCollision.down=down,this},pause:function(){return this.isPaused=!0,this.emit(Events.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(Events.RESUME),this},addCollider:function(object1,object2,collideCallback,processCallback,callbackContext){void 0===collideCallback&&(collideCallback=null),void 0===processCallback&&(processCallback=null),void 0===callbackContext&&(callbackContext=collideCallback);var collider=new Collider(this,!1,object1,object2,collideCallback,processCallback,callbackContext);return this.colliders.add(collider),collider},addOverlap:function(object1,object2,collideCallback,processCallback,callbackContext){void 0===collideCallback&&(collideCallback=null),void 0===processCallback&&(processCallback=null),void 0===callbackContext&&(callbackContext=collideCallback);var collider=new Collider(this,!0,object1,object2,collideCallback,processCallback,callbackContext);return this.colliders.add(collider),collider},removeCollider:function(collider){return this.colliders.remove(collider),this},setFPS:function(framerate){return this.fps=framerate,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(time,delta){if(!this.isPaused&&0!==this.bodies.size){var i,body,fixedDelta=this._frameTime,msPerFrame=this._frameTimeMS*this.timeScale;this._elapsed+=delta;var bodies=this.bodies.entries,willStep=this._elapsed>=msPerFrame;for(i=0;i<bodies.length;i++)(body=bodies[i]).enable&&body.preUpdate(willStep,fixedDelta);if(willStep){this._elapsed-=msPerFrame,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(bodies));var colliders=this.colliders.update();for(i=0;i<colliders.length;i++){var collider=colliders[i];collider.active&&collider.update()}this.emit(Events.WORLD_STEP)}for(;this._elapsed>=msPerFrame;)this._elapsed-=msPerFrame,this.step(fixedDelta)}},step:function(delta){var i,body,bodies=this.bodies.entries,len=bodies.length;for(i=0;i<len;i++)(body=bodies[i]).enable&&body.update(delta);this.useTree&&(this.tree.clear(),this.tree.load(bodies));var colliders=this.colliders.update();for(i=0;i<colliders.length;i++){var collider=colliders[i];collider.active&&collider.update()}this.emit(Events.WORLD_STEP),this.stepsLastFrame++},postUpdate:function(){var i,body,bodies=this.bodies.entries,len=bodies.length,dynamic=this.bodies,staticBodies=this.staticBodies;if(this.stepsLastFrame)for(i=0;i<len;i++)(body=bodies[i]).enable&&body.postUpdate();if(this.drawDebug){var graphics=this.debugGraphic;for(graphics.clear(),i=0;i<len;i++)(body=bodies[i]).willDrawDebug()&&body.drawDebug(graphics);for(len=(bodies=staticBodies.entries).length,i=0;i<len;i++)(body=bodies[i]).willDrawDebug()&&body.drawDebug(graphics)}var pending=this.pendingDestroy;if(pending.size>0){var dynamicTree=this.tree,staticTree=this.staticTree;for(len=(bodies=pending.entries).length,i=0;i<len;i++)(body=bodies[i]).physicsType===CONST.DYNAMIC_BODY?(dynamicTree.remove(body),dynamic.delete(body)):body.physicsType===CONST.STATIC_BODY&&(staticTree.remove(body),staticBodies.delete(body)),body.world=void 0,body.gameObject=void 0;pending.clear()}},updateMotion:function(body,delta){body.allowRotation&&this.computeAngularVelocity(body,delta),this.computeVelocity(body,delta)},computeAngularVelocity:function(body,delta){var velocity=body.angularVelocity,acceleration=body.angularAcceleration,drag=body.angularDrag,max=body.maxAngular;acceleration?velocity+=acceleration*delta:body.allowDrag&&drag&&(FuzzyGreaterThan(velocity-(drag*=delta),0,.1)?velocity-=drag:FuzzyLessThan(velocity+drag,0,.1)?velocity+=drag:velocity=0);var velocityDelta=(velocity=Clamp(velocity,-max,max))-body.angularVelocity;body.angularVelocity+=velocityDelta,body.rotation+=body.angularVelocity*delta},computeVelocity:function(body,delta){var velocityX=body.velocity.x,accelerationX=body.acceleration.x,dragX=body.drag.x,maxX=body.maxVelocity.x,velocityY=body.velocity.y,accelerationY=body.acceleration.y,dragY=body.drag.y,maxY=body.maxVelocity.y,speed=body.speed,maxSpeed=body.maxSpeed,allowDrag=body.allowDrag,useDamping=body.useDamping;body.allowGravity&&(velocityX+=(this.gravity.x+body.gravity.x)*delta,velocityY+=(this.gravity.y+body.gravity.y)*delta),accelerationX?velocityX+=accelerationX*delta:allowDrag&&dragX&&(useDamping?(velocityX*=dragX,speed=Math.sqrt(velocityX*velocityX+velocityY*velocityY),FuzzyEqual(speed,0,.001)&&(velocityX=0)):FuzzyGreaterThan(velocityX-(dragX*=delta),0,.01)?velocityX-=dragX:FuzzyLessThan(velocityX+dragX,0,.01)?velocityX+=dragX:velocityX=0),accelerationY?velocityY+=accelerationY*delta:allowDrag&&dragY&&(useDamping?(velocityY*=dragY,speed=Math.sqrt(velocityX*velocityX+velocityY*velocityY),FuzzyEqual(speed,0,.001)&&(velocityY=0)):FuzzyGreaterThan(velocityY-(dragY*=delta),0,.01)?velocityY-=dragY:FuzzyLessThan(velocityY+dragY,0,.01)?velocityY+=dragY:velocityY=0),velocityX=Clamp(velocityX,-maxX,maxX),velocityY=Clamp(velocityY,-maxY,maxY),body.velocity.set(velocityX,velocityY),maxSpeed>-1&&speed>maxSpeed&&(body.velocity.normalize().scale(maxSpeed),speed=maxSpeed),body.speed=speed},separate:function(body1,body2,processCallback,callbackContext,overlapOnly){if(!body1.enable||!body2.enable||body1.checkCollision.none||body2.checkCollision.none||!this.intersects(body1,body2))return!1;if(processCallback&&!1===processCallback.call(callbackContext,body1.gameObject,body2.gameObject))return!1;if(body1.isCircle&&body2.isCircle)return this.separateCircle(body1,body2,overlapOnly);if(body1.isCircle!==body2.isCircle){var bodyRect=body1.isCircle?body2:body1,bodyCircle=body1.isCircle?body1:body2,rect={x:bodyRect.x,y:bodyRect.y,right:bodyRect.right,bottom:bodyRect.bottom},circle=bodyCircle.center;if((circle.y<rect.y||circle.y>rect.bottom)&&(circle.x<rect.x||circle.x>rect.right))return this.separateCircle(body1,body2,overlapOnly)}var resultX=!1,resultY=!1;this.forceX||Math.abs(this.gravity.y+body1.gravity.y)<Math.abs(this.gravity.x+body1.gravity.x)?(resultX=SeparateX(body1,body2,overlapOnly,this.OVERLAP_BIAS),this.intersects(body1,body2)&&(resultY=SeparateY(body1,body2,overlapOnly,this.OVERLAP_BIAS))):(resultY=SeparateY(body1,body2,overlapOnly,this.OVERLAP_BIAS),this.intersects(body1,body2)&&(resultX=SeparateX(body1,body2,overlapOnly,this.OVERLAP_BIAS)));var result=resultX||resultY;return result&&(overlapOnly?(body1.onOverlap||body2.onOverlap)&&this.emit(Events.OVERLAP,body1.gameObject,body2.gameObject,body1,body2):(body1.onCollide||body2.onCollide)&&this.emit(Events.COLLIDE,body1.gameObject,body2.gameObject,body1,body2)),result},separateCircle:function(body1,body2,overlapOnly,bias){GetOverlapX(body1,body2,!1,bias),GetOverlapY(body1,body2,!1,bias);var overlap=0;if(body1.isCircle!==body2.isCircle){var rect={x:body2.isCircle?body1.position.x:body2.position.x,y:body2.isCircle?body1.position.y:body2.position.y,right:body2.isCircle?body1.right:body2.right,bottom:body2.isCircle?body1.bottom:body2.bottom},circle={x:body1.isCircle?body1.center.x:body2.center.x,y:body1.isCircle?body1.center.y:body2.center.y,radius:body1.isCircle?body1.halfWidth:body2.halfWidth};circle.y<rect.y?circle.x<rect.x?overlap=DistanceBetween(circle.x,circle.y,rect.x,rect.y)-circle.radius:circle.x>rect.right&&(overlap=DistanceBetween(circle.x,circle.y,rect.right,rect.y)-circle.radius):circle.y>rect.bottom&&(circle.x<rect.x?overlap=DistanceBetween(circle.x,circle.y,rect.x,rect.bottom)-circle.radius:circle.x>rect.right&&(overlap=DistanceBetween(circle.x,circle.y,rect.right,rect.bottom)-circle.radius)),overlap*=-1}else overlap=body1.halfWidth+body2.halfWidth-DistanceBetween(body1.center.x,body1.center.y,body2.center.x,body2.center.y);if(overlapOnly||0===overlap||body1.immovable&&body2.immovable||body1.customSeparateX||body2.customSeparateX)return 0!==overlap&&(body1.onOverlap||body2.onOverlap)&&this.emit(Events.OVERLAP,body1.gameObject,body2.gameObject,body1,body2),0!==overlap;var dx=body1.position.x-body2.position.x,dy=body1.position.y-body2.position.y,d=Math.sqrt(Math.pow(dx,2)+Math.pow(dy,2)),nx=(body2.position.x-body1.position.x)/d||0,ny=(body2.position.y-body1.position.y)/d||0,p=2*(body1.velocity.x*nx+body1.velocity.y*ny-body2.velocity.x*nx-body2.velocity.y*ny)/(body1.mass+body2.mass);body1.immovable||(body1.velocity.x=(body1.velocity.x-p*body1.mass*nx)*body1.bounce.x,body1.velocity.y=(body1.velocity.y-p*body1.mass*ny)*body1.bounce.y),body2.immovable||(body2.velocity.x=(body2.velocity.x+p*body2.mass*nx)*body2.bounce.x,body2.velocity.y=(body2.velocity.y+p*body2.mass*ny)*body2.bounce.y);var dvx=body2.velocity.x-body1.velocity.x,dvy=body2.velocity.y-body1.velocity.y,angleCollision=Math.atan2(dvy,dvx),delta=this._frameTime;return body1.immovable||(body1.x+=body1.velocity.x*delta-overlap*Math.cos(angleCollision),body1.y+=body1.velocity.y*delta-overlap*Math.sin(angleCollision)),body2.immovable||(body2.x+=body2.velocity.x*delta+overlap*Math.cos(angleCollision),body2.y+=body2.velocity.y*delta+overlap*Math.sin(angleCollision)),(body1.onCollide||body2.onCollide)&&this.emit(Events.COLLIDE,body1.gameObject,body2.gameObject,body1,body2),!0},intersects:function(body1,body2){return body1!==body2&&(body1.isCircle||body2.isCircle?body1.isCircle?body2.isCircle?DistanceBetween(body1.center.x,body1.center.y,body2.center.x,body2.center.y)<=body1.halfWidth+body2.halfWidth:this.circleBodyIntersects(body1,body2):this.circleBodyIntersects(body2,body1):!(body1.right<=body2.position.x||body1.bottom<=body2.position.y||body1.position.x>=body2.right||body1.position.y>=body2.bottom))},circleBodyIntersects:function(circle,body){var x=Clamp(circle.center.x,body.left,body.right),y=Clamp(circle.center.y,body.top,body.bottom);return(circle.center.x-x)*(circle.center.x-x)+(circle.center.y-y)*(circle.center.y-y)<=circle.halfWidth*circle.halfWidth},overlap:function(object1,object2,overlapCallback,processCallback,callbackContext){return void 0===overlapCallback&&(overlapCallback=null),void 0===processCallback&&(processCallback=null),void 0===callbackContext&&(callbackContext=overlapCallback),this.collideObjects(object1,object2,overlapCallback,processCallback,callbackContext,!0)},collide:function(object1,object2,collideCallback,processCallback,callbackContext){return void 0===collideCallback&&(collideCallback=null),void 0===processCallback&&(processCallback=null),void 0===callbackContext&&(callbackContext=collideCallback),this.collideObjects(object1,object2,collideCallback,processCallback,callbackContext,!1)},collideObjects:function(object1,object2,collideCallback,processCallback,callbackContext,overlapOnly){var i,j;object1.isParent&&void 0===object1.physicsType&&(object1=object1.children.entries),object2&&object2.isParent&&void 0===object2.physicsType&&(object2=object2.children.entries);var object1isArray=Array.isArray(object1),object2isArray=Array.isArray(object2);if(this._total=0,object1isArray||object2isArray)if(!object1isArray&&object2isArray)for(i=0;i<object2.length;i++)this.collideHandler(object1,object2[i],collideCallback,processCallback,callbackContext,overlapOnly);else if(object1isArray&&!object2isArray)if(object2)for(i=0;i<object1.length;i++)this.collideHandler(object1[i],object2,collideCallback,processCallback,callbackContext,overlapOnly);else for(i=0;i<object1.length;i++){var child=object1[i];for(j=i+1;j<object1.length;j++)i!==j&&this.collideHandler(child,object1[j],collideCallback,processCallback,callbackContext,overlapOnly)}else for(i=0;i<object1.length;i++)for(j=0;j<object2.length;j++)this.collideHandler(object1[i],object2[j],collideCallback,processCallback,callbackContext,overlapOnly);else this.collideHandler(object1,object2,collideCallback,processCallback,callbackContext,overlapOnly);return this._total>0},collideHandler:function(object1,object2,collideCallback,processCallback,callbackContext,overlapOnly){if(void 0===object2&&object1.isParent)return this.collideGroupVsGroup(object1,object1,collideCallback,processCallback,callbackContext,overlapOnly);if(!object1||!object2)return!1;if(object1.body){if(object2.body)return this.collideSpriteVsSprite(object1,object2,collideCallback,processCallback,callbackContext,overlapOnly);if(object2.isParent)return this.collideSpriteVsGroup(object1,object2,collideCallback,processCallback,callbackContext,overlapOnly);if(object2.isTilemap)return this.collideSpriteVsTilemapLayer(object1,object2,collideCallback,processCallback,callbackContext,overlapOnly)}else if(object1.isParent){if(object2.body)return this.collideSpriteVsGroup(object2,object1,collideCallback,processCallback,callbackContext,overlapOnly);if(object2.isParent)return this.collideGroupVsGroup(object1,object2,collideCallback,processCallback,callbackContext,overlapOnly);if(object2.isTilemap)return this.collideGroupVsTilemapLayer(object1,object2,collideCallback,processCallback,callbackContext,overlapOnly)}else if(object1.isTilemap){if(object2.body)return this.collideSpriteVsTilemapLayer(object2,object1,collideCallback,processCallback,callbackContext,overlapOnly);if(object2.isParent)return this.collideGroupVsTilemapLayer(object2,object1,collideCallback,processCallback,callbackContext,overlapOnly)}},collideSpriteVsSprite:function(sprite1,sprite2,collideCallback,processCallback,callbackContext,overlapOnly){return!(!sprite1.body||!sprite2.body)&&(this.separate(sprite1.body,sprite2.body,processCallback,callbackContext,overlapOnly)&&(collideCallback&&collideCallback.call(callbackContext,sprite1,sprite2),this._total++),!0)},collideSpriteVsGroup:function(sprite,group,collideCallback,processCallback,callbackContext,overlapOnly){var i,len,bodyB,bodyA=sprite.body;if(0!==group.length&&bodyA&&bodyA.enable)if(this.useTree){var minMax=this.treeMinMax;minMax.minX=bodyA.left,minMax.minY=bodyA.top,minMax.maxX=bodyA.right,minMax.maxY=bodyA.bottom;var results=group.physicsType===CONST.DYNAMIC_BODY?this.tree.search(minMax):this.staticTree.search(minMax);for(len=results.length,i=0;i<len;i++)bodyA!==(bodyB=results[i])&&group.contains(bodyB.gameObject)&&this.separate(bodyA,bodyB,processCallback,callbackContext,overlapOnly)&&(collideCallback&&collideCallback.call(callbackContext,bodyA.gameObject,bodyB.gameObject),this._total++)}else{var children=group.getChildren(),skipIndex=group.children.entries.indexOf(sprite);for(len=children.length,i=0;i<len;i++)(bodyB=children[i].body)&&i!==skipIndex&&bodyB.enable&&this.separate(bodyA,bodyB,processCallback,callbackContext,overlapOnly)&&(collideCallback&&collideCallback.call(callbackContext,bodyA.gameObject,bodyB.gameObject),this._total++)}},collideGroupVsTilemapLayer:function(group,tilemapLayer,collideCallback,processCallback,callbackContext,overlapOnly){var children=group.getChildren();if(0===children.length)return!1;for(var didCollide=!1,i=0;i<children.length;i++)children[i].body&&this.collideSpriteVsTilemapLayer(children[i],tilemapLayer,collideCallback,processCallback,callbackContext,overlapOnly)&&(didCollide=!0);return didCollide},collideTiles:function(sprite,tiles,collideCallback,processCallback,callbackContext){return!(!sprite.body.enable||0===tiles.length)&&this.collideSpriteVsTilesHandler(sprite,tiles,collideCallback,processCallback,callbackContext,!1,!1)},overlapTiles:function(sprite,tiles,collideCallback,processCallback,callbackContext){return!(!sprite.body.enable||0===tiles.length)&&this.collideSpriteVsTilesHandler(sprite,tiles,collideCallback,processCallback,callbackContext,!0,!1)},collideSpriteVsTilemapLayer:function(sprite,tilemapLayer,collideCallback,processCallback,callbackContext,overlapOnly){var body=sprite.body;if(!body.enable)return!1;var x=body.position.x,y=body.position.y,w=body.width,h=body.height,layerData=tilemapLayer.layer;if(layerData.tileWidth>layerData.baseTileWidth){var xDiff=(layerData.tileWidth-layerData.baseTileWidth)*tilemapLayer.scaleX;x-=xDiff,w+=xDiff}layerData.tileHeight>layerData.baseTileHeight&&(h+=(layerData.tileHeight-layerData.baseTileHeight)*tilemapLayer.scaleY);var mapData=tilemapLayer.getTilesWithinWorldXY(x,y,w,h);return 0!==mapData.length&&this.collideSpriteVsTilesHandler(sprite,mapData,collideCallback,processCallback,callbackContext,overlapOnly,!0)},collideSpriteVsTilesHandler:function(sprite,tiles,collideCallback,processCallback,callbackContext,overlapOnly,isLayer){for(var tile,tilemapLayer,body=sprite.body,tileWorldRect={left:0,right:0,top:0,bottom:0},collision=!1,i=0;i<tiles.length;i++)tilemapLayer=(tile=tiles[i]).tilemapLayer,tileWorldRect.left=tilemapLayer.tileToWorldX(tile.x),tileWorldRect.top=tilemapLayer.tileToWorldY(tile.y),tile.baseHeight!==tile.height&&(tileWorldRect.top-=(tile.height-tile.baseHeight)*tilemapLayer.scaleY),tileWorldRect.right=tileWorldRect.left+tile.width*tilemapLayer.scaleX,tileWorldRect.bottom=tileWorldRect.top+tile.height*tilemapLayer.scaleY,TileIntersectsBody(tileWorldRect,body)&&(!processCallback||processCallback.call(callbackContext,sprite,tile))&&ProcessTileCallbacks(tile,sprite)&&(overlapOnly||SeparateTile(i,body,tile,tileWorldRect,tilemapLayer,this.TILE_BIAS,isLayer))&&(this._total++,collision=!0,collideCallback&&collideCallback.call(callbackContext,sprite,tile),overlapOnly&&body.onOverlap?this.emit(Events.TILE_OVERLAP,sprite,tile,body):body.onCollide&&this.emit(Events.TILE_COLLIDE,sprite,tile,body));return collision},collideGroupVsGroup:function(group1,group2,collideCallback,processCallback,callbackContext,overlapOnly){if(0!==group1.length&&0!==group2.length)for(var children=group1.getChildren(),i=0;i<children.length;i++)this.collideSpriteVsGroup(children[i],group2,collideCallback,processCallback,callbackContext,overlapOnly)},wrap:function(object,padding){object.body?this.wrapObject(object,padding):object.getChildren?this.wrapArray(object.getChildren(),padding):Array.isArray(object)?this.wrapArray(object,padding):this.wrapObject(object,padding)},wrapArray:function(objects,padding){for(var i=0;i<objects.length;i++)this.wrapObject(objects[i],padding)},wrapObject:function(object,padding){void 0===padding&&(padding=0),object.x=Wrap(object.x,this.bounds.left-padding,this.bounds.right+padding),object.y=Wrap(object.y,this.bounds.top-padding,this.bounds.bottom+padding)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null}});module.exports=World},function(module,exports,__webpack_require__){var CircleContains=__webpack_require__(52),Class=__webpack_require__(0),CONST=__webpack_require__(59),Events=__webpack_require__(231),RadToDeg=__webpack_require__(186),Rectangle=__webpack_require__(11),RectangleContains=__webpack_require__(54),Vector2=__webpack_require__(3),Body=new Class({initialize:function(world,gameObject){var width=gameObject.width?gameObject.width:64,height=gameObject.height?gameObject.height:64;this.world=world,this.gameObject=gameObject,this.transform={x:gameObject.x,y:gameObject.y,rotation:gameObject.angle,scaleX:gameObject.scaleX,scaleY:gameObject.scaleY,displayOriginX:gameObject.displayOriginX,displayOriginY:gameObject.displayOriginY},this.debugShowBody=world.defaults.debugShowBody,this.debugShowVelocity=world.defaults.debugShowVelocity,this.debugBodyColor=world.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new Vector2,this.position=new Vector2(gameObject.x,gameObject.y),this.prev=new Vector2(gameObject.x,gameObject.y),this.allowRotation=!0,this.rotation=gameObject.angle,this.preRotation=gameObject.angle,this.width=width,this.height=height,this.sourceWidth=width,this.sourceHeight=height,gameObject.frame&&(this.sourceWidth=gameObject.frame.realWidth,this.sourceHeight=gameObject.frame.realHeight),this.halfWidth=Math.abs(width/2),this.halfHeight=Math.abs(height/2),this.center=new Vector2(gameObject.x+this.halfWidth,gameObject.y+this.halfHeight),this.velocity=new Vector2,this.newVelocity=new Vector2,this.deltaMax=new Vector2,this.acceleration=new Vector2,this.allowDrag=!0,this.drag=new Vector2,this.allowGravity=!0,this.gravity=new Vector2,this.bounce=new Vector2,this.worldBounce=null,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new Vector2(1e4,1e4),this.maxSpeed=-1,this.friction=new Vector2(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=CONST.FACING_NONE,this.immovable=!1,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=CONST.DYNAMIC_BODY,this._reset=!0,this._sx=gameObject.scaleX,this._sy=gameObject.scaleY,this._dx=0,this._dy=0,this._bounds=new Rectangle},updateBounds:function(){var sprite=this.gameObject,transform=this.transform;if(sprite.parentContainer){var matrix=sprite.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);transform.x=matrix.tx,transform.y=matrix.ty,transform.rotation=RadToDeg(matrix.rotation),transform.scaleX=matrix.scaleX,transform.scaleY=matrix.scaleY,transform.displayOriginX=sprite.displayOriginX,transform.displayOriginY=sprite.displayOriginY}else transform.x=sprite.x,transform.y=sprite.y,transform.rotation=sprite.angle,transform.scaleX=sprite.scaleX,transform.scaleY=sprite.scaleY,transform.displayOriginX=sprite.displayOriginX,transform.displayOriginY=sprite.displayOriginY;var recalc=!1;if(this.syncBounds){var b=sprite.getBounds(this._bounds);this.width=b.width,this.height=b.height,recalc=!0}else{var asx=Math.abs(transform.scaleX),asy=Math.abs(transform.scaleY);this._sx===asx&&this._sy===asy||(this.width=this.sourceWidth*asx,this.height=this.sourceHeight*asy,this._sx=asx,this._sy=asy,recalc=!0)}recalc&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},resetFlags:function(){this.wasTouching.none=this.touching.none,this.wasTouching.up=this.touching.up,this.wasTouching.down=this.touching.down,this.wasTouching.left=this.touching.left,this.wasTouching.right=this.touching.right,this.touching.none=!0,this.touching.up=!1,this.touching.down=!1,this.touching.left=!1,this.touching.right=!1,this.blocked.none=!0,this.blocked.up=!1,this.blocked.down=!1,this.blocked.left=!1,this.blocked.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(willStep,delta){willStep&&this.resetFlags(),this.updateBounds();var sprite=this.transform;this.position.x=sprite.x+sprite.scaleX*(this.offset.x-sprite.displayOriginX),this.position.y=sprite.y+sprite.scaleY*(this.offset.y-sprite.displayOriginY),this.updateCenter(),this.rotation=sprite.rotation,this.preRotation=this.rotation,this._reset&&(this.prev.x=this.position.x,this.prev.y=this.position.y),willStep&&this.update(delta)},update:function(delta){if(this.moves){this.world.updateMotion(this,delta);var vx=this.velocity.x,vy=this.velocity.y;this.newVelocity.set(vx*delta,vy*delta),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(vy,vx),this.speed=Math.sqrt(vx*vx+vy*vy),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(Events.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var dx=this.position.x-this.prev.x,dy=this.position.y-this.prev.y;if(this.moves){var mx=this.deltaMax.x,my=this.deltaMax.y;0!==mx&&0!==dx&&(dx<0&&dx<-mx?dx=-mx:dx>0&&dx>mx&&(dx=mx)),0!==my&&0!==dy&&(dy<0&&dy<-my?dy=-my:dy>0&&dy>my&&(dy=my)),this.gameObject.x+=dx,this.gameObject.y+=dy,this._reset=!0}dx<0?this.facing=CONST.FACING_LEFT:dx>0&&(this.facing=CONST.FACING_RIGHT),dy<0?this.facing=CONST.FACING_UP:dy>0&&(this.facing=CONST.FACING_DOWN),this._dx=dx,this._dy=dy,this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this.prev.x=this.position.x,this.prev.y=this.position.y},checkWorldBounds:function(){var pos=this.position,bounds=this.world.bounds,check=this.world.checkCollision,bx=this.worldBounce?-this.worldBounce.x:-this.bounce.x,by=this.worldBounce?-this.worldBounce.y:-this.bounce.y;return pos.x<bounds.x&&check.left?(pos.x=bounds.x,this.velocity.x*=bx,this.blocked.left=!0,this.blocked.none=!1):this.right>bounds.right&&check.right&&(pos.x=bounds.right-this.width,this.velocity.x*=bx,this.blocked.right=!0,this.blocked.none=!1),pos.y<bounds.y&&check.up?(pos.y=bounds.y,this.velocity.y*=by,this.blocked.up=!0,this.blocked.none=!1):this.bottom>bounds.bottom&&check.down&&(pos.y=bounds.bottom-this.height,this.velocity.y*=by,this.blocked.down=!0,this.blocked.none=!1),!this.blocked.none},setOffset:function(x,y){return void 0===y&&(y=x),this.offset.set(x,y),this},setSize:function(width,height,center){void 0===center&&(center=!0);var gameObject=this.gameObject;if(!width&&gameObject.frame&&(width=gameObject.frame.realWidth),!height&&gameObject.frame&&(height=gameObject.frame.realHeight),this.sourceWidth=width,this.sourceHeight=height,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),center&&gameObject.getCenter){var ox=gameObject.displayWidth/2,oy=gameObject.displayHeight/2;this.offset.set(ox-this.halfWidth,oy-this.halfHeight)}return this.isCircle=!1,this.radius=0,this},setCircle:function(radius,offsetX,offsetY){return void 0===offsetX&&(offsetX=this.offset.x),void 0===offsetY&&(offsetY=this.offset.y),radius>0?(this.isCircle=!0,this.radius=radius,this.sourceWidth=2*radius,this.sourceHeight=2*radius,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(offsetX,offsetY),this.updateCenter()):this.isCircle=!1,this},reset:function(x,y){this.stop();var gameObject=this.gameObject;gameObject.setPosition(x,y),gameObject.getTopLeft?gameObject.getTopLeft(this.position):this.position.set(x,y),this.prev.copy(this.position),this.rotation=gameObject.angle,this.preRotation=gameObject.angle,this.updateBounds(),this.updateCenter()},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(obj){return obj.x=this.x,obj.y=this.y,obj.right=this.right,obj.bottom=this.bottom,obj},hitTest:function(x,y){return this.isCircle?CircleContains(this,x,y):RectangleContains(this,x,y)},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(graphic){var pos=this.position,x=pos.x+this.halfWidth,y=pos.y+this.halfHeight;this.debugShowBody&&(graphic.lineStyle(graphic.defaultStrokeWidth,this.debugBodyColor),this.isCircle?graphic.strokeCircle(x,y,this.width/2):(this.checkCollision.up&&graphic.lineBetween(pos.x,pos.y,pos.x+this.width,pos.y),this.checkCollision.right&&graphic.lineBetween(pos.x+this.width,pos.y,pos.x+this.width,pos.y+this.height),this.checkCollision.down&&graphic.lineBetween(pos.x,pos.y+this.height,pos.x+this.width,pos.y+this.height),this.checkCollision.left&&graphic.lineBetween(pos.x,pos.y,pos.x,pos.y+this.height))),this.debugShowVelocity&&(graphic.lineStyle(graphic.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),graphic.lineBetween(x,y,x+this.velocity.x/2,y+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(value,bounceX,bounceY){void 0===value&&(value=!0),this.collideWorldBounds=value;var setBounceX=void 0!==bounceX,setBounceY=void 0!==bounceY;return(setBounceX||setBounceY)&&(this.worldBounce||(this.worldBounce=new Vector2),setBounceX&&(this.worldBounce.x=bounceX),setBounceY&&(this.worldBounce.y=bounceY)),this},setVelocity:function(x,y){return this.velocity.set(x,y),x=this.velocity.x,y=this.velocity.y,this.speed=Math.sqrt(x*x+y*y),this},setVelocityX:function(value){this.velocity.x=value;var x=value,y=this.velocity.y;return this.speed=Math.sqrt(x*x+y*y),this},setVelocityY:function(value){this.velocity.y=value;var x=this.velocity.x,y=value;return this.speed=Math.sqrt(x*x+y*y),this},setMaxVelocity:function(x,y){return this.maxVelocity.set(x,y),this},setMaxSpeed:function(value){return this.maxSpeed=value,this},setBounce:function(x,y){return this.bounce.set(x,y),this},setBounceX:function(value){return this.bounce.x=value,this},setBounceY:function(value){return this.bounce.y=value,this},setAcceleration:function(x,y){return this.acceleration.set(x,y),this},setAccelerationX:function(value){return this.acceleration.x=value,this},setAccelerationY:function(value){return this.acceleration.y=value,this},setAllowDrag:function(value){return void 0===value&&(value=!0),this.allowDrag=value,this},setAllowGravity:function(value){return void 0===value&&(value=!0),this.allowGravity=value,this},setAllowRotation:function(value){return void 0===value&&(value=!0),this.allowRotation=value,this},setDrag:function(x,y){return this.drag.set(x,y),this},setDragX:function(value){return this.drag.x=value,this},setDragY:function(value){return this.drag.y=value,this},setGravity:function(x,y){return this.gravity.set(x,y),this},setGravityX:function(value){return this.gravity.x=value,this},setGravityY:function(value){return this.gravity.y=value,this},setFriction:function(x,y){return this.friction.set(x,y),this},setFrictionX:function(value){return this.friction.x=value,this},setFrictionY:function(value){return this.friction.y=value,this},setAngularVelocity:function(value){return this.angularVelocity=value,this},setAngularAcceleration:function(value){return this.angularAcceleration=value,this},setAngularDrag:function(value){return this.angularDrag=value,this},setMass:function(value){return this.mass=value,this},setImmovable:function(value){return void 0===value&&(value=!0),this.immovable=value,this},setEnable:function(value){return void 0===value&&(value=!0),this.enable=value,this},x:{get:function(){return this.position.x},set:function(value){this.position.x=value}},y:{get:function(){return this.position.y},set:function(value){this.position.y=value}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});module.exports=Body},function(module,exports,__webpack_require__){var Collider=new(__webpack_require__(0))({initialize:function(world,overlapOnly,object1,object2,collideCallback,processCallback,callbackContext){this.world=world,this.name="",this.active=!0,this.overlapOnly=overlapOnly,this.object1=object1,this.object2=object2,this.collideCallback=collideCallback,this.processCallback=processCallback,this.callbackContext=callbackContext},setName:function(name){return this.name=name,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});module.exports=Collider},function(module,exports,__webpack_require__){var CONST=__webpack_require__(59);module.exports=function(body1,body2,overlapOnly,bias){var overlap=0,maxOverlap=body1.deltaAbsX()+body2.deltaAbsX()+bias;return 0===body1._dx&&0===body2._dx?(body1.embedded=!0,body2.embedded=!0):body1._dx>body2._dx?(overlap=body1.right-body2.x)>maxOverlap&&!overlapOnly||!1===body1.checkCollision.right||!1===body2.checkCollision.left?overlap=0:(body1.touching.none=!1,body1.touching.right=!0,body2.touching.none=!1,body2.touching.left=!0,body2.physicsType===CONST.STATIC_BODY&&(body1.blocked.none=!1,body1.blocked.right=!0),body1.physicsType===CONST.STATIC_BODY&&(body2.blocked.none=!1,body2.blocked.left=!0)):body1._dx<body2._dx&&(-(overlap=body1.x-body2.width-body2.x)>maxOverlap&&!overlapOnly||!1===body1.checkCollision.left||!1===body2.checkCollision.right?overlap=0:(body1.touching.none=!1,body1.touching.left=!0,body2.touching.none=!1,body2.touching.right=!0,body2.physicsType===CONST.STATIC_BODY&&(body1.blocked.none=!1,body1.blocked.left=!0),body1.physicsType===CONST.STATIC_BODY&&(body2.blocked.none=!1,body2.blocked.right=!0))),body1.overlapX=overlap,body2.overlapX=overlap,overlap}},function(module,exports,__webpack_require__){var CONST=__webpack_require__(59);module.exports=function(body1,body2,overlapOnly,bias){var overlap=0,maxOverlap=body1.deltaAbsY()+body2.deltaAbsY()+bias;return 0===body1._dy&&0===body2._dy?(body1.embedded=!0,body2.embedded=!0):body1._dy>body2._dy?(overlap=body1.bottom-body2.y)>maxOverlap&&!overlapOnly||!1===body1.checkCollision.down||!1===body2.checkCollision.up?overlap=0:(body1.touching.none=!1,body1.touching.down=!0,body2.touching.none=!1,body2.touching.up=!0,body2.physicsType===CONST.STATIC_BODY&&(body1.blocked.none=!1,body1.blocked.down=!0),body1.physicsType===CONST.STATIC_BODY&&(body2.blocked.none=!1,body2.blocked.up=!0)):body1._dy<body2._dy&&(-(overlap=body1.y-body2.bottom)>maxOverlap&&!overlapOnly||!1===body1.checkCollision.up||!1===body2.checkCollision.down?overlap=0:(body1.touching.none=!1,body1.touching.up=!0,body2.touching.none=!1,body2.touching.down=!0,body2.physicsType===CONST.STATIC_BODY&&(body1.blocked.none=!1,body1.blocked.up=!0),body1.physicsType===CONST.STATIC_BODY&&(body2.blocked.none=!1,body2.blocked.down=!0))),body1.overlapY=overlap,body2.overlapY=overlap,overlap}},function(module,exports,__webpack_require__){var ProcessQueue=new(__webpack_require__(0))({initialize:function(){this._pending=[],this._active=[],this._destroy=[],this._toProcess=0},add:function(item){return this._pending.push(item),this._toProcess++,this},remove:function(item){return this._destroy.push(item),this._toProcess++,this},update:function(){if(0===this._toProcess)return this._active;var i,item,list=this._destroy,active=this._active;for(i=0;i<list.length;i++){item=list[i];var idx=active.indexOf(item);-1!==idx&&active.splice(idx,1)}for(list.length=0,list=this._pending,i=0;i<list.length;i++)item=list[i],this._active.push(item);return list.length=0,this._toProcess=0,this._active},getActive:function(){return this._active},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});module.exports=ProcessQueue},function(module,exports,__webpack_require__){var quickselect=__webpack_require__(397);function rbush(maxEntries){if(!(this instanceof rbush))return new rbush(maxEntries,[".left",".top",".right",".bottom"]);this._maxEntries=Math.max(4,maxEntries||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}function findItem(item,items,equalsFn){if(!equalsFn)return items.indexOf(item);for(var i=0;i<items.length;i++)if(equalsFn(item,items[i]))return i;return-1}function calcBBox(node,toBBox){distBBox(node,0,node.children.length,toBBox,node)}function distBBox(node,k,p,toBBox,destNode){destNode||(destNode=createNode(null)),destNode.minX=1/0,destNode.minY=1/0,destNode.maxX=-1/0,destNode.maxY=-1/0;for(var child,i=k;i<p;i++)child=node.children[i],extend(destNode,node.leaf?toBBox(child):child);return destNode}function extend(a,b){return a.minX=Math.min(a.minX,b.minX),a.minY=Math.min(a.minY,b.minY),a.maxX=Math.max(a.maxX,b.maxX),a.maxY=Math.max(a.maxY,b.maxY),a}function compareNodeMinX(a,b){return a.minX-b.minX}function compareNodeMinY(a,b){return a.minY-b.minY}function bboxArea(a){return(a.maxX-a.minX)*(a.maxY-a.minY)}function bboxMargin(a){return a.maxX-a.minX+(a.maxY-a.minY)}function contains(a,b){return a.minX<=b.minX&&a.minY<=b.minY&&b.maxX<=a.maxX&&b.maxY<=a.maxY}function intersects(a,b){return b.minX<=a.maxX&&b.minY<=a.maxY&&b.maxX>=a.minX&&b.maxY>=a.minY}function createNode(children){return{children:children,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function multiSelect(arr,left,right,n,compare){for(var mid,stack=[left,right];stack.length;)(right=stack.pop())-(left=stack.pop())<=n||(mid=left+Math.ceil((right-left)/n/2)*n,quickselect(arr,mid,left,right,compare),stack.push(left,mid,mid,right))}rbush.prototype={all:function(){return this._all(this.data,[])},search:function(bbox){var node=this.data,result=[],toBBox=this.toBBox;if(!intersects(bbox,node))return result;for(var i,len,child,childBBox,nodesToSearch=[];node;){for(i=0,len=node.children.length;i<len;i++)child=node.children[i],intersects(bbox,childBBox=node.leaf?toBBox(child):child)&&(node.leaf?result.push(child):contains(bbox,childBBox)?this._all(child,result):nodesToSearch.push(child));node=nodesToSearch.pop()}return result},collides:function(bbox){var node=this.data,toBBox=this.toBBox;if(!intersects(bbox,node))return!1;for(var i,len,child,childBBox,nodesToSearch=[];node;){for(i=0,len=node.children.length;i<len;i++)if(child=node.children[i],intersects(bbox,childBBox=node.leaf?toBBox(child):child)){if(node.leaf||contains(bbox,childBBox))return!0;nodesToSearch.push(child)}node=nodesToSearch.pop()}return!1},load:function(data){if(!data||!data.length)return this;if(data.length<this._minEntries){for(var i=0,len=data.length;i<len;i++)this.insert(data[i]);return this}var node=this._build(data.slice(),0,data.length-1,0);if(this.data.children.length)if(this.data.height===node.height)this._splitRoot(this.data,node);else{if(this.data.height<node.height){var tmpNode=this.data;this.data=node,node=tmpNode}this._insert(node,this.data.height-node.height-1,!0)}else this.data=node;return this},insert:function(item){return item&&this._insert(item,this.data.height-1),this},clear:function(){return this.data=createNode([]),this},remove:function(item,equalsFn){if(!item)return this;for(var i,parent,index,goingUp,node=this.data,bbox=this.toBBox(item),path=[],indexes=[];node||path.length;){if(node||(node=path.pop(),parent=path[path.length-1],i=indexes.pop(),goingUp=!0),node.leaf&&-1!==(index=findItem(item,node.children,equalsFn)))return node.children.splice(index,1),path.push(node),this._condense(path),this;goingUp||node.leaf||!contains(node,bbox)?parent?(i++,node=parent.children[i],goingUp=!1):node=null:(path.push(node),indexes.push(i),i=0,parent=node,node=node.children[0])}return this},toBBox:function(item){return item},compareMinX:compareNodeMinX,compareMinY:compareNodeMinY,toJSON:function(){return this.data},fromJSON:function(data){return this.data=data,this},_all:function(node,result){for(var nodesToSearch=[];node;)node.leaf?result.push.apply(result,node.children):nodesToSearch.push.apply(nodesToSearch,node.children),node=nodesToSearch.pop();return result},_build:function(items,left,right,height){var node,N=right-left+1,M=this._maxEntries;if(N<=M)return calcBBox(node=createNode(items.slice(left,right+1)),this.toBBox),node;height||(height=Math.ceil(Math.log(N)/Math.log(M)),M=Math.ceil(N/Math.pow(M,height-1))),(node=createNode([])).leaf=!1,node.height=height;var i,j,right2,right3,N2=Math.ceil(N/M),N1=N2*Math.ceil(Math.sqrt(M));for(multiSelect(items,left,right,N1,this.compareMinX),i=left;i<=right;i+=N1)for(multiSelect(items,i,right2=Math.min(i+N1-1,right),N2,this.compareMinY),j=i;j<=right2;j+=N2)right3=Math.min(j+N2-1,right2),node.children.push(this._build(items,j,right3,height-1));return calcBBox(node,this.toBBox),node},_chooseSubtree:function(bbox,node,level,path){for(var i,len,child,targetNode,area,enlargement,minArea,minEnlargement,a,b;path.push(node),!node.leaf&&path.length-1!==level;){for(minArea=minEnlargement=1/0,i=0,len=node.children.length;i<len;i++)area=bboxArea(child=node.children[i]),a=bbox,b=child,(enlargement=(Math.max(b.maxX,a.maxX)-Math.min(b.minX,a.minX))*(Math.max(b.maxY,a.maxY)-Math.min(b.minY,a.minY))-area)<minEnlargement?(minEnlargement=enlargement,minArea=area<minArea?area:minArea,targetNode=child):enlargement===minEnlargement&&area<minArea&&(minArea=area,targetNode=child);node=targetNode||node.children[0]}return node},_insert:function(item,level,isNode){var toBBox=this.toBBox,bbox=isNode?item:toBBox(item),insertPath=[],node=this._chooseSubtree(bbox,this.data,level,insertPath);for(node.children.push(item),extend(node,bbox);level>=0&&insertPath[level].children.length>this._maxEntries;)this._split(insertPath,level),level--;this._adjustParentBBoxes(bbox,insertPath,level)},_split:function(insertPath,level){var node=insertPath[level],M=node.children.length,m=this._minEntries;this._chooseSplitAxis(node,m,M);var splitIndex=this._chooseSplitIndex(node,m,M),newNode=createNode(node.children.splice(splitIndex,node.children.length-splitIndex));newNode.height=node.height,newNode.leaf=node.leaf,calcBBox(node,this.toBBox),calcBBox(newNode,this.toBBox),level?insertPath[level-1].children.push(newNode):this._splitRoot(node,newNode)},_splitRoot:function(node,newNode){this.data=createNode([node,newNode]),this.data.height=node.height+1,this.data.leaf=!1,calcBBox(this.data,this.toBBox)},_chooseSplitIndex:function(node,m,M){var i,bbox1,bbox2,overlap,area,minOverlap,minArea,index,a,b,minX,minY,maxX,maxY;for(minOverlap=minArea=1/0,i=m;i<=M-m;i++)bbox1=distBBox(node,0,i,this.toBBox),bbox2=distBBox(node,i,M,this.toBBox),a=bbox1,b=bbox2,minX=void 0,minY=void 0,maxX=void 0,maxY=void 0,minX=Math.max(a.minX,b.minX),minY=Math.max(a.minY,b.minY),maxX=Math.min(a.maxX,b.maxX),maxY=Math.min(a.maxY,b.maxY),overlap=Math.max(0,maxX-minX)*Math.max(0,maxY-minY),area=bboxArea(bbox1)+bboxArea(bbox2),overlap<minOverlap?(minOverlap=overlap,index=i,minArea=area<minArea?area:minArea):overlap===minOverlap&&area<minArea&&(minArea=area,index=i);return index},_chooseSplitAxis:function(node,m,M){var compareMinX=node.leaf?this.compareMinX:compareNodeMinX,compareMinY=node.leaf?this.compareMinY:compareNodeMinY;this._allDistMargin(node,m,M,compareMinX)<this._allDistMargin(node,m,M,compareMinY)&&node.children.sort(compareMinX)},_allDistMargin:function(node,m,M,compare){node.children.sort(compare);var i,child,toBBox=this.toBBox,leftBBox=distBBox(node,0,m,toBBox),rightBBox=distBBox(node,M-m,M,toBBox),margin=bboxMargin(leftBBox)+bboxMargin(rightBBox);for(i=m;i<M-m;i++)child=node.children[i],extend(leftBBox,node.leaf?toBBox(child):child),margin+=bboxMargin(leftBBox);for(i=M-m-1;i>=m;i--)child=node.children[i],extend(rightBBox,node.leaf?toBBox(child):child),margin+=bboxMargin(rightBBox);return margin},_adjustParentBBoxes:function(bbox,path,level){for(var i=level;i>=0;i--)extend(path[i],bbox)},_condense:function(path){for(var siblings,i=path.length-1;i>=0;i--)0===path[i].children.length?i>0?(siblings=path[i-1].children).splice(siblings.indexOf(path[i]),1):this.clear():calcBBox(path[i],this.toBBox)},compareMinX:function(a,b){return a.left-b.left},compareMinY:function(a,b){return a.top-b.top},toBBox:function(a){return{minX:a.left,minY:a.top,maxX:a.right,maxY:a.bottom}}},module.exports=rbush},function(module,exports){module.exports=function(tileWorldRect,body){return!(body.right<=tileWorldRect.left||body.bottom<=tileWorldRect.top||body.position.x>=tileWorldRect.right||body.position.y>=tileWorldRect.bottom)}},function(module,exports,__webpack_require__){var CircleContains=__webpack_require__(52),Class=__webpack_require__(0),CONST=__webpack_require__(59),RectangleContains=__webpack_require__(54),Vector2=__webpack_require__(3),StaticBody=new Class({initialize:function(world,gameObject){var width=gameObject.width?gameObject.width:64,height=gameObject.height?gameObject.height:64;this.world=world,this.gameObject=gameObject,this.debugShowBody=world.defaults.debugShowStaticBody,this.debugBodyColor=world.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new Vector2,this.position=new Vector2(gameObject.x-gameObject.displayOriginX,gameObject.y-gameObject.displayOriginY),this.width=width,this.height=height,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new Vector2(gameObject.x+this.halfWidth,gameObject.y+this.halfHeight),this.velocity=Vector2.ZERO,this.allowGravity=!1,this.gravity=Vector2.ZERO,this.bounce=Vector2.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=CONST.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(gameObject,update){return gameObject&&gameObject!==this.gameObject&&(this.gameObject.body=null,gameObject.body=this,this.gameObject=gameObject),update&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var gameObject=this.gameObject;return gameObject.getTopLeft(this.position),this.width=gameObject.displayWidth,this.height=gameObject.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(x,y){return void 0===y&&(y=x),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(x,y),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(width,height,center){void 0===center&&(center=!0);var gameObject=this.gameObject;if(!width&&gameObject.frame&&(width=gameObject.frame.realWidth),!height&&gameObject.frame&&(height=gameObject.frame.realHeight),this.world.staticTree.remove(this),this.width=width,this.height=height,this.halfWidth=Math.floor(width/2),this.halfHeight=Math.floor(height/2),center&&gameObject.getCenter){var ox=gameObject.displayWidth/2,oy=gameObject.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(ox-this.halfWidth,oy-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(radius,offsetX,offsetY){return void 0===offsetX&&(offsetX=this.offset.x),void 0===offsetY&&(offsetY=this.offset.y),radius>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=radius,this.width=2*radius,this.height=2*radius,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(offsetX,offsetY),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(x,y){var gameObject=this.gameObject;void 0===x&&(x=gameObject.x),void 0===y&&(y=gameObject.y),this.world.staticTree.remove(this),gameObject.setPosition(x,y),gameObject.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(obj){return obj.x=this.x,obj.y=this.y,obj.right=this.right,obj.bottom=this.bottom,obj},hitTest:function(x,y){return this.isCircle?CircleContains(this,x,y):RectangleContains(this,x,y)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(graphic){var pos=this.position,x=pos.x+this.halfWidth,y=pos.y+this.halfHeight;this.debugShowBody&&(graphic.lineStyle(graphic.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?graphic.strokeCircle(x,y,this.width/2):graphic.strokeRect(pos.x,pos.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(value){return value<=0&&(value=.1),this.mass=value,this},x:{get:function(){return this.position.x},set:function(value){this.world.staticTree.remove(this),this.position.x=value,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(value){this.world.staticTree.remove(this),this.position.y=value,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});module.exports=StaticBody},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),COLLIDES=__webpack_require__(111),GetVelocity=__webpack_require__(1287),TYPE=__webpack_require__(112),UpdateMotion=__webpack_require__(1288),Body=new Class({initialize:function(world,x,y,sx,sy){void 0===sx&&(sx=16),void 0===sy&&(sy=sx),this.world=world,this.gameObject=null,this.enabled=!0,this.parent,this.id=world.getNextID(),this.name="",this.size={x:sx,y:sy},this.offset={x:0,y:0},this.pos={x:x,y:y},this.last={x:x,y:y},this.vel={x:0,y:0},this.accel={x:0,y:0},this.friction={x:0,y:0},this.maxVel={x:world.defaults.maxVelocityX,y:world.defaults.maxVelocityY},this.standing=!1,this.gravityFactor=world.defaults.gravityFactor,this.bounciness=world.defaults.bounciness,this.minBounceVelocity=world.defaults.minBounceVelocity,this.accelGround=0,this.accelAir=0,this.jumpSpeed=0,this.type=TYPE.NONE,this.checkAgainst=TYPE.NONE,this.collides=COLLIDES.NEVER,this.debugShowBody=world.defaults.debugShowBody,this.debugShowVelocity=world.defaults.debugShowVelocity,this.debugBodyColor=world.defaults.bodyDebugColor,this.updateCallback,this.slopeStanding={min:.767944870877505,max:2.3736477827122884}},reset:function(x,y){this.pos={x:x,y:y},this.last={x:x,y:y},this.vel={x:0,y:0},this.accel={x:0,y:0},this.friction={x:0,y:0},this.maxVel={x:100,y:100},this.standing=!1,this.gravityFactor=1,this.bounciness=0,this.minBounceVelocity=40,this.accelGround=0,this.accelAir=0,this.jumpSpeed=0,this.type=TYPE.NONE,this.checkAgainst=TYPE.NONE,this.collides=COLLIDES.NEVER},update:function(delta){var pos=this.pos;this.last.x=pos.x,this.last.y=pos.y,this.vel.y+=this.world.gravity*delta*this.gravityFactor,this.vel.x=GetVelocity(delta,this.vel.x,this.accel.x,this.friction.x,this.maxVel.x),this.vel.y=GetVelocity(delta,this.vel.y,this.accel.y,this.friction.y,this.maxVel.y);var mx=this.vel.x*delta,my=this.vel.y*delta,res=this.world.collisionMap.trace(pos.x,pos.y,mx,my,this.size.x,this.size.y);this.handleMovementTrace(res)&&UpdateMotion(this,res);var go=this.gameObject;go&&(go.x=pos.x-this.offset.x+go.displayOriginX*go.scaleX,go.y=pos.y-this.offset.y+go.displayOriginY*go.scaleY),this.updateCallback&&this.updateCallback(this)},drawDebug:function(graphic){var pos=this.pos;if(this.debugShowBody&&(graphic.lineStyle(1,this.debugBodyColor,1),graphic.strokeRect(pos.x,pos.y,this.size.x,this.size.y)),this.debugShowVelocity){var x=pos.x+this.size.x/2,y=pos.y+this.size.y/2;graphic.lineStyle(1,this.world.defaults.velocityDebugColor,1),graphic.lineBetween(x,y,x+this.vel.x,y+this.vel.y)}},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},skipHash:function(){return!this.enabled||0===this.type&&0===this.checkAgainst&&0===this.collides},touches:function(other){return!(this.pos.x>=other.pos.x+other.size.x||this.pos.x+this.size.x<=other.pos.x||this.pos.y>=other.pos.y+other.size.y||this.pos.y+this.size.y<=other.pos.y)},resetSize:function(x,y,width,height){return this.pos.x=x,this.pos.y=y,this.size.x=width,this.size.y=height,this},toJSON:function(){return{name:this.name,size:{x:this.size.x,y:this.size.y},pos:{x:this.pos.x,y:this.pos.y},vel:{x:this.vel.x,y:this.vel.y},accel:{x:this.accel.x,y:this.accel.y},friction:{x:this.friction.x,y:this.friction.y},maxVel:{x:this.maxVel.x,y:this.maxVel.y},gravityFactor:this.gravityFactor,bounciness:this.bounciness,minBounceVelocity:this.minBounceVelocity,type:this.type,checkAgainst:this.checkAgainst,collides:this.collides}},fromJSON:function(){},check:function(){},collideWith:function(other,axis){this.parent&&this.parent._collideCallback&&this.parent._collideCallback.call(this.parent._callbackScope,this,other,axis)},handleMovementTrace:function(){return!0},destroy:function(){this.world.remove(this),this.enabled=!1,this.world=null,this.gameObject=null,this.parent=null}});module.exports=Body},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),DefaultDefs=__webpack_require__(1292),CollisionMap=new Class({initialize:function(tilesize,data){void 0===tilesize&&(tilesize=32),this.tilesize=tilesize,this.data=Array.isArray(data)?data:[],this.width=Array.isArray(data)?data[0].length:0,this.height=Array.isArray(data)?data.length:0,this.lastSlope=55,this.tiledef=DefaultDefs},trace:function(x,y,vx,vy,objectWidth,objectHeight){var res={collision:{x:!1,y:!1,slope:!1},pos:{x:x+vx,y:y+vy},tile:{x:0,y:0}};if(!this.data)return res;var steps=Math.ceil(Math.max(Math.abs(vx),Math.abs(vy))/this.tilesize);if(steps>1)for(var sx=vx/steps,sy=vy/steps,i=0;i<steps&&(sx||sy)&&(this.step(res,x,y,sx,sy,objectWidth,objectHeight,vx,vy,i),x=res.pos.x,y=res.pos.y,res.collision.x&&(sx=0,vx=0),res.collision.y&&(sy=0,vy=0),!res.collision.slope);i++);else this.step(res,x,y,vx,vy,objectWidth,objectHeight,vx,vy,0);return res},step:function(res,x,y,vx,vy,width,height,rvx,rvy,step){var tileX,tileY,t=0,tilesize=this.tilesize,mapWidth=this.width,mapHeight=this.height;if(vx){var pxOffsetX=vx>0?width:0,tileOffsetX=vx<0?tilesize:0,firstTileY=Math.max(Math.floor(y/tilesize),0),lastTileY=Math.min(Math.ceil((y+height)/tilesize),mapHeight);tileX=Math.floor((res.pos.x+pxOffsetX)/tilesize);var prevTileX=Math.floor((x+pxOffsetX)/tilesize);if((step>0||tileX===prevTileX||prevTileX<0||prevTileX>=mapWidth)&&(prevTileX=-1),tileX>=0&&tileX<mapWidth)for(tileY=firstTileY;tileY<lastTileY&&!(-1!==prevTileX&&(t=this.data[tileY][prevTileX])>1&&t<=this.lastSlope&&this.checkDef(res,t,x,y,rvx,rvy,width,height,prevTileX,tileY));tileY++)if(1===(t=this.data[tileY][tileX])||t>this.lastSlope||t>1&&this.checkDef(res,t,x,y,rvx,rvy,width,height,tileX,tileY)){if(t>1&&t<=this.lastSlope&&res.collision.slope)break;res.collision.x=!0,res.tile.x=t,res.pos.x=tileX*tilesize-pxOffsetX+tileOffsetX,x=res.pos.x,rvx=0;break}}if(vy){var pxOffsetY=vy>0?height:0,tileOffsetY=vy<0?tilesize:0,firstTileX=Math.max(Math.floor(res.pos.x/tilesize),0),lastTileX=Math.min(Math.ceil((res.pos.x+width)/tilesize),mapWidth);tileY=Math.floor((res.pos.y+pxOffsetY)/tilesize);var prevTileY=Math.floor((y+pxOffsetY)/tilesize);if((step>0||tileY===prevTileY||prevTileY<0||prevTileY>=mapHeight)&&(prevTileY=-1),tileY>=0&&tileY<mapHeight)for(tileX=firstTileX;tileX<lastTileX&&!(-1!==prevTileY&&(t=this.data[prevTileY][tileX])>1&&t<=this.lastSlope&&this.checkDef(res,t,x,y,rvx,rvy,width,height,tileX,prevTileY));tileX++)if(1===(t=this.data[tileY][tileX])||t>this.lastSlope||t>1&&this.checkDef(res,t,x,y,rvx,rvy,width,height,tileX,tileY)){if(t>1&&t<=this.lastSlope&&res.collision.slope)break;res.collision.y=!0,res.tile.y=t,res.pos.y=tileY*tilesize-pxOffsetY+tileOffsetY;break}}},checkDef:function(res,t,x,y,vx,vy,width,height,tileX,tileY){var def=this.tiledef[t];if(!def)return!1;var tilesize=this.tilesize,lx=(tileX+def[0])*tilesize,ly=(tileY+def[1])*tilesize,lvx=(def[2]-def[0])*tilesize,lvy=(def[3]-def[1])*tilesize,solid=def[4],tx=x+vx+(lvy<0?width:0)-lx,ty=y+vy+(lvx>0?height:0)-ly;if(lvx*ty-lvy*tx>0){if(vx*-lvy+vy*lvx<0)return solid;var length=Math.sqrt(lvx*lvx+lvy*lvy),nx=lvy/length,ny=-lvx/length,proj=tx*nx+ty*ny,px=nx*proj,py=ny*proj;return px*px+py*py>=vx*vx+vy*vy?solid||lvx*(ty-vy)-lvy*(tx-vx)<.5:(res.pos.x=x+vx-px,res.pos.y=y+vy-py,res.collision.slope={x:lvx,y:lvy,nx:nx,ny:ny},!0)}return!1}});module.exports=CollisionMap},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),ImpactBody=__webpack_require__(484),ImpactImage=__webpack_require__(485),ImpactSprite=__webpack_require__(486),Factory=new Class({initialize:function(world){this.world=world,this.sys=world.scene.sys},body:function(x,y,width,height){return new ImpactBody(this.world,x,y,width,height)},existing:function(gameObject){var x=gameObject.x-gameObject.frame.centerX,y=gameObject.y-gameObject.frame.centerY,w=gameObject.width,h=gameObject.height;return gameObject.body=this.world.create(x,y,w,h),gameObject.body.parent=gameObject,gameObject.body.gameObject=gameObject,gameObject},image:function(x,y,key,frame){var image=new ImpactImage(this.world,x,y,key,frame);return this.sys.displayList.add(image),image},sprite:function(x,y,key,frame){var sprite=new ImpactSprite(this.world,x,y,key,frame);return this.sys.displayList.add(sprite),this.sys.updateList.add(sprite),sprite},destroy:function(){this.world=null,this.sys=null}});module.exports=Factory},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Components=__webpack_require__(233),ImpactBody=new Class({Mixins:[Components.Acceleration,Components.BodyScale,Components.BodyType,Components.Bounce,Components.CheckAgainst,Components.Collides,Components.Debug,Components.Friction,Components.Gravity,Components.Offset,Components.SetGameObject,Components.Velocity],initialize:function(world,x,y,width,height){this.body=world.create(x,y,width,height),this.body.parent=this,this.size=this.body.size,this.offset=this.body.offset,this.vel=this.body.vel,this.accel=this.body.accel,this.friction=this.body.friction,this.maxVel=this.body.maxVel}});module.exports=ImpactBody},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Components=__webpack_require__(233),Image=__webpack_require__(91),ImpactImage=new Class({Extends:Image,Mixins:[Components.Acceleration,Components.BodyScale,Components.BodyType,Components.Bounce,Components.CheckAgainst,Components.Collides,Components.Debug,Components.Friction,Components.Gravity,Components.Offset,Components.SetGameObject,Components.Velocity],initialize:function(world,x,y,texture,frame){Image.call(this,world.scene,x,y,texture,frame),this.body=world.create(x-this.frame.centerX,y-this.frame.centerY,this.width,this.height),this.body.parent=this,this.body.gameObject=this,this.size=this.body.size,this.offset=this.body.offset,this.vel=this.body.vel,this.accel=this.body.accel,this.friction=this.body.friction,this.maxVel=this.body.maxVel}});module.exports=ImpactImage},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Components=__webpack_require__(233),Sprite=__webpack_require__(57),ImpactSprite=new Class({Extends:Sprite,Mixins:[Components.Acceleration,Components.BodyScale,Components.BodyType,Components.Bounce,Components.CheckAgainst,Components.Collides,Components.Debug,Components.Friction,Components.Gravity,Components.Offset,Components.SetGameObject,Components.Velocity],initialize:function(world,x,y,texture,frame){Sprite.call(this,world.scene,x,y,texture,frame),this.body=world.create(x-this.frame.centerX,y-this.frame.centerY,this.width,this.height),this.body.parent=this,this.body.gameObject=this,this.size=this.body.size,this.offset=this.body.offset,this.vel=this.body.vel,this.accel=this.body.accel,this.friction=this.body.friction,this.maxVel=this.body.maxVel}});module.exports=ImpactSprite},function(module,exports,__webpack_require__){var Body=__webpack_require__(481),Class=__webpack_require__(0),COLLIDES=__webpack_require__(111),CollisionMap=__webpack_require__(482),EventEmitter=__webpack_require__(9),Events=__webpack_require__(232),GetFastValue=__webpack_require__(1),HasValue=__webpack_require__(93),Set=__webpack_require__(90),Solver=__webpack_require__(1306),TILEMAP_FORMATS=__webpack_require__(34),TYPE=__webpack_require__(112),World=new Class({Extends:EventEmitter,initialize:function(scene,config){EventEmitter.call(this),this.scene=scene,this.bodies=new Set,this.gravity=GetFastValue(config,"gravity",0),this.cellSize=GetFastValue(config,"cellSize",64),this.collisionMap=new CollisionMap,this.timeScale=GetFastValue(config,"timeScale",1),this.maxStep=GetFastValue(config,"maxStep",.05),this.enabled=!0,this.drawDebug=GetFastValue(config,"debug",!1),this.debugGraphic;var _maxVelocity=GetFastValue(config,"maxVelocity",100);if(this.defaults={debugShowBody:GetFastValue(config,"debugShowBody",!0),debugShowVelocity:GetFastValue(config,"debugShowVelocity",!0),bodyDebugColor:GetFastValue(config,"debugBodyColor",16711935),velocityDebugColor:GetFastValue(config,"debugVelocityColor",65280),maxVelocityX:GetFastValue(config,"maxVelocityX",_maxVelocity),maxVelocityY:GetFastValue(config,"maxVelocityY",_maxVelocity),minBounceVelocity:GetFastValue(config,"minBounceVelocity",40),gravityFactor:GetFastValue(config,"gravityFactor",1),bounciness:GetFastValue(config,"bounciness",0)},this.walls={left:null,right:null,top:null,bottom:null},this.delta=0,this._lastId=0,GetFastValue(config,"setBounds",!1)){var boundsConfig=config.setBounds;if("boolean"==typeof boundsConfig)this.setBounds();else{var x=GetFastValue(boundsConfig,"x",0),y=GetFastValue(boundsConfig,"y",0),width=GetFastValue(boundsConfig,"width",scene.sys.scale.width),height=GetFastValue(boundsConfig,"height",scene.sys.scale.height),thickness=GetFastValue(boundsConfig,"thickness",64),left=GetFastValue(boundsConfig,"left",!0),right=GetFastValue(boundsConfig,"right",!0),top=GetFastValue(boundsConfig,"top",!0),bottom=GetFastValue(boundsConfig,"bottom",!0);this.setBounds(x,y,width,height,thickness,left,right,top,bottom)}}this.drawDebug&&this.createDebugGraphic()},setCollisionMap:function(key,tileSize){if("string"==typeof key){var tilemapData=this.scene.cache.tilemap.get(key);if(!tilemapData||tilemapData.format!==TILEMAP_FORMATS.WELTMEISTER)return console.warn("The specified key does not correspond to a Weltmeister tilemap: "+key),null;for(var collisionLayer,layers=tilemapData.data.layer,i=0;i<layers.length;i++)if("collision"===layers[i].name){collisionLayer=layers[i];break}void 0===tileSize&&(tileSize=collisionLayer.tilesize),this.collisionMap=new CollisionMap(tileSize,collisionLayer.data)}else Array.isArray(key)?this.collisionMap=new CollisionMap(tileSize,key):console.warn("Invalid Weltmeister collision map data: "+key);return this.collisionMap},setCollisionMapFromTilemapLayer:function(tilemapLayer,options){void 0===options&&(options={});for(var slopeProperty=GetFastValue(options,"slopeProperty",null),slopeMap=GetFastValue(options,"slopeMap",null),collidingSlope=GetFastValue(options,"defaultCollidingSlope",null),nonCollidingSlope=GetFastValue(options,"defaultNonCollidingSlope",0),layerData=tilemapLayer.layer,tileSize=layerData.baseTileWidth,collisionData=[],ty=0;ty<layerData.height;ty++){collisionData[ty]=[];for(var tx=0;tx<layerData.width;tx++){var tile=layerData.data[ty][tx];tile&&tile.collides?null!==slopeProperty&&HasValue(tile.properties,slopeProperty)?collisionData[ty][tx]=parseInt(tile.properties[slopeProperty],10):null!==slopeMap&&HasValue(slopeMap,tile.index)?collisionData[ty][tx]=slopeMap[tile.index]:collisionData[ty][tx]=null!==collidingSlope?collidingSlope:tile.index:collisionData[ty][tx]=nonCollidingSlope}}return this.collisionMap=new CollisionMap(tileSize,collisionData),this.collisionMap},setBounds:function(x,y,width,height,thickness,left,right,top,bottom){return void 0===x&&(x=0),void 0===y&&(y=0),void 0===width&&(width=this.scene.sys.scale.width),void 0===height&&(height=this.scene.sys.scale.height),void 0===thickness&&(thickness=64),void 0===left&&(left=!0),void 0===right&&(right=!0),void 0===top&&(top=!0),void 0===bottom&&(bottom=!0),this.updateWall(left,"left",x-thickness,y,thickness,height),this.updateWall(right,"right",x+width,y,thickness,height),this.updateWall(top,"top",x,y-thickness,width,thickness),this.updateWall(bottom,"bottom",x,y+height,width,thickness),this},updateWall:function(add,position,x,y,width,height){var wall=this.walls[position];add?wall?wall.resetSize(x,y,width,height):(this.walls[position]=this.create(x,y,width,height),this.walls[position].name=position,this.walls[position].gravityFactor=0,this.walls[position].collides=COLLIDES.FIXED):(wall&&this.bodies.remove(wall),this.walls[position]=null)},createDebugGraphic:function(){var graphic=this.scene.sys.add.graphics({x:0,y:0});return graphic.setDepth(Number.MAX_VALUE),this.debugGraphic=graphic,this.drawDebug=!0,graphic},getNextID:function(){return this._lastId++},create:function(x,y,sizeX,sizeY){var body=new Body(this,x,y,sizeX,sizeY);return this.bodies.set(body),body},remove:function(object){this.bodies.delete(object)},pause:function(){return this.enabled=!1,this.emit(Events.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(Events.RESUME),this},update:function(time,delta){if(this.enabled&&0!==this.bodies.size){var i,body,clampedDelta=Math.min(delta/1e3,this.maxStep)*this.timeScale;this.delta=clampedDelta;var bodies=this.bodies.entries,len=bodies.length,hash={},size=this.cellSize;for(i=0;i<len;i++)(body=bodies[i]).enabled&&body.update(clampedDelta);for(i=0;i<len;i++)(body=bodies[i])&&!body.skipHash()&&this.checkHash(body,hash,size);if(this.drawDebug){var graphics=this.debugGraphic;for(graphics.clear(),i=0;i<len;i++)(body=bodies[i])&&body.willDrawDebug()&&body.drawDebug(graphics)}}},checkHash:function(body,hash,size){for(var checked={},xmin=Math.floor(body.pos.x/size),ymin=Math.floor(body.pos.y/size),xmax=Math.floor((body.pos.x+body.size.x)/size)+1,ymax=Math.floor((body.pos.y+body.size.y)/size)+1,x=xmin;x<xmax;x++)for(var y=ymin;y<ymax;y++)if(hash[x])if(hash[x][y]){for(var cell=hash[x][y],c=0;c<cell.length;c++)body.touches(cell[c])&&!checked[cell[c].id]&&(checked[cell[c].id]=!0,this.checkBodies(body,cell[c]));cell.push(body)}else hash[x][y]=[body];else hash[x]={},hash[x][y]=[body]},checkBodies:function(bodyA,bodyB){bodyA.collides===COLLIDES.FIXED&&bodyB.collides===COLLIDES.FIXED||(bodyA.checkAgainst&bodyB.type&&bodyA.check(bodyB),bodyB.checkAgainst&bodyA.type&&bodyB.check(bodyA),bodyA.collides&&bodyB.collides&&bodyA.collides+bodyB.collides>COLLIDES.ACTIVE&&Solver(this,bodyA,bodyB))},setCollidesNever:function(bodies){for(var i=0;i<bodies.length;i++)bodies[i].collides=COLLIDES.NEVER;return this},setLite:function(bodies){for(var i=0;i<bodies.length;i++)bodies[i].collides=COLLIDES.LITE;return this},setPassive:function(bodies){for(var i=0;i<bodies.length;i++)bodies[i].collides=COLLIDES.PASSIVE;return this},setActive:function(bodies){for(var i=0;i<bodies.length;i++)bodies[i].collides=COLLIDES.ACTIVE;return this},setFixed:function(bodies){for(var i=0;i<bodies.length;i++)bodies[i].collides=COLLIDES.FIXED;return this},setTypeNone:function(bodies){for(var i=0;i<bodies.length;i++)bodies[i].type=TYPE.NONE;return this},setTypeA:function(bodies){for(var i=0;i<bodies.length;i++)bodies[i].type=TYPE.A;return this},setTypeB:function(bodies){for(var i=0;i<bodies.length;i++)bodies[i].type=TYPE.B;return this},setAvsB:function(bodies){for(var i=0;i<bodies.length;i++)bodies[i].type=TYPE.A,bodies[i].checkAgainst=TYPE.B;return this},setBvsA:function(bodies){for(var i=0;i<bodies.length;i++)bodies[i].type=TYPE.B,bodies[i].checkAgainst=TYPE.A;return this},setCheckAgainstNone:function(bodies){for(var i=0;i<bodies.length;i++)bodies[i].checkAgainst=TYPE.NONE;return this},setCheckAgainstA:function(bodies){for(var i=0;i<bodies.length;i++)bodies[i].checkAgainst=TYPE.A;return this},setCheckAgainstB:function(bodies){for(var i=0;i<bodies.length;i++)bodies[i].checkAgainst=TYPE.B;return this},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners(),this.scene=null,this.bodies.clear(),this.bodies=null,this.collisionMap=null}});module.exports=World},function(module,exports,__webpack_require__){var Bodies=__webpack_require__(60),Body=__webpack_require__(26),Class=__webpack_require__(0),Composites=__webpack_require__(490),Constraint=__webpack_require__(98),MatterGameObject=__webpack_require__(1310),MatterImage=__webpack_require__(492),MatterSprite=__webpack_require__(493),MatterTileBody=__webpack_require__(236),PointerConstraint=__webpack_require__(1335),Vertices=__webpack_require__(32),Factory=new Class({initialize:function(world){this.world=world,this.scene=world.scene,this.sys=world.scene.sys},rectangle:function(x,y,width,height,options){var body=Bodies.rectangle(x,y,width,height,options);return this.world.add(body),body},trapezoid:function(x,y,width,height,slope,options){var body=Bodies.trapezoid(x,y,width,height,slope,options);return this.world.add(body),body},circle:function(x,y,radius,options,maxSides){var body=Bodies.circle(x,y,radius,options,maxSides);return this.world.add(body),body},polygon:function(x,y,sides,radius,options){var body=Bodies.polygon(x,y,sides,radius,options);return this.world.add(body),body},fromVertices:function(x,y,vertexSets,options,flagInternal,removeCollinear,minimumArea){"string"==typeof vertexSets&&(vertexSets=Vertices.fromPath(vertexSets));var body=Bodies.fromVertices(x,y,vertexSets,options,flagInternal,removeCollinear,minimumArea);return this.world.add(body),body},imageStack:function(key,frame,x,y,columns,rows,columnGap,rowGap,options){void 0===columnGap&&(columnGap=0),void 0===rowGap&&(rowGap=0),void 0===options&&(options={});var world=this.world,displayList=this.sys.displayList;options.addToWorld=!1;var stack=Composites.stack(x,y,columns,rows,columnGap,rowGap,(function(x,y){var image=new MatterImage(world,x,y,key,frame,options);return displayList.add(image),image.body}));return world.add(stack),stack},stack:function(x,y,columns,rows,columnGap,rowGap,callback){var stack=Composites.stack(x,y,columns,rows,columnGap,rowGap,callback);return this.world.add(stack),stack},pyramid:function(x,y,columns,rows,columnGap,rowGap,callback){var stack=Composites.pyramid(x,y,columns,rows,columnGap,rowGap,callback);return this.world.add(stack),stack},chain:function(composite,xOffsetA,yOffsetA,xOffsetB,yOffsetB,options){return Composites.chain(composite,xOffsetA,yOffsetA,xOffsetB,yOffsetB,options)},mesh:function(composite,columns,rows,crossBrace,options){return Composites.mesh(composite,columns,rows,crossBrace,options)},newtonsCradle:function(x,y,number,size,length){var composite=Composites.newtonsCradle(x,y,number,size,length);return this.world.add(composite),composite},car:function(x,y,width,height,wheelSize){var composite=Composites.car(x,y,width,height,wheelSize);return this.world.add(composite),composite},softBody:function(x,y,columns,rows,columnGap,rowGap,crossBrace,particleRadius,particleOptions,constraintOptions){var composite=Composites.softBody(x,y,columns,rows,columnGap,rowGap,crossBrace,particleRadius,particleOptions,constraintOptions);return this.world.add(composite),composite},joint:function(bodyA,bodyB,length,stiffness,options){return this.constraint(bodyA,bodyB,length,stiffness,options)},spring:function(bodyA,bodyB,length,stiffness,options){return this.constraint(bodyA,bodyB,length,stiffness,options)},constraint:function(bodyA,bodyB,length,stiffness,options){void 0===stiffness&&(stiffness=1),void 0===options&&(options={}),options.bodyA="body"===bodyA.type?bodyA:bodyA.body,options.bodyB="body"===bodyB.type?bodyB:bodyB.body,isNaN(length)||(options.length=length),options.stiffness=stiffness;var constraint=Constraint.create(options);return this.world.add(constraint),constraint},worldConstraint:function(bodyB,length,stiffness,options){void 0===stiffness&&(stiffness=1),void 0===options&&(options={}),options.bodyB="body"===bodyB.type?bodyB:bodyB.body,isNaN(length)||(options.length=length),options.stiffness=stiffness;var constraint=Constraint.create(options);return this.world.add(constraint),constraint},mouseSpring:function(options){return this.pointerConstraint(options)},pointerConstraint:function(options){void 0===options&&(options={}),options.hasOwnProperty("render")||(options.render={visible:!1});var pointerConstraint=new PointerConstraint(this.scene,this.world,options);return this.world.add(pointerConstraint.constraint),pointerConstraint},image:function(x,y,key,frame,options){var image=new MatterImage(this.world,x,y,key,frame,options);return this.sys.displayList.add(image),image},tileBody:function(tile,options){return new MatterTileBody(this.world,tile,options)},sprite:function(x,y,key,frame,options){var sprite=new MatterSprite(this.world,x,y,key,frame,options);return this.sys.displayList.add(sprite),this.sys.updateList.add(sprite),sprite},gameObject:function(gameObject,options){return MatterGameObject(this.world,gameObject,options)},velocity:function(body,velocity){return Body.setVelocity(body,velocity),body},angularVelocity:function(body,velocity){return Body.setAngularVelocity(body,velocity),body},force:function(body,position,force){return Body.applyForce(body,position,force),body},destroy:function(){this.world=null,this.scene=null,this.sys=null}});module.exports=Factory},function(module,exports){function lineInt(l1,l2,precision){precision=precision||0;var a1,b1,c1,a2,b2,c2,det,i=[0,0];return a1=l1[1][1]-l1[0][1],b1=l1[0][0]-l1[1][0],c1=a1*l1[0][0]+b1*l1[0][1],a2=l2[1][1]-l2[0][1],b2=l2[0][0]-l2[1][0],c2=a2*l2[0][0]+b2*l2[0][1],scalar_eq(det=a1*b2-a2*b1,0,precision)||(i[0]=(b2*c1-b1*c2)/det,i[1]=(a1*c2-a2*c1)/det),i}function lineSegmentsIntersect(p1,p2,q1,q2){var dx=p2[0]-p1[0],dy=p2[1]-p1[1],da=q2[0]-q1[0],db=q2[1]-q1[1];if(da*dy-db*dx==0)return!1;var s=(dx*(q1[1]-p1[1])+dy*(p1[0]-q1[0]))/(da*dy-db*dx),t=(da*(p1[1]-q1[1])+db*(q1[0]-p1[0]))/(db*dx-da*dy);return s>=0&&s<=1&&t>=0&&t<=1}function triangleArea(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(c[0]-a[0])*(b[1]-a[1])}function isLeft(a,b,c){return triangleArea(a,b,c)>0}function isLeftOn(a,b,c){return triangleArea(a,b,c)>=0}function isRight(a,b,c){return triangleArea(a,b,c)<0}function isRightOn(a,b,c){return triangleArea(a,b,c)<=0}module.exports={decomp:function(polygon){var edges=function polygonGetCutEdges(polygon){var min=[],tmp1=[],tmp2=[],tmpPoly=[];var nDiags=Number.MAX_VALUE;for(var i=0;i<polygon.length;++i)if(polygonIsReflex(polygon,i))for(var j=0;j<polygon.length;++j)if(polygonCanSee(polygon,i,j)){tmp1=polygonGetCutEdges(polygonCopy(polygon,i,j,tmpPoly)),tmp2=polygonGetCutEdges(polygonCopy(polygon,j,i,tmpPoly));for(var k=0;k<tmp2.length;k++)tmp1.push(tmp2[k]);tmp1.length<nDiags&&(min=tmp1,nDiags=tmp1.length,min.push([polygonAt(polygon,i),polygonAt(polygon,j)]))}return min}(polygon);return edges.length>0?function polygonSlice(polygon,cutEdges){if(0===cutEdges.length)return[polygon];if(cutEdges instanceof Array&&cutEdges.length&&cutEdges[0]instanceof Array&&2===cutEdges[0].length&&cutEdges[0][0]instanceof Array){for(var polys=[polygon],i=0;i<cutEdges.length;i++)for(var cutEdge=cutEdges[i],j=0;j<polys.length;j++){var poly=polys[j],result=polygonSlice(poly,cutEdge);if(result){polys.splice(j,1),polys.push(result[0],result[1]);break}}return polys}cutEdge=cutEdges,i=polygon.indexOf(cutEdge[0]),j=polygon.indexOf(cutEdge[1]);return-1!==i&&-1!==j&&[polygonCopy(polygon,i,j),polygonCopy(polygon,j,i)]}(polygon,edges):[polygon]},quickDecomp:function polygonQuickDecomp(polygon,result,reflexVertices,steinerPoints,delta,maxlevel,level){maxlevel=maxlevel||100;level=level||0;delta=delta||25;result=void 0!==result?result:[];reflexVertices=reflexVertices||[];steinerPoints=steinerPoints||[];var upperInt=[0,0],lowerInt=[0,0],p=[0,0];var upperDist=0,lowerDist=0,d=0,closestDist=0;var upperIndex=0,lowerIndex=0,closestIndex=0;var lowerPoly=[],upperPoly=[];var poly=polygon,v=polygon;if(v.length<3)return result;level++;if(level>maxlevel)return console.warn("quickDecomp: max level ("+maxlevel+") reached."),result;for(var i=0;i<polygon.length;++i)if(polygonIsReflex(poly,i)){reflexVertices.push(poly[i]),upperDist=lowerDist=Number.MAX_VALUE;for(var j=0;j<polygon.length;++j)isLeft(polygonAt(poly,i-1),polygonAt(poly,i),polygonAt(poly,j))&&isRightOn(polygonAt(poly,i-1),polygonAt(poly,i),polygonAt(poly,j-1))&&(p=getIntersectionPoint(polygonAt(poly,i-1),polygonAt(poly,i),polygonAt(poly,j),polygonAt(poly,j-1)),isRight(polygonAt(poly,i+1),polygonAt(poly,i),p)&&(d=sqdist(poly[i],p))<lowerDist&&(lowerDist=d,lowerInt=p,lowerIndex=j)),isLeft(polygonAt(poly,i+1),polygonAt(poly,i),polygonAt(poly,j+1))&&isRightOn(polygonAt(poly,i+1),polygonAt(poly,i),polygonAt(poly,j))&&(p=getIntersectionPoint(polygonAt(poly,i+1),polygonAt(poly,i),polygonAt(poly,j),polygonAt(poly,j+1)),isLeft(polygonAt(poly,i-1),polygonAt(poly,i),p)&&(d=sqdist(poly[i],p))<upperDist&&(upperDist=d,upperInt=p,upperIndex=j));if(lowerIndex===(upperIndex+1)%polygon.length)p[0]=(lowerInt[0]+upperInt[0])/2,p[1]=(lowerInt[1]+upperInt[1])/2,steinerPoints.push(p),i<upperIndex?(polygonAppend(lowerPoly,poly,i,upperIndex+1),lowerPoly.push(p),upperPoly.push(p),0!==lowerIndex&&polygonAppend(upperPoly,poly,lowerIndex,poly.length),polygonAppend(upperPoly,poly,0,i+1)):(0!==i&&polygonAppend(lowerPoly,poly,i,poly.length),polygonAppend(lowerPoly,poly,0,upperIndex+1),lowerPoly.push(p),upperPoly.push(p),polygonAppend(upperPoly,poly,lowerIndex,i+1));else{if(lowerIndex>upperIndex&&(upperIndex+=polygon.length),closestDist=Number.MAX_VALUE,upperIndex<lowerIndex)return result;for(j=lowerIndex;j<=upperIndex;++j)isLeftOn(polygonAt(poly,i-1),polygonAt(poly,i),polygonAt(poly,j))&&isRightOn(polygonAt(poly,i+1),polygonAt(poly,i),polygonAt(poly,j))&&(d=sqdist(polygonAt(poly,i),polygonAt(poly,j)))<closestDist&&polygonCanSee2(poly,i,j)&&(closestDist=d,closestIndex=j%polygon.length);i<closestIndex?(polygonAppend(lowerPoly,poly,i,closestIndex+1),0!==closestIndex&&polygonAppend(upperPoly,poly,closestIndex,v.length),polygonAppend(upperPoly,poly,0,i+1)):(0!==i&&polygonAppend(lowerPoly,poly,i,v.length),polygonAppend(lowerPoly,poly,0,closestIndex+1),polygonAppend(upperPoly,poly,closestIndex,i+1))}return lowerPoly.length<upperPoly.length?(polygonQuickDecomp(lowerPoly,result,reflexVertices,steinerPoints,delta,maxlevel,level),polygonQuickDecomp(upperPoly,result,reflexVertices,steinerPoints,delta,maxlevel,level)):(polygonQuickDecomp(upperPoly,result,reflexVertices,steinerPoints,delta,maxlevel,level),polygonQuickDecomp(lowerPoly,result,reflexVertices,steinerPoints,delta,maxlevel,level)),result}result.push(polygon);return result},isSimple:function(polygon){var i,path=polygon;for(i=0;i<path.length-1;i++)for(var j=0;j<i-1;j++)if(lineSegmentsIntersect(path[i],path[i+1],path[j],path[j+1]))return!1;for(i=1;i<path.length-2;i++)if(lineSegmentsIntersect(path[0],path[path.length-1],path[i],path[i+1]))return!1;return!0},removeCollinearPoints:function(polygon,precision){for(var num=0,i=polygon.length-1;polygon.length>3&&i>=0;--i)collinear(polygonAt(polygon,i-1),polygonAt(polygon,i),polygonAt(polygon,i+1),precision)&&(polygon.splice(i%polygon.length,1),num++);return num},removeDuplicatePoints:function(polygon,precision){for(var i=polygon.length-1;i>=1;--i)for(var pi=polygon[i],j=i-1;j>=0;--j)points_eq(pi,polygon[j],precision)&&polygon.splice(i,1)},makeCCW:function(polygon){for(var br=0,v=polygon,i=1;i<polygon.length;++i)(v[i][1]<v[br][1]||v[i][1]===v[br][1]&&v[i][0]>v[br][0])&&(br=i);return!isLeft(polygonAt(polygon,br-1),polygonAt(polygon,br),polygonAt(polygon,br+1))&&(function(polygon){for(var tmp=[],N=polygon.length,i=0;i!==N;i++)tmp.push(polygon.pop());for(i=0;i!==N;i++)polygon[i]=tmp[i]}(polygon),!0)}};var tmpPoint1=[],tmpPoint2=[];function collinear(a,b,c,thresholdAngle){if(thresholdAngle){var ab=tmpPoint1,bc=tmpPoint2;ab[0]=b[0]-a[0],ab[1]=b[1]-a[1],bc[0]=c[0]-b[0],bc[1]=c[1]-b[1];var dot=ab[0]*bc[0]+ab[1]*bc[1],magA=Math.sqrt(ab[0]*ab[0]+ab[1]*ab[1]),magB=Math.sqrt(bc[0]*bc[0]+bc[1]*bc[1]);return Math.acos(dot/(magA*magB))<thresholdAngle}return 0===triangleArea(a,b,c)}function sqdist(a,b){var dx=b[0]-a[0],dy=b[1]-a[1];return dx*dx+dy*dy}function polygonAt(polygon,i){var s=polygon.length;return polygon[i<0?i%s+s:i%s]}function polygonAppend(polygon,poly,from,to){for(var i=from;i<to;i++)polygon.push(poly[i])}function polygonIsReflex(polygon,i){return isRight(polygonAt(polygon,i-1),polygonAt(polygon,i),polygonAt(polygon,i+1))}var tmpLine1=[],tmpLine2=[];function polygonCanSee(polygon,a,b){var p,dist,l1=tmpLine1,l2=tmpLine2;if(isLeftOn(polygonAt(polygon,a+1),polygonAt(polygon,a),polygonAt(polygon,b))&&isRightOn(polygonAt(polygon,a-1),polygonAt(polygon,a),polygonAt(polygon,b)))return!1;dist=sqdist(polygonAt(polygon,a),polygonAt(polygon,b));for(var i=0;i!==polygon.length;++i)if((i+1)%polygon.length!==a&&i!==a&&isLeftOn(polygonAt(polygon,a),polygonAt(polygon,b),polygonAt(polygon,i+1))&&isRightOn(polygonAt(polygon,a),polygonAt(polygon,b),polygonAt(polygon,i))&&(l1[0]=polygonAt(polygon,a),l1[1]=polygonAt(polygon,b),l2[0]=polygonAt(polygon,i),l2[1]=polygonAt(polygon,i+1),p=lineInt(l1,l2),sqdist(polygonAt(polygon,a),p)<dist))return!1;return!0}function polygonCanSee2(polygon,a,b){for(var i=0;i!==polygon.length;++i)if(i!==a&&i!==b&&(i+1)%polygon.length!==a&&(i+1)%polygon.length!==b&&lineSegmentsIntersect(polygonAt(polygon,a),polygonAt(polygon,b),polygonAt(polygon,i),polygonAt(polygon,i+1)))return!1;return!0}function polygonCopy(polygon,i,j,targetPoly){var p=targetPoly||[];if(function(polygon){polygon.length=0}(p),i<j)for(var k=i;k<=j;k++)p.push(polygon[k]);else{for(k=0;k<=j;k++)p.push(polygon[k]);for(k=i;k<polygon.length;k++)p.push(polygon[k])}return p}function getIntersectionPoint(p1,p2,q1,q2,delta){delta=delta||0;var a1=p2[1]-p1[1],b1=p1[0]-p2[0],c1=a1*p1[0]+b1*p1[1],a2=q2[1]-q1[1],b2=q1[0]-q2[0],c2=a2*q1[0]+b2*q1[1],det=a1*b2-a2*b1;return scalar_eq(det,0,delta)?[0,0]:[(b2*c1-b1*c2)/det,(a1*c2-a2*c1)/det]}function scalar_eq(a,b,precision){return precision=precision||0,Math.abs(a-b)<=precision}function points_eq(a,b,precision){return scalar_eq(a[0],b[0],precision)&&scalar_eq(a[1],b[1],precision)}},function(module,exports,__webpack_require__){var Composites={};module.exports=Composites;var Composite=__webpack_require__(77),Constraint=__webpack_require__(98),Common=__webpack_require__(19),Body=__webpack_require__(26),Bodies=__webpack_require__(60);Composites.stack=function(xx,yy,columns,rows,columnGap,rowGap,callback){for(var lastBody,stack=Composite.create({label:"Stack"}),x=xx,y=yy,i=0,row=0;row<rows;row++){for(var maxHeight=0,column=0;column<columns;column++){var body=callback(x,y,column,row,lastBody,i);if(body){var bodyHeight=body.bounds.max.y-body.bounds.min.y,bodyWidth=body.bounds.max.x-body.bounds.min.x;bodyHeight>maxHeight&&(maxHeight=bodyHeight),Body.translate(body,{x:.5*bodyWidth,y:.5*bodyHeight}),x=body.bounds.max.x+columnGap,Composite.addBody(stack,body),lastBody=body,i+=1}else x+=columnGap}y+=maxHeight+rowGap,x=xx}return stack},Composites.chain=function(composite,xOffsetA,yOffsetA,xOffsetB,yOffsetB,options){for(var bodies=composite.bodies,i=1;i<bodies.length;i++){var bodyA=bodies[i-1],bodyB=bodies[i],bodyAHeight=bodyA.bounds.max.y-bodyA.bounds.min.y,bodyAWidth=bodyA.bounds.max.x-bodyA.bounds.min.x,bodyBHeight=bodyB.bounds.max.y-bodyB.bounds.min.y,defaults={bodyA:bodyA,pointA:{x:bodyAWidth*xOffsetA,y:bodyAHeight*yOffsetA},bodyB:bodyB,pointB:{x:(bodyB.bounds.max.x-bodyB.bounds.min.x)*xOffsetB,y:bodyBHeight*yOffsetB}},constraint=Common.extend(defaults,options);Composite.addConstraint(composite,Constraint.create(constraint))}return composite.label+=" Chain",composite},Composites.mesh=function(composite,columns,rows,crossBrace,options){var row,col,bodyA,bodyB,bodyC,bodies=composite.bodies;for(row=0;row<rows;row++){for(col=1;col<columns;col++)bodyA=bodies[col-1+row*columns],bodyB=bodies[col+row*columns],Composite.addConstraint(composite,Constraint.create(Common.extend({bodyA:bodyA,bodyB:bodyB},options)));if(row>0)for(col=0;col<columns;col++)bodyA=bodies[col+(row-1)*columns],bodyB=bodies[col+row*columns],Composite.addConstraint(composite,Constraint.create(Common.extend({bodyA:bodyA,bodyB:bodyB},options))),crossBrace&&col>0&&(bodyC=bodies[col-1+(row-1)*columns],Composite.addConstraint(composite,Constraint.create(Common.extend({bodyA:bodyC,bodyB:bodyB},options)))),crossBrace&&col<columns-1&&(bodyC=bodies[col+1+(row-1)*columns],Composite.addConstraint(composite,Constraint.create(Common.extend({bodyA:bodyC,bodyB:bodyB},options))))}return composite.label+=" Mesh",composite},Composites.pyramid=function(xx,yy,columns,rows,columnGap,rowGap,callback){return Composites.stack(xx,yy,columns,rows,columnGap,rowGap,(function(x,y,column,row,lastBody,i){var actualRows=Math.min(rows,Math.ceil(columns/2)),lastBodyWidth=lastBody?lastBody.bounds.max.x-lastBody.bounds.min.x:0;if(!(row>actualRows||column<(row=actualRows-row)||column>columns-1-row))return 1===i&&Body.translate(lastBody,{x:(column+(columns%2==1?1:-1))*lastBodyWidth,y:0}),callback(xx+(lastBody?column*lastBodyWidth:0)+column*columnGap,y,column,row,lastBody,i)}))},Composites.newtonsCradle=function(xx,yy,number,size,length){for(var newtonsCradle=Composite.create({label:"Newtons Cradle"}),i=0;i<number;i++){var circle=Bodies.circle(xx+i*(1.9*size),yy+length,size,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),constraint=Constraint.create({pointA:{x:xx+i*(1.9*size),y:yy},bodyB:circle});Composite.addBody(newtonsCradle,circle),Composite.addConstraint(newtonsCradle,constraint)}return newtonsCradle},Composites.car=function(xx,yy,width,height,wheelSize){var group=Body.nextGroup(!0),wheelAOffset=.5*-width+20,wheelBOffset=.5*width-20,car=Composite.create({label:"Car"}),body=Bodies.rectangle(xx,yy,width,height,{collisionFilter:{group:group},chamfer:{radius:.5*height},density:2e-4}),wheelA=Bodies.circle(xx+wheelAOffset,yy+0,wheelSize,{collisionFilter:{group:group},friction:.8}),wheelB=Bodies.circle(xx+wheelBOffset,yy+0,wheelSize,{collisionFilter:{group:group},friction:.8}),axelA=Constraint.create({bodyB:body,pointB:{x:wheelAOffset,y:0},bodyA:wheelA,stiffness:1,length:0}),axelB=Constraint.create({bodyB:body,pointB:{x:wheelBOffset,y:0},bodyA:wheelB,stiffness:1,length:0});return Composite.addBody(car,body),Composite.addBody(car,wheelA),Composite.addBody(car,wheelB),Composite.addConstraint(car,axelA),Composite.addConstraint(car,axelB),car},Composites.softBody=function(xx,yy,columns,rows,columnGap,rowGap,crossBrace,particleRadius,particleOptions,constraintOptions){particleOptions=Common.extend({inertia:1/0},particleOptions),constraintOptions=Common.extend({stiffness:.2,render:{type:"line",anchors:!1}},constraintOptions);var softBody=Composites.stack(xx,yy,columns,rows,columnGap,rowGap,(function(x,y){return Bodies.circle(x,y,particleRadius,particleOptions)}));return Composites.mesh(softBody,columns,rows,crossBrace,constraintOptions),softBody.label="Soft Body",softBody}},function(module,exports,__webpack_require__){var Bodies=__webpack_require__(60),Body=__webpack_require__(26),Bounds=__webpack_require__(39),Common=__webpack_require__(19),GetFastValue=__webpack_require__(1),Vector=__webpack_require__(38),Vertices=__webpack_require__(32),PhysicsEditorParser={parseBody:function(x,y,w,h,config){for(var fixtureConfigs=GetFastValue(config,"fixtures",[]),fixtures=[],fc=0;fc<fixtureConfigs.length;fc++)for(var fixtureParts=this.parseFixture(fixtureConfigs[fc]),i=0;i<fixtureParts.length;i++)fixtures.push(fixtureParts[i]);var matterConfig=Common.extend({},!1,config);delete matterConfig.fixtures,delete matterConfig.type;var body=Body.create(matterConfig);return Body.setParts(body,fixtures),body.render.sprite.xOffset=body.position.x/w,body.render.sprite.yOffset=body.position.y/h,Body.setPosition(body,{x:x,y:y}),body},parseFixture:function(fixtureConfig){var fixtures,matterConfig=Common.extend({},!1,fixtureConfig);if(delete matterConfig.circle,delete matterConfig.vertices,fixtureConfig.circle){var x=GetFastValue(fixtureConfig.circle,"x"),y=GetFastValue(fixtureConfig.circle,"y"),r=GetFastValue(fixtureConfig.circle,"radius");fixtures=[Bodies.circle(x,y,r,matterConfig)]}else fixtureConfig.vertices&&(fixtures=this.parseVertices(fixtureConfig.vertices,matterConfig));return fixtures},parseVertices:function(vertexSets,options){var i,j,k,v,z,parts=[];for(options=options||{},v=0;v<vertexSets.length;v+=1)parts.push(Body.create(Common.extend({position:Vertices.centre(vertexSets[v]),vertices:vertexSets[v]},options)));for(i=0;i<parts.length;i++){var partA=parts[i];for(j=i+1;j<parts.length;j++){var partB=parts[j];if(Bounds.overlaps(partA.bounds,partB.bounds)){var pav=partA.vertices,pbv=partB.vertices;for(k=0;k<partA.vertices.length;k++)for(z=0;z<partB.vertices.length;z++){var da=Vector.magnitudeSquared(Vector.sub(pav[(k+1)%pav.length],pbv[z])),db=Vector.magnitudeSquared(Vector.sub(pav[k],pbv[(z+1)%pbv.length]));da<5&&db<5&&(pav[k].isInternal=!0,pbv[z].isInternal=!0)}}}}return parts}};module.exports=PhysicsEditorParser},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Components=__webpack_require__(148),GameObject=__webpack_require__(13),GetFastValue=__webpack_require__(1),Image=__webpack_require__(91),Pipeline=__webpack_require__(121),Vector2=__webpack_require__(3),MatterImage=new Class({Extends:Image,Mixins:[Components.Bounce,Components.Collision,Components.Force,Components.Friction,Components.Gravity,Components.Mass,Components.Sensor,Components.SetBody,Components.Sleep,Components.Static,Components.Transform,Components.Velocity,Pipeline],initialize:function(world,x,y,texture,frame,options){GameObject.call(this,world.scene,"Image"),this.setTexture(texture,frame),this.setSizeToFrame(),this.setOrigin(),this.world=world,this._tempVec2=new Vector2(x,y);var shape=GetFastValue(options,"shape",null);shape?this.setBody(shape,options):this.setRectangle(this.width,this.height,options),this.setPosition(x,y),this.initPipeline("TextureTintPipeline")}});module.exports=MatterImage},function(module,exports,__webpack_require__){var AnimationComponent=__webpack_require__(272),Class=__webpack_require__(0),Components=__webpack_require__(148),GameObject=__webpack_require__(13),GetFastValue=__webpack_require__(1),Pipeline=__webpack_require__(121),Sprite=__webpack_require__(57),Vector2=__webpack_require__(3),MatterSprite=new Class({Extends:Sprite,Mixins:[Components.Bounce,Components.Collision,Components.Force,Components.Friction,Components.Gravity,Components.Mass,Components.Sensor,Components.SetBody,Components.Sleep,Components.Static,Components.Transform,Components.Velocity,Pipeline],initialize:function(world,x,y,texture,frame,options){GameObject.call(this,world.scene,"Sprite"),this.anims=new AnimationComponent(this),this.setTexture(texture,frame),this.setSizeToFrame(),this.setOrigin(),this.world=world,this._tempVec2=new Vector2(x,y);var shape=GetFastValue(options,"shape",null);shape?this.setBody(shape,options):this.setRectangle(this.width,this.height,options),this.setPosition(x,y),this.initPipeline("TextureTintPipeline")}});module.exports=MatterSprite},function(module,exports,__webpack_require__){var Matter={};module.exports=Matter;var Plugin=__webpack_require__(240),Common=__webpack_require__(19);Matter.name="matter-js",Matter.version="0.14.2",Matter.uses=[],Matter.used=[],Matter.use=function(){Plugin.use(Matter,Array.prototype.slice.call(arguments))},Matter.before=function(path,func){return path=path.replace(/^Matter./,""),Common.chainPathBefore(Matter,path,func)},Matter.after=function(path,func){return path=path.replace(/^Matter./,""),Common.chainPathAfter(Matter,path,func)}},function(module,exports,__webpack_require__){var Grid={};module.exports=Grid;var Pair=__webpack_require__(149),Detector=__webpack_require__(237),Common=__webpack_require__(19);Grid.create=function(options){var defaults={controller:Grid,detector:Detector.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return Common.extend(defaults,options)},Grid.update=function(grid,bodies,engine,forceUpdate){var i,col,row,bucket,bucketId,world=engine.world,buckets=grid.buckets,gridChanged=!1,metrics=engine.metrics;for(metrics.broadphaseTests=0,i=0;i<bodies.length;i++){var body=bodies[i];if((!body.isSleeping||forceUpdate)&&!(body.bounds.max.x<world.bounds.min.x||body.bounds.min.x>world.bounds.max.x||body.bounds.max.y<world.bounds.min.y||body.bounds.min.y>world.bounds.max.y)){var newRegion=Grid._getRegion(grid,body);if(!body.region||newRegion.id!==body.region.id||forceUpdate){metrics.broadphaseTests+=1,body.region&&!forceUpdate||(body.region=newRegion);var union=Grid._regionUnion(newRegion,body.region);for(col=union.startCol;col<=union.endCol;col++)for(row=union.startRow;row<=union.endRow;row++){bucket=buckets[bucketId=Grid._getBucketId(col,row)];var isInsideNewRegion=col>=newRegion.startCol&&col<=newRegion.endCol&&row>=newRegion.startRow&&row<=newRegion.endRow,isInsideOldRegion=col>=body.region.startCol&&col<=body.region.endCol&&row>=body.region.startRow&&row<=body.region.endRow;!isInsideNewRegion&&isInsideOldRegion&&isInsideOldRegion&&bucket&&Grid._bucketRemoveBody(grid,bucket,body),(body.region===newRegion||isInsideNewRegion&&!isInsideOldRegion||forceUpdate)&&(bucket||(bucket=Grid._createBucket(buckets,bucketId)),Grid._bucketAddBody(grid,bucket,body))}body.region=newRegion,gridChanged=!0}}}gridChanged&&(grid.pairsList=Grid._createActivePairsList(grid))},Grid.clear=function(grid){grid.buckets={},grid.pairs={},grid.pairsList=[]},Grid._regionUnion=function(regionA,regionB){var startCol=Math.min(regionA.startCol,regionB.startCol),endCol=Math.max(regionA.endCol,regionB.endCol),startRow=Math.min(regionA.startRow,regionB.startRow),endRow=Math.max(regionA.endRow,regionB.endRow);return Grid._createRegion(startCol,endCol,startRow,endRow)},Grid._getRegion=function(grid,body){var bounds=body.bounds,startCol=Math.floor(bounds.min.x/grid.bucketWidth),endCol=Math.floor(bounds.max.x/grid.bucketWidth),startRow=Math.floor(bounds.min.y/grid.bucketHeight),endRow=Math.floor(bounds.max.y/grid.bucketHeight);return Grid._createRegion(startCol,endCol,startRow,endRow)},Grid._createRegion=function(startCol,endCol,startRow,endRow){return{id:startCol+","+endCol+","+startRow+","+endRow,startCol:startCol,endCol:endCol,startRow:startRow,endRow:endRow}},Grid._getBucketId=function(column,row){return"C"+column+"R"+row},Grid._createBucket=function(buckets,bucketId){return buckets[bucketId]=[]},Grid._bucketAddBody=function(grid,bucket,body){for(var i=0;i<bucket.length;i++){var bodyB=bucket[i];if(!(body.id===bodyB.id||body.isStatic&&bodyB.isStatic)){var pairId=Pair.id(body,bodyB),pair=grid.pairs[pairId];pair?pair[2]+=1:grid.pairs[pairId]=[body,bodyB,1]}}bucket.push(body)},Grid._bucketRemoveBody=function(grid,bucket,body){bucket.splice(Common.indexOf(bucket,body),1);for(var i=0;i<bucket.length;i++){var bodyB=bucket[i],pairId=Pair.id(body,bodyB),pair=grid.pairs[pairId];pair&&(pair[2]-=1)}},Grid._createActivePairsList=function(grid){var pairKeys,pair,pairs=[];pairKeys=Common.keys(grid.pairs);for(var k=0;k<pairKeys.length;k++)(pair=grid.pairs[pairKeys[k]])[2]>0?pairs.push(pair):delete grid.pairs[pairKeys[k]];return pairs}},function(module,exports,__webpack_require__){var Pairs={};module.exports=Pairs;var Pair=__webpack_require__(149),Common=__webpack_require__(19);Pairs._pairMaxIdleLife=1e3,Pairs.create=function(options){return Common.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},options)},Pairs.update=function(pairs,collisions,timestamp){var collision,pairId,pair,i,pairsList=pairs.list,pairsTable=pairs.table,collisionStart=pairs.collisionStart,collisionEnd=pairs.collisionEnd,collisionActive=pairs.collisionActive;for(collisionStart.length=0,collisionEnd.length=0,collisionActive.length=0,i=0;i<pairsList.length;i++)pairsList[i].confirmedActive=!1;for(i=0;i<collisions.length;i++)(collision=collisions[i]).collided&&((pair=pairsTable[pairId=Pair.id(collision.bodyA,collision.bodyB)])?(pair.isActive?collisionActive.push(pair):collisionStart.push(pair),Pair.update(pair,collision,timestamp),pair.confirmedActive=!0):(pair=Pair.create(collision,timestamp),pairsTable[pairId]=pair,collisionStart.push(pair),pairsList.push(pair)));for(i=0;i<pairsList.length;i++)(pair=pairsList[i]).isActive&&!pair.confirmedActive&&(Pair.setActive(pair,!1,timestamp),collisionEnd.push(pair))},Pairs.removeOld=function(pairs,timestamp){var pair,collision,pairIndex,i,pairsList=pairs.list,pairsTable=pairs.table,indexesToRemove=[];for(i=0;i<pairsList.length;i++)(collision=(pair=pairsList[i]).collision).bodyA.isSleeping||collision.bodyB.isSleeping?pair.timeUpdated=timestamp:timestamp-pair.timeUpdated>Pairs._pairMaxIdleLife&&indexesToRemove.push(i);for(i=0;i<indexesToRemove.length;i++)delete pairsTable[(pair=pairsList[pairIndex=indexesToRemove[i]-i]).id],pairsList.splice(pairIndex,1)},Pairs.clear=function(pairs){return pairs.table={},pairs.list.length=0,pairs.collisionStart.length=0,pairs.collisionActive.length=0,pairs.collisionEnd.length=0,pairs}},function(module,exports,__webpack_require__){var Resolver={};module.exports=Resolver;var Vertices=__webpack_require__(32),Vector=__webpack_require__(38),Common=__webpack_require__(19),Bounds=__webpack_require__(39);Resolver._restingThresh=4,Resolver._restingThreshTangent=6,Resolver._positionDampen=.9,Resolver._positionWarming=.8,Resolver._frictionNormalMultiplier=5,Resolver.preSolvePosition=function(pairs){var i,pair,activeCount;for(i=0;i<pairs.length;i++)(pair=pairs[i]).isActive&&(activeCount=pair.activeContacts.length,pair.collision.parentA.totalContacts+=activeCount,pair.collision.parentB.totalContacts+=activeCount)},Resolver.solvePosition=function(pairs,bodies,timeScale){var i,normalX,normalY,pair,collision,bodyA,bodyB,normal,separation,penetration,positionImpulseA,positionImpulseB,contactShare,bodyBtoAX,bodyBtoAY,positionImpulse,impulseCoefficient=timeScale*Resolver._positionDampen;for(i=0;i<bodies.length;i++){var body=bodies[i];body.previousPositionImpulse.x=body.positionImpulse.x,body.previousPositionImpulse.y=body.positionImpulse.y}for(i=0;i<pairs.length;i++)(pair=pairs[i]).isActive&&!pair.isSensor&&(bodyA=(collision=pair.collision).parentA,bodyB=collision.parentB,normal=collision.normal,positionImpulseA=bodyA.previousPositionImpulse,positionImpulseB=bodyB.previousPositionImpulse,penetration=collision.penetration,bodyBtoAX=positionImpulseB.x-positionImpulseA.x+penetration.x,bodyBtoAY=positionImpulseB.y-positionImpulseA.y+penetration.y,separation=(normalX=normal.x)*bodyBtoAX+(normalY=normal.y)*bodyBtoAY,pair.separation=separation,positionImpulse=(separation-pair.slop)*impulseCoefficient,(bodyA.isStatic||bodyB.isStatic)&&(positionImpulse*=2),bodyA.isStatic||bodyA.isSleeping||(contactShare=positionImpulse/bodyA.totalContacts,bodyA.positionImpulse.x+=normalX*contactShare,bodyA.positionImpulse.y+=normalY*contactShare),bodyB.isStatic||bodyB.isSleeping||(contactShare=positionImpulse/bodyB.totalContacts,bodyB.positionImpulse.x-=normalX*contactShare,bodyB.positionImpulse.y-=normalY*contactShare))},Resolver.postSolvePosition=function(bodies){for(var i=0;i<bodies.length;i++){var body=bodies[i];if(body.totalContacts=0,0!==body.positionImpulse.x||0!==body.positionImpulse.y){for(var j=0;j<body.parts.length;j++){var part=body.parts[j];Vertices.translate(part.vertices,body.positionImpulse),Bounds.update(part.bounds,part.vertices,body.velocity),part.position.x+=body.positionImpulse.x,part.position.y+=body.positionImpulse.y}body.positionPrev.x+=body.positionImpulse.x,body.positionPrev.y+=body.positionImpulse.y,Vector.dot(body.positionImpulse,body.velocity)<0?(body.positionImpulse.x=0,body.positionImpulse.y=0):(body.positionImpulse.x*=Resolver._positionWarming,body.positionImpulse.y*=Resolver._positionWarming)}}},Resolver.preSolveVelocity=function(pairs){var i,j,pair,contacts,collision,bodyA,bodyB,normal,tangent,contact,contactVertex,normalImpulse,tangentImpulse,offset,impulse=Vector._temp[0],tempA=Vector._temp[1];for(i=0;i<pairs.length;i++)if((pair=pairs[i]).isActive&&!pair.isSensor)for(contacts=pair.activeContacts,bodyA=(collision=pair.collision).parentA,bodyB=collision.parentB,normal=collision.normal,tangent=collision.tangent,j=0;j<contacts.length;j++)contactVertex=(contact=contacts[j]).vertex,normalImpulse=contact.normalImpulse,tangentImpulse=contact.tangentImpulse,0===normalImpulse&&0===tangentImpulse||(impulse.x=normal.x*normalImpulse+tangent.x*tangentImpulse,impulse.y=normal.y*normalImpulse+tangent.y*tangentImpulse,bodyA.isStatic||bodyA.isSleeping||(offset=Vector.sub(contactVertex,bodyA.position,tempA),bodyA.positionPrev.x+=impulse.x*bodyA.inverseMass,bodyA.positionPrev.y+=impulse.y*bodyA.inverseMass,bodyA.anglePrev+=Vector.cross(offset,impulse)*bodyA.inverseInertia),bodyB.isStatic||bodyB.isSleeping||(offset=Vector.sub(contactVertex,bodyB.position,tempA),bodyB.positionPrev.x-=impulse.x*bodyB.inverseMass,bodyB.positionPrev.y-=impulse.y*bodyB.inverseMass,bodyB.anglePrev-=Vector.cross(offset,impulse)*bodyB.inverseInertia))},Resolver.solveVelocity=function(pairs,timeScale){for(var timeScaleSquared=timeScale*timeScale,impulse=Vector._temp[0],tempA=Vector._temp[1],tempB=Vector._temp[2],tempC=Vector._temp[3],tempD=Vector._temp[4],tempE=Vector._temp[5],i=0;i<pairs.length;i++){var pair=pairs[i];if(pair.isActive&&!pair.isSensor){var collision=pair.collision,bodyA=collision.parentA,bodyB=collision.parentB,normal=collision.normal,tangent=collision.tangent,contacts=pair.activeContacts,contactShare=1/contacts.length;bodyA.velocity.x=bodyA.position.x-bodyA.positionPrev.x,bodyA.velocity.y=bodyA.position.y-bodyA.positionPrev.y,bodyB.velocity.x=bodyB.position.x-bodyB.positionPrev.x,bodyB.velocity.y=bodyB.position.y-bodyB.positionPrev.y,bodyA.angularVelocity=bodyA.angle-bodyA.anglePrev,bodyB.angularVelocity=bodyB.angle-bodyB.anglePrev;for(var j=0;j<contacts.length;j++){var contact=contacts[j],contactVertex=contact.vertex,offsetA=Vector.sub(contactVertex,bodyA.position,tempA),offsetB=Vector.sub(contactVertex,bodyB.position,tempB),velocityPointA=Vector.add(bodyA.velocity,Vector.mult(Vector.perp(offsetA),bodyA.angularVelocity),tempC),velocityPointB=Vector.add(bodyB.velocity,Vector.mult(Vector.perp(offsetB),bodyB.angularVelocity),tempD),relativeVelocity=Vector.sub(velocityPointA,velocityPointB,tempE),normalVelocity=Vector.dot(normal,relativeVelocity),tangentVelocity=Vector.dot(tangent,relativeVelocity),tangentSpeed=Math.abs(tangentVelocity),tangentVelocityDirection=Common.sign(tangentVelocity),normalImpulse=(1+pair.restitution)*normalVelocity,normalForce=Common.clamp(pair.separation+normalVelocity,0,1)*Resolver._frictionNormalMultiplier,tangentImpulse=tangentVelocity,maxFriction=1/0;tangentSpeed>pair.friction*pair.frictionStatic*normalForce*timeScaleSquared&&(maxFriction=tangentSpeed,tangentImpulse=Common.clamp(pair.friction*tangentVelocityDirection*timeScaleSquared,-maxFriction,maxFriction));var oAcN=Vector.cross(offsetA,normal),oBcN=Vector.cross(offsetB,normal),share=contactShare/(bodyA.inverseMass+bodyB.inverseMass+bodyA.inverseInertia*oAcN*oAcN+bodyB.inverseInertia*oBcN*oBcN);if(normalImpulse*=share,tangentImpulse*=share,normalVelocity<0&&normalVelocity*normalVelocity>Resolver._restingThresh*timeScaleSquared)contact.normalImpulse=0;else{var contactNormalImpulse=contact.normalImpulse;contact.normalImpulse=Math.min(contact.normalImpulse+normalImpulse,0),normalImpulse=contact.normalImpulse-contactNormalImpulse}if(tangentVelocity*tangentVelocity>Resolver._restingThreshTangent*timeScaleSquared)contact.tangentImpulse=0;else{var contactTangentImpulse=contact.tangentImpulse;contact.tangentImpulse=Common.clamp(contact.tangentImpulse+tangentImpulse,-maxFriction,maxFriction),tangentImpulse=contact.tangentImpulse-contactTangentImpulse}impulse.x=normal.x*normalImpulse+tangent.x*tangentImpulse,impulse.y=normal.y*normalImpulse+tangent.y*tangentImpulse,bodyA.isStatic||bodyA.isSleeping||(bodyA.positionPrev.x+=impulse.x*bodyA.inverseMass,bodyA.positionPrev.y+=impulse.y*bodyA.inverseMass,bodyA.anglePrev+=Vector.cross(offsetA,impulse)*bodyA.inverseInertia),bodyB.isStatic||bodyB.isSleeping||(bodyB.positionPrev.x-=impulse.x*bodyB.inverseMass,bodyB.positionPrev.y-=impulse.y*bodyB.inverseMass,bodyB.anglePrev-=Vector.cross(offsetB,impulse)*bodyB.inverseInertia)}}}}},function(module,exports,__webpack_require__){var Engine={};module.exports=Engine;var World=__webpack_require__(241),Sleeping=__webpack_require__(113),Resolver=__webpack_require__(497),Pairs=__webpack_require__(496),Metrics=__webpack_require__(1337),Grid=__webpack_require__(495),Events=__webpack_require__(97),Composite=__webpack_require__(77),Constraint=__webpack_require__(98),Common=__webpack_require__(19),Body=__webpack_require__(26);Engine.create=function(element,options){options=(options=Common.isElement(element)?options:element)||{},((element=Common.isElement(element)?element:null)||options.render)&&Common.warn("Engine.create: engine.render is deprecated (see docs)");var defaults={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:Grid}},engine=Common.extend(defaults,options);if(element||engine.render){var renderDefaults={element:element,controller:Render};engine.render=Common.extend(renderDefaults,engine.render)}return engine.render&&engine.render.controller&&(engine.render=engine.render.controller.create(engine.render)),engine.render&&(engine.render.engine=engine),engine.world=options.world||World.create(engine.world),engine.pairs=Pairs.create(),engine.broadphase=engine.broadphase.controller.create(engine.broadphase),engine.metrics=engine.metrics||{extended:!1},engine.metrics=Metrics.create(engine.metrics),engine},Engine.update=function(engine,delta,correction){delta=delta||1e3/60,correction=correction||1;var i,world=engine.world,timing=engine.timing,broadphase=engine.broadphase,broadphasePairs=[];timing.timestamp+=delta*timing.timeScale;var event={timestamp:timing.timestamp};Events.trigger(engine,"beforeUpdate",event);var allBodies=Composite.allBodies(world),allConstraints=Composite.allConstraints(world);for(Metrics.reset(engine.metrics),engine.enableSleeping&&Sleeping.update(allBodies,timing.timeScale),Engine._bodiesApplyGravity(allBodies,world.gravity),Engine._bodiesUpdate(allBodies,delta,timing.timeScale,correction,world.bounds),Constraint.preSolveAll(allBodies),i=0;i<engine.constraintIterations;i++)Constraint.solveAll(allConstraints,timing.timeScale);Constraint.postSolveAll(allBodies),broadphase.controller?(world.isModified&&broadphase.controller.clear(broadphase),broadphase.controller.update(broadphase,allBodies,engine,world.isModified),broadphasePairs=broadphase.pairsList):broadphasePairs=allBodies,world.isModified&&Composite.setModified(world,!1,!1,!0);var collisions=broadphase.detector(broadphasePairs,engine),pairs=engine.pairs,timestamp=timing.timestamp;for(Pairs.update(pairs,collisions,timestamp),Pairs.removeOld(pairs,timestamp),engine.enableSleeping&&Sleeping.afterCollisions(pairs.list,timing.timeScale),pairs.collisionStart.length>0&&Events.trigger(engine,"collisionStart",{pairs:pairs.collisionStart}),Resolver.preSolvePosition(pairs.list),i=0;i<engine.positionIterations;i++)Resolver.solvePosition(pairs.list,allBodies,timing.timeScale);for(Resolver.postSolvePosition(allBodies),Constraint.preSolveAll(allBodies),i=0;i<engine.constraintIterations;i++)Constraint.solveAll(allConstraints,timing.timeScale);for(Constraint.postSolveAll(allBodies),Resolver.preSolveVelocity(pairs.list),i=0;i<engine.velocityIterations;i++)Resolver.solveVelocity(pairs.list,timing.timeScale);return pairs.collisionActive.length>0&&Events.trigger(engine,"collisionActive",{pairs:pairs.collisionActive}),pairs.collisionEnd.length>0&&Events.trigger(engine,"collisionEnd",{pairs:pairs.collisionEnd}),Metrics.update(engine.metrics,engine),Engine._bodiesClearForces(allBodies),Events.trigger(engine,"afterUpdate",event),engine},Engine.merge=function(engineA,engineB){if(Common.extend(engineA,engineB),engineB.world){engineA.world=engineB.world,Engine.clear(engineA);for(var bodies=Composite.allBodies(engineA.world),i=0;i<bodies.length;i++){var body=bodies[i];Sleeping.set(body,!1),body.id=Common.nextId()}}},Engine.clear=function(engine){var world=engine.world;Pairs.clear(engine.pairs);var broadphase=engine.broadphase;if(broadphase.controller){var bodies=Composite.allBodies(world);broadphase.controller.clear(broadphase),broadphase.controller.update(broadphase,bodies,engine,!0)}},Engine._bodiesClearForces=function(bodies){for(var i=0;i<bodies.length;i++){var body=bodies[i];body.force.x=0,body.force.y=0,body.torque=0}},Engine._bodiesApplyGravity=function(bodies,gravity){var gravityScale=void 0!==gravity.scale?gravity.scale:.001;if((0!==gravity.x||0!==gravity.y)&&0!==gravityScale)for(var i=0;i<bodies.length;i++){var body=bodies[i];body.ignoreGravity||body.isStatic||body.isSleeping||(body.force.y+=body.mass*gravity.y*gravityScale,body.force.x+=body.mass*gravity.x*gravityScale)}},Engine._bodiesUpdate=function(bodies,deltaTime,timeScale,correction,worldBounds){for(var i=0;i<bodies.length;i++){var body=bodies[i];body.isStatic||body.isSleeping||Body.update(body,deltaTime,timeScale,correction)}}},function(module,exports,__webpack_require__){var Bodies=__webpack_require__(60),Body=__webpack_require__(26),Class=__webpack_require__(0),Common=__webpack_require__(19),Composite=__webpack_require__(77),Engine=__webpack_require__(498),EventEmitter=__webpack_require__(9),Events=__webpack_require__(235),GetFastValue=__webpack_require__(1),GetValue=__webpack_require__(5),MatterBody=__webpack_require__(26),MatterEvents=__webpack_require__(97),MatterTileBody=__webpack_require__(236),MatterWorld=__webpack_require__(241),Vector=__webpack_require__(38),World=new Class({Extends:EventEmitter,initialize:function(scene,config){EventEmitter.call(this),this.scene=scene,this.engine=Engine.create(config),this.localWorld=this.engine.world;var gravity=GetValue(config,"gravity",null);if(gravity&&this.setGravity(gravity.x,gravity.y,gravity.scale),this.walls={left:null,right:null,top:null,bottom:null},GetFastValue(config,"setBounds",!1)){var boundsConfig=config.setBounds;if("boolean"==typeof boundsConfig)this.setBounds();else{var x=GetFastValue(boundsConfig,"x",0),y=GetFastValue(boundsConfig,"y",0),width=GetFastValue(boundsConfig,"width",scene.sys.scale.width),height=GetFastValue(boundsConfig,"height",scene.sys.scale.height),thickness=GetFastValue(boundsConfig,"thickness",64),left=GetFastValue(boundsConfig,"left",!0),right=GetFastValue(boundsConfig,"right",!0),top=GetFastValue(boundsConfig,"top",!0),bottom=GetFastValue(boundsConfig,"bottom",!0);this.setBounds(x,y,width,height,thickness,left,right,top,bottom)}}this.enabled=GetValue(config,"enabled",!0),this.correction=GetValue(config,"correction",1),this.getDelta=GetValue(config,"getDelta",this.update60Hz),this.autoUpdate=GetValue(config,"autoUpdate",!0),this.drawDebug=GetValue(config,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:GetFastValue(config,"debugShowBody",!0),debugShowStaticBody:GetFastValue(config,"debugShowStaticBody",!0),debugShowVelocity:GetFastValue(config,"debugShowVelocity",!0),bodyDebugColor:GetFastValue(config,"debugBodyColor",16711935),bodyDebugFillColor:GetFastValue(config,"debugBodyFillColor",14919651),staticBodyDebugColor:GetFastValue(config,"debugStaticBodyColor",255),velocityDebugColor:GetFastValue(config,"debugVelocityColor",65280),debugShowJoint:GetFastValue(config,"debugShowJoint",!0),jointDebugColor:GetFastValue(config,"debugJointColor",0),debugWireframes:GetFastValue(config,"debugWireframes",!0),debugShowInternalEdges:GetFastValue(config,"debugShowInternalEdges",!1),debugShowConvexHulls:GetFastValue(config,"debugShowConvexHulls",!1),debugConvexHullColor:GetFastValue(config,"debugConvexHullColor",11184810),debugShowSleeping:GetFastValue(config,"debugShowSleeping",!1)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy()},setEventsProxy:function(){var _this=this,engine=this.engine;MatterEvents.on(engine,"beforeUpdate",(function(event){_this.emit(Events.BEFORE_UPDATE,event)})),MatterEvents.on(engine,"afterUpdate",(function(event){_this.emit(Events.AFTER_UPDATE,event)})),MatterEvents.on(engine,"collisionStart",(function(event){var bodyA,bodyB,pairs=event.pairs;pairs.length>0&&(bodyA=pairs[0].bodyA,bodyB=pairs[0].bodyB),_this.emit(Events.COLLISION_START,event,bodyA,bodyB)})),MatterEvents.on(engine,"collisionActive",(function(event){var bodyA,bodyB,pairs=event.pairs;pairs.length>0&&(bodyA=pairs[0].bodyA,bodyB=pairs[0].bodyB),_this.emit(Events.COLLISION_ACTIVE,event,bodyA,bodyB)})),MatterEvents.on(engine,"collisionEnd",(function(event){var bodyA,bodyB,pairs=event.pairs;pairs.length>0&&(bodyA=pairs[0].bodyA,bodyB=pairs[0].bodyB),_this.emit(Events.COLLISION_END,event,bodyA,bodyB)}))},setBounds:function(x,y,width,height,thickness,left,right,top,bottom){return void 0===x&&(x=0),void 0===y&&(y=0),void 0===width&&(width=this.scene.sys.scale.width),void 0===height&&(height=this.scene.sys.scale.height),void 0===thickness&&(thickness=128),void 0===left&&(left=!0),void 0===right&&(right=!0),void 0===top&&(top=!0),void 0===bottom&&(bottom=!0),this.updateWall(left,"left",x-thickness,y-thickness,thickness,height+2*thickness),this.updateWall(right,"right",x+width,y-thickness,thickness,height+2*thickness),this.updateWall(top,"top",x,y-thickness,width,thickness),this.updateWall(bottom,"bottom",x,y+height,width,thickness),this},updateWall:function(add,position,x,y,width,height){var wall=this.walls[position];add?(wall&&MatterWorld.remove(this.localWorld,wall),x+=width/2,y+=height/2,this.walls[position]=this.create(x,y,width,height,{isStatic:!0,friction:0,frictionStatic:0})):(wall&&MatterWorld.remove(this.localWorld,wall),this.walls[position]=null)},createDebugGraphic:function(){var graphic=this.scene.sys.add.graphics({x:0,y:0});return graphic.setDepth(Number.MAX_VALUE),this.debugGraphic=graphic,this.drawDebug=!0,graphic},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(x,y,scale){return void 0===x&&(x=0),void 0===y&&(y=1),this.localWorld.gravity.x=x,this.localWorld.gravity.y=y,void 0!==scale&&(this.localWorld.gravity.scale=scale),this},create:function(x,y,width,height,options){var body=Bodies.rectangle(x,y,width,height,options);return MatterWorld.add(this.localWorld,body),body},add:function(object){return MatterWorld.add(this.localWorld,object),this},remove:function(object,deep){var body=object.body?object.body:object;return Composite.remove(this.localWorld,body,deep),this},removeConstraint:function(constraint,deep){return Composite.remove(this.localWorld,constraint,deep),this},convertTilemapLayer:function(tilemapLayer,options){var layerData=tilemapLayer.layer,tiles=tilemapLayer.getTilesWithin(0,0,layerData.width,layerData.height,{isColliding:!0});return this.convertTiles(tiles,options),this},convertTiles:function(tiles,options){if(0===tiles.length)return this;for(var i=0;i<tiles.length;i++)new MatterTileBody(this,tiles[i],options);return this},nextGroup:function(isNonColliding){return MatterBody.nextGroup(isNonColliding)},nextCategory:function(){return MatterBody.nextCategory()},pause:function(){return this.enabled=!1,this.emit(Events.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(Events.RESUME),this},update:function(time,delta){this.enabled&&this.autoUpdate&&Engine.update(this.engine,this.getDelta(time,delta),this.correction)},step:function(delta,correction){Engine.update(this.engine,delta,correction)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},postUpdate:function(){if(this.drawDebug){this.debugGraphic.clear();var bodies=Composite.allBodies(this.localWorld);this.defaults.debugWireframes?(this.defaults.debugShowConvexHulls&&this.renderConvexHulls(bodies),this.renderWireframes(bodies)):this.renderBodies(bodies),this.defaults.debugShowJoint&&this.renderJoints()}},renderConvexHulls:function(bodies){var graphics=this.debugGraphic;graphics.lineStyle(1,this.defaults.debugConvexHullColor),graphics.beginPath();for(var i=0;i<bodies.length;i++){var body=bodies[i];if(body.render.visible&&1!==body.parts.length){graphics.moveTo(body.vertices[0].x,body.vertices[0].y);for(var j=1;j<body.vertices.length;j++)graphics.lineTo(body.vertices[j].x,body.vertices[j].y);graphics.lineTo(body.vertices[0].x,body.vertices[0].y)}}graphics.strokePath()},renderWireframes:function(bodies){var graphics=this.debugGraphic,showInternalEdges=this.defaults.debugShowInternalEdges;graphics.lineStyle(1,this.defaults.bodyDebugColor),graphics.beginPath();for(var i=0;i<bodies.length;i++){var body=bodies[i];if(body.render.visible)for(var k=body.parts.length>1?1:0;k<body.parts.length;k++){var part=body.parts[k],vertLength=part.vertices.length;graphics.moveTo(part.vertices[0].x,part.vertices[0].y);for(var j=1;j<vertLength;j++)!part.vertices[j-1].isInternal||showInternalEdges?graphics.lineTo(part.vertices[j].x,part.vertices[j].y):graphics.moveTo(part.vertices[j].x,part.vertices[j].y),part.vertices[j].isInternal&&!showInternalEdges&&graphics.moveTo(part.vertices[(j+1)%vertLength].x,part.vertices[(j+1)%vertLength].y);graphics.lineTo(part.vertices[0].x,part.vertices[0].y)}}graphics.strokePath()},renderBodies:function(bodies){var body,part,i,k,graphics=this.debugGraphic,showInternalEdges=this.defaults.debugShowInternalEdges||!this.defaults.debugWireframes,showSleeping=this.defaults.debugShowSleeping,wireframes=this.defaults.debugWireframes;for(i=0;i<bodies.length;i++)if((body=bodies[i]).render.visible)for(k=body.parts.length>1?1:0;k<body.parts.length;k++)if((part=body.parts[k]).render.visible){if(showSleeping&&body.isSleeping?(graphics.lineStyle(1,this.defaults.bodyDebugColor,.5*part.render.opacity),graphics.fillStyle(this.defaults.bodyDebugColor,.5*part.render.opacity)):(graphics.lineStyle(1,this.defaults.bodyDebugColor,part.render.opacity),graphics.fillStyle(this.defaults.bodyDebugColor,part.render.opacity)),part.circleRadius)graphics.beginPath(),graphics.arc(part.position.x,part.position.y,part.circleRadius,0,2*Math.PI);else{graphics.beginPath(),graphics.moveTo(part.vertices[0].x,part.vertices[0].y);for(var vertLength=part.vertices.length,j=1;j<vertLength;j++)!part.vertices[j-1].isInternal||showInternalEdges?graphics.lineTo(part.vertices[j].x,part.vertices[j].y):graphics.moveTo(part.vertices[j].x,part.vertices[j].y),part.vertices[j].isInternal&&!showInternalEdges&&graphics.moveTo(part.vertices[(j+1)%part.vertices.length].x,part.vertices[(j+1)%part.vertices.length].y);graphics.lineTo(part.vertices[0].x,part.vertices[0].y),graphics.closePath()}wireframes?graphics.strokePath():graphics.fillPath()}},renderJoints:function(){var graphics=this.debugGraphic;graphics.lineStyle(2,this.defaults.jointDebugColor);for(var constraints=Composite.allConstraints(this.localWorld),i=0;i<constraints.length;i++){var constraint=constraints[i];if(constraint.render.visible&&constraint.pointA&&constraint.pointB){constraint.render.lineWidth&&graphics.lineStyle(constraint.render.lineWidth,Common.colorToNumber(constraint.render.strokeStyle));var start,end,bodyA=constraint.bodyA,bodyB=constraint.bodyB;if(start=bodyA?Vector.add(bodyA.position,constraint.pointA):constraint.pointA,"pin"===constraint.render.type)graphics.beginPath(),graphics.arc(start.x,start.y,3,0,2*Math.PI),graphics.closePath();else{if(end=bodyB?Vector.add(bodyB.position,constraint.pointB):constraint.pointB,graphics.beginPath(),graphics.moveTo(start.x,start.y),"spring"===constraint.render.type)for(var offset,delta=Vector.sub(end,start),normal=Vector.perp(Vector.normalise(delta)),coils=Math.ceil(Common.clamp(constraint.length/5,12,20)),j=1;j<coils;j+=1)offset=j%2==0?1:-1,graphics.lineTo(start.x+delta.x*(j/coils)+normal.x*offset*4,start.y+delta.y*(j/coils)+normal.y*offset*4);graphics.lineTo(end.x,end.y)}constraint.render.lineWidth&&graphics.strokePath(),constraint.render.anchors&&(graphics.fillStyle(Common.colorToNumber(constraint.render.strokeStyle)),graphics.beginPath(),graphics.arc(start.x,start.y,6,0,2*Math.PI),graphics.arc(end.x,end.y,6,0,2*Math.PI),graphics.closePath(),graphics.fillPath())}}},fromPath:function(path,points){void 0===points&&(points=[]);return path.replace(/L?\s*([\-\d\.e]+)[\s,]*([\-\d\.e]+)*/gi,(function(match,x,y){points.push({x:parseFloat(x),y:parseFloat(y)})})),points},resetCollisionIDs:function(){return Body._nextCollidingGroupId=1,Body._nextNonCollidingGroupId=-1,Body._nextCategory=1,this},shutdown:function(){MatterEvents.off(this.engine),this.removeAllListeners(),MatterWorld.clear(this.localWorld,!1),Engine.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});module.exports=World},function(module,exports,__webpack_require__){var BasePlugin=new(__webpack_require__(0))({initialize:function(pluginManager){this.pluginManager=pluginManager,this.game=pluginManager.game,this.scene,this.systems},init:function(){},start:function(){},stop:function(){},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});module.exports=BasePlugin},function(module,exports,__webpack_require__){var GetTilesWithin=__webpack_require__(27);module.exports=function(findIndex,newIndex,tileX,tileY,width,height,layer){for(var tiles=GetTilesWithin(tileX,tileY,width,height,null,layer),i=0;i<tiles.length;i++)tiles[i]&&tiles[i].index===findIndex&&(tiles[i].index=newIndex)}},function(module,exports,__webpack_require__){var IsInLayerBounds=__webpack_require__(114);module.exports=function(tileX,tileY,layer){if(IsInLayerBounds(tileX,tileY,layer)){var tile=layer.data[tileY][tileX];return null!==tile&&tile.index>-1}return!1}},function(module,exports,__webpack_require__){var Tile=__webpack_require__(79),IsInLayerBounds=__webpack_require__(114),CalculateFacesAt=__webpack_require__(242);module.exports=function(tileX,tileY,replaceWithNull,recalculateFaces,layer){if(void 0===replaceWithNull&&(replaceWithNull=!1),void 0===recalculateFaces&&(recalculateFaces=!0),!IsInLayerBounds(tileX,tileY,layer))return null;var tile=layer.data[tileY][tileX];return tile?(layer.data[tileY][tileX]=replaceWithNull?null:new Tile(layer,-1,tileX,tileY,tile.width,tile.height),recalculateFaces&&tile&&tile.collides&&CalculateFacesAt(tileX,tileY,layer),tile):null}},function(module,exports,__webpack_require__){var Formats=__webpack_require__(34),Parse2DArray=__webpack_require__(245),ParseCSV=__webpack_require__(505),ParseJSONTiled=__webpack_require__(506),ParseWeltmeister=__webpack_require__(517);module.exports=function(name,mapFormat,data,tileWidth,tileHeight,insertNull){var newMap;switch(mapFormat){case Formats.ARRAY_2D:newMap=Parse2DArray(name,data,tileWidth,tileHeight,insertNull);break;case Formats.CSV:newMap=ParseCSV(name,data,tileWidth,tileHeight,insertNull);break;case Formats.TILED_JSON:newMap=ParseJSONTiled(name,data,insertNull);break;case Formats.WELTMEISTER:newMap=ParseWeltmeister(name,data,insertNull);break;default:console.warn("Unrecognized tilemap data format: "+mapFormat),newMap=null}return newMap}},function(module,exports,__webpack_require__){var Formats=__webpack_require__(34),Parse2DArray=__webpack_require__(245);module.exports=function(name,data,tileWidth,tileHeight,insertNull){var array2D=data.trim().split("\n").map((function(row){return row.split(",")})),map=Parse2DArray(name,array2D,tileWidth,tileHeight,insertNull);return map.format=Formats.CSV,map}},function(module,exports,__webpack_require__){var Formats=__webpack_require__(34),MapData=__webpack_require__(116),ParseTileLayers=__webpack_require__(507),ParseImageLayers=__webpack_require__(509),ParseTilesets=__webpack_require__(510),ParseObjectLayers=__webpack_require__(513),BuildTilesetIndex=__webpack_require__(515),AssignTileProperties=__webpack_require__(516);module.exports=function(name,json,insertNull){if("orthogonal"!==json.orientation)return console.warn("Only orthogonal map types are supported in this version of Phaser"),null;var mapData=new MapData({width:json.width,height:json.height,name:name,tileWidth:json.tilewidth,tileHeight:json.tileheight,orientation:json.orientation,format:Formats.TILED_JSON,version:json.version,properties:json.properties,renderOrder:json.renderorder,infinite:json.infinite});mapData.layers=ParseTileLayers(json,insertNull),mapData.images=ParseImageLayers(json);var sets=ParseTilesets(json);return mapData.tilesets=sets.tilesets,mapData.imageCollections=sets.imageCollections,mapData.objects=ParseObjectLayers(json),mapData.tiles=BuildTilesetIndex(mapData),AssignTileProperties(mapData),mapData}},function(module,exports,__webpack_require__){var Base64Decode=__webpack_require__(508),GetFastValue=__webpack_require__(1),LayerData=__webpack_require__(115),ParseGID=__webpack_require__(246),Tile=__webpack_require__(79);module.exports=function(json,insertNull){for(var infiniteMap=GetFastValue(json,"infinite",!1),tileLayers=[],i=0;i<json.layers.length;i++)if("tilelayer"===json.layers[i].type){var curl=json.layers[i];if(curl.compression)console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+curl.name+"'");else{var layerData,gidInfo,tile,blankTile;curl.encoding&&"base64"===curl.encoding&&(curl.data=Base64Decode(curl.data),delete curl.encoding);var output=[],x=0;if(infiniteMap){var layerOffsetX=GetFastValue(curl,"startx",0)+curl.x,layerOffsetY=GetFastValue(curl,"starty",0)+curl.y;layerData=new LayerData({name:curl.name,x:layerOffsetX,y:layerOffsetY,width:curl.width,height:curl.height,tileWidth:json.tilewidth,tileHeight:json.tileheight,alpha:curl.opacity,visible:curl.visible,properties:GetFastValue(curl,"properties",{})});for(var c=0;c<curl.height;c++){output.push([null]);for(var j=0;j<curl.width;j++)output[c][j]=null}for(c=0,len=curl.chunks.length;c<len;c++)for(var chunk=curl.chunks[c],offsetX=chunk.x-layerOffsetX,offsetY=chunk.y-layerOffsetY,y=0,t=0,len2=chunk.data.length;t<len2;t++){var newOffsetX=x+offsetX,newOffsetY=y+offsetY;(gidInfo=ParseGID(chunk.data[t])).gid>0?((tile=new Tile(layerData,gidInfo.gid,newOffsetX,newOffsetY,json.tilewidth,json.tileheight)).rotation=gidInfo.rotation,tile.flipX=gidInfo.flipped,output[newOffsetY][newOffsetX]=tile):(blankTile=insertNull?null:new Tile(layerData,-1,newOffsetX,newOffsetY,json.tilewidth,json.tileheight),output[newOffsetY][newOffsetX]=blankTile),++x===chunk.width&&(y++,x=0)}}else{layerData=new LayerData({name:curl.name,x:GetFastValue(curl,"offsetx",0)+curl.x,y:GetFastValue(curl,"offsety",0)+curl.y,width:curl.width,height:curl.height,tileWidth:json.tilewidth,tileHeight:json.tileheight,alpha:curl.opacity,visible:curl.visible,properties:GetFastValue(curl,"properties",{})});for(var row=[],k=0,len=curl.data.length;k<len;k++)(gidInfo=ParseGID(curl.data[k])).gid>0?((tile=new Tile(layerData,gidInfo.gid,x,output.length,json.tilewidth,json.tileheight)).rotation=gidInfo.rotation,tile.flipX=gidInfo.flipped,row.push(tile)):(blankTile=insertNull?null:new Tile(layerData,-1,x,output.length,json.tilewidth,json.tileheight),row.push(blankTile)),++x===curl.width&&(output.push(row),x=0,row=[])}layerData.data=output,tileLayers.push(layerData)}}return tileLayers}},function(module,exports){module.exports=function(data){for(var binaryString=window.atob(data),len=binaryString.length,bytes=new Array(len/4),i=0;i<len;i+=4)bytes[i/4]=(binaryString.charCodeAt(i)|binaryString.charCodeAt(i+1)<<8|binaryString.charCodeAt(i+2)<<16|binaryString.charCodeAt(i+3)<<24)>>>0;return bytes}},function(module,exports,__webpack_require__){var GetFastValue=__webpack_require__(1);module.exports=function(json){for(var images=[],i=0;i<json.layers.length;i++)if("imagelayer"===json.layers[i].type){var curi=json.layers[i];images.push({name:curi.name,image:curi.image,x:GetFastValue(curi,"offsetx",0)+curi.x,y:GetFastValue(curi,"offsety",0)+curi.y,alpha:curi.opacity,visible:curi.visible,properties:GetFastValue(curi,"properties",{})})}return images}},function(module,exports,__webpack_require__){var Tileset=__webpack_require__(154),ImageCollection=__webpack_require__(511),ParseObject=__webpack_require__(247);module.exports=function(json){for(var stringID,tilesets=[],imageCollections=[],lastSet=null,i=0;i<json.tilesets.length;i++){var set=json.tilesets[i];if(set.source)console.warn("Phaser can't load external tilesets. Use the Embed Tileset button and then export the map again.");else if(set.image){var newSet=new Tileset(set.name,set.firstgid,set.tilewidth,set.tileheight,set.margin,set.spacing);if(json.version>1){if(Array.isArray(set.tiles)){for(var tiles={},props={},t=0;t<set.tiles.length;t++){var tile=set.tiles[t];if(tile.properties){var newPropData={};tile.properties.forEach((function(propData){newPropData[propData.name]=propData.value})),props[tile.id]=newPropData}if(tile.objectgroup&&(tiles[tile.id]={objectgroup:tile.objectgroup},tile.objectgroup.objects)){var parsedObjects2=tile.objectgroup.objects.map((function(obj){return ParseObject(obj)}));tiles[tile.id].objectgroup.objects=parsedObjects2}tile.animation&&(tiles.hasOwnProperty(tile.id)?tiles[tile.id].animation=tile.animation:tiles[tile.id]={animation:tile.animation})}newSet.tileData=tiles,newSet.tileProperties=props}}else if(set.tileproperties&&(newSet.tileProperties=set.tileproperties),set.tiles)for(stringID in newSet.tileData=set.tiles,newSet.tileData){var objectGroup=newSet.tileData[stringID].objectgroup;if(objectGroup&&objectGroup.objects){var parsedObjects1=objectGroup.objects.map((function(obj){return ParseObject(obj)}));newSet.tileData[stringID].objectgroup.objects=parsedObjects1}}newSet.updateTileData(set.imagewidth,set.imageheight),tilesets.push(newSet)}else{var newCollection=new ImageCollection(set.name,set.firstgid,set.tilewidth,set.tileheight,set.margin,set.spacing,set.properties);for(stringID in set.tiles){var image=set.tiles[stringID].image,gid=set.firstgid+parseInt(stringID,10);newCollection.addImage(gid,image)}imageCollections.push(newCollection)}lastSet&&(lastSet.lastgid=set.firstgid-1),lastSet=set}return{tilesets:tilesets,imageCollections:imageCollections}}},function(module,exports,__webpack_require__){var ImageCollection=new(__webpack_require__(0))({initialize:function(name,firstgid,width,height,margin,spacing,properties){(void 0===width||width<=0)&&(width=32),(void 0===height||height<=0)&&(height=32),void 0===margin&&(margin=0),void 0===spacing&&(spacing=0),this.name=name,this.firstgid=0|firstgid,this.imageWidth=0|width,this.imageHeight=0|height,this.imageMargin=0|margin,this.imageSpacing=0|spacing,this.properties=properties||{},this.images=[],this.total=0},containsImageIndex:function(imageIndex){return imageIndex>=this.firstgid&&imageIndex<this.firstgid+this.total},addImage:function(gid,image){return this.images.push({gid:gid,image:image}),this.total++,this}});module.exports=ImageCollection},function(module,exports,__webpack_require__){var HasValue=__webpack_require__(93);module.exports=function(object,keys){for(var obj={},i=0;i<keys.length;i++){var key=keys[i];HasValue(object,key)&&(obj[key]=object[key])}return obj}},function(module,exports,__webpack_require__){var GetFastValue=__webpack_require__(1),ParseObject=__webpack_require__(247),ObjectLayer=__webpack_require__(514);module.exports=function(json){for(var objectLayers=[],i=0;i<json.layers.length;i++)if("objectgroup"===json.layers[i].type){for(var curo=json.layers[i],offsetX=GetFastValue(curo,"offsetx",0),offsetY=GetFastValue(curo,"offsety",0),objects=[],j=0;j<curo.objects.length;j++){var parsedObject=ParseObject(curo.objects[j],offsetX,offsetY);objects.push(parsedObject)}var objectLayer=new ObjectLayer(curo);objectLayer.objects=objects,objectLayers.push(objectLayer)}return objectLayers}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),GetFastValue=__webpack_require__(1),ObjectLayer=new Class({initialize:function(config){void 0===config&&(config={}),this.name=GetFastValue(config,"name","object layer"),this.opacity=GetFastValue(config,"opacity",1),this.properties=GetFastValue(config,"properties",{}),this.propertyTypes=GetFastValue(config,"propertytypes",{}),this.type=GetFastValue(config,"type","objectgroup"),this.visible=GetFastValue(config,"visible",!0),this.objects=GetFastValue(config,"objects",[])}});module.exports=ObjectLayer},function(module,exports){module.exports=function(mapData){for(var tiles=[],i=0;i<mapData.tilesets.length;i++)for(var set=mapData.tilesets[i],x=set.tileMargin,y=set.tileMargin,count=0,countX=0,countY=0,t=set.firstgid;t<set.firstgid+set.total&&(tiles[t]=[x,y,i],x+=set.tileWidth+set.tileSpacing,++count!==set.total)&&(++countX!==set.columns||(x=set.tileMargin,y+=set.tileHeight+set.tileSpacing,countX=0,++countY!==set.rows));t++);return tiles}},function(module,exports,__webpack_require__){var Extend=__webpack_require__(17);module.exports=function(mapData){for(var layerData,tile,sid,set,row,i=0;i<mapData.layers.length;i++){layerData=mapData.layers[i],set=null;for(var j=0;j<layerData.data.length;j++){row=layerData.data[j];for(var k=0;k<row.length;k++)null===(tile=row[k])||tile.index<0||(sid=mapData.tiles[tile.index][2],set=mapData.tilesets[sid],tile.width=set.tileWidth,tile.height=set.tileHeight,set.tileProperties&&set.tileProperties[tile.index-set.firstgid]&&(tile.properties=Extend(tile.properties,set.tileProperties[tile.index-set.firstgid])))}}}},function(module,exports,__webpack_require__){var Formats=__webpack_require__(34),MapData=__webpack_require__(116),ParseTileLayers=__webpack_require__(518),ParseTilesets=__webpack_require__(519);module.exports=function(name,json,insertNull){if(0===json.layer.length)return console.warn("No layers found in the Weltmeister map: "+name),null;for(var width=0,height=0,i=0;i<json.layer.length;i++)json.layer[i].width>width&&(width=json.layer[i].width),json.layer[i].height>height&&(height=json.layer[i].height);var mapData=new MapData({width:width,height:height,name:name,tileWidth:json.layer[0].tilesize,tileHeight:json.layer[0].tilesize,format:Formats.WELTMEISTER});return mapData.layers=ParseTileLayers(json,insertNull),mapData.tilesets=ParseTilesets(json),mapData}},function(module,exports,__webpack_require__){var LayerData=__webpack_require__(115),Tile=__webpack_require__(79);module.exports=function(json,insertNull){for(var tileLayers=[],i=0;i<json.layer.length;i++){for(var layer=json.layer[i],layerData=new LayerData({name:layer.name,width:layer.width,height:layer.height,tileWidth:layer.tilesize,tileHeight:layer.tilesize,visible:1===layer.visible}),row=[],tileGrid=[],y=0;y<layer.data.length;y++){for(var x=0;x<layer.data[y].length;x++){var tile,index=layer.data[y][x]-1;tile=index>-1?new Tile(layerData,index,x,y,layer.tilesize,layer.tilesize):insertNull?null:new Tile(layerData,-1,x,y,layer.tilesize,layer.tilesize),row.push(tile)}tileGrid.push(row),row=[]}layerData.data=tileGrid,tileLayers.push(layerData)}return tileLayers}},function(module,exports,__webpack_require__){var Tileset=__webpack_require__(154);module.exports=function(json){for(var tilesets=[],tilesetsNames=[],i=0;i<json.layer.length;i++){var layer=json.layer[i],tilesetName=layer.tilesetName;""!==tilesetName&&-1===tilesetsNames.indexOf(tilesetName)&&(tilesetsNames.push(tilesetName),tilesets.push(new Tileset(tilesetName,0,layer.tilesize,layer.tilesize,0,0)))}return tilesets}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),DegToRad=__webpack_require__(41),DynamicTilemapLayer=__webpack_require__(521),Extend=__webpack_require__(17),Formats=__webpack_require__(34),LayerData=__webpack_require__(115),Rotate=__webpack_require__(335),SpliceOne=__webpack_require__(86),StaticTilemapLayer=__webpack_require__(522),Tile=__webpack_require__(79),TilemapComponents=__webpack_require__(150),Tileset=__webpack_require__(154),Tilemap=new Class({initialize:function(scene,mapData){this.scene=scene,this.tileWidth=mapData.tileWidth,this.tileHeight=mapData.tileHeight,this.width=mapData.width,this.height=mapData.height,this.orientation=mapData.orientation,this.renderOrder=mapData.renderOrder,this.format=mapData.format,this.version=mapData.version,this.properties=mapData.properties,this.widthInPixels=mapData.widthInPixels,this.heightInPixels=mapData.heightInPixels,this.imageCollections=mapData.imageCollections,this.images=mapData.images,this.layers=mapData.layers,this.tilesets=mapData.tilesets,this.objects=mapData.objects,this.currentLayerIndex=0},setRenderOrder:function(renderOrder){var orders=["right-down","left-down","right-up","left-up"];return"number"==typeof renderOrder&&(renderOrder=orders[renderOrder]),orders.indexOf(renderOrder)>-1&&(this.renderOrder=renderOrder),this},addTilesetImage:function(tilesetName,key,tileWidth,tileHeight,tileMargin,tileSpacing,gid){if(void 0===tilesetName)return null;if(null==key&&(key=tilesetName),!this.scene.sys.textures.exists(key))return console.warn("Invalid Tileset Image: "+key),null;var texture=this.scene.sys.textures.get(key),index=this.getTilesetIndex(tilesetName);if(null===index&&this.format===Formats.TILED_JSON)return console.warn("No data found for Tileset: "+tilesetName),null;var tileset=this.tilesets[index];return tileset?(tileset.setTileSize(tileWidth,tileHeight),tileset.setSpacing(tileMargin,tileSpacing),tileset.setImage(texture),tileset):(void 0===tileWidth&&(tileWidth=this.tileWidth),void 0===tileHeight&&(tileHeight=this.tileHeight),void 0===tileMargin&&(tileMargin=0),void 0===tileSpacing&&(tileSpacing=0),void 0===gid&&(gid=0),(tileset=new Tileset(tilesetName,gid,tileWidth,tileHeight,tileMargin,tileSpacing)).setImage(texture),this.tilesets.push(tileset),tileset)},convertLayerToStatic:function(layer){if(null===(layer=this.getLayer(layer)))return null;var dynamicLayer=layer.tilemapLayer;if(!(dynamicLayer&&dynamicLayer instanceof DynamicTilemapLayer))return null;var staticLayer=new StaticTilemapLayer(dynamicLayer.scene,dynamicLayer.tilemap,dynamicLayer.layerIndex,dynamicLayer.tileset,dynamicLayer.x,dynamicLayer.y);return this.scene.sys.displayList.add(staticLayer),dynamicLayer.destroy(),staticLayer},copy:function(srcTileX,srcTileY,width,height,destTileX,destTileY,recalculateFaces,layer){return layer=this.getLayer(layer),this._isStaticCall(layer,"copy")?this:null!==layer?(TilemapComponents.Copy(srcTileX,srcTileY,width,height,destTileX,destTileY,recalculateFaces,layer),this):null},createBlankDynamicLayer:function(name,tileset,x,y,width,height,tileWidth,tileHeight){if(void 0===x&&(x=0),void 0===y&&(y=0),void 0===width&&(width=this.width),void 0===height&&(height=this.height),void 0===tileWidth&&(tileWidth=this.tileWidth),void 0===tileHeight&&(tileHeight=this.tileHeight),null!==this.getLayerIndex(name))return console.warn("Invalid Tilemap Layer ID: "+name),null;for(var row,layerData=new LayerData({name:name,tileWidth:tileWidth,tileHeight:tileHeight,width:width,height:height}),tileY=0;tileY<height;tileY++){row=[];for(var tileX=0;tileX<width;tileX++)row.push(new Tile(layerData,-1,tileX,tileY,tileWidth,tileHeight,this.tileWidth,this.tileHeight));layerData.data.push(row)}this.layers.push(layerData),this.currentLayerIndex=this.layers.length-1;var dynamicLayer=new DynamicTilemapLayer(this.scene,this,this.currentLayerIndex,tileset,x,y);return dynamicLayer.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(dynamicLayer),dynamicLayer},createDynamicLayer:function(layerID,tileset,x,y){var index=this.getLayerIndex(layerID);if(null===index)return console.warn("Invalid Tilemap Layer ID: "+layerID),null;var layerData=this.layers[index];if(layerData.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+layerID),null;this.currentLayerIndex=index,void 0===x&&(x=layerData.x),void 0===y&&(y=layerData.y);var layer=new DynamicTilemapLayer(this.scene,this,index,tileset,x,y);return layer.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(layer),layer},createFromObjects:function(name,id,spriteConfig,scene){void 0===spriteConfig&&(spriteConfig={}),void 0===scene&&(scene=this.scene);var objectLayer=this.getObjectLayer(name);if(objectLayer){for(var objects=objectLayer.objects,sprites=[],i=0;i<objects.length;i++){var found=!1,obj=objects[i];if((void 0!==obj.gid&&"number"==typeof id&&obj.gid===id||void 0!==obj.id&&"number"==typeof id&&obj.id===id||void 0!==obj.name&&"string"==typeof id&&obj.name===id)&&(found=!0),found){var config=Extend({},spriteConfig,obj.properties);config.x=obj.x,config.y=obj.y;var sprite=scene.make.sprite(config);sprite.name=obj.name,obj.width&&(sprite.displayWidth=obj.width),obj.height&&(sprite.displayHeight=obj.height);var offset={x:sprite.originX*sprite.displayWidth,y:(sprite.originY-1)*sprite.displayHeight};if(obj.rotation){var angle=DegToRad(obj.rotation);Rotate(offset,angle),sprite.rotation=angle}for(var key in sprite.x+=offset.x,sprite.y+=offset.y,void 0===obj.flippedHorizontal&&void 0===obj.flippedVertical||sprite.setFlip(obj.flippedHorizontal,obj.flippedVertical),obj.visible||(sprite.visible=!1),obj.properties)sprite.hasOwnProperty(key)||sprite.setData(key,obj.properties[key]);sprites.push(sprite)}}return sprites}console.warn("Cannot create from object. Invalid objectgroup name given: "+name)},createFromTiles:function(indexes,replacements,spriteConfig,scene,camera,layer){return null===(layer=this.getLayer(layer))?null:TilemapComponents.CreateFromTiles(indexes,replacements,spriteConfig,scene,camera,layer)},createStaticLayer:function(layerID,tileset,x,y){var index=this.getLayerIndex(layerID);if(null===index)return console.warn("Invalid Tilemap Layer ID: "+layerID),null;if(this.layers[index].tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+layerID),null;this.currentLayerIndex=index,void 0===x&&this.layers[index].x&&(x=this.layers[index].x),void 0===y&&this.layers[index].y&&(y=this.layers[index].y);var layer=new StaticTilemapLayer(this.scene,this,index,tileset,x,y);return layer.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(layer),layer},destroy:function(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=void 0},fill:function(index,tileX,tileY,width,height,recalculateFaces,layer){return null===(layer=this.getLayer(layer))?null:this._isStaticCall(layer,"fill")?this:(TilemapComponents.Fill(index,tileX,tileY,width,height,recalculateFaces,layer),this)},filterObjects:function(objectLayer,callback,context){if("string"==typeof objectLayer){var name=objectLayer;if(!(objectLayer=this.getObjectLayer(objectLayer)))return console.warn("No object layer found with the name: "+name),null}return objectLayer.objects.filter(callback,context)},filterTiles:function(callback,context,tileX,tileY,width,height,filteringOptions,layer){return null===(layer=this.getLayer(layer))?null:TilemapComponents.FilterTiles(callback,context,tileX,tileY,width,height,filteringOptions,layer)},findByIndex:function(findIndex,skip,reverse,layer){return null===(layer=this.getLayer(layer))?null:TilemapComponents.FindByIndex(findIndex,skip,reverse,layer)},findObject:function(objectLayer,callback,context){if("string"==typeof objectLayer){var name=objectLayer;if(!(objectLayer=this.getObjectLayer(objectLayer)))return console.warn("No object layer found with the name: "+name),null}return objectLayer.objects.find(callback,context)||null},findTile:function(callback,context,tileX,tileY,width,height,filteringOptions,layer){return null===(layer=this.getLayer(layer))?null:TilemapComponents.FindTile(callback,context,tileX,tileY,width,height,filteringOptions,layer)},forEachTile:function(callback,context,tileX,tileY,width,height,filteringOptions,layer){return null===(layer=this.getLayer(layer))?null:(TilemapComponents.ForEachTile(callback,context,tileX,tileY,width,height,filteringOptions,layer),this)},getImageIndex:function(name){return this.getIndex(this.images,name)},getIndex:function(location,name){for(var i=0;i<location.length;i++)if(location[i].name===name)return i;return null},getLayer:function(layer){var index=this.getLayerIndex(layer);return null!==index?this.layers[index]:null},getObjectLayer:function(name){var index=this.getIndex(this.objects,name);return null!==index?this.objects[index]:null},getLayerIndex:function(layer){return void 0===layer?this.currentLayerIndex:"string"==typeof layer?this.getLayerIndexByName(layer):"number"==typeof layer&&layer<this.layers.length?layer:layer instanceof StaticTilemapLayer||layer instanceof DynamicTilemapLayer?layer.layerIndex:null},getLayerIndexByName:function(name){return this.getIndex(this.layers,name)},getTileAt:function(tileX,tileY,nonNull,layer){return null===(layer=this.getLayer(layer))?null:TilemapComponents.GetTileAt(tileX,tileY,nonNull,layer)},getTileAtWorldXY:function(worldX,worldY,nonNull,camera,layer){return null===(layer=this.getLayer(layer))?null:TilemapComponents.GetTileAtWorldXY(worldX,worldY,nonNull,camera,layer)},getTilesWithin:function(tileX,tileY,width,height,filteringOptions,layer){return null===(layer=this.getLayer(layer))?null:TilemapComponents.GetTilesWithin(tileX,tileY,width,height,filteringOptions,layer)},getTilesWithinShape:function(shape,filteringOptions,camera,layer){return null===(layer=this.getLayer(layer))?null:TilemapComponents.GetTilesWithinShape(shape,filteringOptions,camera,layer)},getTilesWithinWorldXY:function(worldX,worldY,width,height,filteringOptions,camera,layer){return null===(layer=this.getLayer(layer))?null:TilemapComponents.GetTilesWithinWorldXY(worldX,worldY,width,height,filteringOptions,camera,layer)},getTileset:function(name){var index=this.getIndex(this.tilesets,name);return null!==index?this.tilesets[index]:null},getTilesetIndex:function(name){return this.getIndex(this.tilesets,name)},hasTileAt:function(tileX,tileY,layer){return null===(layer=this.getLayer(layer))?null:TilemapComponents.HasTileAt(tileX,tileY,layer)},hasTileAtWorldXY:function(worldX,worldY,camera,layer){return null===(layer=this.getLayer(layer))?null:TilemapComponents.HasTileAtWorldXY(worldX,worldY,camera,layer)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(layer){this.setLayer(layer)}},putTileAt:function(tile,tileX,tileY,recalculateFaces,layer){return layer=this.getLayer(layer),this._isStaticCall(layer,"putTileAt")?null:null===layer?null:TilemapComponents.PutTileAt(tile,tileX,tileY,recalculateFaces,layer)},putTileAtWorldXY:function(tile,worldX,worldY,recalculateFaces,camera,layer){return layer=this.getLayer(layer),this._isStaticCall(layer,"putTileAtWorldXY")?null:null===layer?null:TilemapComponents.PutTileAtWorldXY(tile,worldX,worldY,recalculateFaces,camera,layer)},putTilesAt:function(tilesArray,tileX,tileY,recalculateFaces,layer){return layer=this.getLayer(layer),this._isStaticCall(layer,"putTilesAt")?this:null===layer?null:(TilemapComponents.PutTilesAt(tilesArray,tileX,tileY,recalculateFaces,layer),this)},randomize:function(tileX,tileY,width,height,indexes,layer){return layer=this.getLayer(layer),this._isStaticCall(layer,"randomize")?this:null===layer?null:(TilemapComponents.Randomize(tileX,tileY,width,height,indexes,layer),this)},calculateFacesAt:function(tileX,tileY,layer){return null===(layer=this.getLayer(layer))?null:(TilemapComponents.CalculateFacesAt(tileX,tileY,layer),this)},calculateFacesWithin:function(tileX,tileY,width,height,layer){return null===(layer=this.getLayer(layer))?null:(TilemapComponents.CalculateFacesWithin(tileX,tileY,width,height,layer),this)},removeLayer:function(layer){var index=this.getLayerIndex(layer);return null!==index?(SpliceOne(this.layers,index),this.currentLayerIndex===index&&(this.currentLayerIndex=0),this):null},destroyLayer:function(layer){var index=this.getLayerIndex(layer);return null!==index?((layer=this.layers[index]).destroy(),SpliceOne(this.layers,index),this.currentLayerIndex===index&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var layers=this.layers,i=0;i<layers.length;i++)layers[i].tilemapLayer&&layers[i].tilemapLayer.destroy(!1);return layers.length=0,this.currentLayerIndex=0,this},removeTile:function(tiles,replaceIndex,recalculateFaces){void 0===replaceIndex&&(replaceIndex=-1),void 0===recalculateFaces&&(recalculateFaces=!0);var removed=[];Array.isArray(tiles)||(tiles=[tiles]);for(var i=0;i<tiles.length;i++){var tile=tiles[i];removed.push(this.removeTileAt(tile.x,tile.y,!0,recalculateFaces,tile.tilemapLayer)),replaceIndex>-1&&this.putTileAt(replaceIndex,tile.x,tile.y,recalculateFaces,tile.tilemapLayer)}return removed},removeTileAt:function(tileX,tileY,replaceWithNull,recalculateFaces,layer){return layer=this.getLayer(layer),this._isStaticCall(layer,"removeTileAt")?null:null===layer?null:TilemapComponents.RemoveTileAt(tileX,tileY,replaceWithNull,recalculateFaces,layer)},removeTileAtWorldXY:function(worldX,worldY,replaceWithNull,recalculateFaces,camera,layer){return layer=this.getLayer(layer),this._isStaticCall(layer,"removeTileAtWorldXY")?null:null===layer?null:TilemapComponents.RemoveTileAtWorldXY(worldX,worldY,replaceWithNull,recalculateFaces,camera,layer)},renderDebug:function(graphics,styleConfig,layer){return null===(layer=this.getLayer(layer))?null:(TilemapComponents.RenderDebug(graphics,styleConfig,layer),this)},renderDebugFull:function(graphics,styleConfig){for(var layers=this.layers,i=0;i<layers.length;i++)TilemapComponents.RenderDebug(graphics,styleConfig,layers[i]);return this},replaceByIndex:function(findIndex,newIndex,tileX,tileY,width,height,layer){return layer=this.getLayer(layer),this._isStaticCall(layer,"replaceByIndex")?this:null===layer?null:(TilemapComponents.ReplaceByIndex(findIndex,newIndex,tileX,tileY,width,height,layer),this)},setCollision:function(indexes,collides,recalculateFaces,layer){return null===(layer=this.getLayer(layer))?null:(TilemapComponents.SetCollision(indexes,collides,recalculateFaces,layer),this)},setCollisionBetween:function(start,stop,collides,recalculateFaces,layer){return null===(layer=this.getLayer(layer))?null:(TilemapComponents.SetCollisionBetween(start,stop,collides,recalculateFaces,layer),this)},setCollisionByProperty:function(properties,collides,recalculateFaces,layer){return null===(layer=this.getLayer(layer))?null:(TilemapComponents.SetCollisionByProperty(properties,collides,recalculateFaces,layer),this)},setCollisionByExclusion:function(indexes,collides,recalculateFaces,layer){return null===(layer=this.getLayer(layer))?null:(TilemapComponents.SetCollisionByExclusion(indexes,collides,recalculateFaces,layer),this)},setCollisionFromCollisionGroup:function(collides,recalculateFaces,layer){return null===(layer=this.getLayer(layer))?null:(TilemapComponents.SetCollisionFromCollisionGroup(collides,recalculateFaces,layer),this)},setTileIndexCallback:function(indexes,callback,callbackContext,layer){return null===(layer=this.getLayer(layer))?null:(TilemapComponents.SetTileIndexCallback(indexes,callback,callbackContext,layer),this)},setTileLocationCallback:function(tileX,tileY,width,height,callback,callbackContext,layer){return null===(layer=this.getLayer(layer))?null:(TilemapComponents.SetTileLocationCallback(tileX,tileY,width,height,callback,callbackContext,layer),this)},setLayer:function(layer){var index=this.getLayerIndex(layer);return null!==index&&(this.currentLayerIndex=index),this},setBaseTileSize:function(tileWidth,tileHeight){this.tileWidth=tileWidth,this.tileHeight=tileHeight,this.widthInPixels=this.width*tileWidth,this.heightInPixels=this.height*tileHeight;for(var i=0;i<this.layers.length;i++){this.layers[i].baseTileWidth=tileWidth,this.layers[i].baseTileHeight=tileHeight;for(var mapData=this.layers[i].data,mapWidth=this.layers[i].width,mapHeight=this.layers[i].height,row=0;row<mapHeight;row++)for(var col=0;col<mapWidth;col++){var tile=mapData[row][col];null!==tile&&tile.setSize(void 0,void 0,tileWidth,tileHeight)}}return this},setLayerTileSize:function(tileWidth,tileHeight,layer){if(null===(layer=this.getLayer(layer)))return this;layer.tileWidth=tileWidth,layer.tileHeight=tileHeight;for(var mapData=layer.data,mapWidth=layer.width,mapHeight=layer.height,row=0;row<mapHeight;row++)for(var col=0;col<mapWidth;col++){var tile=mapData[row][col];null!==tile&&tile.setSize(tileWidth,tileHeight)}return this},shuffle:function(tileX,tileY,width,height,layer){return layer=this.getLayer(layer),this._isStaticCall(layer,"shuffle")?this:null===layer?null:(TilemapComponents.Shuffle(tileX,tileY,width,height,layer),this)},swapByIndex:function(indexA,indexB,tileX,tileY,width,height,layer){return layer=this.getLayer(layer),this._isStaticCall(layer,"swapByIndex")?this:null===layer?null:(TilemapComponents.SwapByIndex(indexA,indexB,tileX,tileY,width,height,layer),this)},tileToWorldX:function(tileX,camera,layer){return null===(layer=this.getLayer(layer))?null:TilemapComponents.TileToWorldX(tileX,camera,layer)},tileToWorldY:function(tileX,camera,layer){return null===(layer=this.getLayer(layer))?null:TilemapComponents.TileToWorldY(tileX,camera,layer)},tileToWorldXY:function(tileX,tileY,point,camera,layer){return null===(layer=this.getLayer(layer))?null:TilemapComponents.TileToWorldXY(tileX,tileY,point,camera,layer)},weightedRandomize:function(tileX,tileY,width,height,weightedIndexes,layer){return layer=this.getLayer(layer),this._isStaticCall(layer,"weightedRandomize")?this:null===layer?null:(TilemapComponents.WeightedRandomize(tileX,tileY,width,height,weightedIndexes,layer),this)},worldToTileX:function(worldX,snapToFloor,camera,layer){return null===(layer=this.getLayer(layer))?null:TilemapComponents.WorldToTileX(worldX,snapToFloor,camera,layer)},worldToTileY:function(worldY,snapToFloor,camera,layer){return null===(layer=this.getLayer(layer))?null:TilemapComponents.WorldToTileY(worldY,snapToFloor,camera,layer)},worldToTileXY:function(worldX,worldY,snapToFloor,point,camera,layer){return null===(layer=this.getLayer(layer))?null:TilemapComponents.WorldToTileXY(worldX,worldY,snapToFloor,point,camera,layer)},_isStaticCall:function(layer,functionName){return layer.tilemapLayer instanceof StaticTilemapLayer&&(console.warn(functionName+": You cannot change the tiles in a static tilemap layer"),!0)}});module.exports=Tilemap},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Components=__webpack_require__(12),DynamicTilemapLayerRender=__webpack_require__(1388),GameObject=__webpack_require__(13),TilemapComponents=__webpack_require__(150),DynamicTilemapLayer=new Class({Extends:GameObject,Mixins:[Components.Alpha,Components.BlendMode,Components.ComputedSize,Components.Depth,Components.Flip,Components.GetBounds,Components.Origin,Components.Pipeline,Components.Transform,Components.Visible,Components.ScrollFactor,DynamicTilemapLayerRender],initialize:function(scene,tilemap,layerIndex,tileset,x,y){GameObject.call(this,scene,"DynamicTilemapLayer"),this.isTilemap=!0,this.tilemap=tilemap,this.layerIndex=layerIndex,this.layer=tilemap.layers[layerIndex],this.layer.tilemapLayer=this,this.tileset=[],this.culledTiles=[],this.skipCull=!1,this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=TilemapComponents.CullTiles,this._renderOrder=0,this.gidMap=[],this.setTilesets(tileset),this.setAlpha(this.layer.alpha),this.setPosition(x,y),this.setOrigin(),this.setSize(tilemap.tileWidth*this.layer.width,tilemap.tileHeight*this.layer.height),this.initPipeline("TextureTintPipeline")},setTilesets:function(tilesets){var gidMap=[],setList=[],map=this.tilemap;Array.isArray(tilesets)||(tilesets=[tilesets]);for(var i=0;i<tilesets.length;i++){var tileset=tilesets[i];if("string"==typeof tileset&&(tileset=map.getTileset(tileset)),tileset){setList.push(tileset);for(var s=tileset.firstgid,t=0;t<tileset.total;t++)gidMap[s+t]=tileset}}this.gidMap=gidMap,this.tileset=setList},setRenderOrder:function(renderOrder){return"string"==typeof renderOrder&&(renderOrder=["right-down","left-down","right-up","left-up"].indexOf(renderOrder)),renderOrder>=0&&renderOrder<4&&(this._renderOrder=renderOrder),this},calculateFacesAt:function(tileX,tileY){return TilemapComponents.CalculateFacesAt(tileX,tileY,this.layer),this},calculateFacesWithin:function(tileX,tileY,width,height){return TilemapComponents.CalculateFacesWithin(tileX,tileY,width,height,this.layer),this},createFromTiles:function(indexes,replacements,spriteConfig,scene,camera){return TilemapComponents.CreateFromTiles(indexes,replacements,spriteConfig,scene,camera,this.layer)},cull:function(camera){return this.cullCallback(this.layer,camera,this.culledTiles,this._renderOrder)},copy:function(srcTileX,srcTileY,width,height,destTileX,destTileY,recalculateFaces){return TilemapComponents.Copy(srcTileX,srcTileY,width,height,destTileX,destTileY,recalculateFaces,this.layer),this},destroy:function(removeFromTilemap){void 0===removeFromTilemap&&(removeFromTilemap=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),removeFromTilemap&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],GameObject.prototype.destroy.call(this))},fill:function(index,tileX,tileY,width,height,recalculateFaces){return TilemapComponents.Fill(index,tileX,tileY,width,height,recalculateFaces,this.layer),this},filterTiles:function(callback,context,tileX,tileY,width,height,filteringOptions){return TilemapComponents.FilterTiles(callback,context,tileX,tileY,width,height,filteringOptions,this.layer)},findByIndex:function(findIndex,skip,reverse){return TilemapComponents.FindByIndex(findIndex,skip,reverse,this.layer)},findTile:function(callback,context,tileX,tileY,width,height,filteringOptions){return TilemapComponents.FindTile(callback,context,tileX,tileY,width,height,filteringOptions,this.layer)},forEachTile:function(callback,context,tileX,tileY,width,height,filteringOptions){return TilemapComponents.ForEachTile(callback,context,tileX,tileY,width,height,filteringOptions,this.layer),this},getTileAt:function(tileX,tileY,nonNull){return TilemapComponents.GetTileAt(tileX,tileY,nonNull,this.layer)},getTileAtWorldXY:function(worldX,worldY,nonNull,camera){return TilemapComponents.GetTileAtWorldXY(worldX,worldY,nonNull,camera,this.layer)},getTilesWithin:function(tileX,tileY,width,height,filteringOptions){return TilemapComponents.GetTilesWithin(tileX,tileY,width,height,filteringOptions,this.layer)},getTilesWithinShape:function(shape,filteringOptions,camera){return TilemapComponents.GetTilesWithinShape(shape,filteringOptions,camera,this.layer)},getTilesWithinWorldXY:function(worldX,worldY,width,height,filteringOptions,camera){return TilemapComponents.GetTilesWithinWorldXY(worldX,worldY,width,height,filteringOptions,camera,this.layer)},hasTileAt:function(tileX,tileY){return TilemapComponents.HasTileAt(tileX,tileY,this.layer)},hasTileAtWorldXY:function(worldX,worldY,camera){return TilemapComponents.HasTileAtWorldXY(worldX,worldY,camera,this.layer)},putTileAt:function(tile,tileX,tileY,recalculateFaces){return TilemapComponents.PutTileAt(tile,tileX,tileY,recalculateFaces,this.layer)},putTileAtWorldXY:function(tile,worldX,worldY,recalculateFaces,camera){return TilemapComponents.PutTileAtWorldXY(tile,worldX,worldY,recalculateFaces,camera,this.layer)},putTilesAt:function(tilesArray,tileX,tileY,recalculateFaces){return TilemapComponents.PutTilesAt(tilesArray,tileX,tileY,recalculateFaces,this.layer),this},randomize:function(tileX,tileY,width,height,indexes){return TilemapComponents.Randomize(tileX,tileY,width,height,indexes,this.layer),this},removeTileAt:function(tileX,tileY,replaceWithNull,recalculateFaces){return TilemapComponents.RemoveTileAt(tileX,tileY,replaceWithNull,recalculateFaces,this.layer)},removeTileAtWorldXY:function(worldX,worldY,replaceWithNull,recalculateFaces,camera){return TilemapComponents.RemoveTileAtWorldXY(worldX,worldY,replaceWithNull,recalculateFaces,camera,this.layer)},renderDebug:function(graphics,styleConfig){return TilemapComponents.RenderDebug(graphics,styleConfig,this.layer),this},replaceByIndex:function(findIndex,newIndex,tileX,tileY,width,height){return TilemapComponents.ReplaceByIndex(findIndex,newIndex,tileX,tileY,width,height,this.layer),this},setSkipCull:function(value){return void 0===value&&(value=!0),this.skipCull=value,this},setCullPadding:function(paddingX,paddingY){return void 0===paddingX&&(paddingX=1),void 0===paddingY&&(paddingY=1),this.cullPaddingX=paddingX,this.cullPaddingY=paddingY,this},setCollision:function(indexes,collides,recalculateFaces){return TilemapComponents.SetCollision(indexes,collides,recalculateFaces,this.layer),this},setCollisionBetween:function(start,stop,collides,recalculateFaces){return TilemapComponents.SetCollisionBetween(start,stop,collides,recalculateFaces,this.layer),this},setCollisionByProperty:function(properties,collides,recalculateFaces){return TilemapComponents.SetCollisionByProperty(properties,collides,recalculateFaces,this.layer),this},setCollisionByExclusion:function(indexes,collides,recalculateFaces){return TilemapComponents.SetCollisionByExclusion(indexes,collides,recalculateFaces,this.layer),this},setCollisionFromCollisionGroup:function(collides,recalculateFaces){return TilemapComponents.SetCollisionFromCollisionGroup(collides,recalculateFaces,this.layer),this},setTileIndexCallback:function(indexes,callback,callbackContext){return TilemapComponents.SetTileIndexCallback(indexes,callback,callbackContext,this.layer),this},setTileLocationCallback:function(tileX,tileY,width,height,callback,callbackContext){return TilemapComponents.SetTileLocationCallback(tileX,tileY,width,height,callback,callbackContext,this.layer),this},shuffle:function(tileX,tileY,width,height){return TilemapComponents.Shuffle(tileX,tileY,width,height,this.layer),this},swapByIndex:function(indexA,indexB,tileX,tileY,width,height){return TilemapComponents.SwapByIndex(indexA,indexB,tileX,tileY,width,height,this.layer),this},tileToWorldX:function(tileX,camera){return TilemapComponents.TileToWorldX(tileX,camera,this.layer)},tileToWorldY:function(tileY,camera){return TilemapComponents.TileToWorldY(tileY,camera,this.layer)},tileToWorldXY:function(tileX,tileY,point,camera){return TilemapComponents.TileToWorldXY(tileX,tileY,point,camera,this.layer)},weightedRandomize:function(tileX,tileY,width,height,weightedIndexes){return TilemapComponents.WeightedRandomize(tileX,tileY,width,height,weightedIndexes,this.layer),this},worldToTileX:function(worldX,snapToFloor,camera){return TilemapComponents.WorldToTileX(worldX,snapToFloor,camera,this.layer)},worldToTileY:function(worldY,snapToFloor,camera){return TilemapComponents.WorldToTileY(worldY,snapToFloor,camera,this.layer)},worldToTileXY:function(worldX,worldY,snapToFloor,point,camera){return TilemapComponents.WorldToTileXY(worldX,worldY,snapToFloor,point,camera,this.layer)}});module.exports=DynamicTilemapLayer},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Components=__webpack_require__(12),GameEvents=__webpack_require__(23),GameObject=__webpack_require__(13),StaticTilemapLayerRender=__webpack_require__(1391),TilemapComponents=__webpack_require__(150),TransformMatrix=__webpack_require__(36),Utils=__webpack_require__(10),StaticTilemapLayer=new Class({Extends:GameObject,Mixins:[Components.Alpha,Components.BlendMode,Components.ComputedSize,Components.Depth,Components.Flip,Components.GetBounds,Components.Origin,Components.Pipeline,Components.Transform,Components.Visible,Components.ScrollFactor,StaticTilemapLayerRender],initialize:function(scene,tilemap,layerIndex,tileset,x,y){GameObject.call(this,scene,"StaticTilemapLayer"),this.isTilemap=!0,this.tilemap=tilemap,this.layerIndex=layerIndex,this.layer=tilemap.layers[layerIndex],this.layer.tilemapLayer=this,this.tileset=[],this.culledTiles=[],this.skipCull=!1,this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=TilemapComponents.CullTiles,this.renderer=scene.sys.game.renderer,this.vertexBuffer=[],this.bufferData=[],this.vertexViewF32=[],this.vertexViewU32=[],this.dirty=[],this.vertexCount=[],this._renderOrder=0,this._tempMatrix=new TransformMatrix,this.gidMap=[],this.setTilesets(tileset),this.setAlpha(this.layer.alpha),this.setPosition(x,y),this.setOrigin(),this.setSize(tilemap.tileWidth*this.layer.width,tilemap.tileHeight*this.layer.height),this.updateVBOData(),this.initPipeline("TextureTintPipeline"),scene.sys.game.events.on(GameEvents.CONTEXT_RESTORED,(function(){this.updateVBOData()}),this)},setTilesets:function(tilesets){var gidMap=[],setList=[],map=this.tilemap;Array.isArray(tilesets)||(tilesets=[tilesets]);for(var i=0;i<tilesets.length;i++){var tileset=tilesets[i];if("string"==typeof tileset&&(tileset=map.getTileset(tileset)),tileset){setList.push(tileset);for(var s=tileset.firstgid,t=0;t<tileset.total;t++)gidMap[s+t]=tileset}}this.gidMap=gidMap,this.tileset=setList},updateVBOData:function(){for(var i=0;i<this.tileset.length;i++)this.dirty[i]=!0,this.vertexCount[i]=0,this.vertexBuffer[i]=null,this.bufferData[i]=null,this.vertexViewF32[i]=null,this.vertexViewU32[i]=null;return this},upload:function(camera,tilesetIndex){var renderer=this.renderer,gl=renderer.gl,pipeline=renderer.pipelines.TextureTintPipeline;if(this.dirty[tilesetIndex]){var tile,row,col,tileset=this.tileset[tilesetIndex],mapWidth=this.layer.width,mapHeight=this.layer.height,width=tileset.image.source[0].width,height=tileset.image.source[0].height,mapData=this.layer.data,renderOrder=this._renderOrder,minTileIndex=tileset.firstgid,maxTileIndex=tileset.firstgid+tileset.total,vertexBuffer=this.vertexBuffer[tilesetIndex],bufferData=this.bufferData[tilesetIndex],vOffset=-1,bufferSize=mapWidth*mapHeight*pipeline.vertexSize*6;if(this.vertexCount[tilesetIndex]=0,null===bufferData&&(bufferData=new ArrayBuffer(bufferSize),this.bufferData[tilesetIndex]=bufferData,this.vertexViewF32[tilesetIndex]=new Float32Array(bufferData),this.vertexViewU32[tilesetIndex]=new Uint32Array(bufferData)),0===renderOrder)for(row=0;row<mapHeight;row++)for(col=0;col<mapWidth;col++)!(tile=mapData[row][col])||tile.index<minTileIndex||tile.index>maxTileIndex||!tile.visible||(vOffset=this.batchTile(vOffset,tile,tileset,width,height,camera,tilesetIndex));else if(1===renderOrder)for(row=0;row<mapHeight;row++)for(col=mapWidth-1;col>=0;col--)!(tile=mapData[row][col])||tile.index<minTileIndex||tile.index>maxTileIndex||!tile.visible||(vOffset=this.batchTile(vOffset,tile,tileset,width,height,camera,tilesetIndex));else if(2===renderOrder)for(row=mapHeight-1;row>=0;row--)for(col=0;col<mapWidth;col++)!(tile=mapData[row][col])||tile.index<minTileIndex||tile.index>maxTileIndex||!tile.visible||(vOffset=this.batchTile(vOffset,tile,tileset,width,height,camera,tilesetIndex));else if(3===renderOrder)for(row=mapHeight-1;row>=0;row--)for(col=mapWidth-1;col>=0;col--)!(tile=mapData[row][col])||tile.index<minTileIndex||tile.index>maxTileIndex||!tile.visible||(vOffset=this.batchTile(vOffset,tile,tileset,width,height,camera,tilesetIndex));this.dirty[tilesetIndex]=!1,null===vertexBuffer?(vertexBuffer=renderer.createVertexBuffer(bufferData,gl.STATIC_DRAW),this.vertexBuffer[tilesetIndex]=vertexBuffer):(renderer.setVertexBuffer(vertexBuffer),gl.bufferSubData(gl.ARRAY_BUFFER,0,bufferData))}return this},batchTile:function(vOffset,tile,tileset,width,height,camera,tilesetIndex){var texCoords=tileset.getTileTextureCoordinates(tile.index);if(!texCoords)return vOffset;var tileWidth=tileset.tileWidth,tileHeight=tileset.tileHeight,halfTileWidth=tileWidth/2,halfTileHeight=tileHeight/2,u0=texCoords.x/width,v0=texCoords.y/height,u1=(texCoords.x+tileWidth)/width,v1=(texCoords.y+tileHeight)/height,matrix=this._tempMatrix,x=-halfTileWidth,y=-halfTileHeight;tile.flipX&&(tileWidth*=-1,x+=tileset.tileWidth),tile.flipY&&(tileHeight*=-1,y+=tileset.tileHeight);var xw=x+tileWidth,yh=y+tileHeight;matrix.applyITRS(halfTileWidth+tile.pixelX,halfTileHeight+tile.pixelY,tile.rotation,1,1);var tint=Utils.getTintAppendFloatAlpha(16777215,camera.alpha*this.alpha*tile.alpha),tx0=matrix.getX(x,y),ty0=matrix.getY(x,y),tx1=matrix.getX(x,yh),ty1=matrix.getY(x,yh),tx2=matrix.getX(xw,yh),ty2=matrix.getY(xw,yh),tx3=matrix.getX(xw,y),ty3=matrix.getY(xw,y);camera.roundPixels&&(tx0=Math.round(tx0),ty0=Math.round(ty0),tx1=Math.round(tx1),ty1=Math.round(ty1),tx2=Math.round(tx2),ty2=Math.round(ty2),tx3=Math.round(tx3),ty3=Math.round(ty3));var vertexViewF32=this.vertexViewF32[tilesetIndex],vertexViewU32=this.vertexViewU32[tilesetIndex];return vertexViewF32[++vOffset]=tx0,vertexViewF32[++vOffset]=ty0,vertexViewF32[++vOffset]=u0,vertexViewF32[++vOffset]=v0,vertexViewF32[++vOffset]=0,vertexViewU32[++vOffset]=tint,vertexViewF32[++vOffset]=tx1,vertexViewF32[++vOffset]=ty1,vertexViewF32[++vOffset]=u0,vertexViewF32[++vOffset]=v1,vertexViewF32[++vOffset]=0,vertexViewU32[++vOffset]=tint,vertexViewF32[++vOffset]=tx2,vertexViewF32[++vOffset]=ty2,vertexViewF32[++vOffset]=u1,vertexViewF32[++vOffset]=v1,vertexViewF32[++vOffset]=0,vertexViewU32[++vOffset]=tint,vertexViewF32[++vOffset]=tx0,vertexViewF32[++vOffset]=ty0,vertexViewF32[++vOffset]=u0,vertexViewF32[++vOffset]=v0,vertexViewF32[++vOffset]=0,vertexViewU32[++vOffset]=tint,vertexViewF32[++vOffset]=tx2,vertexViewF32[++vOffset]=ty2,vertexViewF32[++vOffset]=u1,vertexViewF32[++vOffset]=v1,vertexViewF32[++vOffset]=0,vertexViewU32[++vOffset]=tint,vertexViewF32[++vOffset]=tx3,vertexViewF32[++vOffset]=ty3,vertexViewF32[++vOffset]=u1,vertexViewF32[++vOffset]=v0,vertexViewF32[++vOffset]=0,vertexViewU32[++vOffset]=tint,this.vertexCount[tilesetIndex]+=6,vOffset},setRenderOrder:function(renderOrder){if("string"==typeof renderOrder&&(renderOrder=["right-down","left-down","right-up","left-up"].indexOf(renderOrder)),renderOrder>=0&&renderOrder<4){this._renderOrder=renderOrder;for(var i=0;i<this.tileset.length;i++)this.dirty[i]=!0}return this},calculateFacesAt:function(tileX,tileY){return TilemapComponents.CalculateFacesAt(tileX,tileY,this.layer),this},calculateFacesWithin:function(tileX,tileY,width,height){return TilemapComponents.CalculateFacesWithin(tileX,tileY,width,height,this.layer),this},createFromTiles:function(indexes,replacements,spriteConfig,scene,camera){return TilemapComponents.CreateFromTiles(indexes,replacements,spriteConfig,scene,camera,this.layer)},cull:function(camera){return this.cullCallback(this.layer,camera,this.culledTiles)},setSkipCull:function(value){return void 0===value&&(value=!0),this.skipCull=value,this},setCullPadding:function(paddingX,paddingY){return void 0===paddingX&&(paddingX=1),void 0===paddingY&&(paddingY=1),this.cullPaddingX=paddingX,this.cullPaddingY=paddingY,this},findByIndex:function(findIndex,skip,reverse){return TilemapComponents.FindByIndex(findIndex,skip,reverse,this.layer)},findTile:function(callback,context,tileX,tileY,width,height,filteringOptions){return TilemapComponents.FindTile(callback,context,tileX,tileY,width,height,filteringOptions,this.layer)},filterTiles:function(callback,context,tileX,tileY,width,height,filteringOptions){return TilemapComponents.FilterTiles(callback,context,tileX,tileY,width,height,filteringOptions,this.layer)},forEachTile:function(callback,context,tileX,tileY,width,height,filteringOptions){return TilemapComponents.ForEachTile(callback,context,tileX,tileY,width,height,filteringOptions,this.layer),this},getTileAt:function(tileX,tileY,nonNull){return TilemapComponents.GetTileAt(tileX,tileY,nonNull,this.layer)},getTileAtWorldXY:function(worldX,worldY,nonNull,camera){return TilemapComponents.GetTileAtWorldXY(worldX,worldY,nonNull,camera,this.layer)},getTilesWithin:function(tileX,tileY,width,height,filteringOptions){return TilemapComponents.GetTilesWithin(tileX,tileY,width,height,filteringOptions,this.layer)},getTilesWithinWorldXY:function(worldX,worldY,width,height,filteringOptions,camera){return TilemapComponents.GetTilesWithinWorldXY(worldX,worldY,width,height,filteringOptions,camera,this.layer)},getTilesWithinShape:function(shape,filteringOptions,camera){return TilemapComponents.GetTilesWithinShape(shape,filteringOptions,camera,this.layer)},hasTileAt:function(tileX,tileY){return TilemapComponents.HasTileAt(tileX,tileY,this.layer)},hasTileAtWorldXY:function(worldX,worldY,camera){return TilemapComponents.HasTileAtWorldXY(worldX,worldY,camera,this.layer)},renderDebug:function(graphics,styleConfig){return TilemapComponents.RenderDebug(graphics,styleConfig,this.layer),this},setCollision:function(indexes,collides,recalculateFaces){return TilemapComponents.SetCollision(indexes,collides,recalculateFaces,this.layer),this},setCollisionBetween:function(start,stop,collides,recalculateFaces){return TilemapComponents.SetCollisionBetween(start,stop,collides,recalculateFaces,this.layer),this},setCollisionByProperty:function(properties,collides,recalculateFaces){return TilemapComponents.SetCollisionByProperty(properties,collides,recalculateFaces,this.layer),this},setCollisionByExclusion:function(indexes,collides,recalculateFaces){return TilemapComponents.SetCollisionByExclusion(indexes,collides,recalculateFaces,this.layer),this},setTileIndexCallback:function(indexes,callback,callbackContext){return TilemapComponents.SetTileIndexCallback(indexes,callback,callbackContext,this.layer),this},setCollisionFromCollisionGroup:function(collides,recalculateFaces){return TilemapComponents.SetCollisionFromCollisionGroup(collides,recalculateFaces,this.layer),this},setTileLocationCallback:function(tileX,tileY,width,height,callback,callbackContext){return TilemapComponents.SetTileLocationCallback(tileX,tileY,width,height,callback,callbackContext,this.layer),this},tileToWorldX:function(tileX,camera){return TilemapComponents.TileToWorldX(tileX,camera,this.layer)},tileToWorldY:function(tileY,camera){return TilemapComponents.TileToWorldY(tileY,camera,this.layer)},tileToWorldXY:function(tileX,tileY,point,camera){return TilemapComponents.TileToWorldXY(tileX,tileY,point,camera,this.layer)},worldToTileX:function(worldX,snapToFloor,camera){return TilemapComponents.WorldToTileX(worldX,snapToFloor,camera,this.layer)},worldToTileY:function(worldY,snapToFloor,camera){return TilemapComponents.WorldToTileY(worldY,snapToFloor,camera,this.layer)},worldToTileXY:function(worldX,worldY,snapToFloor,point,camera){return TilemapComponents.WorldToTileXY(worldX,worldY,snapToFloor,point,camera,this.layer)},destroy:function(removeFromTilemap){if(void 0===removeFromTilemap&&(removeFromTilemap=!0),this.tilemap){this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),removeFromTilemap&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null;for(var i=0;i<this.tileset.length;i++)this.dirty[i]=!0,this.vertexCount[i]=0,this.vertexBuffer[i]=null,this.bufferData[i]=null,this.vertexViewF32[i]=null,this.vertexViewU32[i]=null;this.gidMap=[],this.tileset=[],GameObject.prototype.destroy.call(this)}}});module.exports=StaticTilemapLayer},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),GetFastValue=__webpack_require__(1),TimerEvent=new Class({initialize:function(config){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(config)},reset:function(config){return this.delay=GetFastValue(config,"delay",0),this.repeat=GetFastValue(config,"repeat",0),this.loop=GetFastValue(config,"loop",!1),this.callback=GetFastValue(config,"callback",void 0),this.callbackScope=GetFastValue(config,"callbackScope",this.callback),this.args=GetFastValue(config,"args",[]),this.timeScale=GetFastValue(config,"timeScale",1),this.startAt=GetFastValue(config,"startAt",0),this.paused=GetFastValue(config,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=-1===this.repeat||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var totalDuration=this.delay+this.delay*this.repeat;return(this.elapsed+this.delay*(this.repeat-this.repeatCount))/totalDuration}return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return.001*this.elapsed},remove:function(dispatchCallback){void 0===dispatchCallback&&(dispatchCallback=!1),this.elapsed=this.delay,this.hasDispatched=!dispatchCallback,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});module.exports=TimerEvent},function(module,exports,__webpack_require__){var RESERVED=__webpack_require__(1400);module.exports=function(config){var key,keys=[];if(config.hasOwnProperty("props"))for(key in config.props)"_"!==key.substr(0,1)&&keys.push({key:key,value:config.props[key]});else for(key in config)-1===RESERVED.indexOf(key)&&"_"!==key.substr(0,1)&&keys.push({key:key,value:config[key]});return keys}},function(module,exports,__webpack_require__){var GetValue=__webpack_require__(5);module.exports=function(config){var tweens=GetValue(config,"tweens",null);return null===tweens?[]:("function"==typeof tweens&&(tweens=tweens.call()),Array.isArray(tweens)||(tweens=[tweens]),tweens)}},function(module,exports,__webpack_require__){var Defaults=__webpack_require__(251),GetAdvancedValue=__webpack_require__(14),GetBoolean=__webpack_require__(101),GetEaseFunction=__webpack_require__(92),GetNewValue=__webpack_require__(155),GetValue=__webpack_require__(5),GetValueOp=__webpack_require__(250),Tween=__webpack_require__(252),TweenData=__webpack_require__(254);module.exports=function(parent,config,defaults){void 0===defaults&&(defaults=Defaults);var from=GetValue(config,"from",0),to=GetValue(config,"to",1),targets=[{value:from}],delay=GetNewValue(config,"delay",defaults.delay),duration=GetNewValue(config,"duration",defaults.duration),easeParams=GetValue(config,"easeParams",defaults.easeParams),ease=GetEaseFunction(GetValue(config,"ease",defaults.ease),easeParams),hold=GetNewValue(config,"hold",defaults.hold),repeat=GetNewValue(config,"repeat",defaults.repeat),repeatDelay=GetNewValue(config,"repeatDelay",defaults.repeatDelay),yoyo=GetBoolean(config,"yoyo",defaults.yoyo),data=[],ops=GetValueOp("value",to),tweenData=TweenData(targets[0],0,"value",ops.getEnd,ops.getStart,ops.getActive,ease,delay,duration,yoyo,hold,repeat,repeatDelay,!1,!1);tweenData.start=from,tweenData.current=from,tweenData.to=to,data.push(tweenData);var tween=new Tween(parent,data,targets);tween.offset=GetAdvancedValue(config,"offset",null),tween.completeDelay=GetAdvancedValue(config,"completeDelay",0),tween.loop=Math.round(GetAdvancedValue(config,"loop",0)),tween.loopDelay=Math.round(GetAdvancedValue(config,"loopDelay",0)),tween.paused=GetBoolean(config,"paused",!1),tween.useFrames=GetBoolean(config,"useFrames",!1);for(var scope=GetValue(config,"callbackScope",tween),tweenArray=[tween,null],callbacks=Tween.TYPES,i=0;i<callbacks.length;i++){var type=callbacks[i],callback=GetValue(config,type,!1);if(callback){var callbackScope=GetValue(config,type+"Scope",scope),callbackParams=GetValue(config,type+"Params",[]);tween.setCallback(type,callback,tweenArray.concat(callbackParams),callbackScope)}}return tween}},function(module,exports,__webpack_require__){var Clone=__webpack_require__(71),Defaults=__webpack_require__(251),GetAdvancedValue=__webpack_require__(14),GetBoolean=__webpack_require__(101),GetEaseFunction=__webpack_require__(92),GetNewValue=__webpack_require__(155),GetTargets=__webpack_require__(249),GetTweens=__webpack_require__(525),GetValue=__webpack_require__(5),Timeline=__webpack_require__(528),TweenBuilder=__webpack_require__(156);module.exports=function(manager,config){var timeline=new Timeline(manager),tweens=GetTweens(config);if(0===tweens.length)return timeline.paused=!0,timeline;var defaults=Clone(Defaults);defaults.targets=GetTargets(config);var totalDuration=GetAdvancedValue(config,"totalDuration",0);defaults.duration=totalDuration>0?Math.floor(totalDuration/tweens.length):GetNewValue(config,"duration",defaults.duration),defaults.delay=GetNewValue(config,"delay",defaults.delay),defaults.easeParams=GetValue(config,"easeParams",defaults.easeParams),defaults.ease=GetEaseFunction(GetValue(config,"ease",defaults.ease),defaults.easeParams),defaults.hold=GetNewValue(config,"hold",defaults.hold),defaults.repeat=GetNewValue(config,"repeat",defaults.repeat),defaults.repeatDelay=GetNewValue(config,"repeatDelay",defaults.repeatDelay),defaults.yoyo=GetBoolean(config,"yoyo",defaults.yoyo),defaults.flipX=GetBoolean(config,"flipX",defaults.flipX),defaults.flipY=GetBoolean(config,"flipY",defaults.flipY);for(var i=0;i<tweens.length;i++)timeline.queue(TweenBuilder(timeline,tweens[i],defaults));timeline.completeDelay=GetAdvancedValue(config,"completeDelay",0),timeline.loop=Math.round(GetAdvancedValue(config,"loop",0)),timeline.loopDelay=Math.round(GetAdvancedValue(config,"loopDelay",0)),timeline.paused=GetBoolean(config,"paused",!1),timeline.useFrames=GetBoolean(config,"useFrames",!1);var scope=GetValue(config,"callbackScope",timeline),timelineArray=[timeline],onStart=GetValue(config,"onStart",!1);if(onStart){var onStartScope=GetValue(config,"onStartScope",scope),onStartParams=GetValue(config,"onStartParams",[]);timeline.setCallback("onStart",onStart,timelineArray.concat(onStartParams),onStartScope)}var onUpdate=GetValue(config,"onUpdate",!1);if(onUpdate){var onUpdateScope=GetValue(config,"onUpdateScope",scope),onUpdateParams=GetValue(config,"onUpdateParams",[]);timeline.setCallback("onUpdate",onUpdate,timelineArray.concat(onUpdateParams),onUpdateScope)}var onLoop=GetValue(config,"onLoop",!1);if(onLoop){var onLoopScope=GetValue(config,"onLoopScope",scope),onLoopParams=GetValue(config,"onLoopParams",[]);timeline.setCallback("onLoop",onLoop,timelineArray.concat(onLoopParams),onLoopScope)}var onYoyo=GetValue(config,"onYoyo",!1);if(onYoyo){var onYoyoScope=GetValue(config,"onYoyoScope",scope),onYoyoParams=GetValue(config,"onYoyoParams",[]);timeline.setCallback("onYoyo",onYoyo,timelineArray.concat(null,onYoyoParams),onYoyoScope)}var onComplete=GetValue(config,"onComplete",!1);if(onComplete){var onCompleteScope=GetValue(config,"onCompleteScope",scope),onCompleteParams=GetValue(config,"onCompleteParams",[]);timeline.setCallback("onComplete",onComplete,timelineArray.concat(onCompleteParams),onCompleteScope)}return timeline}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),EventEmitter=__webpack_require__(9),Events=__webpack_require__(253),TweenBuilder=__webpack_require__(156),TWEEN_CONST=__webpack_require__(102),Timeline=new Class({Extends:EventEmitter,initialize:function(manager){EventEmitter.call(this),this.manager=manager,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=TWEEN_CONST.PENDING_ADD,this._pausedState=TWEEN_CONST.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function(event,callback){this.emit(event,this,this.targets),callback&&(callback.params[1]=this.targets,callback.func.apply(callback.scope,callback.params))},setTimeScale:function(value){return this.timeScale=value,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===TWEEN_CONST.ACTIVE},add:function(config){return this.queue(TweenBuilder(this,config))},queue:function(tween){return this.isPlaying()||(tween.parent=this,tween.parentIsTimeline=!0,this.data.push(tween),this.totalData=this.data.length),this},hasOffset:function(tween){return null!==tween.offset},isOffsetAbsolute:function(value){return"number"==typeof value},isOffsetRelative:function(value){if("string"===typeof value){var op=value[0];if("-"===op||"+"===op)return!0}return!1},getRelativeOffset:function(value,base){var op=value[0],num=parseFloat(value.substr(2)),result=base;switch(op){case"+":result+=num;break;case"-":result-=num}return Math.max(0,result)},calcDuration:function(){for(var prevEnd=0,totalDuration=0,offsetDuration=0,i=0;i<this.totalData;i++){var tween=this.data[i];tween.init(),this.hasOffset(tween)?this.isOffsetAbsolute(tween.offset)?(tween.calculatedOffset=tween.offset,0===tween.offset&&(offsetDuration=0)):this.isOffsetRelative(tween.offset)&&(tween.calculatedOffset=this.getRelativeOffset(tween.offset,prevEnd)):tween.calculatedOffset=offsetDuration,prevEnd=tween.totalDuration+tween.calculatedOffset,totalDuration+=tween.totalDuration,offsetDuration+=tween.totalDuration}this.duration=totalDuration,this.loopCounter=-1===this.loop?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,!this.paused||(this.state=TWEEN_CONST.PAUSED,!1)},resetTweens:function(resetFromLoop){for(var i=0;i<this.totalData;i++){this.data[i].play(resetFromLoop)}},setCallback:function(type,callback,params,scope){return-1!==Timeline.TYPES.indexOf(type)&&(this.callbacks[type]={func:callback,scope:scope,params:params}),this},makeActive:function(tween){return this.manager.makeActive(tween)},play:function(){if(this.state!==TWEEN_CONST.ACTIVE){if(this.paused)return this.paused=!1,void this.manager.makeActive(this);this.resetTweens(!1),this.state=TWEEN_CONST.ACTIVE,this.dispatchTimelineEvent(Events.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=TWEEN_CONST.LOOP_DELAY):(this.state=TWEEN_CONST.ACTIVE,this.dispatchTimelineEvent(Events.TIMELINE_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=TWEEN_CONST.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=TWEEN_CONST.PENDING_REMOVE,this.dispatchTimelineEvent(Events.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(timestamp,delta){if(this.state!==TWEEN_CONST.PAUSED){switch(this.useFrames&&(delta=1*this.manager.timeScale),delta*=this.timeScale,this.elapsed+=delta,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=delta,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case TWEEN_CONST.ACTIVE:for(var stillRunning=this.totalData,i=0;i<this.totalData;i++){this.data[i].update(timestamp,delta)&&stillRunning--}this.dispatchTimelineEvent(Events.TIMELINE_UPDATE,this.callbacks.onUpdate),0===stillRunning&&this.nextState();break;case TWEEN_CONST.LOOP_DELAY:this.countdown-=delta,this.countdown<=0&&(this.state=TWEEN_CONST.ACTIVE,this.dispatchTimelineEvent(Events.TIMELINE_LOOP,this.callbacks.onLoop));break;case TWEEN_CONST.COMPLETE_DELAY:this.countdown-=delta,this.countdown<=0&&(this.state=TWEEN_CONST.PENDING_REMOVE,this.dispatchTimelineEvent(Events.TIMELINE_COMPLETE,this.callbacks.onComplete))}return this.state===TWEEN_CONST.PENDING_REMOVE}},stop:function(){this.state=TWEEN_CONST.PENDING_REMOVE},pause:function(){if(this.state!==TWEEN_CONST.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=TWEEN_CONST.PAUSED,this.emit(Events.TIMELINE_PAUSE,this),this},resume:function(){return this.state===TWEEN_CONST.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(Events.TIMELINE_RESUME,this)),this},hasTarget:function(target){for(var i=0;i<this.data.length;i++)if(this.data[i].hasTarget(target))return!0;return!1},destroy:function(){for(var i=0;i<this.data.length;i++)this.data[i].stop()}});Timeline.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],module.exports=Timeline},function(module,exports,__webpack_require__){var Camera=__webpack_require__(255),Class=__webpack_require__(0),tmpVec3=new(__webpack_require__(85)),OrthographicCamera=new Class({Extends:Camera,initialize:function(scene,viewportWidth,viewportHeight){void 0===viewportWidth&&(viewportWidth=0),void 0===viewportHeight&&(viewportHeight=0),Camera.call(this,scene),this.viewportWidth=viewportWidth,this.viewportHeight=viewportHeight,this._zoom=1,this.near=0,this.update()},setToOrtho:function(yDown,viewportWidth,viewportHeight){void 0===viewportWidth&&(viewportWidth=this.viewportWidth),void 0===viewportHeight&&(viewportHeight=this.viewportHeight);var zoom=this.zoom;return this.up.set(0,yDown?-1:1,0),this.direction.set(0,0,yDown?1:-1),this.position.set(zoom*viewportWidth/2,zoom*viewportHeight/2,0),this.viewportWidth=viewportWidth,this.viewportHeight=viewportHeight,this.update()},update:function(){var w=this.viewportWidth,h=this.viewportHeight,near=Math.abs(this.near),far=Math.abs(this.far),zoom=this.zoom;return 0===w||0===h?this:(this.projection.ortho(zoom*-w/2,zoom*w/2,zoom*-h/2,zoom*h/2,near,far),tmpVec3.copy(this.position).add(this.direction),this.view.lookAt(this.position,tmpVec3,this.up),this.combined.copy(this.projection).multiply(this.view),this.invProjectionView.copy(this.combined).invert(),this.billboardMatrixDirty=!0,this.updateChildren(),this)},zoom:{get:function(){return this._zoom},set:function(value){this._zoom=value,this.update()}}});module.exports=OrthographicCamera},function(module,exports,__webpack_require__){var Camera=__webpack_require__(255),Class=__webpack_require__(0),tmpVec3=new(__webpack_require__(85)),PerspectiveCamera=new Class({Extends:Camera,initialize:function(scene,fieldOfView,viewportWidth,viewportHeight){void 0===fieldOfView&&(fieldOfView=80),void 0===viewportWidth&&(viewportWidth=0),void 0===viewportHeight&&(viewportHeight=0),Camera.call(this,scene),this.viewportWidth=viewportWidth,this.viewportHeight=viewportHeight,this.fieldOfView=fieldOfView*Math.PI/180,this.update()},setFOV:function(value){return this.fieldOfView=value*Math.PI/180,this},update:function(){var aspect=this.viewportWidth/this.viewportHeight;return this.projection.perspective(this.fieldOfView,aspect,Math.abs(this.near),Math.abs(this.far)),tmpVec3.copy(this.position).add(this.direction),this.view.lookAt(this.position,tmpVec3,this.up),this.combined.copy(this.projection).multiply(this.view),this.invProjectionView.copy(this.combined).invert(),this.billboardMatrixDirty=!0,this.updateChildren(),this}});module.exports=PerspectiveCamera},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});let rng=Math.random;function random(min=0,max=1){return rng()*(max-min)+min}function greatestCommonDivisor(numA,numB){if(numA=Math.abs(numA),numB=Math.abs(numB),numA!==Math.floor(numA)||numB!==Math.floor(numB))throw new Error("Greatest common divisor can only be found for integers");for(;numB;){const t=numB;numB=numA%numB,numA=t}return numA}exports.setSeed=function(seed){!function(seed=1){seed=16807*seed%2147483647,rng=function(){return((seed=16807*seed%2147483647)-1)/2147483646}}(seed)},exports.clearSeed=function(){rng=Math.random},exports.random=random,exports.randomInt=function(min,max){return Math.floor(random(min,max))},exports.toFixedNum=function(float,digits){return Math.floor(float*Math.pow(10,digits))/Math.pow(10,digits)},exports.greatestCommonDivisor=greatestCommonDivisor,exports.lowestCommonMultiple=function(numA,numB){if(numA=Math.abs(numA),numB=Math.abs(numB),numA!==Math.floor(numA)||numB!==Math.floor(numB))throw new Error("Lowest common multiple can only be found for integers");return numA&&numB?Math.abs(numA*numB/greatestCommonDivisor(numA,numB)):0},exports.clamp=function(val,min,max){return val<min?min:val>max?max:val},exports.wrap=function(val,min,max){return val<min?max-(min-val)%(max-min):val>max?min+(val-max)%(max-min):val}},function(module,exports,__webpack_require__){var EasyStar={},Instance=__webpack_require__(1434),Node=__webpack_require__(1435),Heap=__webpack_require__(1436);module.exports=EasyStar;var nextInstanceId=1;EasyStar.js=function(){var collisionGrid,iterationsSoFar,acceptableTiles,syncEnabled=!1,pointsToAvoid={},costMap={},pointsToCost={},directionalConditions={},allowCornerCutting=!0,instances={},instanceQueue=[],iterationsPerCalculation=Number.MAX_VALUE,diagonalsEnabled=!1;this.setAcceptableTiles=function(tiles){tiles instanceof Array?acceptableTiles=tiles:!isNaN(parseFloat(tiles))&&isFinite(tiles)&&(acceptableTiles=[tiles])},this.enableSync=function(){syncEnabled=!0},this.disableSync=function(){syncEnabled=!1},this.enableDiagonals=function(){diagonalsEnabled=!0},this.disableDiagonals=function(){diagonalsEnabled=!1},this.setGrid=function(grid){collisionGrid=grid;for(var y=0;y<collisionGrid.length;y++)for(var x=0;x<collisionGrid[0].length;x++)costMap[collisionGrid[y][x]]||(costMap[collisionGrid[y][x]]=1)},this.setTileCost=function(tileType,cost){costMap[tileType]=cost},this.setAdditionalPointCost=function(x,y,cost){void 0===pointsToCost[y]&&(pointsToCost[y]={}),pointsToCost[y][x]=cost},this.removeAdditionalPointCost=function(x,y){void 0!==pointsToCost[y]&&delete pointsToCost[y][x]},this.removeAllAdditionalPointCosts=function(){pointsToCost={}},this.setDirectionalCondition=function(x,y,allowedDirections){void 0===directionalConditions[y]&&(directionalConditions[y]={}),directionalConditions[y][x]=allowedDirections},this.removeAllDirectionalConditions=function(){directionalConditions={}},this.setIterationsPerCalculation=function(iterations){iterationsPerCalculation=iterations},this.avoidAdditionalPoint=function(x,y){void 0===pointsToAvoid[y]&&(pointsToAvoid[y]={}),pointsToAvoid[y][x]=1},this.stopAvoidingAdditionalPoint=function(x,y){void 0!==pointsToAvoid[y]&&delete pointsToAvoid[y][x]},this.enableCornerCutting=function(){allowCornerCutting=!0},this.disableCornerCutting=function(){allowCornerCutting=!1},this.stopAvoidingAllAdditionalPoints=function(){pointsToAvoid={}},this.findPath=function(startX,startY,endX,endY,callback){var callbackWrapper=function(result){syncEnabled?callback(result):setTimeout((function(){callback(result)}))};if(void 0===acceptableTiles)throw new Error("You can't set a path without first calling setAcceptableTiles() on EasyStar.");if(void 0===collisionGrid)throw new Error("You can't set a path without first calling setGrid() on EasyStar.");if(startX<0||startY<0||endX<0||endY<0||startX>collisionGrid[0].length-1||startY>collisionGrid.length-1||endX>collisionGrid[0].length-1||endY>collisionGrid.length-1)throw new Error("Your start or end point is outside the scope of your grid.");if(startX!==endX||startY!==endY){for(var endTile=collisionGrid[endY][endX],isAcceptable=!1,i=0;i<acceptableTiles.length;i++)if(endTile===acceptableTiles[i]){isAcceptable=!0;break}if(!1!==isAcceptable){var instance=new Instance;instance.openList=new Heap((function(nodeA,nodeB){return nodeA.bestGuessDistance()-nodeB.bestGuessDistance()})),instance.isDoneCalculating=!1,instance.nodeHash={},instance.startX=startX,instance.startY=startY,instance.endX=endX,instance.endY=endY,instance.callback=callbackWrapper,instance.openList.push(coordinateToNode(instance,instance.startX,instance.startY,null,1));var instanceId=nextInstanceId++;return instances[instanceId]=instance,instanceQueue.push(instanceId),instanceId}callbackWrapper(null)}else callbackWrapper([])},this.cancelPath=function(instanceId){return instanceId in instances&&(delete instances[instanceId],!0)},this.calculate=function(){if(0!==instanceQueue.length&&void 0!==collisionGrid&&void 0!==acceptableTiles)for(iterationsSoFar=0;iterationsSoFar<iterationsPerCalculation;iterationsSoFar++){if(0===instanceQueue.length)return;syncEnabled&&(iterationsSoFar=0);var instanceId=instanceQueue[0],instance=instances[instanceId];if(void 0!==instance)if(0!==instance.openList.size()){var searchNode=instance.openList.pop();if(instance.endX!==searchNode.x||instance.endY!==searchNode.y)searchNode.list=0,searchNode.y>0&&checkAdjacentNode(instance,searchNode,0,-1,1*getTileCost(searchNode.x,searchNode.y-1)),searchNode.x<collisionGrid[0].length-1&&checkAdjacentNode(instance,searchNode,1,0,1*getTileCost(searchNode.x+1,searchNode.y)),searchNode.y<collisionGrid.length-1&&checkAdjacentNode(instance,searchNode,0,1,1*getTileCost(searchNode.x,searchNode.y+1)),searchNode.x>0&&checkAdjacentNode(instance,searchNode,-1,0,1*getTileCost(searchNode.x-1,searchNode.y)),diagonalsEnabled&&(searchNode.x>0&&searchNode.y>0&&(allowCornerCutting||isTileWalkable(collisionGrid,acceptableTiles,searchNode.x,searchNode.y-1,searchNode)&&isTileWalkable(collisionGrid,acceptableTiles,searchNode.x-1,searchNode.y,searchNode))&&checkAdjacentNode(instance,searchNode,-1,-1,1.4*getTileCost(searchNode.x-1,searchNode.y-1)),searchNode.x<collisionGrid[0].length-1&&searchNode.y<collisionGrid.length-1&&(allowCornerCutting||isTileWalkable(collisionGrid,acceptableTiles,searchNode.x,searchNode.y+1,searchNode)&&isTileWalkable(collisionGrid,acceptableTiles,searchNode.x+1,searchNode.y,searchNode))&&checkAdjacentNode(instance,searchNode,1,1,1.4*getTileCost(searchNode.x+1,searchNode.y+1)),searchNode.x<collisionGrid[0].length-1&&searchNode.y>0&&(allowCornerCutting||isTileWalkable(collisionGrid,acceptableTiles,searchNode.x,searchNode.y-1,searchNode)&&isTileWalkable(collisionGrid,acceptableTiles,searchNode.x+1,searchNode.y,searchNode))&&checkAdjacentNode(instance,searchNode,1,-1,1.4*getTileCost(searchNode.x+1,searchNode.y-1)),searchNode.x>0&&searchNode.y<collisionGrid.length-1&&(allowCornerCutting||isTileWalkable(collisionGrid,acceptableTiles,searchNode.x,searchNode.y+1,searchNode)&&isTileWalkable(collisionGrid,acceptableTiles,searchNode.x-1,searchNode.y,searchNode))&&checkAdjacentNode(instance,searchNode,-1,1,1.4*getTileCost(searchNode.x-1,searchNode.y+1)));else{var path=[];path.push({x:searchNode.x,y:searchNode.y});for(var parent=searchNode.parent;null!=parent;)path.push({x:parent.x,y:parent.y}),parent=parent.parent;path.reverse();var ip=path;instance.callback(ip),delete instances[instanceId],instanceQueue.shift()}}else instance.callback(null),delete instances[instanceId],instanceQueue.shift();else instanceQueue.shift()}};var checkAdjacentNode=function(instance,searchNode,x,y,cost){var adjacentCoordinateX=searchNode.x+x,adjacentCoordinateY=searchNode.y+y;if((void 0===pointsToAvoid[adjacentCoordinateY]||void 0===pointsToAvoid[adjacentCoordinateY][adjacentCoordinateX])&&isTileWalkable(collisionGrid,acceptableTiles,adjacentCoordinateX,adjacentCoordinateY,searchNode)){var node=coordinateToNode(instance,adjacentCoordinateX,adjacentCoordinateY,searchNode,cost);void 0===node.list?(node.list=1,instance.openList.push(node)):searchNode.costSoFar+cost<node.costSoFar&&(node.costSoFar=searchNode.costSoFar+cost,node.parent=searchNode,instance.openList.updateItem(node))}},isTileWalkable=function(collisionGrid,acceptableTiles,x,y,sourceNode){var directionalCondition=directionalConditions[y]&&directionalConditions[y][x];if(directionalCondition){var direction=calculateDirection(sourceNode.x-x,sourceNode.y-y);if(!function(){for(var i=0;i<directionalCondition.length;i++)if(directionalCondition[i]===direction)return!0;return!1}())return!1}for(var i=0;i<acceptableTiles.length;i++)if(collisionGrid[y][x]===acceptableTiles[i])return!0;return!1},calculateDirection=function(diffX,diffY){if(0===diffX&&-1===diffY)return EasyStar.TOP;if(1===diffX&&-1===diffY)return EasyStar.TOP_RIGHT;if(1===diffX&&0===diffY)return EasyStar.RIGHT;if(1===diffX&&1===diffY)return EasyStar.BOTTOM_RIGHT;if(0===diffX&&1===diffY)return EasyStar.BOTTOM;if(-1===diffX&&1===diffY)return EasyStar.BOTTOM_LEFT;if(-1===diffX&&0===diffY)return EasyStar.LEFT;if(-1===diffX&&-1===diffY)return EasyStar.TOP_LEFT;throw new Error("These differences are not valid: "+diffX+", "+diffY)},getTileCost=function(x,y){return pointsToCost[y]&&pointsToCost[y][x]||costMap[collisionGrid[y][x]]},coordinateToNode=function(instance,x,y,parent,cost){if(void 0!==instance.nodeHash[y]){if(void 0!==instance.nodeHash[y][x])return instance.nodeHash[y][x]}else instance.nodeHash[y]={};var simpleDistanceToTarget=getDistance(x,y,instance.endX,instance.endY);if(null!==parent)var costSoFar=parent.costSoFar+cost;else costSoFar=0;var node=new Node(parent,x,y,costSoFar,simpleDistanceToTarget);return instance.nodeHash[y][x]=node,node},getDistance=function(x1,y1,x2,y2){var dx,dy;return diagonalsEnabled?(dx=Math.abs(x1-x2))<(dy=Math.abs(y1-y2))?1.4*dx+dy:1.4*dy+dx:(dx=Math.abs(x1-x2))+(dy=Math.abs(y1-y2))}},EasyStar.TOP="TOP",EasyStar.TOP_RIGHT="TOP_RIGHT",EasyStar.RIGHT="RIGHT",EasyStar.BOTTOM_RIGHT="BOTTOM_RIGHT",EasyStar.BOTTOM="BOTTOM",EasyStar.BOTTOM_LEFT="BOTTOM_LEFT",EasyStar.LEFT="LEFT",EasyStar.TOP_LEFT="TOP_LEFT"},function(module,exports,__webpack_require__){__webpack_require__(534),__webpack_require__(535),__webpack_require__(536),__webpack_require__(537),__webpack_require__(538),__webpack_require__(539),__webpack_require__(540),__webpack_require__(541)},function(module,exports){Array.prototype.forEach||(Array.prototype.forEach=function(fun){"use strict";if(null==this)throw new TypeError;var t=Object(this),len=t.length>>>0;if("function"!=typeof fun)throw new TypeError;for(var thisArg=arguments.length>=2?arguments[1]:void 0,i=0;i<len;i++)i in t&&fun.call(thisArg,t[i],i,t)})},function(module,exports){Array.isArray||(Array.isArray=function(arg){return"[object Array]"===Object.prototype.toString.call(arg)})},function(module,exports){!function(){function fixSetTarget(param){param&&(param.setTargetAtTime||(param.setTargetAtTime=param.setTargetValueAtTime))}window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=webkitAudioContext,AudioContext.prototype.hasOwnProperty("createGain")||(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),AudioContext.prototype.hasOwnProperty("createDelay")||(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),AudioContext.prototype.hasOwnProperty("createScriptProcessor")||(AudioContext.prototype.createScriptProcessor=AudioContext.prototype.createJavaScriptNode),AudioContext.prototype.hasOwnProperty("createPeriodicWave")||(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable),AudioContext.prototype.internal_createGain=AudioContext.prototype.createGain,AudioContext.prototype.createGain=function(){var node=this.internal_createGain();return fixSetTarget(node.gain),node},AudioContext.prototype.internal_createDelay=AudioContext.prototype.createDelay,AudioContext.prototype.createDelay=function(maxDelayTime){var node=maxDelayTime?this.internal_createDelay(maxDelayTime):this.internal_createDelay();return fixSetTarget(node.delayTime),node},AudioContext.prototype.internal_createBufferSource=AudioContext.prototype.createBufferSource,AudioContext.prototype.createBufferSource=function(){var node=this.internal_createBufferSource();return node.start?(node.internal_start=node.start,node.start=function(when,offset,duration){void 0!==duration?node.internal_start(when||0,offset,duration):node.internal_start(when||0,offset||0)}):node.start=function(when,offset,duration){offset||duration?this.noteGrainOn(when||0,offset,duration):this.noteOn(when||0)},node.stop?(node.internal_stop=node.stop,node.stop=function(when){node.internal_stop(when||0)}):node.stop=function(when){this.noteOff(when||0)},fixSetTarget(node.playbackRate),node},AudioContext.prototype.internal_createDynamicsCompressor=AudioContext.prototype.createDynamicsCompressor,AudioContext.prototype.createDynamicsCompressor=function(){var node=this.internal_createDynamicsCompressor();return fixSetTarget(node.threshold),fixSetTarget(node.knee),fixSetTarget(node.ratio),fixSetTarget(node.reduction),fixSetTarget(node.attack),fixSetTarget(node.release),node},AudioContext.prototype.internal_createBiquadFilter=AudioContext.prototype.createBiquadFilter,AudioContext.prototype.createBiquadFilter=function(){var node=this.internal_createBiquadFilter();return fixSetTarget(node.frequency),fixSetTarget(node.detune),fixSetTarget(node.Q),fixSetTarget(node.gain),node},AudioContext.prototype.hasOwnProperty("createOscillator")&&(AudioContext.prototype.internal_createOscillator=AudioContext.prototype.createOscillator,AudioContext.prototype.createOscillator=function(){var node=this.internal_createOscillator();return node.start?(node.internal_start=node.start,node.start=function(when){node.internal_start(when||0)}):node.start=function(when){this.noteOn(when||0)},node.stop?(node.internal_stop=node.stop,node.stop=function(when){node.internal_stop(when||0)}):node.stop=function(when){this.noteOff(when||0)},node.setPeriodicWave||(node.setPeriodicWave=node.setWaveTable),fixSetTarget(node.frequency),fixSetTarget(node.detune),node})),window.hasOwnProperty("webkitOfflineAudioContext")&&!window.hasOwnProperty("OfflineAudioContext")&&(window.OfflineAudioContext=webkitOfflineAudioContext)}()},function(module,exports){window.console||(window.console={},window.console.log=window.console.assert=function(){},window.console.warn=window.console.assert=function(){})},function(module,exports){Math.trunc||(Math.trunc=function(x){return x<0?Math.ceil(x):Math.floor(x)})},function(module,exports){!function(){if("performance"in window==!1&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in window.performance==!1){var nowOffset=Date.now();performance.timing&&performance.timing.navigationStart&&(nowOffset=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-nowOffset}}}()},function(module,exports,__webpack_require__){(function(global){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!global.performance||!global.performance.now){var startTime=Date.now();global.performance||(global.performance={}),global.performance.now=function(){return Date.now()-startTime}}for(var lastTime=Date.now(),vendors=["ms","moz","webkit","o"],x=0;x<vendors.length&&!global.requestAnimationFrame;++x)global.requestAnimationFrame=global[vendors[x]+"RequestAnimationFrame"],global.cancelAnimationFrame=global[vendors[x]+"CancelAnimationFrame"]||global[vendors[x]+"CancelRequestAnimationFrame"];global.requestAnimationFrame||(global.requestAnimationFrame=function(callback){if("function"!=typeof callback)throw new TypeError(callback+"is not a function");var currentTime=Date.now(),delay=16+lastTime-currentTime;return delay<0&&(delay=0),lastTime=currentTime,setTimeout((function(){lastTime=Date.now(),callback(performance.now())}),delay)}),global.cancelAnimationFrame||(global.cancelAnimationFrame=function(id){clearTimeout(id)})}).call(this,__webpack_require__(158))},function(module,exports){if("function"!=typeof window.Uint32Array&&"object"!=typeof window.Uint32Array){var CheapArray=function(fakeType){var proto=new Array;window[fakeType]=function(arg){if("number"==typeof arg){Array.call(this,arg),this.length=arg;for(var i=0;i<this.length;i++)this[i]=0}else{Array.call(this,arg.length),this.length=arg.length;for(i=0;i<this.length;i++)this[i]=arg[i]}},window[fakeType].prototype=proto,window[fakeType].constructor=window[fakeType]};CheapArray("Float32Array"),CheapArray("Uint32Array"),CheapArray("Uint16Array"),CheapArray("Int16Array"),CheapArray("ArrayBuffer")}},function(module,exports,__webpack_require__){var PropertyValueInc=__webpack_require__(40);module.exports=function(items,value,step,index,direction){return PropertyValueInc(items,"angle",value,step,index,direction)}},function(module,exports){module.exports=function(items,callback,context){for(var i=0;i<items.length;i++){var item=items[i];callback.call(context,item)}return items}},function(module,exports){module.exports=function(items,compare,index){void 0===index&&(index=0);for(var i=index;i<items.length;i++){var item=items[i],match=!0;for(var property in compare)item[property]!==compare[property]&&(match=!1);if(match)return item}return null}},function(module,exports){module.exports=function(items,compare,index){void 0===index&&(index=0);for(var i=index;i<items.length;i++){var item=items[i],match=!0;for(var property in compare)item[property]!==compare[property]&&(match=!1);if(match)return item}return null}},function(module,exports,__webpack_require__){var AlignIn=__webpack_require__(257),CONST=__webpack_require__(159),GetFastValue=__webpack_require__(1),NOOP=__webpack_require__(2),tempZone=new(__webpack_require__(118))({sys:{queueDepthSort:NOOP,events:{once:NOOP}}},0,0,1,1);module.exports=function(items,options){void 0===options&&(options={});var width=GetFastValue(options,"width",-1),height=GetFastValue(options,"height",-1),cellWidth=GetFastValue(options,"cellWidth",1),cellHeight=GetFastValue(options,"cellHeight",cellWidth),position=GetFastValue(options,"position",CONST.TOP_LEFT),x=GetFastValue(options,"x",0),y=GetFastValue(options,"y",0),cx=0,cy=0,w=width*cellWidth,h=height*cellHeight;tempZone.setPosition(x,y),tempZone.setSize(cellWidth,cellHeight);for(var i=0;i<items.length;i++)if(AlignIn(items[i],tempZone,position),-1===width)cy+=cellHeight,tempZone.y+=cellHeight,cy===h&&(cy=0,tempZone.x+=cellWidth,tempZone.y=y);else if(-1===height)cx+=cellWidth,tempZone.x+=cellWidth,cx===w&&(cx=0,tempZone.x=x,tempZone.y+=cellHeight);else if(cx+=cellWidth,tempZone.x+=cellWidth,cx===w&&(cx=0,cy+=cellHeight,tempZone.x=x,tempZone.y+=cellHeight,cy===h))break;return items}},function(module,exports){module.exports="add"},function(module,exports){module.exports="complete"},function(module,exports){module.exports="repeat"},function(module,exports){module.exports="restart"},function(module,exports){module.exports="start"},function(module,exports){module.exports="pauseall"},function(module,exports){module.exports="remove"},function(module,exports){module.exports="resumeall"},function(module,exports){module.exports="animationcomplete"},function(module,exports){module.exports="animationcomplete-"},function(module,exports){module.exports="animationrepeat-"},function(module,exports){module.exports="animationrestart-"},function(module,exports){module.exports="animationstart-"},function(module,exports){module.exports="animationupdate-"},function(module,exports){module.exports="animationrepeat"},function(module,exports){module.exports="animationrestart"},function(module,exports){module.exports="animationstart"},function(module,exports){module.exports="animationupdate"},function(module,exports){module.exports={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(value){this.scaleX=value/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(value){this.scaleY=value/this.height}},setSize:function(width,height){return this.width=width,this.height=height,this},setDisplaySize:function(width,height){return this.displayWidth=width,this.displayHeight=height,this}}},function(module,exports){var Crop={texture:null,frame:null,isCropped:!1,setCrop:function(x,y,width,height){if(void 0===x)this.isCropped=!1;else if(this.frame){if("number"==typeof x)this.frame.setCropUVs(this._crop,x,y,width,height,this.flipX,this.flipY);else{var rect=x;this.frame.setCropUVs(this._crop,rect.x,rect.y,rect.width,rect.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};module.exports=Crop},function(module,exports){module.exports={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(value){return this.flipX=value,this},setFlipY:function(value){return this.flipY=value,this},setFlip:function(x,y){return this.flipX=x,this.flipY=y,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}}},function(module,exports,__webpack_require__){var Rectangle=__webpack_require__(11),RotateAround=__webpack_require__(279),Vector2=__webpack_require__(3),GetBounds={prepareBoundsOutput:function(output,includeParent){(void 0===includeParent&&(includeParent=!1),0!==this.rotation&&RotateAround(output,this.x,this.y,this.rotation),includeParent&&this.parentContainer)&&this.parentContainer.getBoundsTransformMatrix().transformPoint(output.x,output.y,output);return output},getCenter:function(output){return void 0===output&&(output=new Vector2),output.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,output.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,output},getTopLeft:function(output,includeParent){return output||(output=new Vector2),output.x=this.x-this.displayWidth*this.originX,output.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(output,includeParent)},getTopCenter:function(output,includeParent){return output||(output=new Vector2),output.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,output.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(output,includeParent)},getTopRight:function(output,includeParent){return output||(output=new Vector2),output.x=this.x-this.displayWidth*this.originX+this.displayWidth,output.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(output,includeParent)},getLeftCenter:function(output,includeParent){return output||(output=new Vector2),output.x=this.x-this.displayWidth*this.originX,output.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(output,includeParent)},getRightCenter:function(output,includeParent){return output||(output=new Vector2),output.x=this.x-this.displayWidth*this.originX+this.displayWidth,output.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(output,includeParent)},getBottomLeft:function(output,includeParent){return output||(output=new Vector2),output.x=this.x-this.displayWidth*this.originX,output.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(output,includeParent)},getBottomCenter:function(output,includeParent){return output||(output=new Vector2),output.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,output.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(output,includeParent)},getBottomRight:function(output,includeParent){return output||(output=new Vector2),output.x=this.x-this.displayWidth*this.originX+this.displayWidth,output.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(output,includeParent)},getBounds:function(output){var TLx,TLy,TRx,TRy,BLx,BLy,BRx,BRy;if(void 0===output&&(output=new Rectangle),this.parentContainer){var parentMatrix=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(output),parentMatrix.transformPoint(output.x,output.y,output),TLx=output.x,TLy=output.y,this.getTopRight(output),parentMatrix.transformPoint(output.x,output.y,output),TRx=output.x,TRy=output.y,this.getBottomLeft(output),parentMatrix.transformPoint(output.x,output.y,output),BLx=output.x,BLy=output.y,this.getBottomRight(output),parentMatrix.transformPoint(output.x,output.y,output),BRx=output.x,BRy=output.y}else this.getTopLeft(output),TLx=output.x,TLy=output.y,this.getTopRight(output),TRx=output.x,TRy=output.y,this.getBottomLeft(output),BLx=output.x,BLy=output.y,this.getBottomRight(output),BRx=output.x,BRy=output.y;return output.x=Math.min(TLx,TRx,BLx,BRx),output.y=Math.min(TLy,TRy,BLy,BRy),output.width=Math.max(TLx,TRx,BLx,BRx)-output.x,output.height=Math.max(TLy,TRy,BLy,BRy)-output.y,output}};module.exports=GetBounds},function(module,exports){module.exports="blur"},function(module,exports){module.exports="boot"},function(module,exports){module.exports="contextlost"},function(module,exports){module.exports="contextrestored"},function(module,exports){module.exports="destroy"},function(module,exports){module.exports="focus"},function(module,exports){module.exports="hidden"},function(module,exports){module.exports="pause"},function(module,exports){module.exports="postrender"},function(module,exports){module.exports="poststep"},function(module,exports){module.exports="prerender"},function(module,exports){module.exports="prestep"},function(module,exports){module.exports="ready"},function(module,exports){module.exports="resume"},function(module,exports){module.exports="step"},function(module,exports){module.exports="visible"},function(module,exports){var Origin={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(value){this._displayOriginX=value,this.originX=value/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(value){this._displayOriginY=value,this.originY=value/this.height}},setOrigin:function(x,y){return void 0===x&&(x=.5),void 0===y&&(y=x),this.originX=x,this.originY=y,this.updateDisplayOrigin()},setOriginFromFrame:function(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function(x,y){return void 0===x&&(x=0),void 0===y&&(y=x),this.displayOriginX=x,this.displayOriginY=y,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};module.exports=Origin},function(module,exports,__webpack_require__){var DegToRad=__webpack_require__(41),GetBoolean=__webpack_require__(101),GetValue=__webpack_require__(5),TWEEN_CONST=__webpack_require__(102),Vector2=__webpack_require__(3),PathFollower={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathTween:null,pathConfig:null,_prevDirection:TWEEN_CONST.PLAYING_FORWARD,setPath:function(path,config){void 0===config&&(config=this.pathConfig);var tween=this.pathTween;return tween&&tween.isPlaying()&&tween.stop(),this.path=path,config&&this.startFollow(config),this},setRotateToPath:function(value,offset){return void 0===offset&&(offset=0),this.rotateToPath=value,this.pathRotationOffset=offset,this},isFollowing:function(){var tween=this.pathTween;return tween&&tween.isPlaying()},startFollow:function(config,startAt){void 0===config&&(config={}),void 0===startAt&&(startAt=0);var tween=this.pathTween;tween&&tween.isPlaying()&&tween.stop(),"number"==typeof config&&(config={duration:config}),config.from=GetValue(config,"from",0),config.to=GetValue(config,"to",1);var positionOnPath=GetBoolean(config,"positionOnPath",!1);this.rotateToPath=GetBoolean(config,"rotateToPath",!1),this.pathRotationOffset=GetValue(config,"rotationOffset",0);var seek=GetValue(config,"startAt",startAt);if(seek&&(config.onStart=function(tween){var tweenData=tween.data[0];tweenData.progress=seek,tweenData.elapsed=tweenData.duration*seek;var v=tweenData.ease(tweenData.progress);tweenData.current=tweenData.start+(tweenData.end-tweenData.start)*v,tweenData.target[tweenData.key]=tweenData.current}),this.pathOffset||(this.pathOffset=new Vector2(this.x,this.y)),this.pathVector||(this.pathVector=new Vector2),this.pathTween=this.scene.sys.tweens.addCounter(config),this.path.getStartPoint(this.pathOffset),positionOnPath&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=TWEEN_CONST.PLAYING_FORWARD,this.rotateToPath){var nextPoint=this.path.getPoint(.1);this.rotation=Math.atan2(nextPoint.y-this.y,nextPoint.x-this.x)+DegToRad(this.pathRotationOffset)}return this.pathConfig=config,this},pauseFollow:function(){var tween=this.pathTween;return tween&&tween.isPlaying()&&tween.pause(),this},resumeFollow:function(){var tween=this.pathTween;return tween&&tween.isPaused()&&tween.resume(),this},stopFollow:function(){var tween=this.pathTween;return tween&&tween.isPlaying()&&tween.stop(),this},pathUpdate:function(){var tween=this.pathTween;if(tween){var tweenData=tween.data[0];if(tweenData.state!==TWEEN_CONST.PLAYING_FORWARD&&tweenData.state!==TWEEN_CONST.PLAYING_BACKWARD)return;var pathVector=this.pathVector;this.path.getPoint(tween.getValue(),pathVector),pathVector.add(this.pathOffset);var oldX=this.x,oldY=this.y;this.setPosition(pathVector.x,pathVector.y);var speedX=this.x-oldX,speedY=this.y-oldY;if(0===speedX&&0===speedY)return;if(tweenData.state!==this._prevDirection)return void(this._prevDirection=tweenData.state);this.rotateToPath&&(this.rotation=Math.atan2(speedY,speedX)+DegToRad(this.pathRotationOffset))}}};module.exports=PathFollower},function(module,exports){var Size={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.frame.realWidth},set:function(value){this.scaleX=value/this.frame.realWidth}},displayHeight:{get:function(){return this.scaleY*this.frame.realHeight},set:function(value){this.scaleY=value/this.frame.realHeight}},setSizeToFrame:function(frame){return void 0===frame&&(frame=this.frame),this.width=frame.realWidth,this.height=frame.realHeight,this},setSize:function(width,height){return this.width=width,this.height=height,this},setDisplaySize:function(width,height){return this.displayWidth=width,this.displayHeight=height,this}};module.exports=Size},function(module,exports){var Texture={texture:null,frame:null,isCropped:!1,setTexture:function(key,frame){return this.texture=this.scene.sys.textures.get(key),this.setFrame(frame)},setFrame:function(frame,updateSize,updateOrigin){return void 0===updateSize&&(updateSize=!0),void 0===updateOrigin&&(updateOrigin=!0),this.frame=this.texture.get(frame),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&updateSize&&this.setSizeToFrame(),this._originComponent&&updateOrigin&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};module.exports=Texture},function(module,exports){var TextureCrop={texture:null,frame:null,isCropped:!1,setCrop:function(x,y,width,height){if(void 0===x)this.isCropped=!1;else if(this.frame){if("number"==typeof x)this.frame.setCropUVs(this._crop,x,y,width,height,this.flipX,this.flipY);else{var rect=x;this.frame.setCropUVs(this._crop,rect.x,rect.y,rect.width,rect.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(key,frame){return this.texture=this.scene.sys.textures.get(key),this.setFrame(frame)},setFrame:function(frame,updateSize,updateOrigin){return void 0===updateSize&&(updateSize=!0),void 0===updateOrigin&&(updateOrigin=!0),this.frame=this.texture.get(frame),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&updateSize&&this.setSizeToFrame(),this._originComponent&&updateOrigin&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};module.exports=TextureCrop},function(module,exports){var GetColor=function(value){return(value>>16)+(65280&value)+((255&value)<<16)},Tint={_tintTL:16777215,_tintTR:16777215,_tintBL:16777215,_tintBR:16777215,_isTinted:!1,tintFill:!1,clearTint:function(){return this.setTint(16777215),this._isTinted=!1,this},setTint:function(topLeft,topRight,bottomLeft,bottomRight){return void 0===topLeft&&(topLeft=16777215),void 0===topRight&&(topRight=topLeft,bottomLeft=topLeft,bottomRight=topLeft),this._tintTL=GetColor(topLeft),this._tintTR=GetColor(topRight),this._tintBL=GetColor(bottomLeft),this._tintBR=GetColor(bottomRight),this._isTinted=!0,this.tintFill=!1,this},setTintFill:function(topLeft,topRight,bottomLeft,bottomRight){return this.setTint(topLeft,topRight,bottomLeft,bottomRight),this.tintFill=!0,this},tintTopLeft:{get:function(){return this._tintTL},set:function(value){this._tintTL=GetColor(value),this._isTinted=!0}},tintTopRight:{get:function(){return this._tintTR},set:function(value){this._tintTR=GetColor(value),this._isTinted=!0}},tintBottomLeft:{get:function(){return this._tintBL},set:function(value){this._tintBL=GetColor(value),this._isTinted=!0}},tintBottomRight:{get:function(){return this._tintBR},set:function(value){this._tintBR=GetColor(value),this._isTinted=!0}},tint:{set:function(value){this.setTint(value,value,value,value)}},isTinted:{get:function(){return this._isTinted}}};module.exports=Tint},function(module,exports){module.exports="changedata"},function(module,exports){module.exports="changedata-"},function(module,exports){module.exports="removedata"},function(module,exports){module.exports="setdata"},function(module,exports){module.exports="destroy"},function(module,exports,__webpack_require__){var PropertyValueInc=__webpack_require__(40);module.exports=function(items,value,step,index,direction){return PropertyValueInc(items,"alpha",value,step,index,direction)}},function(module,exports,__webpack_require__){var PropertyValueInc=__webpack_require__(40);module.exports=function(items,value,step,index,direction){return PropertyValueInc(items,"x",value,step,index,direction)}},function(module,exports,__webpack_require__){var PropertyValueInc=__webpack_require__(40);module.exports=function(items,x,y,stepX,stepY,index,direction){return null==y&&(y=x),PropertyValueInc(items,"x",x,stepX,index,direction),PropertyValueInc(items,"y",y,stepY,index,direction)}},function(module,exports,__webpack_require__){var PropertyValueInc=__webpack_require__(40);module.exports=function(items,value,step,index,direction){return PropertyValueInc(items,"y",value,step,index,direction)}},function(module,exports){module.exports=function(items,circle,startAngle,endAngle){void 0===startAngle&&(startAngle=0),void 0===endAngle&&(endAngle=6.28);for(var angle=startAngle,angleStep=(endAngle-startAngle)/items.length,i=0;i<items.length;i++)items[i].x=circle.x+circle.radius*Math.cos(angle),items[i].y=circle.y+circle.radius*Math.sin(angle),angle+=angleStep;return items}},function(module,exports){module.exports=function(items,ellipse,startAngle,endAngle){void 0===startAngle&&(startAngle=0),void 0===endAngle&&(endAngle=6.28);for(var angle=startAngle,angleStep=(endAngle-startAngle)/items.length,a=ellipse.width/2,b=ellipse.height/2,i=0;i<items.length;i++)items[i].x=ellipse.x+a*Math.cos(angle),items[i].y=ellipse.y+b*Math.sin(angle),angle+=angleStep;return items}},function(module,exports,__webpack_require__){var GetPoints=__webpack_require__(164);module.exports=function(items,line){for(var points=GetPoints(line,items.length),i=0;i<items.length;i++){var item=items[i],point=points[i];item.x=point.x,item.y=point.y}return items}},function(module,exports,__webpack_require__){var MarchingAnts=__webpack_require__(288),RotateLeft=__webpack_require__(289),RotateRight=__webpack_require__(290);module.exports=function(items,rect,shift){void 0===shift&&(shift=0);var points=MarchingAnts(rect,!1,items.length);shift>0?RotateLeft(points,shift):shift<0&&RotateRight(points,Math.abs(shift));for(var i=0;i<items.length;i++)items[i].x=points[i].x,items[i].y=points[i].y;return items}},function(module,exports,__webpack_require__){var BresenhamPoints=__webpack_require__(291);module.exports=function(items,triangle,stepRate){var p1=BresenhamPoints({x1:triangle.x1,y1:triangle.y1,x2:triangle.x2,y2:triangle.y2},stepRate),p2=BresenhamPoints({x1:triangle.x2,y1:triangle.y2,x2:triangle.x3,y2:triangle.y3},stepRate),p3=BresenhamPoints({x1:triangle.x3,y1:triangle.y3,x2:triangle.x1,y2:triangle.y1},stepRate);p1.pop(),p2.pop(),p3.pop();for(var step=(p1=p1.concat(p2,p3)).length/items.length,p=0,i=0;i<items.length;i++){var item=items[i],point=p1[Math.floor(p)];item.x=point.x,item.y=point.y,p+=step}return items}},function(module,exports){module.exports=function(items,key,startFrame){for(var i=0;i<items.length;i++)items[i].anims.play(key,startFrame);return items}},function(module,exports,__webpack_require__){var Random=__webpack_require__(161);module.exports=function(items,circle){for(var i=0;i<items.length;i++)Random(circle,items[i]);return items}},function(module,exports,__webpack_require__){var Random=__webpack_require__(169);module.exports=function(items,ellipse){for(var i=0;i<items.length;i++)Random(ellipse,items[i]);return items}},function(module,exports,__webpack_require__){var Random=__webpack_require__(165);module.exports=function(items,line){for(var i=0;i<items.length;i++)Random(line,items[i]);return items}},function(module,exports,__webpack_require__){var Random=__webpack_require__(166);module.exports=function(items,rect){for(var i=0;i<items.length;i++)Random(rect,items[i]);return items}},function(module,exports,__webpack_require__){var Random=__webpack_require__(170);module.exports=function(items,triangle){for(var i=0;i<items.length;i++)Random(triangle,items[i]);return items}},function(module,exports,__webpack_require__){var PropertyValueInc=__webpack_require__(40);module.exports=function(items,value,step,index,direction){return PropertyValueInc(items,"rotation",value,step,index,direction)}},function(module,exports,__webpack_require__){var RotateAroundDistance=__webpack_require__(171),DistanceBetween=__webpack_require__(65);module.exports=function(items,point,angle){for(var x=point.x,y=point.y,i=0;i<items.length;i++){var item=items[i];RotateAroundDistance(item,x,y,angle,Math.max(1,DistanceBetween(item.x,item.y,x,y)))}return items}},function(module,exports,__webpack_require__){var MathRotateAroundDistance=__webpack_require__(171);module.exports=function(items,point,angle,distance){var x=point.x,y=point.y;if(0===distance)return items;for(var i=0;i<items.length;i++)MathRotateAroundDistance(items[i],x,y,angle,distance);return items}},function(module,exports,__webpack_require__){var PropertyValueInc=__webpack_require__(40);module.exports=function(items,value,step,index,direction){return PropertyValueInc(items,"scaleX",value,step,index,direction)}},function(module,exports,__webpack_require__){var PropertyValueInc=__webpack_require__(40);module.exports=function(items,scaleX,scaleY,stepX,stepY,index,direction){return null==scaleY&&(scaleY=scaleX),PropertyValueInc(items,"scaleX",scaleX,stepX,index,direction),PropertyValueInc(items,"scaleY",scaleY,stepY,index,direction)}},function(module,exports,__webpack_require__){var PropertyValueInc=__webpack_require__(40);module.exports=function(items,value,step,index,direction){return PropertyValueInc(items,"scaleY",value,step,index,direction)}},function(module,exports,__webpack_require__){var PropertyValueSet=__webpack_require__(31);module.exports=function(items,value,step,index,direction){return PropertyValueSet(items,"alpha",value,step,index,direction)}},function(module,exports,__webpack_require__){var PropertyValueSet=__webpack_require__(31);module.exports=function(items,value,index,direction){return PropertyValueSet(items,"blendMode",value,0,index,direction)}},function(module,exports,__webpack_require__){var PropertyValueSet=__webpack_require__(31);module.exports=function(items,value,step,index,direction){return PropertyValueSet(items,"depth",value,step,index,direction)}},function(module,exports){module.exports=function(items,hitArea,hitAreaCallback){for(var i=0;i<items.length;i++)items[i].setInteractive(hitArea,hitAreaCallback);return items}},function(module,exports,__webpack_require__){var PropertyValueSet=__webpack_require__(31);module.exports=function(items,originX,originY,stepX,stepY,index,direction){return null==originY&&(originY=originX),PropertyValueSet(items,"originX",originX,stepX,index,direction),PropertyValueSet(items,"originY",originY,stepY,index,direction)}},function(module,exports,__webpack_require__){var PropertyValueSet=__webpack_require__(31);module.exports=function(items,value,step,index,direction){return PropertyValueSet(items,"rotation",value,step,index,direction)}},function(module,exports,__webpack_require__){var PropertyValueSet=__webpack_require__(31);module.exports=function(items,scaleX,scaleY,stepX,stepY,index,direction){return null==scaleY&&(scaleY=scaleX),PropertyValueSet(items,"scaleX",scaleX,stepX,index,direction),PropertyValueSet(items,"scaleY",scaleY,stepY,index,direction)}},function(module,exports,__webpack_require__){var PropertyValueSet=__webpack_require__(31);module.exports=function(items,value,step,index,direction){return PropertyValueSet(items,"scaleX",value,step,index,direction)}},function(module,exports,__webpack_require__){var PropertyValueSet=__webpack_require__(31);module.exports=function(items,value,step,index,direction){return PropertyValueSet(items,"scaleY",value,step,index,direction)}},function(module,exports){module.exports=function(items,topLeft,topRight,bottomLeft,bottomRight){for(var i=0;i<items.length;i++)items[i].setTint(topLeft,topRight,bottomLeft,bottomRight);return items}},function(module,exports,__webpack_require__){var PropertyValueSet=__webpack_require__(31);module.exports=function(items,value,index,direction){return PropertyValueSet(items,"visible",value,0,index,direction)}},function(module,exports,__webpack_require__){var PropertyValueSet=__webpack_require__(31);module.exports=function(items,value,step,index,direction){return PropertyValueSet(items,"x",value,step,index,direction)}},function(module,exports,__webpack_require__){var PropertyValueSet=__webpack_require__(31);module.exports=function(items,x,y,stepX,stepY,index,direction){return null==y&&(y=x),PropertyValueSet(items,"x",x,stepX,index,direction),PropertyValueSet(items,"y",y,stepY,index,direction)}},function(module,exports,__webpack_require__){var PropertyValueSet=__webpack_require__(31);module.exports=function(items,value,step,index,direction){return PropertyValueSet(items,"y",value,step,index,direction)}},function(module,exports,__webpack_require__){var Vector2=__webpack_require__(3);module.exports=function(items,x,y,direction,output){var px,py,i,cx,cy,cur;if(void 0===direction&&(direction=0),void 0===output&&(output=new Vector2),items.length>1)if(0===direction){var len=items.length-1;for(px=items[len].x,py=items[len].y,i=len-1;i>=0;i--)cx=(cur=items[i]).x,cy=cur.y,cur.x=px,cur.y=py,px=cx,py=cy;items[len].x=x,items[len].y=y}else{for(px=items[0].x,py=items[0].y,i=1;i<items.length;i++)cx=(cur=items[i]).x,cy=cur.y,cur.x=px,cur.y=py,px=cx,py=cy;items[0].x=x,items[0].y=y}else px=items[0].x,py=items[0].y,items[0].x=x,items[0].y=y;return output.x=px,output.y=py,output}},function(module,exports,__webpack_require__){var ArrayShuffle=__webpack_require__(123);module.exports=function(items){return ArrayShuffle(items)}},function(module,exports,__webpack_require__){var MathSmootherStep=__webpack_require__(172);module.exports=function(items,property,min,max,inc){void 0===inc&&(inc=!1);var i,step=Math.abs(max-min)/items.length;if(inc)for(i=0;i<items.length;i++)items[i][property]+=MathSmootherStep(i*step,min,max);else for(i=0;i<items.length;i++)items[i][property]=MathSmootherStep(i*step,min,max);return items}},function(module,exports,__webpack_require__){var MathSmoothStep=__webpack_require__(173);module.exports=function(items,property,min,max,inc){void 0===inc&&(inc=!1);var i,step=Math.abs(max-min)/items.length;if(inc)for(i=0;i<items.length;i++)items[i][property]+=MathSmoothStep(i*step,min,max);else for(i=0;i<items.length;i++)items[i][property]=MathSmoothStep(i*step,min,max);return items}},function(module,exports){module.exports=function(items,property,min,max,inc){void 0===inc&&(inc=!1);var i,step=Math.abs(max-min)/items.length;if(inc)for(i=0;i<items.length;i++)items[i][property]+=i*step+min;else for(i=0;i<items.length;i++)items[i][property]=i*step+min;return items}},function(module,exports){module.exports=function(items){for(var i=0;i<items.length;i++)items[i].visible=!items[i].visible;return items}},function(module,exports,__webpack_require__){var Wrap=__webpack_require__(64);module.exports=function(items,rect,padding){void 0===padding&&(padding=0);for(var i=0;i<items.length;i++){var item=items[i];item.x=Wrap(item.x,rect.left-padding,rect.right+padding),item.y=Wrap(item.y,rect.top-padding,rect.bottom+padding)}return items}},function(module,exports,__webpack_require__){module.exports={Animation:__webpack_require__(162),AnimationFrame:__webpack_require__(274),AnimationManager:__webpack_require__(292),Events:__webpack_require__(119)}},function(module,exports,__webpack_require__){module.exports={BaseCache:__webpack_require__(293),CacheManager:__webpack_require__(295),Events:__webpack_require__(294)}},function(module,exports){module.exports="add"},function(module,exports){module.exports="remove"},function(module,exports,__webpack_require__){module.exports={Controls:__webpack_require__(643),Scene2D:__webpack_require__(646)}},function(module,exports,__webpack_require__){module.exports={FixedKeyControl:__webpack_require__(644),SmoothedKeyControl:__webpack_require__(645)}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),GetValue=__webpack_require__(5),FixedKeyControl=new Class({initialize:function(config){this.camera=GetValue(config,"camera",null),this.left=GetValue(config,"left",null),this.right=GetValue(config,"right",null),this.up=GetValue(config,"up",null),this.down=GetValue(config,"down",null),this.zoomIn=GetValue(config,"zoomIn",null),this.zoomOut=GetValue(config,"zoomOut",null),this.zoomSpeed=GetValue(config,"zoomSpeed",.01),this.speedX=0,this.speedY=0;var speed=GetValue(config,"speed",null);"number"==typeof speed?(this.speedX=speed,this.speedY=speed):(this.speedX=GetValue(config,"speed.x",0),this.speedY=GetValue(config,"speed.y",0)),this._zoom=0,this.active=null!==this.camera},start:function(){return this.active=null!==this.camera,this},stop:function(){return this.active=!1,this},setCamera:function(camera){return this.camera=camera,this},update:function(delta){if(this.active){void 0===delta&&(delta=1);var cam=this.camera;this.up&&this.up.isDown?cam.scrollY-=this.speedY*delta|0:this.down&&this.down.isDown&&(cam.scrollY+=this.speedY*delta|0),this.left&&this.left.isDown?cam.scrollX-=this.speedX*delta|0:this.right&&this.right.isDown&&(cam.scrollX+=this.speedX*delta|0),this.zoomIn&&this.zoomIn.isDown?(cam.zoom-=this.zoomSpeed,cam.zoom<.1&&(cam.zoom=.1)):this.zoomOut&&this.zoomOut.isDown&&(cam.zoom+=this.zoomSpeed)}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});module.exports=FixedKeyControl},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),GetValue=__webpack_require__(5),SmoothedKeyControl=new Class({initialize:function(config){this.camera=GetValue(config,"camera",null),this.left=GetValue(config,"left",null),this.right=GetValue(config,"right",null),this.up=GetValue(config,"up",null),this.down=GetValue(config,"down",null),this.zoomIn=GetValue(config,"zoomIn",null),this.zoomOut=GetValue(config,"zoomOut",null),this.zoomSpeed=GetValue(config,"zoomSpeed",.01),this.accelX=0,this.accelY=0;var accel=GetValue(config,"acceleration",null);"number"==typeof accel?(this.accelX=accel,this.accelY=accel):(this.accelX=GetValue(config,"acceleration.x",0),this.accelY=GetValue(config,"acceleration.y",0)),this.dragX=0,this.dragY=0;var drag=GetValue(config,"drag",null);"number"==typeof drag?(this.dragX=drag,this.dragY=drag):(this.dragX=GetValue(config,"drag.x",0),this.dragY=GetValue(config,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var maxSpeed=GetValue(config,"maxSpeed",null);"number"==typeof maxSpeed?(this.maxSpeedX=maxSpeed,this.maxSpeedY=maxSpeed):(this.maxSpeedX=GetValue(config,"maxSpeed.x",0),this.maxSpeedY=GetValue(config,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=null!==this.camera},start:function(){return this.active=null!==this.camera,this},stop:function(){return this.active=!1,this},setCamera:function(camera){return this.camera=camera,this},update:function(delta){if(this.active){void 0===delta&&(delta=1);var cam=this.camera;this._speedX>0?(this._speedX-=this.dragX*delta,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*delta,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*delta,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*delta,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,0!==this._speedX&&(cam.scrollX-=this._speedX*delta|0),0!==this._speedY&&(cam.scrollY-=this._speedY*delta|0),0!==this._zoom&&(cam.zoom+=this._zoom,cam.zoom<.001&&(cam.zoom=.001))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});module.exports=SmoothedKeyControl},function(module,exports,__webpack_require__){module.exports={Camera:__webpack_require__(296),CameraManager:__webpack_require__(699),Effects:__webpack_require__(304),Events:__webpack_require__(55)}},function(module,exports){module.exports="cameradestroy"},function(module,exports){module.exports="camerafadeincomplete"},function(module,exports){module.exports="camerafadeinstart"},function(module,exports){module.exports="camerafadeoutcomplete"},function(module,exports){module.exports="camerafadeoutstart"},function(module,exports){module.exports="cameraflashcomplete"},function(module,exports){module.exports="cameraflashstart"},function(module,exports){module.exports="camerapancomplete"},function(module,exports){module.exports="camerapanstart"},function(module,exports){module.exports="postrender"},function(module,exports){module.exports="prerender"},function(module,exports){module.exports="camerashakecomplete"},function(module,exports){module.exports="camerashakestart"},function(module,exports){module.exports="camerazoomcomplete"},function(module,exports){module.exports="camerazoomstart"},function(module,exports,__webpack_require__){var Clamp=__webpack_require__(25),Class=__webpack_require__(0),Events=__webpack_require__(55),Fade=new Class({initialize:function(camera){this.camera=camera,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(direction,duration,red,green,blue,force,callback,context){if(void 0===direction&&(direction=!0),void 0===duration&&(duration=1e3),void 0===red&&(red=0),void 0===green&&(green=0),void 0===blue&&(blue=0),void 0===force&&(force=!1),void 0===callback&&(callback=null),void 0===context&&(context=this.camera.scene),!force&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=duration,this.direction=direction,this.progress=0,this.red=red,this.green=green,this.blue=blue,this.alpha=direction?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=callback,this._onUpdateScope=context;var eventName=direction?Events.FADE_OUT_START:Events.FADE_IN_START;return this.camera.emit(eventName,this.camera,this,duration,red,green,blue),this.camera},update:function(time,delta){this.isRunning&&(this._elapsed+=delta,this.progress=Clamp(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(ctx){if(!this.isRunning&&!this.isComplete)return!1;var camera=this.camera;return ctx.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",ctx.fillRect(camera._cx,camera._cy,camera._cw,camera._ch),!0},postRenderWebGL:function(pipeline,getTintFunction){if(!this.isRunning&&!this.isComplete)return!1;var camera=this.camera,red=this.red/255,blue=this.blue/255,green=this.green/255;return pipeline.drawFillRect(camera._cx,camera._cy,camera._cw,camera._ch,getTintFunction(red,green,blue,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var eventName=this.direction?Events.FADE_OUT_COMPLETE:Events.FADE_IN_COMPLETE;this.camera.emit(eventName,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});module.exports=Fade},function(module,exports,__webpack_require__){var Clamp=__webpack_require__(25),Class=__webpack_require__(0),Events=__webpack_require__(55),Flash=new Class({initialize:function(camera){this.camera=camera,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(duration,red,green,blue,force,callback,context){return void 0===duration&&(duration=250),void 0===red&&(red=255),void 0===green&&(green=255),void 0===blue&&(blue=255),void 0===force&&(force=!1),void 0===callback&&(callback=null),void 0===context&&(context=this.camera.scene),!force&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=duration,this.progress=0,this.red=red,this.green=green,this.blue=blue,this.alpha=1,this._elapsed=0,this._onUpdate=callback,this._onUpdateScope=context,this.camera.emit(Events.FLASH_START,this.camera,this,duration,red,green,blue),this.camera)},update:function(time,delta){this.isRunning&&(this._elapsed+=delta,this.progress=Clamp(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(ctx){if(!this.isRunning)return!1;var camera=this.camera;return ctx.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",ctx.fillRect(camera._cx,camera._cy,camera._cw,camera._ch),!0},postRenderWebGL:function(pipeline,getTintFunction){if(!this.isRunning)return!1;var camera=this.camera,red=this.red/255,blue=this.blue/255,green=this.green/255;return pipeline.drawFillRect(camera._cx,camera._cy,camera._cw,camera._ch,getTintFunction(red,green,blue,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(Events.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});module.exports=Flash},function(module,exports,__webpack_require__){var Clamp=__webpack_require__(25),Class=__webpack_require__(0),EaseMap=__webpack_require__(180),Events=__webpack_require__(55),Vector2=__webpack_require__(3),Pan=new Class({initialize:function(camera){this.camera=camera,this.isRunning=!1,this.duration=0,this.source=new Vector2,this.current=new Vector2,this.destination=new Vector2,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(x,y,duration,ease,force,callback,context){void 0===duration&&(duration=1e3),void 0===ease&&(ease=EaseMap.Linear),void 0===force&&(force=!1),void 0===callback&&(callback=null),void 0===context&&(context=this.camera.scene);var cam=this.camera;return!force&&this.isRunning?cam:(this.isRunning=!0,this.duration=duration,this.progress=0,this.source.set(cam.scrollX,cam.scrollY),this.destination.set(x,y),cam.getScroll(x,y,this.current),"string"==typeof ease&&EaseMap.hasOwnProperty(ease)?this.ease=EaseMap[ease]:"function"==typeof ease&&(this.ease=ease),this._elapsed=0,this._onUpdate=callback,this._onUpdateScope=context,this.camera.emit(Events.PAN_START,this.camera,this,duration,x,y),cam)},update:function(time,delta){if(this.isRunning){this._elapsed+=delta;var progress=Clamp(this._elapsed/this.duration,0,1);this.progress=progress;var cam=this.camera;if(this._elapsed<this.duration){var v=this.ease(progress);cam.getScroll(this.destination.x,this.destination.y,this.current);var x=this.source.x+(this.current.x-this.source.x)*v,y=this.source.y+(this.current.y-this.source.y)*v;cam.setScroll(x,y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,cam,progress,x,y)}else cam.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,cam,progress,cam.scrollX,cam.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(Events.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});module.exports=Pan},function(module,exports){module.exports=function(v,overshoot){return void 0===overshoot&&(overshoot=1.70158),v*v*((overshoot+1)*v-overshoot)}},function(module,exports){module.exports=function(v,overshoot){return void 0===overshoot&&(overshoot=1.70158),--v*v*((overshoot+1)*v+overshoot)+1}},function(module,exports){module.exports=function(v,overshoot){void 0===overshoot&&(overshoot=1.70158);var s=1.525*overshoot;return(v*=2)<1?v*v*((s+1)*v-s)*.5:.5*((v-=2)*v*((s+1)*v+s)+2)}},function(module,exports){module.exports=function(v){return(v=1-v)<1/2.75?1-7.5625*v*v:v<2/2.75?1-(7.5625*(v-=1.5/2.75)*v+.75):v<2.5/2.75?1-(7.5625*(v-=2.25/2.75)*v+.9375):1-(7.5625*(v-=2.625/2.75)*v+.984375)}},function(module,exports){module.exports=function(v){return v<1/2.75?7.5625*v*v:v<2/2.75?7.5625*(v-=1.5/2.75)*v+.75:v<2.5/2.75?7.5625*(v-=2.25/2.75)*v+.9375:7.5625*(v-=2.625/2.75)*v+.984375}},function(module,exports){module.exports=function(v){var reverse=!1;return v<.5?(v=1-2*v,reverse=!0):v=2*v-1,v<1/2.75?v*=7.5625*v:v=v<2/2.75?7.5625*(v-=1.5/2.75)*v+.75:v<2.5/2.75?7.5625*(v-=2.25/2.75)*v+.9375:7.5625*(v-=2.625/2.75)*v+.984375,reverse?.5*(1-v):.5*v+.5}},function(module,exports){module.exports=function(v){return 1-Math.sqrt(1-v*v)}},function(module,exports){module.exports=function(v){return Math.sqrt(1- --v*v)}},function(module,exports){module.exports=function(v){return(v*=2)<1?-.5*(Math.sqrt(1-v*v)-1):.5*(Math.sqrt(1-(v-=2)*v)+1)}},function(module,exports){module.exports=function(v){return v*v*v}},function(module,exports){module.exports=function(v){return--v*v*v+1}},function(module,exports){module.exports=function(v){return(v*=2)<1?.5*v*v*v:.5*((v-=2)*v*v+2)}},function(module,exports){module.exports=function(v,amplitude,period){if(void 0===amplitude&&(amplitude=.1),void 0===period&&(period=.1),0===v)return 0;if(1===v)return 1;var s=period/4;return amplitude<1?amplitude=1:s=period*Math.asin(1/amplitude)/(2*Math.PI),-amplitude*Math.pow(2,10*(v-=1))*Math.sin((v-s)*(2*Math.PI)/period)}},function(module,exports){module.exports=function(v,amplitude,period){if(void 0===amplitude&&(amplitude=.1),void 0===period&&(period=.1),0===v)return 0;if(1===v)return 1;var s=period/4;return amplitude<1?amplitude=1:s=period*Math.asin(1/amplitude)/(2*Math.PI),amplitude*Math.pow(2,-10*v)*Math.sin((v-s)*(2*Math.PI)/period)+1}},function(module,exports){module.exports=function(v,amplitude,period){if(void 0===amplitude&&(amplitude=.1),void 0===period&&(period=.1),0===v)return 0;if(1===v)return 1;var s=period/4;return amplitude<1?amplitude=1:s=period*Math.asin(1/amplitude)/(2*Math.PI),(v*=2)<1?amplitude*Math.pow(2,10*(v-=1))*Math.sin((v-s)*(2*Math.PI)/period)*-.5:amplitude*Math.pow(2,-10*(v-=1))*Math.sin((v-s)*(2*Math.PI)/period)*.5+1}},function(module,exports){module.exports=function(v){return Math.pow(2,10*(v-1))-.001}},function(module,exports){module.exports=function(v){return 1-Math.pow(2,-10*v)}},function(module,exports){module.exports=function(v){return(v*=2)<1?.5*Math.pow(2,10*(v-1)):.5*(2-Math.pow(2,-10*(v-1)))}},function(module,exports){module.exports=function(v){return v}},function(module,exports){module.exports=function(v){return v*v}},function(module,exports){module.exports=function(v){return v*(2-v)}},function(module,exports){module.exports=function(v){return(v*=2)<1?.5*v*v:-.5*(--v*(v-2)-1)}},function(module,exports){module.exports=function(v){return v*v*v*v}},function(module,exports){module.exports=function(v){return 1- --v*v*v*v}},function(module,exports){module.exports=function(v){return(v*=2)<1?.5*v*v*v*v:-.5*((v-=2)*v*v*v-2)}},function(module,exports){module.exports=function(v){return v*v*v*v*v}},function(module,exports){module.exports=function(v){return--v*v*v*v*v+1}},function(module,exports){module.exports=function(v){return(v*=2)<1?.5*v*v*v*v*v:.5*((v-=2)*v*v*v*v+2)}},function(module,exports){module.exports=function(v){return 0===v?0:1===v?1:1-Math.cos(v*Math.PI/2)}},function(module,exports){module.exports=function(v){return 0===v?0:1===v?1:Math.sin(v*Math.PI/2)}},function(module,exports){module.exports=function(v){return 0===v?0:1===v?1:.5*(1-Math.cos(Math.PI*v))}},function(module,exports){module.exports=function(v,steps){return void 0===steps&&(steps=1),v<=0?0:v>=1?1:1/steps*(1+(steps*v|0))}},function(module,exports,__webpack_require__){var Clamp=__webpack_require__(25),Class=__webpack_require__(0),Events=__webpack_require__(55),Vector2=__webpack_require__(3),Shake=new Class({initialize:function(camera){this.camera=camera,this.isRunning=!1,this.duration=0,this.intensity=new Vector2,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(duration,intensity,force,callback,context){return void 0===duration&&(duration=100),void 0===intensity&&(intensity=.05),void 0===force&&(force=!1),void 0===callback&&(callback=null),void 0===context&&(context=this.camera.scene),!force&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=duration,this.progress=0,"number"==typeof intensity?this.intensity.set(intensity):this.intensity.set(intensity.x,intensity.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=callback,this._onUpdateScope=context,this.camera.emit(Events.SHAKE_START,this.camera,this,duration,intensity),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(time,delta){if(this.isRunning)if(this._elapsed+=delta,this.progress=Clamp(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var intensity=this.intensity,width=this.camera._cw,height=this.camera._ch,zoom=this.camera.zoom;this._offsetX=(Math.random()*intensity.x*width*2-intensity.x*width)*zoom,this._offsetY=(Math.random()*intensity.y*height*2-intensity.y*height)*zoom,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(Events.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});module.exports=Shake},function(module,exports,__webpack_require__){var Clamp=__webpack_require__(25),Class=__webpack_require__(0),EaseMap=__webpack_require__(180),Events=__webpack_require__(55),Zoom=new Class({initialize:function(camera){this.camera=camera,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(zoom,duration,ease,force,callback,context){void 0===duration&&(duration=1e3),void 0===ease&&(ease=EaseMap.Linear),void 0===force&&(force=!1),void 0===callback&&(callback=null),void 0===context&&(context=this.camera.scene);var cam=this.camera;return!force&&this.isRunning?cam:(this.isRunning=!0,this.duration=duration,this.progress=0,this.source=cam.zoom,this.destination=zoom,"string"==typeof ease&&EaseMap.hasOwnProperty(ease)?this.ease=EaseMap[ease]:"function"==typeof ease&&(this.ease=ease),this._elapsed=0,this._onUpdate=callback,this._onUpdateScope=context,this.camera.emit(Events.ZOOM_START,this.camera,this,duration,zoom),cam)},update:function(time,delta){this.isRunning&&(this._elapsed+=delta,this.progress=Clamp(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(Events.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});module.exports=Zoom},function(module,exports,__webpack_require__){var Camera=__webpack_require__(296),Class=__webpack_require__(0),GetFastValue=__webpack_require__(1),PluginCache=__webpack_require__(18),RectangleContains=__webpack_require__(54),ScaleEvents=__webpack_require__(104),SceneEvents=__webpack_require__(20),CameraManager=new Class({initialize:function(scene){this.scene=scene,this.systems=scene.sys,this.roundPixels=scene.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,scene.sys.events.once(SceneEvents.BOOT,this.boot,this),scene.sys.events.on(SceneEvents.START,this.start,this)},boot:function(){var sys=this.systems;sys.settings.cameras?this.fromJSON(sys.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new Camera(0,0,sys.scale.width,sys.scale.height).setScene(this.scene),sys.game.scale.on(ScaleEvents.RESIZE,this.onResize,this),this.systems.events.once(SceneEvents.DESTROY,this.destroy,this)},start:function(){if(!this.main){var sys=this.systems;sys.settings.cameras?this.fromJSON(sys.settings.cameras):this.add(),this.main=this.cameras[0]}var eventEmitter=this.systems.events;eventEmitter.on(SceneEvents.UPDATE,this.update,this),eventEmitter.once(SceneEvents.SHUTDOWN,this.shutdown,this)},add:function(x,y,width,height,makeMain,name){void 0===x&&(x=0),void 0===y&&(y=0),void 0===width&&(width=this.scene.sys.scale.width),void 0===height&&(height=this.scene.sys.scale.height),void 0===makeMain&&(makeMain=!1),void 0===name&&(name="");var camera=new Camera(x,y,width,height);return camera.setName(name),camera.setScene(this.scene),camera.setRoundPixels(this.roundPixels),camera.id=this.getNextID(),this.cameras.push(camera),makeMain&&(this.main=camera),camera},addExisting:function(camera,makeMain){return void 0===makeMain&&(makeMain=!1),-1===this.cameras.indexOf(camera)?(camera.id=this.getNextID(),camera.setRoundPixels(this.roundPixels),this.cameras.push(camera),makeMain&&(this.main=camera),camera):null},getNextID:function(){for(var cameras=this.cameras,testID=1,t=0;t<32;t++){for(var found=!1,i=0;i<cameras.length;i++){var camera=cameras[i];camera&&camera.id===testID&&(found=!0)}if(!found)return testID;testID<<=1}return 0},getTotal:function(isVisible){void 0===isVisible&&(isVisible=!1);for(var total=0,cameras=this.cameras,i=0;i<cameras.length;i++){var camera=cameras[i];(!isVisible||isVisible&&camera.visible)&&total++}return total},fromJSON:function(config){Array.isArray(config)||(config=[config]);for(var gameWidth=this.scene.sys.scale.width,gameHeight=this.scene.sys.scale.height,i=0;i<config.length;i++){var cameraConfig=config[i],x=GetFastValue(cameraConfig,"x",0),y=GetFastValue(cameraConfig,"y",0),width=GetFastValue(cameraConfig,"width",gameWidth),height=GetFastValue(cameraConfig,"height",gameHeight),camera=this.add(x,y,width,height);camera.name=GetFastValue(cameraConfig,"name",""),camera.zoom=GetFastValue(cameraConfig,"zoom",1),camera.rotation=GetFastValue(cameraConfig,"rotation",0),camera.scrollX=GetFastValue(cameraConfig,"scrollX",0),camera.scrollY=GetFastValue(cameraConfig,"scrollY",0),camera.roundPixels=GetFastValue(cameraConfig,"roundPixels",!1),camera.visible=GetFastValue(cameraConfig,"visible",!0);var backgroundColor=GetFastValue(cameraConfig,"backgroundColor",!1);backgroundColor&&camera.setBackgroundColor(backgroundColor);var boundsConfig=GetFastValue(cameraConfig,"bounds",null);if(boundsConfig){var bx=GetFastValue(boundsConfig,"x",0),by=GetFastValue(boundsConfig,"y",0),bwidth=GetFastValue(boundsConfig,"width",gameWidth),bheight=GetFastValue(boundsConfig,"height",gameHeight);camera.setBounds(bx,by,bwidth,bheight)}}return this},getCamera:function(name){for(var cameras=this.cameras,i=0;i<cameras.length;i++)if(cameras[i].name===name)return cameras[i];return null},getCamerasBelowPointer:function(pointer){for(var cameras=this.cameras,x=pointer.x,y=pointer.y,output=[],i=0;i<cameras.length;i++){var camera=cameras[i];camera.visible&&camera.inputEnabled&&RectangleContains(camera,x,y)&&output.unshift(camera)}return output},remove:function(camera,runDestroy){void 0===runDestroy&&(runDestroy=!0),Array.isArray(camera)||(camera=[camera]);for(var total=0,cameras=this.cameras,i=0;i<camera.length;i++){var index=cameras.indexOf(camera[i]);-1!==index&&(runDestroy&&cameras[index].destroy(),cameras.splice(index,1),total++)}return!this.main&&cameras[0]&&(this.main=cameras[0]),total},render:function(renderer,children,interpolation){for(var scene=this.scene,cameras=this.cameras,i=0;i<this.cameras.length;i++){var camera=cameras[i];camera.visible&&camera.alpha>0&&(camera.preRender(1),renderer.render(scene,children,interpolation,camera))}},resetAll:function(){for(var i=0;i<this.cameras.length;i++)this.cameras[i].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(time,delta){for(var i=0;i<this.cameras.length;i++)this.cameras[i].update(time,delta)},onResize:function(gameSize,baseSize,displaySize,resolution,previousWidth,previousHeight){for(var i=0;i<this.cameras.length;i++){var cam=this.cameras[i];0===cam._x&&0===cam._y&&cam._width===previousWidth&&cam._height===previousHeight&&cam.setSize(baseSize.width,baseSize.height)}},resize:function(width,height){for(var i=0;i<this.cameras.length;i++)this.cameras[i].setSize(width,height)},shutdown:function(){this.main=void 0;for(var i=0;i<this.cameras.length;i++)this.cameras[i].destroy();this.cameras=[];var eventEmitter=this.systems.events;eventEmitter.off(SceneEvents.UPDATE,this.update,this),eventEmitter.off(SceneEvents.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(SceneEvents.START,this.start,this),this.scene=null,this.systems=null}});PluginCache.register("CameraManager",CameraManager,"cameras"),module.exports=CameraManager},function(module,exports){module.exports="enterfullscreen"},function(module,exports){module.exports="fullscreenfailed"},function(module,exports){module.exports="fullscreenunsupported"},function(module,exports){module.exports="leavefullscreen"},function(module,exports){module.exports="orientationchange"},function(module,exports){module.exports="resize"},function(module,exports){module.exports="boot"},function(module,exports){module.exports="create"},function(module,exports){module.exports="destroy"},function(module,exports){module.exports="pause"},function(module,exports){module.exports="postupdate"},function(module,exports){module.exports="preupdate"},function(module,exports){module.exports="ready"},function(module,exports){module.exports="render"},function(module,exports){module.exports="resume"},function(module,exports){module.exports="shutdown"},function(module,exports){module.exports="sleep"},function(module,exports){module.exports="start"},function(module,exports){module.exports="transitioncomplete"},function(module,exports){module.exports="transitioninit"},function(module,exports){module.exports="transitionout"},function(module,exports){module.exports="transitionstart"},function(module,exports){module.exports="transitionwake"},function(module,exports){module.exports="update"},function(module,exports){module.exports="wake"},function(module,exports,__webpack_require__){module.exports={Config:__webpack_require__(317),CreateRenderer:__webpack_require__(341),DebugHeader:__webpack_require__(349),Events:__webpack_require__(23),TimeStep:__webpack_require__(350),VisibilityHandler:__webpack_require__(352)}},function(module,exports){var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,function(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(name){return[]},process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},function(module,exports,__webpack_require__){var Browser=__webpack_require__(128),Input={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};module.exports=(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(Input.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(Input.mspointer=!0),navigator.getGamepads&&(Input.gamepads=!0),"onwheel"in window||Browser.ie&&"WheelEvent"in window?Input.wheelEvent="wheel":"onmousewheel"in window?Input.wheelEvent="mousewheel":Browser.firefox&&"MouseScrollEvent"in window&&(Input.wheelEvent="DOMMouseScroll"),Input)},function(module,exports,__webpack_require__){var Browser=__webpack_require__(128),Audio={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};module.exports=function(){Audio.audioData=!!window.Audio,Audio.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var audioElement=document.createElement("audio"),result=!!audioElement.canPlayType;try{if(result&&(audioElement.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(Audio.ogg=!0),(audioElement.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||audioElement.canPlayType("audio/opus;").replace(/^no$/,""))&&(Audio.opus=!0),audioElement.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(Audio.mp3=!0),audioElement.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(Audio.wav=!0),(audioElement.canPlayType("audio/x-m4a;")||audioElement.canPlayType("audio/aac;").replace(/^no$/,""))&&(Audio.m4a=!0),audioElement.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(Audio.webm=!0),""!==audioElement.canPlayType('audio/mp4;codecs="ec-3"')))if(Browser.edge)Audio.dolby=!0;else if(Browser.safari&&Browser.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var major=parseInt(RegExp.$1,10),minor=parseInt(RegExp.$2,10);(10===major&&minor>=11||major>10)&&(Audio.dolby=!0)}}catch(e){}return Audio}()},function(module,exports){var Video={h264Video:!1,hlsVideo:!1,mp4Video:!1,oggVideo:!1,vp9Video:!1,webmVideo:!1};module.exports=function(){var videoElement=document.createElement("video"),result=!!videoElement.canPlayType;try{result&&(videoElement.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(Video.oggVideo=!0),videoElement.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(Video.h264Video=!0,Video.mp4Video=!0),videoElement.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(Video.webmVideo=!0),videoElement.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(Video.vp9Video=!0),videoElement.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(Video.hlsVideo=!0))}catch(e){}return Video}()},function(module,exports){var Fullscreen={available:!1,cancel:"",keyboard:!1,request:""};module.exports=function(){var i,suffix1="Fullscreen",suffix2="FullScreen",fs=["request"+suffix1,"request"+suffix2,"webkitRequest"+suffix1,"webkitRequest"+suffix2,"msRequest"+suffix1,"msRequest"+suffix2,"mozRequest"+suffix2,"mozRequest"+suffix1];for(i=0;i<fs.length;i++)if(document.documentElement[fs[i]]){Fullscreen.available=!0,Fullscreen.request=fs[i];break}var cfs=["cancel"+suffix2,"exit"+suffix1,"webkitCancel"+suffix2,"webkitExit"+suffix1,"msCancel"+suffix2,"msExit"+suffix1,"mozCancel"+suffix2,"mozExit"+suffix1];if(Fullscreen.available)for(i=0;i<cfs.length;i++)if(document[cfs[i]]){Fullscreen.cancel=cfs[i];break}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(Fullscreen.keyboard=!0),Object.defineProperty(Fullscreen,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),Fullscreen}()},function(module,exports,__webpack_require__){module.exports={Between:__webpack_require__(320),BetweenPoints:__webpack_require__(732),BetweenPointsY:__webpack_require__(733),BetweenY:__webpack_require__(734),CounterClockwise:__webpack_require__(735),Normalize:__webpack_require__(321),Reverse:__webpack_require__(736),RotateTo:__webpack_require__(737),ShortestBetween:__webpack_require__(738),Wrap:__webpack_require__(167),WrapDegrees:__webpack_require__(168)}},function(module,exports){module.exports=function(point1,point2){return Math.atan2(point2.y-point1.y,point2.x-point1.x)}},function(module,exports){module.exports=function(point1,point2){return Math.atan2(point2.x-point1.x,point2.y-point1.y)}},function(module,exports){module.exports=function(x1,y1,x2,y2){return Math.atan2(x2-x1,y2-y1)}},function(module,exports,__webpack_require__){var CONST=__webpack_require__(22);module.exports=function(angle){return angle>Math.PI&&(angle-=CONST.PI2),Math.abs(((angle+CONST.TAU)%CONST.PI2-CONST.PI2)%CONST.PI2)}},function(module,exports,__webpack_require__){var Normalize=__webpack_require__(321);module.exports=function(angle){return Normalize(angle+Math.PI)}},function(module,exports,__webpack_require__){var MATH_CONST=__webpack_require__(22);module.exports=function(currentAngle,targetAngle,lerp){return void 0===lerp&&(lerp=.05),currentAngle===targetAngle?currentAngle:(Math.abs(targetAngle-currentAngle)<=lerp||Math.abs(targetAngle-currentAngle)>=MATH_CONST.PI2-lerp?currentAngle=targetAngle:(Math.abs(targetAngle-currentAngle)>Math.PI&&(targetAngle<currentAngle?targetAngle+=MATH_CONST.PI2:targetAngle-=MATH_CONST.PI2),targetAngle>currentAngle?currentAngle+=lerp:targetAngle<currentAngle&&(currentAngle-=lerp)),currentAngle)}},function(module,exports){module.exports=function(angle1,angle2){var difference=angle2-angle1;return 0===difference?0:difference-360*Math.floor((difference- -180)/360)}},function(module,exports,__webpack_require__){module.exports={Between:__webpack_require__(65),Power:__webpack_require__(740),Squared:__webpack_require__(322)}},function(module,exports){module.exports=function(x1,y1,x2,y2,pow){return void 0===pow&&(pow=2),Math.sqrt(Math.pow(x2-x1,pow)+Math.pow(y2-y1,pow))}},function(module,exports,__webpack_require__){module.exports={Back:__webpack_require__(305),Bounce:__webpack_require__(306),Circular:__webpack_require__(307),Cubic:__webpack_require__(308),Elastic:__webpack_require__(309),Expo:__webpack_require__(310),Linear:__webpack_require__(311),Quadratic:__webpack_require__(312),Quartic:__webpack_require__(313),Quintic:__webpack_require__(314),Sine:__webpack_require__(315),Stepped:__webpack_require__(316)}},function(module,exports,__webpack_require__){module.exports={Ceil:__webpack_require__(743),Equal:__webpack_require__(183),Floor:__webpack_require__(744),GreaterThan:__webpack_require__(323),LessThan:__webpack_require__(324)}},function(module,exports){module.exports=function(value,epsilon){return void 0===epsilon&&(epsilon=1e-4),Math.ceil(value-epsilon)}},function(module,exports){module.exports=function(value,epsilon){return void 0===epsilon&&(epsilon=1e-4),Math.floor(value+epsilon)}},function(module,exports,__webpack_require__){module.exports={Bezier:__webpack_require__(746),CatmullRom:__webpack_require__(747),CubicBezier:__webpack_require__(327),Linear:__webpack_require__(748),QuadraticBezier:__webpack_require__(328),SmoothStep:__webpack_require__(329),SmootherStep:__webpack_require__(749)}},function(module,exports,__webpack_require__){var Bernstein=__webpack_require__(325);module.exports=function(v,k){for(var b=0,n=v.length-1,i=0;i<=n;i++)b+=Math.pow(1-k,n-i)*Math.pow(k,i)*v[i]*Bernstein(n,i);return b}},function(module,exports,__webpack_require__){var CatmullRom=__webpack_require__(184);module.exports=function(v,k){var m=v.length-1,f=m*k,i=Math.floor(f);return v[0]===v[m]?(k<0&&(i=Math.floor(f=m*(1+k))),CatmullRom(f-i,v[(i-1+m)%m],v[i],v[(i+1)%m],v[(i+2)%m])):k<0?v[0]-(CatmullRom(-f,v[0],v[0],v[1],v[1])-v[0]):k>1?v[m]-(CatmullRom(f-m,v[m],v[m],v[m-1],v[m-1])-v[m]):CatmullRom(f-i,v[i?i-1:0],v[i],v[m<i+1?m:i+1],v[m<i+2?m:i+2])}},function(module,exports,__webpack_require__){var Linear=__webpack_require__(126);module.exports=function(v,k){var m=v.length-1,f=m*k,i=Math.floor(f);return k<0?Linear(v[0],v[1],f):k>1?Linear(v[m],v[m-1],m-f):Linear(v[i],v[i+1>m?m:i+1],f-i)}},function(module,exports,__webpack_require__){var SmootherStep=__webpack_require__(172);module.exports=function(t,min,max){return min+(max-min)*SmootherStep(t,0,1)}},function(module,exports,__webpack_require__){module.exports={GetNext:__webpack_require__(330),IsSize:__webpack_require__(129),IsValue:__webpack_require__(751)}},function(module,exports){module.exports=function(value){return value>0&&0==(value&value-1)}},function(module,exports,__webpack_require__){module.exports={Ceil:__webpack_require__(331),Floor:__webpack_require__(105),To:__webpack_require__(753)}},function(module,exports){module.exports=function(value,gap,start,divide){return void 0===start&&(start=0),0===gap?value:(value-=start,value=gap*Math.round(value/gap),divide?(start+value)/gap:start+value)}},function(module,exports,__webpack_require__){var RandomDataGenerator=new(__webpack_require__(0))({initialize:function(seeds){void 0===seeds&&(seeds=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],seeds&&this.init(seeds)},rnd:function(){var t=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|t,this.s0=this.s1,this.s1=this.s2,this.s2=t-this.c,this.s2},hash:function(data){var h,n=this.n;data=data.toString();for(var i=0;i<data.length;i++)h=.02519603282416938*(n+=data.charCodeAt(i)),h-=n=h>>>0,n=(h*=n)>>>0,n+=4294967296*(h-=n);return this.n=n,2.3283064365386963e-10*(n>>>0)},init:function(seeds){"string"==typeof seeds?this.state(seeds):this.sow(seeds)},sow:function(seeds){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,seeds)for(var i=0;i<seeds.length&&null!=seeds[i];i++){var seed=seeds[i];this.s0-=this.hash(seed),this.s0+=~~(this.s0<0),this.s1-=this.hash(seed),this.s1+=~~(this.s1<0),this.s2-=this.hash(seed),this.s2+=~~(this.s2<0)}},integer:function(){return 4294967296*this.rnd()},frac:function(){return this.rnd()+11102230246251565e-32*(2097152*this.rnd()|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(min,max){return Math.floor(this.realInRange(0,max-min+1)+min)},between:function(min,max){return Math.floor(this.realInRange(0,max-min+1)+min)},realInRange:function(min,max){return this.frac()*(max-min)+min},normal:function(){return 1-2*this.frac()},uuid:function(){var a="",b="";for(b=a="";a++<36;b+=~a%5|3*a&4?(15^a?8^this.frac()*(20^a?16:4):4).toString(16):"-");return b},pick:function(array){return array[this.integerInRange(0,array.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(array){return array[~~(Math.pow(this.frac(),2)*(array.length-1)+.5)]},timestamp:function(min,max){return this.realInRange(min||9466848e5,max||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(state){return"string"==typeof state&&state.match(/^!rnd/)&&(state=state.split(","),this.c=parseFloat(state[1]),this.s0=parseFloat(state[2]),this.s1=parseFloat(state[3]),this.s2=parseFloat(state[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(array){for(var i=array.length-1;i>0;i--){var randomIndex=Math.floor(this.frac()*(i+1)),itemAtIndex=array[randomIndex];array[randomIndex]=array[i],array[i]=itemAtIndex}return array}});module.exports=RandomDataGenerator},function(module,exports){module.exports=function(values){for(var sum=0,i=0;i<values.length;i++)sum+=+values[i];return sum/values.length}},function(module,exports){module.exports=function(value,place,base){void 0===place&&(place=0),void 0===base&&(base=10);var p=Math.pow(base,-place);return Math.ceil(value*p)/p}},function(module,exports){module.exports=function(a,b){return Math.abs(a-b)}},function(module,exports){module.exports=function(value,place,base){void 0===place&&(place=0),void 0===base&&(base=10);var p=Math.pow(base,-place);return Math.floor(value*p)/p}},function(module,exports){module.exports=function(distance,time){return distance/time/1e3}},function(module,exports){module.exports=function(value){return value==parseFloat(value)?!(value%2):void 0}},function(module,exports){module.exports=function(value){return value===parseFloat(value)?!(value%2):void 0}},function(module,exports){module.exports=function(value,amount,max){return Math.min(value+amount,max)}},function(module,exports){module.exports=function(value,amount,min){return Math.max(value-amount,min)}},function(module,exports){module.exports=function(value,min,max,upperMax){void 0===max&&(max=min+1);var percentage=(value-min)/(max-min);return percentage>1?void 0!==upperMax?(percentage=(upperMax-value)/(upperMax-max))<0&&(percentage=0):percentage=1:percentage<0&&(percentage=0),percentage}},function(module,exports){module.exports=function(vector,scale){void 0===scale&&(scale=1);var r=2*Math.random()*Math.PI;return vector.x=Math.cos(r)*scale,vector.y=Math.sin(r)*scale,vector}},function(module,exports){module.exports=function(value,place,base){void 0===place&&(place=0),void 0===base&&(base=10);var p=Math.pow(base,-place);return Math.round(value*p)/p}},function(module,exports){module.exports=function(length,sinAmp,cosAmp,frequency){void 0===sinAmp&&(sinAmp=1),void 0===cosAmp&&(cosAmp=1),void 0===frequency&&(frequency=1),frequency*=Math.PI/length;for(var cos=[],sin=[],c=0;c<length;c++)sinAmp+=(cosAmp-=sinAmp*frequency)*frequency,cos[c]=cosAmp,sin[c]=sinAmp;return{sin:sin,cos:cos,length:length}}},function(module,exports,__webpack_require__){var Vector2=__webpack_require__(3);module.exports=function(index,width,height,out){void 0===out&&(out=new Vector2);var x=0,y=0;return index>0&&index<=width*height&&(x=index>width-1?index-(y=Math.floor(index/width))*width:index,out.set(x,y)),out}},function(module,exports){module.exports=function(a,b,tolerance){return Math.abs(a-b)<=tolerance}},function(module,exports){module.exports="addtexture"},function(module,exports){module.exports="onerror"},function(module,exports){module.exports="onload"},function(module,exports){module.exports="ready"},function(module,exports){module.exports="removetexture"},function(module,exports){module.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join("\n")},function(module,exports){module.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join("\n")},function(module,exports){module.exports=["#define SHADER_NAME PHASER_FORWARD_DIFFUSE_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.rgb * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","","}",""].join("\n")},function(module,exports){module.exports=["#define SHADER_NAME PHASER_TEXTURE_TINT_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.rgb * outTint.a, outTint.a);","    vec4 color = texture;","","    if (outTintEffect == 0.0)","    {","        //  Multiply texture tint","        color = texture * texel;","    }","    else if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.rgb * outTint.a, texture.a);","        color.a = texture.a * texel.a;","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join("\n")},function(module,exports){module.exports=["#define SHADER_NAME PHASER_TEXTURE_TINT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform mat4 uModelMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}","",""].join("\n")},function(module,exports,__webpack_require__){module.exports={GenerateTexture:__webpack_require__(353),Palettes:__webpack_require__(781)}},function(module,exports,__webpack_require__){module.exports={ARNE16:__webpack_require__(354),C64:__webpack_require__(782),CGA:__webpack_require__(783),JMP:__webpack_require__(784),MSX:__webpack_require__(785)}},function(module,exports){module.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},function(module,exports){module.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},function(module,exports){module.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},function(module,exports){module.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},function(module,exports,__webpack_require__){module.exports={Path:__webpack_require__(787),CubicBezier:__webpack_require__(355),Curve:__webpack_require__(87),Ellipse:__webpack_require__(356),Line:__webpack_require__(357),QuadraticBezier:__webpack_require__(358),Spline:__webpack_require__(359)}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),CubicBezierCurve=__webpack_require__(355),EllipseCurve=__webpack_require__(356),GameObjectFactory=__webpack_require__(6),LineCurve=__webpack_require__(357),MovePathTo=__webpack_require__(788),QuadraticBezierCurve=__webpack_require__(358),Rectangle=__webpack_require__(11),SplineCurve=__webpack_require__(359),Vector2=__webpack_require__(3),Path=new Class({initialize:function(x,y){void 0===x&&(x=0),void 0===y&&(y=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new Vector2,this._tmpVec2A=new Vector2,this._tmpVec2B=new Vector2,"object"==typeof x?this.fromJSON(x):this.startPoint.set(x,y)},add:function(curve){return this.curves.push(curve),this},circleTo:function(radius,clockwise,rotation){return void 0===clockwise&&(clockwise=!1),this.ellipseTo(radius,radius,0,360,clockwise,rotation)},closePath:function(){var startPoint=this.curves[0].getPoint(0),endPoint=this.curves[this.curves.length-1].getPoint(1);return startPoint.equals(endPoint)||this.curves.push(new LineCurve(endPoint,startPoint)),this},cubicBezierTo:function(x,y,control1X,control1Y,control2X,control2Y){var p1,p2,p3,p0=this.getEndPoint();return x instanceof Vector2?(p1=x,p2=y,p3=control1X):(p1=new Vector2(control1X,control1Y),p2=new Vector2(control2X,control2Y),p3=new Vector2(x,y)),this.add(new CubicBezierCurve(p0,p1,p2,p3))},quadraticBezierTo:function(x,y,controlX,controlY){var p1,p2,p0=this.getEndPoint();return x instanceof Vector2?(p1=x,p2=y):(p1=new Vector2(controlX,controlY),p2=new Vector2(x,y)),this.add(new QuadraticBezierCurve(p0,p1,p2))},draw:function(graphics,pointsTotal){for(var i=0;i<this.curves.length;i++){var curve=this.curves[i];curve.active&&curve.draw(graphics,pointsTotal)}return graphics},ellipseTo:function(xRadius,yRadius,startAngle,endAngle,clockwise,rotation){var ellipse=new EllipseCurve(0,0,xRadius,yRadius,startAngle,endAngle,clockwise,rotation),end=this.getEndPoint(this._tmpVec2A),start=ellipse.getStartPoint(this._tmpVec2B);return end.subtract(start),ellipse.x=end.x,ellipse.y=end.y,this.add(ellipse)},fromJSON:function(data){this.curves=[],this.cacheLengths=[],this.startPoint.set(data.x,data.y),this.autoClose=data.autoClose;for(var i=0;i<data.curves.length;i++){var curve=data.curves[i];switch(curve.type){case"LineCurve":this.add(LineCurve.fromJSON(curve));break;case"EllipseCurve":this.add(EllipseCurve.fromJSON(curve));break;case"SplineCurve":this.add(SplineCurve.fromJSON(curve));break;case"CubicBezierCurve":this.add(CubicBezierCurve.fromJSON(curve));break;case"QuadraticBezierCurve":this.add(QuadraticBezierCurve.fromJSON(curve))}}return this},getBounds:function(out,accuracy){void 0===out&&(out=new Rectangle),void 0===accuracy&&(accuracy=16),out.x=Number.MAX_VALUE,out.y=Number.MAX_VALUE;for(var bounds=new Rectangle,maxRight=Number.MIN_SAFE_INTEGER,maxBottom=Number.MIN_SAFE_INTEGER,i=0;i<this.curves.length;i++){var curve=this.curves[i];curve.active&&(curve.getBounds(bounds,accuracy),out.x=Math.min(out.x,bounds.x),out.y=Math.min(out.y,bounds.y),maxRight=Math.max(maxRight,bounds.right),maxBottom=Math.max(maxBottom,bounds.bottom))}return out.right=maxRight,out.bottom=maxBottom,out},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var lengths=[],sums=0,i=0;i<this.curves.length;i++)sums+=this.curves[i].getLength(),lengths.push(sums);return this.cacheLengths=lengths,lengths},getEndPoint:function(out){return void 0===out&&(out=new Vector2),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,out):out.copy(this.startPoint),out},getLength:function(){var lens=this.getCurveLengths();return lens[lens.length-1]},getPoint:function(t,out){void 0===out&&(out=new Vector2);for(var d=t*this.getLength(),curveLengths=this.getCurveLengths(),i=0;i<curveLengths.length;){if(curveLengths[i]>=d){var diff=curveLengths[i]-d,curve=this.curves[i],segmentLength=curve.getLength(),u=0===segmentLength?0:1-diff/segmentLength;return curve.getPointAt(u,out)}i++}return null},getPoints:function(divisions){void 0===divisions&&(divisions=12);for(var last,points=[],i=0;i<this.curves.length;i++){var curve=this.curves[i];if(curve.active)for(var resolution=curve.getResolution(divisions),pts=curve.getPoints(resolution),j=0;j<pts.length;j++){var point=pts[j];last&&last.equals(point)||(points.push(point),last=point)}}return this.autoClose&&points.length>1&&!points[points.length-1].equals(points[0])&&points.push(points[0]),points},getRandomPoint:function(out){return void 0===out&&(out=new Vector2),this.getPoint(Math.random(),out)},getSpacedPoints:function(divisions){void 0===divisions&&(divisions=40);for(var points=[],i=0;i<=divisions;i++)points.push(this.getPoint(i/divisions));return this.autoClose&&points.push(points[0]),points},getStartPoint:function(out){return void 0===out&&(out=new Vector2),out.copy(this.startPoint)},lineTo:function(x,y){x instanceof Vector2?this._tmpVec2B.copy(x):this._tmpVec2B.set(x,y);var end=this.getEndPoint(this._tmpVec2A);return this.add(new LineCurve([end.x,end.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(points){return points.unshift(this.getEndPoint()),this.add(new SplineCurve(points))},moveTo:function(x,y){return this.add(new MovePathTo(x,y))},toJSON:function(){for(var out=[],i=0;i<this.curves.length;i++)out.push(this.curves[i].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:out}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});GameObjectFactory.register("path",(function(x,y){return new Path(x,y)})),module.exports=Path},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Vector2=__webpack_require__(3),MoveTo=new Class({initialize:function(x,y){this.active=!1,this.p0=new Vector2(x,y)},getPoint:function(t,out){return void 0===out&&(out=new Vector2),out.copy(this.p0)},getPointAt:function(u,out){return this.getPoint(u,out)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});module.exports=MoveTo},function(module,exports,__webpack_require__){module.exports={DataManager:__webpack_require__(103),DataManagerPlugin:__webpack_require__(790),Events:__webpack_require__(287)}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),DataManager=__webpack_require__(103),PluginCache=__webpack_require__(18),SceneEvents=__webpack_require__(20),DataManagerPlugin=new Class({Extends:DataManager,initialize:function(scene){DataManager.call(this,scene,scene.sys.events),this.scene=scene,this.systems=scene.sys,scene.sys.events.once(SceneEvents.BOOT,this.boot,this),scene.sys.events.on(SceneEvents.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(SceneEvents.DESTROY,this.destroy,this)},start:function(){this.events.once(SceneEvents.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(SceneEvents.SHUTDOWN,this.shutdown,this)},destroy:function(){DataManager.prototype.destroy.call(this),this.events.off(SceneEvents.START,this.start,this),this.scene=null,this.systems=null}});PluginCache.register("DataManagerPlugin",DataManagerPlugin,"data"),module.exports=DataManagerPlugin},function(module,exports,__webpack_require__){module.exports={Align:__webpack_require__(792),BaseShader:__webpack_require__(360),Bounds:__webpack_require__(807),Canvas:__webpack_require__(810),Color:__webpack_require__(361),Masks:__webpack_require__(819)}},function(module,exports,__webpack_require__){var CONST=__webpack_require__(159),Extend=__webpack_require__(17),Align={In:__webpack_require__(793),To:__webpack_require__(794)};Align=Extend(!1,Align,CONST),module.exports=Align},function(module,exports,__webpack_require__){module.exports={BottomCenter:__webpack_require__(258),BottomLeft:__webpack_require__(259),BottomRight:__webpack_require__(260),Center:__webpack_require__(261),LeftCenter:__webpack_require__(263),QuickSet:__webpack_require__(257),RightCenter:__webpack_require__(264),TopCenter:__webpack_require__(265),TopLeft:__webpack_require__(266),TopRight:__webpack_require__(267)}},function(module,exports,__webpack_require__){module.exports={BottomCenter:__webpack_require__(795),BottomLeft:__webpack_require__(796),BottomRight:__webpack_require__(797),LeftBottom:__webpack_require__(798),LeftCenter:__webpack_require__(799),LeftTop:__webpack_require__(800),RightBottom:__webpack_require__(801),RightCenter:__webpack_require__(802),RightTop:__webpack_require__(803),TopCenter:__webpack_require__(804),TopLeft:__webpack_require__(805),TopRight:__webpack_require__(806)}},function(module,exports,__webpack_require__){var GetBottom=__webpack_require__(44),GetCenterX=__webpack_require__(80),SetCenterX=__webpack_require__(81),SetTop=__webpack_require__(51);module.exports=function(gameObject,alignTo,offsetX,offsetY){return void 0===offsetX&&(offsetX=0),void 0===offsetY&&(offsetY=0),SetCenterX(gameObject,GetCenterX(alignTo)+offsetX),SetTop(gameObject,GetBottom(alignTo)+offsetY),gameObject}},function(module,exports,__webpack_require__){var GetBottom=__webpack_require__(44),GetLeft=__webpack_require__(46),SetLeft=__webpack_require__(47),SetTop=__webpack_require__(51);module.exports=function(gameObject,alignTo,offsetX,offsetY){return void 0===offsetX&&(offsetX=0),void 0===offsetY&&(offsetY=0),SetLeft(gameObject,GetLeft(alignTo)-offsetX),SetTop(gameObject,GetBottom(alignTo)+offsetY),gameObject}},function(module,exports,__webpack_require__){var GetBottom=__webpack_require__(44),GetRight=__webpack_require__(48),SetRight=__webpack_require__(49),SetTop=__webpack_require__(51);module.exports=function(gameObject,alignTo,offsetX,offsetY){return void 0===offsetX&&(offsetX=0),void 0===offsetY&&(offsetY=0),SetRight(gameObject,GetRight(alignTo)+offsetX),SetTop(gameObject,GetBottom(alignTo)+offsetY),gameObject}},function(module,exports,__webpack_require__){var GetBottom=__webpack_require__(44),GetLeft=__webpack_require__(46),SetBottom=__webpack_require__(45),SetRight=__webpack_require__(49);module.exports=function(gameObject,alignTo,offsetX,offsetY){return void 0===offsetX&&(offsetX=0),void 0===offsetY&&(offsetY=0),SetRight(gameObject,GetLeft(alignTo)-offsetX),SetBottom(gameObject,GetBottom(alignTo)+offsetY),gameObject}},function(module,exports,__webpack_require__){var GetCenterY=__webpack_require__(83),GetLeft=__webpack_require__(46),SetCenterY=__webpack_require__(82),SetRight=__webpack_require__(49);module.exports=function(gameObject,alignTo,offsetX,offsetY){return void 0===offsetX&&(offsetX=0),void 0===offsetY&&(offsetY=0),SetRight(gameObject,GetLeft(alignTo)-offsetX),SetCenterY(gameObject,GetCenterY(alignTo)+offsetY),gameObject}},function(module,exports,__webpack_require__){var GetLeft=__webpack_require__(46),GetTop=__webpack_require__(50),SetRight=__webpack_require__(49),SetTop=__webpack_require__(51);module.exports=function(gameObject,alignTo,offsetX,offsetY){return void 0===offsetX&&(offsetX=0),void 0===offsetY&&(offsetY=0),SetRight(gameObject,GetLeft(alignTo)-offsetX),SetTop(gameObject,GetTop(alignTo)-offsetY),gameObject}},function(module,exports,__webpack_require__){var GetBottom=__webpack_require__(44),GetRight=__webpack_require__(48),SetBottom=__webpack_require__(45),SetLeft=__webpack_require__(47);module.exports=function(gameObject,alignTo,offsetX,offsetY){return void 0===offsetX&&(offsetX=0),void 0===offsetY&&(offsetY=0),SetLeft(gameObject,GetRight(alignTo)+offsetX),SetBottom(gameObject,GetBottom(alignTo)+offsetY),gameObject}},function(module,exports,__webpack_require__){var GetCenterY=__webpack_require__(83),GetRight=__webpack_require__(48),SetCenterY=__webpack_require__(82),SetLeft=__webpack_require__(47);module.exports=function(gameObject,alignTo,offsetX,offsetY){return void 0===offsetX&&(offsetX=0),void 0===offsetY&&(offsetY=0),SetLeft(gameObject,GetRight(alignTo)+offsetX),SetCenterY(gameObject,GetCenterY(alignTo)+offsetY),gameObject}},function(module,exports,__webpack_require__){var GetRight=__webpack_require__(48),GetTop=__webpack_require__(50),SetLeft=__webpack_require__(47),SetTop=__webpack_require__(51);module.exports=function(gameObject,alignTo,offsetX,offsetY){return void 0===offsetX&&(offsetX=0),void 0===offsetY&&(offsetY=0),SetLeft(gameObject,GetRight(alignTo)+offsetX),SetTop(gameObject,GetTop(alignTo)-offsetY),gameObject}},function(module,exports,__webpack_require__){var GetCenterX=__webpack_require__(80),GetTop=__webpack_require__(50),SetBottom=__webpack_require__(45),SetCenterX=__webpack_require__(81);module.exports=function(gameObject,alignTo,offsetX,offsetY){return void 0===offsetX&&(offsetX=0),void 0===offsetY&&(offsetY=0),SetCenterX(gameObject,GetCenterX(alignTo)+offsetX),SetBottom(gameObject,GetTop(alignTo)-offsetY),gameObject}},function(module,exports,__webpack_require__){var GetLeft=__webpack_require__(46),GetTop=__webpack_require__(50),SetBottom=__webpack_require__(45),SetLeft=__webpack_require__(47);module.exports=function(gameObject,alignTo,offsetX,offsetY){return void 0===offsetX&&(offsetX=0),void 0===offsetY&&(offsetY=0),SetLeft(gameObject,GetLeft(alignTo)-offsetX),SetBottom(gameObject,GetTop(alignTo)-offsetY),gameObject}},function(module,exports,__webpack_require__){var GetRight=__webpack_require__(48),GetTop=__webpack_require__(50),SetBottom=__webpack_require__(45),SetRight=__webpack_require__(49);module.exports=function(gameObject,alignTo,offsetX,offsetY){return void 0===offsetX&&(offsetX=0),void 0===offsetY&&(offsetY=0),SetRight(gameObject,GetRight(alignTo)+offsetX),SetBottom(gameObject,GetTop(alignTo)-offsetY),gameObject}},function(module,exports,__webpack_require__){module.exports={CenterOn:__webpack_require__(262),GetBottom:__webpack_require__(44),GetCenterX:__webpack_require__(80),GetCenterY:__webpack_require__(83),GetLeft:__webpack_require__(46),GetOffsetX:__webpack_require__(808),GetOffsetY:__webpack_require__(809),GetRight:__webpack_require__(48),GetTop:__webpack_require__(50),SetBottom:__webpack_require__(45),SetCenterX:__webpack_require__(81),SetCenterY:__webpack_require__(82),SetLeft:__webpack_require__(47),SetRight:__webpack_require__(49),SetTop:__webpack_require__(51)}},function(module,exports){module.exports=function(gameObject){return gameObject.width*gameObject.originX}},function(module,exports){module.exports=function(gameObject){return gameObject.height*gameObject.originY}},function(module,exports,__webpack_require__){module.exports={CanvasInterpolation:__webpack_require__(342),CanvasPool:__webpack_require__(28),Smoothing:__webpack_require__(125),TouchAction:__webpack_require__(811),UserSelect:__webpack_require__(812)}},function(module,exports){module.exports=function(canvas,value){return void 0===value&&(value="none"),canvas.style.msTouchAction=value,canvas.style["ms-touch-action"]=value,canvas.style["touch-action"]=value,canvas}},function(module,exports){module.exports=function(canvas,value){void 0===value&&(value="none");return["-webkit-","-khtml-","-moz-","-ms-",""].forEach((function(vendor){canvas.style[vendor+"user-select"]=value})),canvas.style["-webkit-touch-callout"]=value,canvas.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",canvas}},function(module,exports){module.exports=function(color){var output={r:color>>16&255,g:color>>8&255,b:255&color,a:255};return color>16777215&&(output.a=color>>>24),output}},function(module,exports,__webpack_require__){var Color=__webpack_require__(37),HueToComponent=__webpack_require__(363);module.exports=function(h,s,l){var r=l,g=l,b=l;if(0!==s){var q=l<.5?l*(1+s):l+s-l*s,p=2*l-q;r=HueToComponent(p,q,h+1/3),g=HueToComponent(p,q,h),b=HueToComponent(p,q,h-1/3)}return(new Color).setGLTo(r,g,b,1)}},function(module,exports,__webpack_require__){var HSVToRGB=__webpack_require__(178);module.exports=function(s,v){void 0===s&&(s=1),void 0===v&&(v=1);for(var colors=[],c=0;c<=359;c++)colors.push(HSVToRGB(c/359,s,v));return colors}},function(module,exports,__webpack_require__){var Linear=__webpack_require__(126),RGBWithRGB=function(r1,g1,b1,r2,g2,b2,length,index){void 0===length&&(length=100),void 0===index&&(index=0);var t=index/length;return{r:Linear(r1,r2,t),g:Linear(g1,g2,t),b:Linear(b1,b2,t)}};module.exports={RGBWithRGB:RGBWithRGB,ColorWithRGB:function(color,r,g,b,length,index){return void 0===length&&(length=100),void 0===index&&(index=0),RGBWithRGB(color.r,color.g,color.b,r,g,b,length,index)},ColorWithColor:function(color1,color2,length,index){return void 0===length&&(length=100),void 0===index&&(index=0),RGBWithRGB(color1.r,color1.g,color1.b,color2.r,color2.g,color2.b,length,index)}}},function(module,exports,__webpack_require__){var Between=__webpack_require__(185),Color=__webpack_require__(37);module.exports=function(min,max){return void 0===min&&(min=0),void 0===max&&(max=255),new Color(Between(min,max),Between(min,max),Between(min,max))}},function(module,exports,__webpack_require__){var ComponentToHex=__webpack_require__(362);module.exports=function(r,g,b,a,prefix){return void 0===a&&(a=255),void 0===prefix&&(prefix="#"),"#"===prefix?"#"+((1<<24)+(r<<16)+(g<<8)+b).toString(16).slice(1):"0x"+ComponentToHex(a)+ComponentToHex(r)+ComponentToHex(g)+ComponentToHex(b)}},function(module,exports,__webpack_require__){module.exports={BitmapMask:__webpack_require__(281),GeometryMask:__webpack_require__(282)}},function(module,exports,__webpack_require__){var Dom={AddToDOM:__webpack_require__(132),DOMContentLoaded:__webpack_require__(364),GetScreenOrientation:__webpack_require__(365),GetTarget:__webpack_require__(370),ParseXML:__webpack_require__(371),RemoveFromDOM:__webpack_require__(195),RequestAnimationFrame:__webpack_require__(351)};module.exports=Dom},function(module,exports,__webpack_require__){module.exports={EventEmitter:__webpack_require__(822)}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),EE=__webpack_require__(9),PluginCache=__webpack_require__(18),EventEmitter=new Class({Extends:EE,initialize:function(){EE.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});PluginCache.register("EventEmitter",EventEmitter,"events"),module.exports=EventEmitter},function(module,exports,__webpack_require__){var AddToDOM=__webpack_require__(132),AnimationManager=__webpack_require__(292),CacheManager=__webpack_require__(295),CanvasPool=__webpack_require__(28),Class=__webpack_require__(0),Config=__webpack_require__(317),CreateDOMContainer=__webpack_require__(824),CreateRenderer=__webpack_require__(341),DataManager=__webpack_require__(103),DebugHeader=__webpack_require__(349),Device=__webpack_require__(318),DOMContentLoaded=__webpack_require__(364),EventEmitter=__webpack_require__(9),Events=__webpack_require__(23),InputManager=__webpack_require__(372),PluginCache=__webpack_require__(18),PluginManager=__webpack_require__(377),ScaleManager=__webpack_require__(378),SceneManager=__webpack_require__(380),TextureEvents=__webpack_require__(131),TextureManager=__webpack_require__(383),TimeStep=__webpack_require__(350),VisibilityHandler=__webpack_require__(352),SoundManagerCreator=__webpack_require__(387),FacebookInstantGamesPlugin=__webpack_require__(395),Game=new Class({initialize:function(config){this.config=new Config(config),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new EventEmitter,this.anims=new AnimationManager(this),this.textures=new TextureManager(this),this.cache=new CacheManager(this),this.registry=new DataManager(this),this.input=new InputManager(this,this.config),this.scene=new SceneManager(this,this.config.sceneConfig),this.device=Device,this.scale=new ScaleManager(this,this.config),this.sound=null,this.sound=SoundManagerCreator.create(this),this.loop=new TimeStep(this,this.config.fps),this.plugins=new PluginManager(this,this.config),this.facebook=new FacebookInstantGamesPlugin(this),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,DOMContentLoaded(this.boot.bind(this))},boot:function(){PluginCache.hasCore("EventEmitter")?(this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),CreateRenderer(this),CreateDOMContainer(this),DebugHeader(this),AddToDOM(this.canvas,this.config.parent),this.textures.once(TextureEvents.READY,this.texturesReady,this),this.events.emit(Events.BOOT)):console.warn("Aborting. Core Plugins missing.")},texturesReady:function(){this.events.emit(Events.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),VisibilityHandler(this);var eventEmitter=this.events;eventEmitter.on(Events.HIDDEN,this.onHidden,this),eventEmitter.on(Events.VISIBLE,this.onVisible,this),eventEmitter.on(Events.BLUR,this.onBlur,this),eventEmitter.on(Events.FOCUS,this.onFocus,this)},step:function(time,delta){if(this.pendingDestroy)return this.runDestroy();var eventEmitter=this.events;eventEmitter.emit(Events.PRE_STEP,time,delta),eventEmitter.emit(Events.STEP,time,delta),this.scene.update(time,delta),eventEmitter.emit(Events.POST_STEP,time,delta);var renderer=this.renderer;renderer.preRender(),eventEmitter.emit(Events.PRE_RENDER,renderer,time,delta),this.scene.render(renderer),renderer.postRender(),eventEmitter.emit(Events.POST_RENDER,renderer,time,delta)},headlessStep:function(time,delta){var eventEmitter=this.events;eventEmitter.emit(Events.PRE_STEP,time,delta),eventEmitter.emit(Events.STEP,time,delta),this.scene.update(time,delta),eventEmitter.emit(Events.POST_STEP,time,delta),eventEmitter.emit(Events.PRE_RENDER),eventEmitter.emit(Events.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(Events.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(Events.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(removeCanvas,noReturn){void 0===noReturn&&(noReturn=!1),this.pendingDestroy=!0,this.removeCanvas=removeCanvas,this.noReturn=noReturn},runDestroy:function(){this.events.emit(Events.DESTROY),this.events.removeAllListeners(),this.scene.destroy(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(CanvasPool.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});module.exports=Game},function(module,exports,__webpack_require__){var AddToDOM=__webpack_require__(132);module.exports=function(game){var config=game.config;if(config.parent&&config.domCreateContainer){var div=document.createElement("div");div.style.cssText=["display: block;","width: "+game.scale.width+"px;","height: "+game.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: none;","transform: scale(1);","transform-origin: left top;"].join(" "),game.domContainer=div,AddToDOM(div,config.parent)}}},function(module,exports){module.exports="boot"},function(module,exports){module.exports="destroy"},function(module,exports){module.exports="dragend"},function(module,exports){module.exports="dragenter"},function(module,exports){module.exports="drag"},function(module,exports){module.exports="dragleave"},function(module,exports){module.exports="dragover"},function(module,exports){module.exports="dragstart"},function(module,exports){module.exports="drop"},function(module,exports){module.exports="gameout"},function(module,exports){module.exports="gameover"},function(module,exports){module.exports="gameobjectdown"},function(module,exports){module.exports="dragend"},function(module,exports){module.exports="dragenter"},function(module,exports){module.exports="drag"},function(module,exports){module.exports="dragleave"},function(module,exports){module.exports="dragover"},function(module,exports){module.exports="dragstart"},function(module,exports){module.exports="drop"},function(module,exports){module.exports="gameobjectmove"},function(module,exports){module.exports="gameobjectout"},function(module,exports){module.exports="gameobjectover"},function(module,exports){module.exports="pointerdown"},function(module,exports){module.exports="pointermove"},function(module,exports){module.exports="pointerout"},function(module,exports){module.exports="pointerover"},function(module,exports){module.exports="pointerup"},function(module,exports){module.exports="wheel"},function(module,exports){module.exports="gameobjectup"},function(module,exports){module.exports="gameobjectwheel"},function(module,exports){module.exports="boot"},function(module,exports){module.exports="process"},function(module,exports){module.exports="update"},function(module,exports){module.exports="pointerdown"},function(module,exports){module.exports="pointerdownoutside"},function(module,exports){module.exports="pointermove"},function(module,exports){module.exports="pointerout"},function(module,exports){module.exports="pointerover"},function(module,exports){module.exports="pointerup"},function(module,exports){module.exports="pointerupoutside"},function(module,exports){module.exports="wheel"},function(module,exports){module.exports="pointerlockchange"},function(module,exports){module.exports="preupdate"},function(module,exports){module.exports="shutdown"},function(module,exports){module.exports="start"},function(module,exports){module.exports="update"},function(module,exports){module.exports=function(iOS){if(!iOS)return window.innerHeight;var axis=Math.abs(window.orientation),size={w:0,h:0},ruler=document.createElement("div");return ruler.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(ruler),size.w=90===axis?ruler.offsetHeight:window.innerWidth,size.h=90===axis?window.innerWidth:ruler.offsetHeight,document.documentElement.removeChild(ruler),ruler=null,90!==Math.abs(window.orientation)?size.h:size.w}},function(module,exports){module.exports="addfile"},function(module,exports){module.exports="complete"},function(module,exports){module.exports="filecomplete"},function(module,exports){module.exports="filecomplete-"},function(module,exports){module.exports="loaderror"},function(module,exports){module.exports="load"},function(module,exports){module.exports="fileprogress"},function(module,exports){module.exports="postprocess"},function(module,exports){module.exports="progress"},function(module,exports){module.exports="start"},function(module,exports,__webpack_require__){var GetFastValue=__webpack_require__(1),UppercaseFirst=__webpack_require__(198);module.exports=function(sys){var defaultSystem=sys.game.config.defaultPhysicsSystem,sceneSystems=GetFastValue(sys.settings,"physics",!1);if(defaultSystem||sceneSystems){var output=[];if(defaultSystem&&output.push(UppercaseFirst(defaultSystem+"Physics")),sceneSystems)for(var key in sceneSystems)key=UppercaseFirst(key.concat("Physics")),-1===output.indexOf(key)&&output.push(key);return output}}},function(module,exports,__webpack_require__){var GetFastValue=__webpack_require__(1);module.exports=function(sys){var defaultPlugins=sys.plugins.getDefaultScenePlugins(),scenePlugins=GetFastValue(sys.settings,"plugins",!1);return Array.isArray(scenePlugins)?scenePlugins:defaultPlugins||[]}},function(module,exports){var InjectionMap={game:"game",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter",cameras3d:"cameras3d",facebook:"facebook"};module.exports=InjectionMap},function(module,exports){module.exports=function(texture,sourceIndex,xml){if(xml.getElementsByTagName("TextureAtlas")){var source=texture.source[sourceIndex];texture.add("__BASE",sourceIndex,0,0,source.width,source.height);for(var newFrame,frames=xml.getElementsByTagName("SubTexture"),i=0;i<frames.length;i++){var frame=frames[i].attributes,name=frame.name.value,x=parseInt(frame.x.value,10),y=parseInt(frame.y.value,10),width=parseInt(frame.width.value,10),height=parseInt(frame.height.value,10);if(newFrame=texture.add(name,sourceIndex,x,y,width,height),frame.frameX){var frameX=Math.abs(parseInt(frame.frameX.value,10)),frameY=Math.abs(parseInt(frame.frameY.value,10)),frameWidth=parseInt(frame.frameWidth.value,10),frameHeight=parseInt(frame.frameHeight.value,10);newFrame.setTrim(width,height,frameX,frameY,frameWidth,frameHeight)}}return texture}console.warn("Invalid Texture Atlas XML given")}},function(module,exports){module.exports=function(texture,sourceIndex){var source=texture.source[sourceIndex];return texture.add("__BASE",sourceIndex,0,0,source.width,source.height),texture}},function(module,exports){module.exports=function(texture,sourceIndex){var source=texture.source[sourceIndex];return texture.add("__BASE",sourceIndex,0,0,source.width,source.height),texture}},function(module,exports,__webpack_require__){var Clone=__webpack_require__(71);module.exports=function(texture,sourceIndex,json){if(json.frames||json.textures){var source=texture.source[sourceIndex];texture.add("__BASE",sourceIndex,0,0,source.width,source.height);for(var newFrame,frames=Array.isArray(json.textures)?json.textures[sourceIndex].frames:json.frames,i=0;i<frames.length;i++){var src=frames[i];newFrame=texture.add(src.filename,sourceIndex,src.frame.x,src.frame.y,src.frame.w,src.frame.h),src.trimmed&&newFrame.setTrim(src.sourceSize.w,src.sourceSize.h,src.spriteSourceSize.x,src.spriteSourceSize.y,src.spriteSourceSize.w,src.spriteSourceSize.h),src.rotated&&(newFrame.rotated=!0,newFrame.updateUVsInverted()),src.anchor&&(newFrame.customPivot=!0,newFrame.pivotX=src.anchor.x,newFrame.pivotY=src.anchor.y),newFrame.customData=Clone(src)}for(var dataKey in json)"frames"!==dataKey&&(Array.isArray(json[dataKey])?texture.customData[dataKey]=json[dataKey].slice(0):texture.customData[dataKey]=json[dataKey]);return texture}console.warn("Invalid Texture Atlas JSON Array")}},function(module,exports,__webpack_require__){var Clone=__webpack_require__(71);module.exports=function(texture,sourceIndex,json){if(json.frames){var source=texture.source[sourceIndex];texture.add("__BASE",sourceIndex,0,0,source.width,source.height);var newFrame,frames=json.frames;for(var key in frames){var src=frames[key];newFrame=texture.add(key,sourceIndex,src.frame.x,src.frame.y,src.frame.w,src.frame.h),src.trimmed&&newFrame.setTrim(src.sourceSize.w,src.sourceSize.h,src.spriteSourceSize.x,src.spriteSourceSize.y,src.spriteSourceSize.w,src.spriteSourceSize.h),src.rotated&&(newFrame.rotated=!0,newFrame.updateUVsInverted()),newFrame.customData=Clone(src)}for(var dataKey in json)"frames"!==dataKey&&(Array.isArray(json[dataKey])?texture.customData[dataKey]=json[dataKey].slice(0):texture.customData[dataKey]=json[dataKey]);return texture}console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object")}},function(module,exports,__webpack_require__){var GetFastValue=__webpack_require__(1);module.exports=function(texture,sourceIndex,x,y,width,height,config){var frameWidth=GetFastValue(config,"frameWidth",null),frameHeight=GetFastValue(config,"frameHeight",frameWidth);if(null===frameWidth)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var source=texture.source[sourceIndex];texture.add("__BASE",sourceIndex,0,0,source.width,source.height);var startFrame=GetFastValue(config,"startFrame",0),endFrame=GetFastValue(config,"endFrame",-1),margin=GetFastValue(config,"margin",0),spacing=GetFastValue(config,"spacing",0),total=Math.floor((width-margin+spacing)/(frameWidth+spacing))*Math.floor((height-margin+spacing)/(frameHeight+spacing));0===total&&console.warn("SpriteSheet frame dimensions will result in zero frames."),(startFrame>total||startFrame<-total)&&(startFrame=0),startFrame<0&&(startFrame=total+startFrame),-1!==endFrame&&(total=startFrame+(endFrame+1));for(var fx=margin,fy=margin,ax=0,ay=0,i=0;i<total;i++){ax=0,ay=0;var w=fx+frameWidth,h=fy+frameHeight;w>width&&(ax=w-width),h>height&&(ay=h-height),texture.add(i,sourceIndex,x+fx,y+fy,frameWidth-ax,frameHeight-ay),(fx+=frameWidth+spacing)+frameWidth>width&&(fx=margin,fy+=frameHeight+spacing)}return texture}},function(module,exports,__webpack_require__){var GetFastValue=__webpack_require__(1);module.exports=function(texture,frame,config){var frameWidth=GetFastValue(config,"frameWidth",null),frameHeight=GetFastValue(config,"frameHeight",frameWidth);if(!frameWidth)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var source=texture.source[0];texture.add("__BASE",0,0,0,source.width,source.height);var sheetFrame,startFrame=GetFastValue(config,"startFrame",0),endFrame=GetFastValue(config,"endFrame",-1),margin=GetFastValue(config,"margin",0),spacing=GetFastValue(config,"spacing",0),x=frame.cutX,y=frame.cutY,cutWidth=frame.cutWidth,cutHeight=frame.cutHeight,sheetWidth=frame.realWidth,sheetHeight=frame.realHeight,row=Math.floor((sheetWidth-margin+spacing)/(frameWidth+spacing)),column=Math.floor((sheetHeight-margin+spacing)/(frameHeight+spacing)),total=row*column,leftPad=frame.x,leftWidth=frameWidth-leftPad,rightWidth=frameWidth-(sheetWidth-cutWidth-leftPad),topPad=frame.y,topHeight=frameHeight-topPad,bottomHeight=frameHeight-(sheetHeight-cutHeight-topPad);(startFrame>total||startFrame<-total)&&(startFrame=0),startFrame<0&&(startFrame=total+startFrame),-1!==endFrame&&(total=startFrame+(endFrame+1));for(var frameX=margin,frameY=margin,frameIndex=0,sourceIndex=frame.sourceIndex,sheetY=0;sheetY<column;sheetY++){for(var topRow=0===sheetY,bottomRow=sheetY===column-1,sheetX=0;sheetX<row;sheetX++){var leftRow=0===sheetX,rightRow=sheetX===row-1;if(sheetFrame=texture.add(frameIndex,sourceIndex,x+frameX,y+frameY,frameWidth,frameHeight),leftRow||topRow||rightRow||bottomRow){var destX=leftRow?leftPad:0,destY=topRow?topPad:0,trimWidth=0,trimHeight=0;leftRow&&(trimWidth+=frameWidth-leftWidth),rightRow&&(trimWidth+=frameWidth-rightWidth),topRow&&(trimHeight+=frameHeight-topHeight),bottomRow&&(trimHeight+=frameHeight-bottomHeight);var destWidth=frameWidth-trimWidth,destHeight=frameHeight-trimHeight;sheetFrame.cutWidth=destWidth,sheetFrame.cutHeight=destHeight,sheetFrame.setTrim(frameWidth,frameHeight,destX,destY,destWidth,destHeight)}frameX+=spacing,frameX+=leftRow?leftWidth:rightRow?rightWidth:frameWidth,frameIndex++}frameX=margin,frameY+=spacing,frameY+=topRow?topHeight:bottomRow?bottomHeight:frameHeight}return texture}},function(module,exports){var imageHeight=0,addFrame=function(texture,sourceIndex,name,frame){var y=imageHeight-frame.y-frame.height;texture.add(name,sourceIndex,frame.x,y,frame.width,frame.height)};module.exports=function(texture,sourceIndex,yaml){var source=texture.source[sourceIndex];texture.add("__BASE",sourceIndex,0,0,source.width,source.height),imageHeight=source.height;for(var data=yaml.split("\n"),lineRegExp=/^[ ]*(- )*(\w+)+[: ]+(.*)/,prevSprite="",currentSprite="",rect={x:0,y:0,width:0,height:0},i=0;i<data.length;i++){var results=data[i].match(lineRegExp);if(results){var isList="- "===results[1],key=results[2],value=results[3];if(isList&&(currentSprite!==prevSprite&&(addFrame(texture,sourceIndex,currentSprite,rect),prevSprite=currentSprite),rect={x:0,y:0,width:0,height:0}),"name"!==key)switch(key){case"x":case"y":case"width":case"height":rect[key]=parseInt(value,10)}else currentSprite=value}}return currentSprite!==prevSprite&&addFrame(texture,sourceIndex,currentSprite,rect),texture}},function(module,exports){module.exports="complete"},function(module,exports){module.exports="decoded"},function(module,exports){module.exports="decodedall"},function(module,exports){module.exports="destroy"},function(module,exports){module.exports="detune"},function(module,exports){module.exports="detune"},function(module,exports){module.exports="mute"},function(module,exports){module.exports="rate"},function(module,exports){module.exports="volume"},function(module,exports){module.exports="loop"},function(module,exports){module.exports="looped"},function(module,exports){module.exports="mute"},function(module,exports){module.exports="pauseall"},function(module,exports){module.exports="pause"},function(module,exports){module.exports="play"},function(module,exports){module.exports="rate"},function(module,exports){module.exports="resumeall"},function(module,exports){module.exports="resume"},function(module,exports){module.exports="seek"},function(module,exports){module.exports="stopall"},function(module,exports){module.exports="stop"},function(module,exports){module.exports="unlocked"},function(module,exports){module.exports="volume"},function(module,exports){module.exports=function(placementID,instance,video){return{instance:instance,placementID:placementID,shown:!1,video:video}}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),EventEmitter=__webpack_require__(9),LeaderboardScore=__webpack_require__(918),Leaderboard=new Class({Extends:EventEmitter,initialize:function(plugin,data){EventEmitter.call(this),this.plugin=plugin,this.ref=data,this.name=data.getName(),this.contextID=data.getContextID(),this.entryCount=0,this.playerScore=null,this.scores=[],this.getEntryCount()},getEntryCount:function(){var _this=this;return this.ref.getEntryCountAsync().then((function(count){_this.entryCount=count,_this.emit("getentrycount",count,_this.name)})).catch((function(e){console.warn(e)})),this},setScore:function(score,data){void 0===data&&(data=""),"object"==typeof data&&(data=JSON.stringify(data));var _this=this;return this.ref.setScoreAsync(score,data).then((function(entry){if(entry){var score=LeaderboardScore(entry);_this.playerScore=score,_this.emit("setscore",score,_this.name)}else _this.emit("setscore",null,_this.name)})).catch((function(e){console.warn(e)})),this},getPlayerScore:function(){var _this=this;return this.ref.getPlayerEntryAsync().then((function(entry){if(entry){var score=LeaderboardScore(entry);_this.playerScore=score,_this.emit("getplayerscore",score,_this.name)}else _this.emit("getplayerscore",null,_this.name)})).catch((function(e){console.warn(e)})),this},getScores:function(count,offset){void 0===count&&(count=10),void 0===offset&&(offset=0);var _this=this;return this.ref.getEntriesAsync(count,offset).then((function(entries){_this.scores=[],entries.forEach((function(entry){_this.scores.push(LeaderboardScore(entry))})),_this.emit("getscores",_this.scores,_this.name)})).catch((function(e){console.warn(e)})),this},getConnectedScores:function(count,offset){void 0===count&&(count=10),void 0===offset&&(offset=0);var _this=this;return this.ref.getConnectedPlayerEntriesAsync().then((function(entries){_this.scores=[],entries.forEach((function(entry){_this.scores.push(LeaderboardScore(entry))})),_this.emit("getconnectedscores",_this.scores,_this.name)})).catch((function(e){console.warn(e)})),this}});module.exports=Leaderboard},function(module,exports){module.exports=function(entry){return{score:entry.getScore(),scoreFormatted:entry.getFormattedScore(),timestamp:entry.getTimestamp(),rank:entry.getRank(),data:entry.getExtraData(),playerName:entry.getPlayer().getName(),playerPhotoURL:entry.getPlayer().getPhoto(),playerID:entry.getPlayer().getID()}}},function(module,exports,__webpack_require__){var GetFastValue=__webpack_require__(1);module.exports=function(data){return{title:GetFastValue(data,"title",""),productID:GetFastValue(data,"productID",""),description:GetFastValue(data,"description",""),imageURI:GetFastValue(data,"imageURI",""),price:GetFastValue(data,"price",""),priceCurrencyCode:GetFastValue(data,"priceCurrencyCode","")}}},function(module,exports,__webpack_require__){var GetFastValue=__webpack_require__(1);module.exports=function(data){return{developerPayload:GetFastValue(data,"developerPayload",""),paymentID:GetFastValue(data,"paymentID",""),productID:GetFastValue(data,"productID",""),purchaseTime:GetFastValue(data,"purchaseTime",""),purchaseToken:GetFastValue(data,"purchaseToken",""),signedRequest:GetFastValue(data,"signedRequest","")}}},function(module,exports,__webpack_require__){var GameObjects={Events:__webpack_require__(122),DisplayList:__webpack_require__(922),GameObjectCreator:__webpack_require__(16),GameObjectFactory:__webpack_require__(6),UpdateList:__webpack_require__(950),Components:__webpack_require__(12),BuildGameObject:__webpack_require__(30),BuildGameObjectAnimation:__webpack_require__(203),GameObject:__webpack_require__(13),BitmapText:__webpack_require__(141),Blitter:__webpack_require__(205),Container:__webpack_require__(206),DOMElement:__webpack_require__(400),DynamicBitmapText:__webpack_require__(207),Extern:__webpack_require__(402),Graphics:__webpack_require__(208),Group:__webpack_require__(109),Image:__webpack_require__(91),Particles:__webpack_require__(979),PathFollower:__webpack_require__(414),RenderTexture:__webpack_require__(212),RetroFont:__webpack_require__(988),Sprite:__webpack_require__(57),Text:__webpack_require__(213),TileSprite:__webpack_require__(214),Zone:__webpack_require__(118),Shape:__webpack_require__(33),Arc:__webpack_require__(416),Curve:__webpack_require__(417),Ellipse:__webpack_require__(418),Grid:__webpack_require__(419),IsoBox:__webpack_require__(420),IsoTriangle:__webpack_require__(421),Line:__webpack_require__(422),Polygon:__webpack_require__(423),Rectangle:__webpack_require__(428),Star:__webpack_require__(429),Triangle:__webpack_require__(430),Factories:{Blitter:__webpack_require__(1033),Container:__webpack_require__(1034),DOMElement:__webpack_require__(1035),DynamicBitmapText:__webpack_require__(1036),Extern:__webpack_require__(1037),Graphics:__webpack_require__(1038),Group:__webpack_require__(1039),Image:__webpack_require__(1040),Particles:__webpack_require__(1041),PathFollower:__webpack_require__(1042),RenderTexture:__webpack_require__(1043),Sprite:__webpack_require__(1044),StaticBitmapText:__webpack_require__(1045),Text:__webpack_require__(1046),TileSprite:__webpack_require__(1047),Zone:__webpack_require__(1048),Arc:__webpack_require__(1049),Curve:__webpack_require__(1050),Ellipse:__webpack_require__(1051),Grid:__webpack_require__(1052),IsoBox:__webpack_require__(1053),IsoTriangle:__webpack_require__(1054),Line:__webpack_require__(1055),Polygon:__webpack_require__(1056),Rectangle:__webpack_require__(1057),Star:__webpack_require__(1058),Triangle:__webpack_require__(1059)},Creators:{Blitter:__webpack_require__(1060),Container:__webpack_require__(1061),DynamicBitmapText:__webpack_require__(1062),Graphics:__webpack_require__(1063),Group:__webpack_require__(1064),Image:__webpack_require__(1065),Particles:__webpack_require__(1066),RenderTexture:__webpack_require__(1067),Sprite:__webpack_require__(1068),StaticBitmapText:__webpack_require__(1069),Text:__webpack_require__(1070),TileSprite:__webpack_require__(1071),Zone:__webpack_require__(1072)}};GameObjects.Mesh=__webpack_require__(142),GameObjects.Quad=__webpack_require__(217),GameObjects.Shader=__webpack_require__(218),GameObjects.Factories.Mesh=__webpack_require__(1079),GameObjects.Factories.Quad=__webpack_require__(1080),GameObjects.Factories.Shader=__webpack_require__(1081),GameObjects.Creators.Mesh=__webpack_require__(1082),GameObjects.Creators.Quad=__webpack_require__(1083),GameObjects.Creators.Shader=__webpack_require__(1084),GameObjects.Light=__webpack_require__(434),__webpack_require__(435),__webpack_require__(1085),module.exports=GameObjects},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),List=__webpack_require__(138),PluginCache=__webpack_require__(18),SceneEvents=__webpack_require__(20),StableSort=__webpack_require__(140),DisplayList=new Class({Extends:List,initialize:function(scene){List.call(this,scene),this.sortChildrenFlag=!1,this.scene=scene,this.systems=scene.sys,scene.sys.events.once(SceneEvents.BOOT,this.boot,this),scene.sys.events.on(SceneEvents.START,this.start,this)},boot:function(){this.systems.events.once(SceneEvents.DESTROY,this.destroy,this)},start:function(){this.systems.events.once(SceneEvents.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(StableSort.inplace(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(childA,childB){return childA._depth-childB._depth},getChildren:function(){return this.list},shutdown:function(){for(var i=this.list.length;i--;)this.list[i].destroy(!0);this.list.length=0,this.systems.events.off(SceneEvents.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(SceneEvents.START,this.start,this),this.scene=null,this.systems=null}});PluginCache.register("DisplayList",DisplayList,"displayList"),module.exports=DisplayList},function(module,exports,__webpack_require__){module.exports={CheckMatrix:__webpack_require__(201),MatrixToString:__webpack_require__(924),ReverseColumns:__webpack_require__(925),ReverseRows:__webpack_require__(926),Rotate180:__webpack_require__(927),RotateLeft:__webpack_require__(928),RotateMatrix:__webpack_require__(139),RotateRight:__webpack_require__(929),TransposeMatrix:__webpack_require__(396)}},function(module,exports,__webpack_require__){var Pad=__webpack_require__(175),CheckMatrix=__webpack_require__(201);module.exports=function(matrix){var str="";if(!CheckMatrix(matrix))return str;for(var r=0;r<matrix.length;r++){for(var c=0;c<matrix[r].length;c++){var cell=matrix[r][c].toString();str+="undefined"!==cell?Pad(cell,2):"?",c<matrix[r].length-1&&(str+=" |")}if(r<matrix.length-1){str+="\n";for(var i=0;i<matrix[r].length;i++)str+="---",i<matrix[r].length-1&&(str+="+");str+="\n"}}return str}},function(module,exports){module.exports=function(matrix){return matrix.reverse()}},function(module,exports){module.exports=function(matrix){for(var i=0;i<matrix.length;i++)matrix[i].reverse();return matrix}},function(module,exports,__webpack_require__){var RotateMatrix=__webpack_require__(139);module.exports=function(matrix){return RotateMatrix(matrix,180)}},function(module,exports,__webpack_require__){var RotateMatrix=__webpack_require__(139);module.exports=function(matrix){return RotateMatrix(matrix,90)}},function(module,exports,__webpack_require__){var RotateMatrix=__webpack_require__(139);module.exports=function(matrix){return RotateMatrix(matrix,-90)}},function(module,exports){module.exports=function(array,item,limit,callback,context){if(void 0===context&&(context=array),limit>0){var remaining=limit-array.length;if(remaining<=0)return null}if(!Array.isArray(item))return-1===array.indexOf(item)?(array.push(item),callback&&callback.call(context,item),item):null;for(var itemLength=item.length-1;itemLength>=0;)-1!==array.indexOf(item[itemLength])&&item.splice(itemLength,1),itemLength--;if(0===(itemLength=item.length))return null;limit>0&&itemLength>remaining&&(item.splice(remaining),itemLength=remaining);for(var i=0;i<itemLength;i++){var entry=item[i];array.push(entry),callback&&callback.call(context,entry)}return item}},function(module,exports){module.exports=function(array,item,index,limit,callback,context){if(void 0===index&&(index=0),void 0===context&&(context=array),limit>0){var remaining=limit-array.length;if(remaining<=0)return null}if(!Array.isArray(item))return-1===array.indexOf(item)?(array.splice(index,0,item),callback&&callback.call(context,item),item):null;for(var itemLength=item.length-1;itemLength>=0;)-1!==array.indexOf(item[itemLength])&&item.pop(),itemLength--;if(0===(itemLength=item.length))return null;limit>0&&itemLength>remaining&&(item.splice(remaining),itemLength=remaining);for(var i=itemLength-1;i>=0;i--){var entry=item[i];array.splice(index,0,entry),callback&&callback.call(context,entry)}return item}},function(module,exports){module.exports=function(array,item){var currentIndex=array.indexOf(item);return-1!==currentIndex&&currentIndex<array.length&&(array.splice(currentIndex,1),array.push(item)),item}},function(module,exports,__webpack_require__){var SafeRange=__webpack_require__(73);module.exports=function(array,property,value,startIndex,endIndex){void 0===startIndex&&(startIndex=0),void 0===endIndex&&(endIndex=array.length);var total=0;if(SafeRange(array,startIndex,endIndex))for(var i=startIndex;i<endIndex;i++){array[i][property]===value&&total++}return total}},function(module,exports){module.exports=function(array,callback,context){var i,args=[null];for(i=3;i<arguments.length;i++)args.push(arguments[i]);for(i=0;i<array.length;i++)args[0]=array[i],callback.apply(context,args);return array}},function(module,exports,__webpack_require__){var SafeRange=__webpack_require__(73);module.exports=function(array,callback,context,startIndex,endIndex){if(void 0===startIndex&&(startIndex=0),void 0===endIndex&&(endIndex=array.length),SafeRange(array,startIndex,endIndex)){var i,args=[null];for(i=5;i<arguments.length;i++)args.push(arguments[i]);for(i=startIndex;i<endIndex;i++)args[0]=array[i],callback.apply(context,args)}return array}},function(module,exports,__webpack_require__){var SafeRange=__webpack_require__(73);module.exports=function(array,property,value,startIndex,endIndex){void 0===startIndex&&(startIndex=0),void 0===endIndex&&(endIndex=array.length);var output=[];if(SafeRange(array,startIndex,endIndex))for(var i=startIndex;i<endIndex;i++){var child=array[i];(!property||property&&void 0===value&&child.hasOwnProperty(property)||property&&void 0!==value&&child[property]===value)&&output.push(child)}return output}},function(module,exports,__webpack_require__){var SafeRange=__webpack_require__(73);module.exports=function(array,property,value,startIndex,endIndex){if(void 0===startIndex&&(startIndex=0),void 0===endIndex&&(endIndex=array.length),SafeRange(array,startIndex,endIndex))for(var i=startIndex;i<endIndex;i++){var child=array[i];if(!property||property&&void 0===value&&child.hasOwnProperty(property)||property&&void 0!==value&&child[property]===value)return child}return null}},function(module,exports){module.exports=function(array,item){var currentIndex=array.indexOf(item);if(currentIndex>0){var item2=array[currentIndex-1],index2=array.indexOf(item2);array[currentIndex]=item2,array[index2]=item}return array}},function(module,exports){module.exports=function(array,item,index){var currentIndex=array.indexOf(item);if(-1===currentIndex||index<0||index>=array.length)throw new Error("Supplied index out of bounds");return currentIndex!==index&&(array.splice(currentIndex,1),array.splice(index,0,item)),item}},function(module,exports){module.exports=function(array,item){var currentIndex=array.indexOf(item);if(-1!==currentIndex&&currentIndex<array.length-1){var item2=array[currentIndex+1],index2=array.indexOf(item2);array[currentIndex]=item2,array[index2]=item}return array}},function(module,exports){module.exports=function(start,end,prefix,suffix){for(var result=[],i=start;i<=end;i++)if(prefix||suffix){var key=prefix?prefix+i.toString():i.toString();suffix&&(key=key.concat(suffix)),result.push(key)}else result.push(i);return result}},function(module,exports,__webpack_require__){var RoundAwayFromZero=__webpack_require__(336);module.exports=function(start,end,step){void 0===start&&(start=0),void 0===end&&(end=null),void 0===step&&(step=1),null===end&&(end=start,start=0);for(var result=[],total=Math.max(RoundAwayFromZero((end-start)/(step||1)),0),i=0;i<total;i++)result.push(start),start+=step;return result}},function(module,exports,__webpack_require__){var SpliceOne=__webpack_require__(86);module.exports=function(array,index,callback,context){if(void 0===context&&(context=array),index<0||index>array.length-1)throw new Error("Index out of bounds");var item=SpliceOne(array,index);return callback&&callback.call(context,item),item}},function(module,exports,__webpack_require__){var SafeRange=__webpack_require__(73);module.exports=function(array,startIndex,endIndex,callback,context){if(void 0===startIndex&&(startIndex=0),void 0===endIndex&&(endIndex=array.length),void 0===context&&(context=array),SafeRange(array,startIndex,endIndex)){var size=endIndex-startIndex,removed=array.splice(startIndex,size);if(callback)for(var i=0;i<removed.length;i++){var entry=removed[i];callback.call(context,entry)}return removed}return[]}},function(module,exports,__webpack_require__){var SpliceOne=__webpack_require__(86);module.exports=function(array,start,length){void 0===start&&(start=0),void 0===length&&(length=array.length);var randomIndex=start+Math.floor(Math.random()*length);return SpliceOne(array,randomIndex)}},function(module,exports){module.exports=function(array,oldChild,newChild){var index1=array.indexOf(oldChild),index2=array.indexOf(newChild);return-1!==index1&&-1===index2&&(array[index1]=newChild,!0)}},function(module,exports){module.exports=function(array,item){var currentIndex=array.indexOf(item);return-1!==currentIndex&&currentIndex>0&&(array.splice(currentIndex,1),array.unshift(item)),item}},function(module,exports,__webpack_require__){var SafeRange=__webpack_require__(73);module.exports=function(array,property,value,startIndex,endIndex){if(void 0===startIndex&&(startIndex=0),void 0===endIndex&&(endIndex=array.length),SafeRange(array,startIndex,endIndex))for(var i=startIndex;i<endIndex;i++){var entry=array[i];entry.hasOwnProperty(property)&&(entry[property]=value)}return array}},function(module,exports){module.exports=function(array,item1,item2){if(item1!==item2){var index1=array.indexOf(item1),index2=array.indexOf(item2);if(index1<0||index2<0)throw new Error("Supplied items must be elements of the same array");return array[index1]=item2,array[index2]=item1,array}}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),PluginCache=__webpack_require__(18),SceneEvents=__webpack_require__(20),UpdateList=new Class({initialize:function(scene){this.scene=scene,this.systems=scene.sys,this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],scene.sys.events.once(SceneEvents.BOOT,this.boot,this),scene.sys.events.on(SceneEvents.START,this.start,this)},boot:function(){this.systems.events.once(SceneEvents.DESTROY,this.destroy,this)},start:function(){var eventEmitter=this.systems.events;eventEmitter.on(SceneEvents.PRE_UPDATE,this.preUpdate,this),eventEmitter.on(SceneEvents.UPDATE,this.update,this),eventEmitter.once(SceneEvents.SHUTDOWN,this.shutdown,this)},add:function(child){return-1===this._list.indexOf(child)&&-1===this._pendingInsertion.indexOf(child)&&this._pendingInsertion.push(child),child},preUpdate:function(){var toRemove=this._pendingRemoval.length,toInsert=this._pendingInsertion.length;if(0!==toRemove||0!==toInsert){var i,gameObject;for(i=0;i<toRemove;i++){gameObject=this._pendingRemoval[i];var index=this._list.indexOf(gameObject);index>-1&&this._list.splice(index,1)}this._list=this._list.concat(this._pendingInsertion.splice(0)),this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(time,delta){for(var list=this._list,length=list.length,i=0;i<length;i++){var gameObject=list[i];gameObject.active&&gameObject.preUpdate.call(gameObject,time,delta)}},remove:function(child){return-1!==this._list.indexOf(child)&&-1===this._pendingRemoval.indexOf(child)&&this._pendingRemoval.push(child),child},removeAll:function(){for(var i=this._list.length;i--;)this.remove(this._list[i]);return this},shutdown:function(){for(var i=this._list.length;i--;)this._list[i].destroy(!0);for(i=this._pendingRemoval.length;i--;)this._pendingRemoval[i].destroy(!0);for(i=this._pendingInsertion.length;i--;)this._pendingInsertion[i].destroy(!0);this._list.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var eventEmitter=this.systems.events;eventEmitter.off(SceneEvents.PRE_UPDATE,this.preUpdate,this),eventEmitter.off(SceneEvents.UPDATE,this.update,this),eventEmitter.off(SceneEvents.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(SceneEvents.START,this.start,this),this.scene=null,this.systems=null},length:{get:function(){return this._list.length}}});PluginCache.register("UpdateList",UpdateList,"updateList"),module.exports=UpdateList},function(module,exports){module.exports=function(src,round,out){void 0===out&&(out={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null}});for(var text=src.text,textLength=text.length,bx=Number.MAX_VALUE,by=Number.MAX_VALUE,bw=0,bh=0,chars=src.fontData.chars,lineHeight=src.fontData.lineHeight,letterSpacing=src.letterSpacing,xAdvance=0,yAdvance=0,charCode=0,glyph=null,x=0,y=0,scale=src.fontSize/src.fontData.size,sx=scale*src.scaleX,sy=scale*src.scaleY,lastGlyph=null,lastCharCode=0,lineWidths=[],shortestLine=Number.MAX_VALUE,longestLine=0,currentLine=0,currentLineWidth=0,i=0;i<textLength;i++)if(10!==(charCode=text.charCodeAt(i))){if(glyph=chars[charCode]){if(x=xAdvance,y=yAdvance,null!==lastGlyph){var kerningOffset=glyph.kerning[lastCharCode];x+=void 0!==kerningOffset?kerningOffset:0}bx>x&&(bx=x),by>y&&(by=y);var gw=x+glyph.xAdvance,gh=y+lineHeight;bw<gw&&(bw=gw),bh<gh&&(bh=gh),xAdvance+=glyph.xAdvance+letterSpacing,lastGlyph=glyph,lastCharCode=charCode,currentLineWidth=gw*scale}}else xAdvance=0,yAdvance+=lineHeight,lastGlyph=null,lineWidths[currentLine]=currentLineWidth,currentLineWidth>longestLine&&(longestLine=currentLineWidth),currentLineWidth<shortestLine&&(shortestLine=currentLineWidth),currentLine++,currentLineWidth=0;lineWidths[currentLine]=currentLineWidth,currentLineWidth>longestLine&&(longestLine=currentLineWidth),currentLineWidth<shortestLine&&(shortestLine=currentLineWidth);var local=out.local,global=out.global,lines=out.lines;return local.x=bx*scale,local.y=by*scale,local.width=bw*scale,local.height=bh*scale,global.x=src.x-src.displayOriginX+bx*sx,global.y=src.y-src.displayOriginY+by*sy,global.width=bw*sx,global.height=bh*sy,lines.shortest=shortestLine,lines.longest=longestLine,lines.lengths=lineWidths,round&&(local.x=Math.round(local.x),local.y=Math.round(local.y),local.width=Math.round(local.width),local.height=Math.round(local.height),global.x=Math.round(global.x),global.y=Math.round(global.y),global.width=Math.round(global.width),global.height=Math.round(global.height),lines.shortest=Math.round(shortestLine),lines.longest=Math.round(longestLine)),out}},function(module,exports,__webpack_require__){var ParseXMLBitmapFont=__webpack_require__(204);module.exports=function(scene,fontName,textureKey,frameKey,xmlKey,xSpacing,ySpacing){var frame=scene.sys.textures.getFrame(textureKey,frameKey),xml=scene.sys.cache.xml.get(xmlKey);if(frame&&xml){var data=ParseXMLBitmapFont(xml,xSpacing,ySpacing,frame);return scene.sys.cache.bitmapFont.add(fontName,{data:data,texture:textureKey,frame:frameKey}),!0}return!1}},function(module,exports,__webpack_require__){var renderWebGL=__webpack_require__(2),renderCanvas=__webpack_require__(2);renderWebGL=__webpack_require__(954),renderCanvas=__webpack_require__(955),module.exports={renderWebGL:renderWebGL,renderCanvas:renderCanvas}},function(module,exports,__webpack_require__){var Utils=__webpack_require__(10);module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){var text=src._text,textLength=text.length;if(0!==textLength){var pipeline=this.pipeline;renderer.setPipeline(pipeline,src);var camMatrix=pipeline._tempMatrix1,spriteMatrix=pipeline._tempMatrix2,calcMatrix=pipeline._tempMatrix3;spriteMatrix.applyITRS(src.x,src.y,src.rotation,src.scaleX,src.scaleY),camMatrix.copyFrom(camera.matrix),parentMatrix?(camMatrix.multiplyWithOffset(parentMatrix,-camera.scrollX*src.scrollFactorX,-camera.scrollY*src.scrollFactorY),spriteMatrix.e=src.x,spriteMatrix.f=src.y,camMatrix.multiply(spriteMatrix,calcMatrix)):(spriteMatrix.e-=camera.scrollX*src.scrollFactorX,spriteMatrix.f-=camera.scrollY*src.scrollFactorY,camMatrix.multiply(spriteMatrix,calcMatrix));var frame=src.frame,texture=frame.glTexture,textureX=frame.cutX,textureY=frame.cutY,textureWidth=texture.width,textureHeight=texture.height,tintEffect=src._isTinted&&src.tintFill,tintTL=Utils.getTintAppendFloatAlpha(src._tintTL,camera.alpha*src._alphaTL),tintTR=Utils.getTintAppendFloatAlpha(src._tintTR,camera.alpha*src._alphaTR),tintBL=Utils.getTintAppendFloatAlpha(src._tintBL,camera.alpha*src._alphaBL),tintBR=Utils.getTintAppendFloatAlpha(src._tintBR,camera.alpha*src._alphaBR);pipeline.setTexture2D(texture,0);var glyph,lastGlyph,xAdvance=0,yAdvance=0,charCode=0,lastCharCode=0,letterSpacing=src._letterSpacing,glyphX=0,glyphY=0,glyphW=0,glyphH=0,fontData=src.fontData,chars=fontData.chars,lineHeight=fontData.lineHeight,scale=src._fontSize/fontData.size,align=src._align,currentLine=0,lineOffsetX=0;src.getTextBounds(!1);var lineData=src._bounds.lines;1===align?lineOffsetX=(lineData.longest-lineData.lengths[0])/2:2===align&&(lineOffsetX=lineData.longest-lineData.lengths[0]);for(var roundPixels=camera.roundPixels,i=0;i<textLength;i++)if(10!==(charCode=text.charCodeAt(i))){if(glyph=chars[charCode]){glyphX=textureX+glyph.x,glyphY=textureY+glyph.y,glyphW=glyph.width,glyphH=glyph.height;var x=glyph.xOffset+xAdvance,y=glyph.yOffset+yAdvance;if(null!==lastGlyph){var kerningOffset=glyph.kerning[lastCharCode];x+=void 0!==kerningOffset?kerningOffset:0}if(xAdvance+=glyph.xAdvance+letterSpacing,lastGlyph=glyph,lastCharCode=charCode,0!==glyphW&&0!==glyphH&&32!==charCode){x*=scale,y*=scale,x-=src.displayOriginX;var u0=glyphX/textureWidth,v0=glyphY/textureHeight,u1=(glyphX+glyphW)/textureWidth,v1=(glyphY+glyphH)/textureHeight,xw=(x+=lineOffsetX)+glyphW*scale,yh=(y-=src.displayOriginY)+glyphH*scale,tx0=calcMatrix.getX(x,y),ty0=calcMatrix.getY(x,y),tx1=calcMatrix.getX(x,yh),ty1=calcMatrix.getY(x,yh),tx2=calcMatrix.getX(xw,yh),ty2=calcMatrix.getY(xw,yh),tx3=calcMatrix.getX(xw,y),ty3=calcMatrix.getY(xw,y);roundPixels&&(tx0=Math.round(tx0),ty0=Math.round(ty0),tx1=Math.round(tx1),ty1=Math.round(ty1),tx2=Math.round(tx2),ty2=Math.round(ty2),tx3=Math.round(tx3),ty3=Math.round(ty3)),pipeline.batchQuad(tx0,ty0,tx1,ty1,tx2,ty2,tx3,ty3,u0,v0,u1,v1,tintTL,tintTR,tintBL,tintBR,tintEffect,texture,0)}}}else currentLine++,1===align?lineOffsetX=(lineData.longest-lineData.lengths[currentLine])/2:2===align&&(lineOffsetX=lineData.longest-lineData.lengths[currentLine]),xAdvance=0,yAdvance+=lineHeight,lastGlyph=null}}},function(module,exports,__webpack_require__){var SetTransform=__webpack_require__(29);module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){var text=src._text,textLength=text.length,ctx=renderer.currentContext;if(0!==textLength&&SetTransform(renderer,ctx,src,camera,parentMatrix)){var textureFrame=src.frame,chars=src.fontData.chars,lineHeight=src.fontData.lineHeight,letterSpacing=src._letterSpacing,xAdvance=0,yAdvance=0,charCode=0,glyph=null,glyphX=0,glyphY=0,glyphW=0,glyphH=0,x=0,y=0,lastGlyph=null,lastCharCode=0,image=src.frame.source.image,textureX=textureFrame.cutX,textureY=textureFrame.cutY,scale=src._fontSize/src.fontData.size,align=src._align,currentLine=0,lineOffsetX=0;src.getTextBounds(!1);var lineData=src._bounds.lines;1===align?lineOffsetX=(lineData.longest-lineData.lengths[0])/2:2===align&&(lineOffsetX=lineData.longest-lineData.lengths[0]),ctx.translate(-src.displayOriginX,-src.displayOriginY);for(var roundPixels=camera.roundPixels,i=0;i<textLength;i++)if(10!==(charCode=text.charCodeAt(i))){if(glyph=chars[charCode]){if(glyphX=textureX+glyph.x,glyphY=textureY+glyph.y,glyphW=glyph.width,glyphH=glyph.height,x=glyph.xOffset+xAdvance,y=glyph.yOffset+yAdvance,null!==lastGlyph){var kerningOffset=glyph.kerning[lastCharCode];x+=void 0!==kerningOffset?kerningOffset:0}x*=scale,y*=scale,x+=lineOffsetX,xAdvance+=glyph.xAdvance+letterSpacing,lastGlyph=glyph,lastCharCode=charCode,0!==glyphW&&0!==glyphH&&32!==charCode&&(roundPixels&&(x=Math.round(x),y=Math.round(y)),ctx.save(),ctx.translate(x,y),ctx.scale(scale,scale),ctx.drawImage(image,glyphX,glyphY,glyphW,glyphH,0,0,glyphW,glyphH),ctx.restore())}}else currentLine++,1===align?lineOffsetX=(lineData.longest-lineData.lengths[currentLine])/2:2===align&&(lineOffsetX=lineData.longest-lineData.lengths[currentLine]),xAdvance=0,yAdvance+=lineHeight,lastGlyph=null;ctx.restore()}}},function(module,exports,__webpack_require__){var renderWebGL=__webpack_require__(2),renderCanvas=__webpack_require__(2);renderWebGL=__webpack_require__(957),renderCanvas=__webpack_require__(958),module.exports={renderWebGL:renderWebGL,renderCanvas:renderCanvas}},function(module,exports,__webpack_require__){var Utils=__webpack_require__(10);module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){var list=src.getRenderList();if(0!==list.length){var pipeline=this.pipeline;renderer.setPipeline(pipeline,src);var cameraScrollX=camera.scrollX*src.scrollFactorX,cameraScrollY=camera.scrollY*src.scrollFactorY,calcMatrix=pipeline._tempMatrix1;calcMatrix.copyFrom(camera.matrix),parentMatrix&&(calcMatrix.multiplyWithOffset(parentMatrix,-cameraScrollX,-cameraScrollY),cameraScrollX=0,cameraScrollY=0);for(var blitterX=src.x-cameraScrollX,blitterY=src.y-cameraScrollY,prevTextureSourceIndex=-1,alpha=camera.alpha*src.alpha,roundPixels=camera.roundPixels,index=0;index<list.length;index++){var bob=list[index],frame=bob.frame,bobAlpha=bob.alpha*alpha;if(0!==bobAlpha){var width=frame.width,height=frame.height,x=blitterX+bob.x+frame.x,y=blitterY+bob.y+frame.y;bob.flipX&&(width*=-1,x+=frame.width),bob.flipY&&(height*=-1,y+=frame.height);var xw=x+width,yh=y+height,tx0=calcMatrix.getX(x,y),ty0=calcMatrix.getY(x,y),tx1=calcMatrix.getX(xw,yh),ty1=calcMatrix.getY(xw,yh),tint=Utils.getTintAppendFloatAlpha(16777215,bobAlpha);frame.sourceIndex!==prevTextureSourceIndex&&(pipeline.setTexture2D(frame.glTexture,0),prevTextureSourceIndex=frame.sourceIndex),roundPixels&&(tx0=Math.round(tx0),ty0=Math.round(ty0),tx1=Math.round(tx1),ty1=Math.round(ty1)),pipeline.batchQuad(tx0,ty0,tx0,ty1,tx1,ty1,tx1,ty0,frame.u0,frame.v0,frame.u1,frame.v1,tint,tint,tint,tint,!1,frame.glTexture,0)&&(prevTextureSourceIndex=-1)}}}}},function(module,exports){module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){var list=src.getRenderList();if(0!==list.length){var ctx=renderer.currentContext,alpha=camera.alpha*src.alpha;if(0!==alpha){ctx.globalCompositeOperation=renderer.blendModes[src.blendMode];var cameraScrollX=src.x-camera.scrollX*src.scrollFactorX,cameraScrollY=src.y-camera.scrollY*src.scrollFactorY;ctx.save(),parentMatrix&&parentMatrix.copyToContext(ctx);for(var roundPixels=camera.roundPixels,i=0;i<list.length;i++){var bob=list[i],flip=bob.flipX||bob.flipY,frame=bob.frame,cd=frame.canvasData,dx=frame.x,dy=frame.y,fx=1,fy=1,bobAlpha=bob.alpha*alpha;0!==bobAlpha&&(ctx.globalAlpha=bobAlpha,flip?(bob.flipX&&(fx=-1,dx-=cd.width),bob.flipY&&(fy=-1,dy-=cd.height),ctx.save(),ctx.translate(bob.x+cameraScrollX,bob.y+cameraScrollY),ctx.scale(fx,fy),ctx.drawImage(frame.source.image,cd.x,cd.y,cd.width,cd.height,dx,dy,cd.width,cd.height),ctx.restore()):(roundPixels&&(dx=Math.round(dx),dy=Math.round(dy)),ctx.drawImage(frame.source.image,cd.x,cd.y,cd.width,cd.height,dx+bob.x+cameraScrollX,dy+bob.y+cameraScrollY,cd.width,cd.height)))}ctx.restore()}}}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Frame=__webpack_require__(106),Bob=new Class({initialize:function(blitter,x,y,frame,visible){this.parent=blitter,this.x=x,this.y=y,this.frame=frame,this.data={},this._visible=visible,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function(frame){return void 0===frame?this.frame=this.parent.frame:frame instanceof Frame&&frame.texture===this.parent.texture?this.frame=frame:this.frame=this.parent.texture.get(frame),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(x,y,frame){return this.x=x,this.y=y,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,frame&&this.setFrame(frame),this},setFlipX:function(value){return this.flipX=value,this},setFlipY:function(value){return this.flipY=value,this},setFlip:function(x,y){return this.flipX=x,this.flipY=y,this},setVisible:function(value){return this.visible=value,this},setAlpha:function(value){return this.alpha=value,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(value){this._visible=value,this.parent.dirty=!0}},alpha:{get:function(){return this._alpha},set:function(value){this._alpha=value,this.parent.dirty=!0}}});module.exports=Bob},function(module,exports,__webpack_require__){var renderWebGL=__webpack_require__(2),renderCanvas=__webpack_require__(2);renderWebGL=__webpack_require__(961),renderCanvas=__webpack_require__(962),module.exports={renderWebGL:renderWebGL,renderCanvas:renderCanvas}},function(module,exports){module.exports=function(renderer,container,interpolationPercentage,camera,parentMatrix){var children=container.list;if(0!==children.length){var transformMatrix=container.localTransform;parentMatrix?(transformMatrix.loadIdentity(),transformMatrix.multiply(parentMatrix),transformMatrix.translate(container.x,container.y),transformMatrix.rotate(container.rotation),transformMatrix.scale(container.scaleX,container.scaleY)):transformMatrix.applyITRS(container.x,container.y,container.rotation,container.scaleX,container.scaleY);var containerHasBlendMode=-1!==container.blendMode;containerHasBlendMode||renderer.setBlendMode(0);for(var alpha=container._alpha,scrollFactorX=container.scrollFactorX,scrollFactorY=container.scrollFactorY,i=0;i<children.length;i++){var child=children[i];if(child.willRender(camera)){var childAlpha=child.alpha,childScrollFactorX=child.scrollFactorX,childScrollFactorY=child.scrollFactorY;containerHasBlendMode||child.blendMode===renderer.currentBlendMode||renderer.setBlendMode(child.blendMode),child.mask&&child.mask.preRenderWebGL(renderer,child,camera),child.setScrollFactor(childScrollFactorX*scrollFactorX,childScrollFactorY*scrollFactorY),child.setAlpha(childAlpha*alpha),child.renderWebGL(renderer,child,interpolationPercentage,camera,transformMatrix),child.setAlpha(childAlpha),child.setScrollFactor(childScrollFactorX,childScrollFactorY),child.mask&&child.mask.postRenderWebGL(renderer,camera)}}}}},function(module,exports){module.exports=function(renderer,container,interpolationPercentage,camera,parentMatrix){var children=container.list;if(0!==children.length){var transformMatrix=container.localTransform;parentMatrix?(transformMatrix.loadIdentity(),transformMatrix.multiply(parentMatrix),transformMatrix.translate(container.x,container.y),transformMatrix.rotate(container.rotation),transformMatrix.scale(container.scaleX,container.scaleY)):transformMatrix.applyITRS(container.x,container.y,container.rotation,container.scaleX,container.scaleY);var containerHasBlendMode=-1!==container.blendMode;containerHasBlendMode||renderer.setBlendMode(0);for(var alpha=container._alpha,scrollFactorX=container.scrollFactorX,scrollFactorY=container.scrollFactorY,i=0;i<children.length;i++){var child=children[i];if(child.willRender(camera)){var childAlpha=child.alpha,childBlendMode=child._blendMode,childScrollFactorX=child.scrollFactorX,childScrollFactorY=child.scrollFactorY;child.setScrollFactor(childScrollFactorX*scrollFactorX,childScrollFactorY*scrollFactorY),child.setAlpha(childAlpha*alpha),containerHasBlendMode&&child.setBlendMode(container._blendMode),child.renderCanvas(renderer,child,interpolationPercentage,camera,transformMatrix),child.setAlpha(childAlpha),child.setScrollFactor(childScrollFactorX,childScrollFactorY),child.setBlendMode(childBlendMode)}}}}},function(module,exports,__webpack_require__){var renderWebGL=__webpack_require__(2),renderCanvas=__webpack_require__(2);renderWebGL=__webpack_require__(401),renderCanvas=__webpack_require__(401),module.exports={renderWebGL:renderWebGL,renderCanvas:renderCanvas}},function(module,exports){module.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},function(module,exports,__webpack_require__){var renderWebGL=__webpack_require__(2),renderCanvas=__webpack_require__(2);renderWebGL=__webpack_require__(966),renderCanvas=__webpack_require__(967),module.exports={renderWebGL:renderWebGL,renderCanvas:renderCanvas}},function(module,exports,__webpack_require__){var Utils=__webpack_require__(10);module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){var text=src.text,textLength=text.length;if(0!==textLength){var pipeline=this.pipeline;renderer.setPipeline(pipeline,src);var crop=src.cropWidth>0||src.cropHeight>0;crop&&(pipeline.flush(),renderer.pushScissor(src.x,src.y,src.cropWidth*src.scaleX,src.cropHeight*src.scaleY));var camMatrix=pipeline._tempMatrix1,spriteMatrix=pipeline._tempMatrix2,calcMatrix=pipeline._tempMatrix3,fontMatrix=pipeline._tempMatrix4;spriteMatrix.applyITRS(src.x,src.y,src.rotation,src.scaleX,src.scaleY),camMatrix.copyFrom(camera.matrix),parentMatrix?(camMatrix.multiplyWithOffset(parentMatrix,-camera.scrollX*src.scrollFactorX,-camera.scrollY*src.scrollFactorY),spriteMatrix.e=src.x,spriteMatrix.f=src.y,camMatrix.multiply(spriteMatrix,calcMatrix)):(spriteMatrix.e-=camera.scrollX*src.scrollFactorX,spriteMatrix.f-=camera.scrollY*src.scrollFactorY,camMatrix.multiply(spriteMatrix,calcMatrix));var frame=src.frame,texture=frame.glTexture,textureX=frame.cutX,textureY=frame.cutY,textureWidth=texture.width,textureHeight=texture.height,tintEffect=src._isTinted&&src.tintFill,tintTL=Utils.getTintAppendFloatAlpha(src._tintTL,camera.alpha*src._alphaTL),tintTR=Utils.getTintAppendFloatAlpha(src._tintTR,camera.alpha*src._alphaTR),tintBL=Utils.getTintAppendFloatAlpha(src._tintBL,camera.alpha*src._alphaBL),tintBR=Utils.getTintAppendFloatAlpha(src._tintBR,camera.alpha*src._alphaBR);pipeline.setTexture2D(texture,0);var glyph,lastGlyph,xAdvance=0,yAdvance=0,charCode=0,lastCharCode=0,letterSpacing=src.letterSpacing,glyphX=0,glyphY=0,glyphW=0,glyphH=0,scrollX=src.scrollX,scrollY=src.scrollY,fontData=src.fontData,chars=fontData.chars,lineHeight=fontData.lineHeight,scale=src.fontSize/fontData.size,rotation=0,align=src._align,currentLine=0,lineOffsetX=0;src.getTextBounds(!1);var lineData=src._bounds.lines;1===align?lineOffsetX=(lineData.longest-lineData.lengths[0])/2:2===align&&(lineOffsetX=lineData.longest-lineData.lengths[0]);for(var roundPixels=camera.roundPixels,displayCallback=src.displayCallback,callbackData=src.callbackData,i=0;i<textLength;i++)if(10!==(charCode=text.charCodeAt(i))){if(glyph=chars[charCode]){glyphX=textureX+glyph.x,glyphY=textureY+glyph.y,glyphW=glyph.width,glyphH=glyph.height;var x=glyph.xOffset+xAdvance-scrollX,y=glyph.yOffset+yAdvance-scrollY;if(null!==lastGlyph){var kerningOffset=glyph.kerning[lastCharCode];x+=void 0!==kerningOffset?kerningOffset:0}if(xAdvance+=glyph.xAdvance+letterSpacing,lastGlyph=glyph,lastCharCode=charCode,0!==glyphW&&0!==glyphH&&32!==charCode){if(scale=src.fontSize/src.fontData.size,rotation=0,displayCallback){callbackData.color=0,callbackData.tint.topLeft=tintTL,callbackData.tint.topRight=tintTR,callbackData.tint.bottomLeft=tintBL,callbackData.tint.bottomRight=tintBR,callbackData.index=i,callbackData.charCode=charCode,callbackData.x=x,callbackData.y=y,callbackData.scale=scale,callbackData.rotation=rotation,callbackData.data=glyph.data;var output=displayCallback(callbackData);x=output.x,y=output.y,scale=output.scale,rotation=output.rotation,output.color?(tintTL=output.color,tintTR=output.color,tintBL=output.color,tintBR=output.color):(tintTL=output.tint.topLeft,tintTR=output.tint.topRight,tintBL=output.tint.bottomLeft,tintBR=output.tint.bottomRight),tintTL=Utils.getTintAppendFloatAlpha(tintTL,camera.alpha*src._alphaTL),tintTR=Utils.getTintAppendFloatAlpha(tintTR,camera.alpha*src._alphaTR),tintBL=Utils.getTintAppendFloatAlpha(tintBL,camera.alpha*src._alphaBL),tintBR=Utils.getTintAppendFloatAlpha(tintBR,camera.alpha*src._alphaBR)}x*=scale,y*=scale,x-=src.displayOriginX,y-=src.displayOriginY,x+=lineOffsetX,fontMatrix.applyITRS(x,y,rotation,scale,scale),calcMatrix.multiply(fontMatrix,spriteMatrix);var u0=glyphX/textureWidth,v0=glyphY/textureHeight,u1=(glyphX+glyphW)/textureWidth,v1=(glyphY+glyphH)/textureHeight,xw=glyphW,yh=glyphH,tx0=spriteMatrix.e,ty0=spriteMatrix.f,tx1=yh*spriteMatrix.c+spriteMatrix.e,ty1=yh*spriteMatrix.d+spriteMatrix.f,tx2=xw*spriteMatrix.a+yh*spriteMatrix.c+spriteMatrix.e,ty2=xw*spriteMatrix.b+yh*spriteMatrix.d+spriteMatrix.f,tx3=xw*spriteMatrix.a+spriteMatrix.e,ty3=xw*spriteMatrix.b+spriteMatrix.f;roundPixels&&(tx0=Math.round(tx0),ty0=Math.round(ty0),tx1=Math.round(tx1),ty1=Math.round(ty1),tx2=Math.round(tx2),ty2=Math.round(ty2),tx3=Math.round(tx3),ty3=Math.round(ty3)),pipeline.batchQuad(tx0,ty0,tx1,ty1,tx2,ty2,tx3,ty3,u0,v0,u1,v1,tintTL,tintTR,tintBL,tintBR,tintEffect,texture,0)}}}else currentLine++,1===align?lineOffsetX=(lineData.longest-lineData.lengths[currentLine])/2:2===align&&(lineOffsetX=lineData.longest-lineData.lengths[currentLine]),xAdvance=0,yAdvance+=lineHeight,lastGlyph=null;crop&&(pipeline.flush(),renderer.popScissor())}}},function(module,exports,__webpack_require__){var SetTransform=__webpack_require__(29);module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){var text=src.text,textLength=text.length,ctx=renderer.currentContext;if(0!==textLength&&SetTransform(renderer,ctx,src,camera,parentMatrix)){var textureFrame=src.frame,displayCallback=src.displayCallback,callbackData=src.callbackData,cameraScrollX=camera.scrollX*src.scrollFactorX,cameraScrollY=camera.scrollY*src.scrollFactorY,chars=src.fontData.chars,lineHeight=src.fontData.lineHeight,xAdvance=0,yAdvance=0,indexCount=0,charCode=0,glyph=null,glyphX=0,glyphY=0,glyphW=0,glyphH=0,x=0,y=0,lastGlyph=null,lastCharCode=0,image=src.frame.source.image,textureX=textureFrame.cutX,textureY=textureFrame.cutY,rotation=0,scale=src.fontSize/src.fontData.size;src.cropWidth>0&&src.cropHeight>0&&(ctx.beginPath(),ctx.rect(0,0,src.cropWidth,src.cropHeight),ctx.clip());for(var index=0;index<textLength;++index)if(scale=src.fontSize/src.fontData.size,rotation=0,10!==(charCode=text.charCodeAt(index))){if(glyph=chars[charCode]){if(glyphX=textureX+glyph.x,glyphY=textureY+glyph.y,glyphW=glyph.width,glyphH=glyph.height,x=indexCount+glyph.xOffset+xAdvance-src.scrollX,y=glyph.yOffset+yAdvance-src.scrollY,null!==lastGlyph){var kerningOffset=glyph.kerning[lastCharCode];x+=void 0!==kerningOffset?kerningOffset:0}if(displayCallback){callbackData.index=index,callbackData.charCode=charCode,callbackData.x=x,callbackData.y=y,callbackData.scale=scale,callbackData.rotation=rotation,callbackData.data=glyph.data;var output=displayCallback(callbackData);x=output.x,y=output.y,scale=output.scale,rotation=output.rotation}x*=scale,y*=scale,x-=cameraScrollX,y-=cameraScrollY,camera.roundPixels&&(x=Math.round(x),y=Math.round(y)),ctx.save(),ctx.translate(x,y),ctx.rotate(rotation),ctx.scale(scale,scale),ctx.drawImage(image,glyphX,glyphY,glyphW,glyphH,0,0,glyphW,glyphH),ctx.restore(),xAdvance+=glyph.xAdvance,indexCount+=1,lastGlyph=glyph,lastCharCode=charCode}}else xAdvance=0,indexCount=0,yAdvance+=lineHeight,lastGlyph=null;ctx.restore()}}},function(module,exports,__webpack_require__){var renderWebGL=__webpack_require__(2),renderCanvas=__webpack_require__(2);renderWebGL=__webpack_require__(969),renderCanvas=__webpack_require__(970),module.exports={renderWebGL:renderWebGL,renderCanvas:renderCanvas}},function(module,exports){module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){var pipeline=renderer.currentPipeline;renderer.clearPipeline();var camMatrix=renderer._tempMatrix1,spriteMatrix=renderer._tempMatrix2,calcMatrix=renderer._tempMatrix3;spriteMatrix.applyITRS(src.x,src.y,src.rotation,src.scaleX,src.scaleY),camMatrix.copyFrom(camera.matrix),parentMatrix?(camMatrix.multiplyWithOffset(parentMatrix,-camera.scrollX*src.scrollFactorX,-camera.scrollY*src.scrollFactorY),spriteMatrix.e=src.x,spriteMatrix.f=src.y,camMatrix.multiply(spriteMatrix,calcMatrix)):(spriteMatrix.e-=camera.scrollX*src.scrollFactorX,spriteMatrix.f-=camera.scrollY*src.scrollFactorY,camMatrix.multiply(spriteMatrix,calcMatrix)),src.render.call(src,renderer,camera,calcMatrix),renderer.rebindPipeline(pipeline)}},function(module,exports){},function(module,exports,__webpack_require__){var renderWebGL=__webpack_require__(2),renderCanvas=__webpack_require__(2);renderWebGL=__webpack_require__(972),renderCanvas=__webpack_require__(406),renderCanvas=__webpack_require__(406),module.exports={renderWebGL:renderWebGL,renderCanvas:renderCanvas}},function(module,exports,__webpack_require__){var Commands=__webpack_require__(209),Utils=__webpack_require__(10),Point=function(x,y,width){this.x=x,this.y=y,this.width=width},Path=function(x,y,width){this.points=[],this.pointsLength=1,this.points[0]=new Point(x,y,width)},matrixStack=[];module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){if(0!==src.commandBuffer.length){var pipeline=this.pipeline;renderer.setPipeline(pipeline,src);var camMatrix=src._tempMatrix1,graphicsMatrix=src._tempMatrix2,currentMatrix=src._tempMatrix3;currentMatrix.loadIdentity(),graphicsMatrix.applyITRS(src.x,src.y,src.rotation,src.scaleX,src.scaleY),camMatrix.copyFrom(camera.matrix),parentMatrix?(camMatrix.multiplyWithOffset(parentMatrix,-camera.scrollX*src.scrollFactorX,-camera.scrollY*src.scrollFactorY),graphicsMatrix.e=src.x,graphicsMatrix.f=src.y,camMatrix.multiply(graphicsMatrix)):(graphicsMatrix.e-=camera.scrollX*src.scrollFactorX,graphicsMatrix.f-=camera.scrollY*src.scrollFactorY,camMatrix.multiply(graphicsMatrix));for(var commands=src.commandBuffer,alpha=camera.alpha*src.alpha,lineWidth=1,fillTint=pipeline.fillTint,strokeTint=pipeline.strokeTint,tx=0,ty=0,ta=0,PI2=2*Math.PI,path=[],pathIndex=0,pathOpen=!1,lastPath=null,getTint=Utils.getTintAppendFloatAlphaAndSwap,currentTexture=renderer.blankTexture.glTexture,cmdIndex=0;cmdIndex<commands.length;cmdIndex++)switch(commands[cmdIndex]){case Commands.BEGIN_PATH:path.length=0,lastPath=null,pathOpen=!0;break;case Commands.CLOSE_PATH:pathOpen=!1,lastPath&&lastPath.points.length&&lastPath.points.push(lastPath.points[0]);break;case Commands.FILL_PATH:for(pathIndex=0;pathIndex<path.length;pathIndex++)pipeline.setTexture2D(currentTexture),pipeline.batchFillPath(path[pathIndex].points,currentMatrix,camMatrix);break;case Commands.STROKE_PATH:for(pathIndex=0;pathIndex<path.length;pathIndex++)pipeline.setTexture2D(currentTexture),pipeline.batchStrokePath(path[pathIndex].points,lineWidth,pathOpen,currentMatrix,camMatrix);break;case Commands.LINE_STYLE:lineWidth=commands[++cmdIndex];var strokeTintColor=getTint(commands[++cmdIndex],commands[++cmdIndex]*alpha);strokeTint.TL=strokeTintColor,strokeTint.TR=strokeTintColor,strokeTint.BL=strokeTintColor,strokeTint.BR=strokeTintColor;break;case Commands.FILL_STYLE:var fillTintColor=getTint(commands[++cmdIndex],commands[++cmdIndex]*alpha);fillTint.TL=fillTintColor,fillTint.TR=fillTintColor,fillTint.BL=fillTintColor,fillTint.BR=fillTintColor;break;case Commands.GRADIENT_FILL_STYLE:var gradientFillAlpha=commands[++cmdIndex]*alpha;fillTint.TL=getTint(commands[++cmdIndex],gradientFillAlpha),fillTint.TR=getTint(commands[++cmdIndex],gradientFillAlpha),fillTint.BL=getTint(commands[++cmdIndex],gradientFillAlpha),fillTint.BR=getTint(commands[++cmdIndex],gradientFillAlpha);break;case Commands.GRADIENT_LINE_STYLE:lineWidth=commands[++cmdIndex];var gradientLineAlpha=commands[++cmdIndex]*alpha;strokeTint.TL=getTint(commands[++cmdIndex],gradientLineAlpha),strokeTint.TR=getTint(commands[++cmdIndex],gradientLineAlpha),strokeTint.BL=getTint(commands[++cmdIndex],gradientLineAlpha),strokeTint.BR=getTint(commands[++cmdIndex],gradientLineAlpha);break;case Commands.ARC:var iteration=0,x=commands[++cmdIndex],y=commands[++cmdIndex],radius=commands[++cmdIndex],startAngle=commands[++cmdIndex],endAngle=commands[++cmdIndex],anticlockwise=commands[++cmdIndex],overshoot=commands[++cmdIndex];for(endAngle-=startAngle,anticlockwise?endAngle<-PI2?endAngle=-PI2:endAngle>0&&(endAngle=endAngle%PI2-PI2):endAngle>PI2?endAngle=PI2:endAngle<0&&(endAngle=PI2+endAngle%PI2),null===lastPath&&(lastPath=new Path(x+Math.cos(startAngle)*radius,y+Math.sin(startAngle)*radius,lineWidth),path.push(lastPath),iteration+=.01);iteration<1+overshoot;)ta=endAngle*iteration+startAngle,tx=x+Math.cos(ta)*radius,ty=y+Math.sin(ta)*radius,lastPath.points.push(new Point(tx,ty,lineWidth)),iteration+=.01;ta=endAngle+startAngle,tx=x+Math.cos(ta)*radius,ty=y+Math.sin(ta)*radius,lastPath.points.push(new Point(tx,ty,lineWidth));break;case Commands.FILL_RECT:pipeline.setTexture2D(currentTexture),pipeline.batchFillRect(commands[++cmdIndex],commands[++cmdIndex],commands[++cmdIndex],commands[++cmdIndex],currentMatrix,camMatrix);break;case Commands.FILL_TRIANGLE:pipeline.setTexture2D(currentTexture),pipeline.batchFillTriangle(commands[++cmdIndex],commands[++cmdIndex],commands[++cmdIndex],commands[++cmdIndex],commands[++cmdIndex],commands[++cmdIndex],currentMatrix,camMatrix);break;case Commands.STROKE_TRIANGLE:pipeline.setTexture2D(currentTexture),pipeline.batchStrokeTriangle(commands[++cmdIndex],commands[++cmdIndex],commands[++cmdIndex],commands[++cmdIndex],commands[++cmdIndex],commands[++cmdIndex],lineWidth,currentMatrix,camMatrix);break;case Commands.LINE_TO:null!==lastPath?lastPath.points.push(new Point(commands[++cmdIndex],commands[++cmdIndex],lineWidth)):(lastPath=new Path(commands[++cmdIndex],commands[++cmdIndex],lineWidth),path.push(lastPath));break;case Commands.MOVE_TO:lastPath=new Path(commands[++cmdIndex],commands[++cmdIndex],lineWidth),path.push(lastPath);break;case Commands.SAVE:matrixStack.push(currentMatrix.copyToArray());break;case Commands.RESTORE:currentMatrix.copyFromArray(matrixStack.pop());break;case Commands.TRANSLATE:x=commands[++cmdIndex],y=commands[++cmdIndex],currentMatrix.translate(x,y);break;case Commands.SCALE:x=commands[++cmdIndex],y=commands[++cmdIndex],currentMatrix.scale(x,y);break;case Commands.ROTATE:currentMatrix.rotate(commands[++cmdIndex]);break;case Commands.SET_TEXTURE:var frame=commands[++cmdIndex],mode=commands[++cmdIndex];pipeline.currentFrame=frame,pipeline.setTexture2D(frame.glTexture,0),pipeline.tintEffect=mode,currentTexture=frame.glTexture;break;case Commands.CLEAR_TEXTURE:pipeline.currentFrame=renderer.blankTexture,pipeline.tintEffect=2,currentTexture=renderer.blankTexture.glTexture}}}},function(module,exports,__webpack_require__){var renderWebGL=__webpack_require__(2),renderCanvas=__webpack_require__(2);renderWebGL=__webpack_require__(974),renderCanvas=__webpack_require__(975),module.exports={renderWebGL:renderWebGL,renderCanvas:renderCanvas}},function(module,exports){module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){this.pipeline.batchSprite(src,camera,parentMatrix)}},function(module,exports){module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){renderer.batchSprite(src,src.frame,camera,parentMatrix)}},function(module,exports,__webpack_require__){var renderWebGL=__webpack_require__(2),renderCanvas=__webpack_require__(2);renderWebGL=__webpack_require__(977),renderCanvas=__webpack_require__(978),module.exports={renderWebGL:renderWebGL,renderCanvas:renderCanvas}},function(module,exports){module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){this.pipeline.batchSprite(src,camera,parentMatrix)}},function(module,exports){module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){renderer.batchSprite(src,src.frame,camera,parentMatrix)}},function(module,exports,__webpack_require__){module.exports={GravityWell:__webpack_require__(407),Particle:__webpack_require__(408),ParticleEmitter:__webpack_require__(409),ParticleEmitterManager:__webpack_require__(211),Zones:__webpack_require__(984)}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),FloatBetween=__webpack_require__(332),GetEaseFunction=__webpack_require__(92),GetFastValue=__webpack_require__(1),Wrap=__webpack_require__(64),EmitterOp=new Class({initialize:function(config,key,defaultValue,emitOnly){void 0===emitOnly&&(emitOnly=!1),this.propertyKey=key,this.propertyValue=defaultValue,this.defaultValue=defaultValue,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=emitOnly,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(config)},loadConfig:function(config,newKey){void 0===config&&(config={}),newKey&&(this.propertyKey=newKey),this.propertyValue=GetFastValue(config,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(value){return this.propertyValue=value,this.setMethods()},setMethods:function(){var value=this.propertyValue,t=typeof value;if("number"===t)this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(value))this.onEmit=this.randomStaticValueEmit;else if("function"===t)this.emitOnly?this.onEmit=value:this.onUpdate=value;else if("object"===t&&(this.has(value,"random")||this.hasBoth(value,"start","end")||this.hasBoth(value,"min","max"))){this.start=this.has(value,"start")?value.start:value.min,this.end=this.has(value,"end")?value.end:value.max;var isRandom=this.hasBoth(value,"min","max")||!!value.random;if(isRandom){var rnd=value.random;Array.isArray(rnd)&&(this.start=rnd[0],this.end=rnd[1]),this.onEmit=this.randomRangedValueEmit}if(this.has(value,"steps"))this.steps=value.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var easeType=this.has(value,"ease")?value.ease:"Linear";this.ease=GetEaseFunction(easeType),isRandom||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else"object"===t&&this.hasEither(value,"onEmit","onUpdate")&&(this.has(value,"onEmit")&&(this.onEmit=value.onEmit),this.has(value,"onUpdate")&&(this.onUpdate=value.onUpdate));return this},has:function(object,key){return object.hasOwnProperty(key)},hasBoth:function(object,key1,key2){return object.hasOwnProperty(key1)&&object.hasOwnProperty(key2)},hasEither:function(object,key1,key2){return object.hasOwnProperty(key1)||object.hasOwnProperty(key2)},defaultEmit:function(particle,key,value){return value},defaultUpdate:function(particle,key,t,value){return value},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var randomIndex=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[randomIndex]},randomRangedValueEmit:function(particle,key){var value=FloatBetween(this.start,this.end);return particle&&particle.data[key]&&(particle.data[key].min=value),value},steppedEmit:function(){var current=this.counter,next=this.counter+(this.end-this.start)/this.steps;return this.counter=Wrap(next,this.start,this.end),current},easedValueEmit:function(particle,key){if(particle&&particle.data[key]){var data=particle.data[key];data.min=this.start,data.max=this.end}return this.start},easeValueUpdate:function(particle,key,t){var data=particle.data[key];return(data.max-data.min)*this.ease(t)+data.min}});module.exports=EmitterOp},function(module,exports,__webpack_require__){var renderWebGL=__webpack_require__(2),renderCanvas=__webpack_require__(2);renderWebGL=__webpack_require__(982),renderCanvas=__webpack_require__(983),module.exports={renderWebGL:renderWebGL,renderCanvas:renderCanvas}},function(module,exports,__webpack_require__){var Utils=__webpack_require__(10);module.exports=function(renderer,emitterManager,interpolationPercentage,camera,parentMatrix){var emitters=emitterManager.emitters.list,emittersLength=emitters.length;if(0!==emittersLength){var pipeline=this.pipeline,camMatrix=pipeline._tempMatrix1.copyFrom(camera.matrix),calcMatrix=pipeline._tempMatrix2,particleMatrix=pipeline._tempMatrix3,managerMatrix=pipeline._tempMatrix4.applyITRS(emitterManager.x,emitterManager.y,emitterManager.rotation,emitterManager.scaleX,emitterManager.scaleY);camMatrix.multiply(managerMatrix),renderer.setPipeline(pipeline);var roundPixels=camera.roundPixels,texture=emitterManager.defaultFrame.glTexture,getTint=Utils.getTintAppendFloatAlphaAndSwap;pipeline.setTexture2D(texture,0);for(var e=0;e<emittersLength;e++){var emitter=emitters[e],particles=emitter.alive,particleCount=particles.length;if(emitter.visible&&0!==particleCount){var scrollX=camera.scrollX*emitter.scrollFactorX,scrollY=camera.scrollY*emitter.scrollFactorY;parentMatrix&&(camMatrix.multiplyWithOffset(parentMatrix,-scrollX,-scrollY),scrollX=0,scrollY=0),renderer.setBlendMode(emitter.blendMode)&&pipeline.setTexture2D(texture,0),emitter.mask&&(emitter.mask.preRenderWebGL(renderer,emitter,camera),pipeline.setTexture2D(texture,0));for(var i=0;i<particleCount;i++){var particle=particles[i],alpha=particle.alpha*camera.alpha;if(!(alpha<=0)){var frame=particle.frame,x=-frame.halfWidth,y=-frame.halfHeight,xw=x+frame.width,yh=y+frame.height;particleMatrix.applyITRS(0,0,particle.rotation,particle.scaleX,particle.scaleY),particleMatrix.e=particle.x-scrollX,particleMatrix.f=particle.y-scrollY,camMatrix.multiply(particleMatrix,calcMatrix);var tx0=calcMatrix.getX(x,y),ty0=calcMatrix.getY(x,y),tx1=calcMatrix.getX(x,yh),ty1=calcMatrix.getY(x,yh),tx2=calcMatrix.getX(xw,yh),ty2=calcMatrix.getY(xw,yh),tx3=calcMatrix.getX(xw,y),ty3=calcMatrix.getY(xw,y);roundPixels&&(tx0=Math.round(tx0),ty0=Math.round(ty0),tx1=Math.round(tx1),ty1=Math.round(ty1),tx2=Math.round(tx2),ty2=Math.round(ty2),tx3=Math.round(tx3),ty3=Math.round(ty3));var tint=getTint(particle.tint,alpha);pipeline.batchQuad(tx0,ty0,tx1,ty1,tx2,ty2,tx3,ty3,frame.u0,frame.v0,frame.u1,frame.v1,tint,tint,tint,tint,0,texture,0)}}emitter.mask&&(emitter.mask.postRenderWebGL(renderer,camera),pipeline.setTexture2D(texture,0))}}}}},function(module,exports){module.exports=function(renderer,emitterManager,interpolationPercentage,camera,parentMatrix){var emitters=emitterManager.emitters.list,emittersLength=emitters.length;if(0!==emittersLength){var camMatrix=renderer._tempMatrix1.copyFrom(camera.matrix),calcMatrix=renderer._tempMatrix2,particleMatrix=renderer._tempMatrix3,managerMatrix=renderer._tempMatrix4.applyITRS(emitterManager.x,emitterManager.y,emitterManager.rotation,emitterManager.scaleX,emitterManager.scaleY);camMatrix.multiply(managerMatrix);var roundPixels=camera.roundPixels,ctx=renderer.currentContext;ctx.save();for(var e=0;e<emittersLength;e++){var emitter=emitters[e],particles=emitter.alive,particleCount=particles.length;if(emitter.visible&&0!==particleCount){var scrollX=camera.scrollX*emitter.scrollFactorX,scrollY=camera.scrollY*emitter.scrollFactorY;parentMatrix&&(camMatrix.multiplyWithOffset(parentMatrix,-scrollX,-scrollY),scrollX=0,scrollY=0),ctx.globalCompositeOperation=renderer.blendModes[emitter.blendMode];for(var i=0;i<particleCount;i++){var particle=particles[i],alpha=particle.alpha*camera.alpha;if(!(alpha<=0)){var frame=particle.frame,cd=frame.canvasData,x=-frame.halfWidth,y=-frame.halfHeight;particleMatrix.applyITRS(0,0,particle.rotation,particle.scaleX,particle.scaleY),particleMatrix.e=particle.x-scrollX,particleMatrix.f=particle.y-scrollY,camMatrix.multiply(particleMatrix,calcMatrix),ctx.globalAlpha=alpha,ctx.save(),calcMatrix.copyToContext(ctx),roundPixels&&(x=Math.round(x),y=Math.round(y)),ctx.drawImage(frame.source.image,cd.x,cd.y,cd.width,cd.height,x,y,cd.width,cd.height),ctx.restore()}}}}ctx.restore()}}},function(module,exports,__webpack_require__){module.exports={DeathZone:__webpack_require__(410),EdgeZone:__webpack_require__(411),RandomZone:__webpack_require__(413)}},function(module,exports,__webpack_require__){var renderWebGL=__webpack_require__(2),renderCanvas=__webpack_require__(2);renderWebGL=__webpack_require__(986),renderCanvas=__webpack_require__(987),module.exports={renderWebGL:renderWebGL,renderCanvas:renderCanvas}},function(module,exports,__webpack_require__){var Utils=__webpack_require__(10);module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){var frame=src.frame,width=frame.width,height=frame.height,getTint=Utils.getTintAppendFloatAlpha;this.pipeline.batchTexture(src,frame.glTexture,width,height,src.x,src.y,width,height,src.scaleX,src.scaleY,src.rotation,src.flipX,!src.flipY,src.scrollFactorX,src.scrollFactorY,src.displayOriginX,src.displayOriginY,0,0,width,height,getTint(src._tintTL,camera.alpha*src._alphaTL),getTint(src._tintTR,camera.alpha*src._alphaTR),getTint(src._tintBL,camera.alpha*src._alphaBL),getTint(src._tintBR,camera.alpha*src._alphaBR),src._isTinted&&src.tintFill,0,0,camera,parentMatrix),renderer.setBlankTexture(!0)}},function(module,exports){module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){renderer.batchSprite(src,src.frame,camera,parentMatrix)}},function(module,exports,__webpack_require__){var RETRO_FONT_CONST=__webpack_require__(989),Extend=__webpack_require__(17),RetroFont={Parse:__webpack_require__(990)};RetroFont=Extend(!1,RetroFont,RETRO_FONT_CONST),module.exports=RetroFont},function(module,exports){module.exports={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:"ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ",TEXT_SET7:"AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39",TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:"ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!",TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789"}},function(module,exports,__webpack_require__){var GetValue=__webpack_require__(5);module.exports=function(scene,config){var w=config.width,h=config.height,cx=Math.floor(w/2),cy=Math.floor(h/2),letters=GetValue(config,"chars","");if(""!==letters){var key=GetValue(config,"image",""),offsetX=GetValue(config,"offset.x",0),offsetY=GetValue(config,"offset.y",0),spacingX=GetValue(config,"spacing.x",0),spacingY=GetValue(config,"spacing.y",0),lineSpacing=GetValue(config,"lineSpacing",0),charsPerRow=GetValue(config,"charsPerRow",null);null===charsPerRow&&(charsPerRow=scene.sys.textures.getFrame(key).width/w)>letters.length&&(charsPerRow=letters.length);for(var x=offsetX,y=offsetY,data={retroFont:!0,font:key,size:w,lineHeight:h+lineSpacing,chars:{}},r=0,i=0;i<letters.length;i++){var charCode=letters.charCodeAt(i);data.chars[charCode]={x:x,y:y,width:w,height:h,centerX:cx,centerY:cy,xOffset:0,yOffset:0,xAdvance:w,data:{},kerning:{}},++r===charsPerRow?(r=0,x=offsetX,y+=h+spacingY):x+=w+spacingX}return{data:data,frame:null,texture:key}}}},function(module,exports){module.exports=function(text,size,lines){var canvas=text.canvas,context=text.context,style=text.style,lineWidths=[],maxLineWidth=0,drawnLines=lines.length;style.maxLines>0&&style.maxLines<lines.length&&(drawnLines=style.maxLines),style.syncFont(canvas,context);for(var i=0;i<drawnLines;i++){var lineWidth=style.strokeThickness;lineWidth+=context.measureText(lines[i]).width,style.wordWrap&&(lineWidth-=context.measureText(" ").width),lineWidths[i]=Math.ceil(lineWidth),maxLineWidth=Math.max(maxLineWidth,lineWidths[i])}var lineHeight=size.fontSize+style.strokeThickness,height=lineHeight*drawnLines,lineSpacing=text.lineSpacing;return drawnLines>1&&(height+=lineSpacing*(drawnLines-1)),{width:maxLineWidth,height:height,lines:drawnLines,lineWidths:lineWidths,lineSpacing:lineSpacing,lineHeight:lineHeight}}},function(module,exports,__webpack_require__){var renderWebGL=__webpack_require__(2),renderCanvas=__webpack_require__(2);renderWebGL=__webpack_require__(993),renderCanvas=__webpack_require__(994),module.exports={renderWebGL:renderWebGL,renderCanvas:renderCanvas}},function(module,exports,__webpack_require__){var Utils=__webpack_require__(10);module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){if(0!==src.width&&0!==src.height){var frame=src.frame,width=frame.width,height=frame.height,getTint=Utils.getTintAppendFloatAlpha;this.pipeline.batchTexture(src,frame.glTexture,width,height,src.x,src.y,width/src.style.resolution,height/src.style.resolution,src.scaleX,src.scaleY,src.rotation,src.flipX,src.flipY,src.scrollFactorX,src.scrollFactorY,src.displayOriginX,src.displayOriginY,0,0,width,height,getTint(src._tintTL,camera.alpha*src._alphaTL),getTint(src._tintTR,camera.alpha*src._alphaTR),getTint(src._tintBL,camera.alpha*src._alphaBL),getTint(src._tintBR,camera.alpha*src._alphaBR),src._isTinted&&src.tintFill,0,0,camera,parentMatrix)}}},function(module,exports){module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){0!==src.width&&0!==src.height&&renderer.batchSprite(src,src.frame,camera,parentMatrix)}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),GetAdvancedValue=__webpack_require__(14),GetValue=__webpack_require__(5),MeasureText=__webpack_require__(996),propertyMap={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|MÃ‰qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},TextStyle=new Class({initialize:function(text,style){this.parent=text,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this._font,this.setStyle(style,!1,!0);var metrics=GetValue(style,"metrics",!1);this.metrics=metrics?{ascent:GetValue(metrics,"ascent",0),descent:GetValue(metrics,"descent",0),fontSize:GetValue(metrics,"fontSize",0)}:MeasureText(this)},setStyle:function(style,updateText,setDefaults){for(var key in void 0===updateText&&(updateText=!0),void 0===setDefaults&&(setDefaults=!1),style&&style.hasOwnProperty("fontSize")&&"number"==typeof style.fontSize&&(style.fontSize=style.fontSize.toString()+"px"),propertyMap){var value=setDefaults?propertyMap[key][1]:this[key];this[key]="wordWrapCallback"===key||"wordWrapCallbackScope"===key?GetValue(style,propertyMap[key][0],value):GetAdvancedValue(style,propertyMap[key][0],value)}var font=GetValue(style,"font",null);null!==font&&this.setFont(font,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var fill=GetValue(style,"fill",null);return null!==fill&&(this.color=fill),updateText?this.update(!0):this.parent},syncFont:function(canvas,context){context.font=this._font},syncStyle:function(canvas,context){context.textBaseline="alphabetic",context.fillStyle=this.color,context.strokeStyle=this.stroke,context.lineWidth=this.strokeThickness,context.lineCap="round",context.lineJoin="round"},syncShadow:function(context,enabled){enabled?(context.shadowOffsetX=this.shadowOffsetX,context.shadowOffsetY=this.shadowOffsetY,context.shadowColor=this.shadowColor,context.shadowBlur=this.shadowBlur):(context.shadowOffsetX=0,context.shadowOffsetY=0,context.shadowColor=0,context.shadowBlur=0)},update:function(recalculateMetrics){return recalculateMetrics&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=MeasureText(this)),this.parent.updateText()},setFont:function(font,updateText){void 0===updateText&&(updateText=!0);var fontFamily=font,fontSize="",fontStyle="";if("string"!=typeof font)fontFamily=GetValue(font,"fontFamily","Courier"),fontSize=GetValue(font,"fontSize","16px"),fontStyle=GetValue(font,"fontStyle","");else{var fontSplit=font.split(" "),i=0;fontStyle=fontSplit.length>2?fontSplit[i++]:"",fontSize=fontSplit[i++]||"16px",fontFamily=fontSplit[i++]||"Courier"}return fontFamily===this.fontFamily&&fontSize===this.fontSize&&fontStyle===this.fontStyle||(this.fontFamily=fontFamily,this.fontSize=fontSize,this.fontStyle=fontStyle,updateText&&this.update(!0)),this.parent},setFontFamily:function(family){return this.fontFamily!==family&&(this.fontFamily=family,this.update(!0)),this.parent},setFontStyle:function(style){return this.fontStyle!==style&&(this.fontStyle=style,this.update(!0)),this.parent},setFontSize:function(size){return"number"==typeof size&&(size=size.toString()+"px"),this.fontSize!==size&&(this.fontSize=size,this.update(!0)),this.parent},setTestString:function(string){return this.testString=string,this.update(!0)},setFixedSize:function(width,height){return this.fixedWidth=width,this.fixedHeight=height,width&&(this.parent.width=width),height&&(this.parent.height=height),this.update(!1)},setBackgroundColor:function(color){return this.backgroundColor=color,this.update(!1)},setFill:function(color){return this.color=color,this.update(!1)},setColor:function(color){return this.color=color,this.update(!1)},setResolution:function(value){return this.resolution=value,this.update(!1)},setStroke:function(color,thickness){return void 0===thickness&&(thickness=this.strokeThickness),void 0===color&&0!==this.strokeThickness?(this.strokeThickness=0,this.update(!0)):this.stroke===color&&this.strokeThickness===thickness||(this.stroke=color,this.strokeThickness=thickness,this.update(!0)),this.parent},setShadow:function(x,y,color,blur,shadowStroke,shadowFill){return void 0===x&&(x=0),void 0===y&&(y=0),void 0===color&&(color="#000"),void 0===blur&&(blur=0),void 0===shadowStroke&&(shadowStroke=!1),void 0===shadowFill&&(shadowFill=!0),this.shadowOffsetX=x,this.shadowOffsetY=y,this.shadowColor=color,this.shadowBlur=blur,this.shadowStroke=shadowStroke,this.shadowFill=shadowFill,this.update(!1)},setShadowOffset:function(x,y){return void 0===x&&(x=0),void 0===y&&(y=x),this.shadowOffsetX=x,this.shadowOffsetY=y,this.update(!1)},setShadowColor:function(color){return void 0===color&&(color="#000"),this.shadowColor=color,this.update(!1)},setShadowBlur:function(blur){return void 0===blur&&(blur=0),this.shadowBlur=blur,this.update(!1)},setShadowStroke:function(enabled){return this.shadowStroke=enabled,this.update(!1)},setShadowFill:function(enabled){return this.shadowFill=enabled,this.update(!1)},setWordWrapWidth:function(width,useAdvancedWrap){return void 0===useAdvancedWrap&&(useAdvancedWrap=!1),this.wordWrapWidth=width,this.wordWrapUseAdvanced=useAdvancedWrap,this.update(!1)},setWordWrapCallback:function(callback,scope){return void 0===scope&&(scope=null),this.wordWrapCallback=callback,this.wordWrapCallbackScope=scope,this.update(!1)},setAlign:function(align){return void 0===align&&(align="left"),this.align=align,this.update(!1)},setMaxLines:function(max){return void 0===max&&(max=0),this.maxLines=max,this.update(!1)},getTextMetrics:function(){var metrics=this.metrics;return{ascent:metrics.ascent,descent:metrics.descent,fontSize:metrics.fontSize}},toJSON:function(){var output={};for(var key in propertyMap)output[key]=this[key];return output.metrics=this.getTextMetrics(),output},destroy:function(){this.parent=void 0}});module.exports=TextStyle},function(module,exports,__webpack_require__){var CanvasPool=__webpack_require__(28);module.exports=function(textStyle){var canvas=CanvasPool.create(this),context=canvas.getContext("2d");textStyle.syncFont(canvas,context);var width=Math.ceil(context.measureText(textStyle.testString).width*textStyle.baselineX),baseline=width,height=2*baseline;baseline=baseline*textStyle.baselineY|0,canvas.width=width,canvas.height=height,context.fillStyle="#f00",context.fillRect(0,0,width,height),context.font=textStyle._font,context.textBaseline="alphabetic",context.fillStyle="#000",context.fillText(textStyle.testString,0,baseline);var output={ascent:0,descent:0,fontSize:0};if(!context.getImageData(0,0,width,height))return output.ascent=baseline,output.descent=baseline+6,output.fontSize=output.ascent+output.descent,CanvasPool.remove(canvas),output;var i,j,imagedata=context.getImageData(0,0,width,height).data,pixels=imagedata.length,line=4*width,idx=0,stop=!1;for(i=0;i<baseline;i++){for(j=0;j<line;j+=4)if(255!==imagedata[idx+j]){stop=!0;break}if(stop)break;idx+=line}for(output.ascent=baseline-i,idx=pixels-line,stop=!1,i=height;i>baseline;i--){for(j=0;j<line;j+=4)if(255!==imagedata[idx+j]){stop=!0;break}if(stop)break;idx-=line}return output.descent=i-baseline,output.fontSize=output.ascent+output.descent,CanvasPool.remove(canvas),output}},function(module,exports,__webpack_require__){var renderWebGL=__webpack_require__(2),renderCanvas=__webpack_require__(2);renderWebGL=__webpack_require__(998),renderCanvas=__webpack_require__(999),module.exports={renderWebGL:renderWebGL,renderCanvas:renderCanvas}},function(module,exports,__webpack_require__){var Utils=__webpack_require__(10);module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){src.updateCanvas();var getTint=Utils.getTintAppendFloatAlpha;this.pipeline.batchTexture(src,src.fillPattern,src.displayFrame.width*src.tileScaleX,src.displayFrame.height*src.tileScaleY,src.x,src.y,src.width,src.height,src.scaleX,src.scaleY,src.rotation,src.flipX,src.flipY,src.scrollFactorX,src.scrollFactorY,src.originX*src.width,src.originY*src.height,0,0,src.width,src.height,getTint(src._tintTL,camera.alpha*src._alphaTL),getTint(src._tintTR,camera.alpha*src._alphaTR),getTint(src._tintBL,camera.alpha*src._alphaBL),getTint(src._tintBR,camera.alpha*src._alphaBR),src._isTinted&&src.tintFill,src.tilePositionX%src.displayFrame.width/src.displayFrame.width,src.tilePositionY%src.displayFrame.height/src.displayFrame.height,camera,parentMatrix)}},function(module,exports){module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){src.updateCanvas(),renderer.batchSprite(src,src.frame,camera,parentMatrix)}},function(module,exports,__webpack_require__){var renderWebGL=__webpack_require__(2),renderCanvas=__webpack_require__(2);renderWebGL=__webpack_require__(1001),renderCanvas=__webpack_require__(1002),module.exports={renderWebGL:renderWebGL,renderCanvas:renderCanvas}},function(module,exports,__webpack_require__){var FillPathWebGL=__webpack_require__(110),StrokePathWebGL=__webpack_require__(74);module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){var pipeline=this.pipeline,camMatrix=pipeline._tempMatrix1,shapeMatrix=pipeline._tempMatrix2,calcMatrix=pipeline._tempMatrix3;renderer.setPipeline(pipeline),shapeMatrix.applyITRS(src.x,src.y,src.rotation,src.scaleX,src.scaleY),camMatrix.copyFrom(camera.matrix),parentMatrix?(camMatrix.multiplyWithOffset(parentMatrix,-camera.scrollX*src.scrollFactorX,-camera.scrollY*src.scrollFactorY),shapeMatrix.e=src.x,shapeMatrix.f=src.y):(shapeMatrix.e-=camera.scrollX*src.scrollFactorX,shapeMatrix.f-=camera.scrollY*src.scrollFactorY),camMatrix.multiply(shapeMatrix,calcMatrix);var dx=src._displayOriginX,dy=src._displayOriginY,alpha=camera.alpha*src.alpha;src.isFilled&&FillPathWebGL(pipeline,calcMatrix,src,alpha,dx,dy),src.isStroked&&StrokePathWebGL(pipeline,src,alpha,dx,dy)}},function(module,exports,__webpack_require__){var DegToRad=__webpack_require__(41),FillStyleCanvas=__webpack_require__(42),LineStyleCanvas=__webpack_require__(58),SetTransform=__webpack_require__(29);module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){var ctx=renderer.currentContext;if(SetTransform(renderer,ctx,src,camera,parentMatrix)){var radius=src.radius;ctx.beginPath(),ctx.arc(radius-src.originX*(2*radius),radius-src.originY*(2*radius),radius,DegToRad(src._startAngle),DegToRad(src._endAngle),src.anticlockwise),src.closePath&&ctx.closePath(),src.isFilled&&(FillStyleCanvas(ctx,src),ctx.fill()),src.isStroked&&(LineStyleCanvas(ctx,src),ctx.stroke()),ctx.restore()}}},function(module,exports,__webpack_require__){var renderWebGL=__webpack_require__(2),renderCanvas=__webpack_require__(2);renderWebGL=__webpack_require__(1004),renderCanvas=__webpack_require__(1005),module.exports={renderWebGL:renderWebGL,renderCanvas:renderCanvas}},function(module,exports,__webpack_require__){var FillPathWebGL=__webpack_require__(110),StrokePathWebGL=__webpack_require__(74);module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){var pipeline=this.pipeline,camMatrix=pipeline._tempMatrix1,shapeMatrix=pipeline._tempMatrix2,calcMatrix=pipeline._tempMatrix3;renderer.setPipeline(pipeline),shapeMatrix.applyITRS(src.x,src.y,src.rotation,src.scaleX,src.scaleY),camMatrix.copyFrom(camera.matrix),parentMatrix?(camMatrix.multiplyWithOffset(parentMatrix,-camera.scrollX*src.scrollFactorX,-camera.scrollY*src.scrollFactorY),shapeMatrix.e=src.x,shapeMatrix.f=src.y):(shapeMatrix.e-=camera.scrollX*src.scrollFactorX,shapeMatrix.f-=camera.scrollY*src.scrollFactorY),camMatrix.multiply(shapeMatrix,calcMatrix);var dx=src._displayOriginX+src._curveBounds.x,dy=src._displayOriginY+src._curveBounds.y,alpha=camera.alpha*src.alpha;src.isFilled&&FillPathWebGL(pipeline,calcMatrix,src,alpha,dx,dy),src.isStroked&&StrokePathWebGL(pipeline,src,alpha,dx,dy)}},function(module,exports,__webpack_require__){var FillStyleCanvas=__webpack_require__(42),LineStyleCanvas=__webpack_require__(58),SetTransform=__webpack_require__(29);module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){var ctx=renderer.currentContext;if(SetTransform(renderer,ctx,src,camera,parentMatrix)){var dx=src._displayOriginX+src._curveBounds.x,dy=src._displayOriginY+src._curveBounds.y,path=src.pathData,pathLength=path.length-1,px1=path[0]-dx,py1=path[1]-dy;ctx.beginPath(),ctx.moveTo(px1,py1),src.closePath||(pathLength-=2);for(var i=2;i<pathLength;i+=2){var px2=path[i]-dx,py2=path[i+1]-dy;ctx.lineTo(px2,py2)}src.closePath&&ctx.closePath(),src.isFilled&&(FillStyleCanvas(ctx,src),ctx.fill()),src.isStroked&&(LineStyleCanvas(ctx,src),ctx.stroke()),ctx.restore()}}},function(module,exports,__webpack_require__){var renderWebGL=__webpack_require__(2),renderCanvas=__webpack_require__(2);renderWebGL=__webpack_require__(1007),renderCanvas=__webpack_require__(1008),module.exports={renderWebGL:renderWebGL,renderCanvas:renderCanvas}},function(module,exports,__webpack_require__){var FillPathWebGL=__webpack_require__(110),StrokePathWebGL=__webpack_require__(74);module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){var pipeline=this.pipeline,camMatrix=pipeline._tempMatrix1,shapeMatrix=pipeline._tempMatrix2,calcMatrix=pipeline._tempMatrix3;renderer.setPipeline(pipeline),shapeMatrix.applyITRS(src.x,src.y,src.rotation,src.scaleX,src.scaleY),camMatrix.copyFrom(camera.matrix),parentMatrix?(camMatrix.multiplyWithOffset(parentMatrix,-camera.scrollX*src.scrollFactorX,-camera.scrollY*src.scrollFactorY),shapeMatrix.e=src.x,shapeMatrix.f=src.y):(shapeMatrix.e-=camera.scrollX*src.scrollFactorX,shapeMatrix.f-=camera.scrollY*src.scrollFactorY),camMatrix.multiply(shapeMatrix,calcMatrix);var dx=src._displayOriginX,dy=src._displayOriginY,alpha=camera.alpha*src.alpha;src.isFilled&&FillPathWebGL(pipeline,calcMatrix,src,alpha,dx,dy),src.isStroked&&StrokePathWebGL(pipeline,src,alpha,dx,dy)}},function(module,exports,__webpack_require__){var FillStyleCanvas=__webpack_require__(42),LineStyleCanvas=__webpack_require__(58),SetTransform=__webpack_require__(29);module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){var ctx=renderer.currentContext;if(SetTransform(renderer,ctx,src,camera,parentMatrix)){var dx=src._displayOriginX,dy=src._displayOriginY,path=src.pathData,pathLength=path.length-1,px1=path[0]-dx,py1=path[1]-dy;ctx.beginPath(),ctx.moveTo(px1,py1),src.closePath||(pathLength-=2);for(var i=2;i<pathLength;i+=2){var px2=path[i]-dx,py2=path[i+1]-dy;ctx.lineTo(px2,py2)}ctx.closePath(),src.isFilled&&(FillStyleCanvas(ctx,src),ctx.fill()),src.isStroked&&(LineStyleCanvas(ctx,src),ctx.stroke()),ctx.restore()}}},function(module,exports,__webpack_require__){var renderWebGL=__webpack_require__(2),renderCanvas=__webpack_require__(2);renderWebGL=__webpack_require__(1010),renderCanvas=__webpack_require__(1011),module.exports={renderWebGL:renderWebGL,renderCanvas:renderCanvas}},function(module,exports,__webpack_require__){var Utils=__webpack_require__(10);module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){var pipeline=this.pipeline,camMatrix=pipeline._tempMatrix1,shapeMatrix=pipeline._tempMatrix2,calcMatrix=pipeline._tempMatrix3;renderer.setPipeline(pipeline),shapeMatrix.applyITRS(src.x,src.y,src.rotation,src.scaleX,src.scaleY),camMatrix.copyFrom(camera.matrix),parentMatrix?(camMatrix.multiplyWithOffset(parentMatrix,-camera.scrollX*src.scrollFactorX,-camera.scrollY*src.scrollFactorY),shapeMatrix.e=src.x,shapeMatrix.f=src.y):(shapeMatrix.e-=camera.scrollX*src.scrollFactorX,shapeMatrix.f-=camera.scrollY*src.scrollFactorY),camMatrix.multiply(shapeMatrix,calcMatrix),calcMatrix.translate(-src._displayOriginX,-src._displayOriginY);var fillTint,fillTintColor,alpha=camera.alpha*src.alpha,width=src.width,height=src.height,cellWidth=src.cellWidth,cellHeight=src.cellHeight,gridWidth=Math.ceil(width/cellWidth),gridHeight=Math.ceil(height/cellHeight),cellWidthA=cellWidth,cellHeightA=cellHeight,cellWidthB=cellWidth-(gridWidth*cellWidth-width),cellHeightB=cellHeight-(gridHeight*cellHeight-height),showCells=src.showCells,showAltCells=src.showAltCells,showOutline=src.showOutline,x=0,y=0,r=0,cw=0,ch=0;if(showOutline&&(cellWidthA--,cellHeightA--,cellWidthB===cellWidth&&cellWidthB--,cellHeightB===cellHeight&&cellHeightB--),showCells&&src.fillAlpha>0)for(fillTint=pipeline.fillTint,fillTintColor=Utils.getTintAppendFloatAlphaAndSwap(src.fillColor,src.fillAlpha*alpha),fillTint.TL=fillTintColor,fillTint.TR=fillTintColor,fillTint.BL=fillTintColor,fillTint.BR=fillTintColor,y=0;y<gridHeight;y++)for(showAltCells&&(r=y%2),x=0;x<gridWidth;x++)showAltCells&&r?r=0:(r++,cw=x<gridWidth-1?cellWidthA:cellWidthB,ch=y<gridHeight-1?cellHeightA:cellHeightB,pipeline.setTexture2D(),pipeline.batchFillRect(x*cellWidth,y*cellHeight,cw,ch));if(showAltCells&&src.altFillAlpha>0)for(fillTint=pipeline.fillTint,fillTintColor=Utils.getTintAppendFloatAlphaAndSwap(src.altFillColor,src.altFillAlpha*alpha),fillTint.TL=fillTintColor,fillTint.TR=fillTintColor,fillTint.BL=fillTintColor,fillTint.BR=fillTintColor,y=0;y<gridHeight;y++)for(showAltCells&&(r=y%2),x=0;x<gridWidth;x++)!showAltCells||r?(r=0,cw=x<gridWidth-1?cellWidthA:cellWidthB,ch=y<gridHeight-1?cellHeightA:cellHeightB,pipeline.setTexture2D(),pipeline.batchFillRect(x*cellWidth,y*cellHeight,cw,ch)):r=1;if(showOutline&&src.outlineFillAlpha>0){var strokeTint=pipeline.strokeTint,color=Utils.getTintAppendFloatAlphaAndSwap(src.outlineFillColor,src.outlineFillAlpha*alpha);for(strokeTint.TL=color,strokeTint.TR=color,strokeTint.BL=color,strokeTint.BR=color,x=1;x<gridWidth;x++){var x1=x*cellWidth;pipeline.setTexture2D(),pipeline.batchLine(x1,0,x1,height,1,1,1,0,!1)}for(y=1;y<gridHeight;y++){var y1=y*cellHeight;pipeline.setTexture2D(),pipeline.batchLine(0,y1,width,y1,1,1,1,0,!1)}}}},function(module,exports,__webpack_require__){var FillStyleCanvas=__webpack_require__(42),LineStyleCanvas=__webpack_require__(58),SetTransform=__webpack_require__(29);module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){var ctx=renderer.currentContext;if(SetTransform(renderer,ctx,src,camera,parentMatrix)){var dx=-src._displayOriginX,dy=-src._displayOriginY,alpha=camera.alpha*src.alpha,width=src.width,height=src.height,cellWidth=src.cellWidth,cellHeight=src.cellHeight,gridWidth=Math.ceil(width/cellWidth),gridHeight=Math.ceil(height/cellHeight),cellWidthA=cellWidth,cellHeightA=cellHeight,cellWidthB=cellWidth-(gridWidth*cellWidth-width),cellHeightB=cellHeight-(gridHeight*cellHeight-height),showCells=src.showCells,showAltCells=src.showAltCells,showOutline=src.showOutline,x=0,y=0,r=0,cw=0,ch=0;if(showOutline&&(cellWidthA--,cellHeightA--,cellWidthB===cellWidth&&cellWidthB--,cellHeightB===cellHeight&&cellHeightB--),showCells&&src.fillAlpha>0)for(FillStyleCanvas(ctx,src),y=0;y<gridHeight;y++)for(showAltCells&&(r=y%2),x=0;x<gridWidth;x++)showAltCells&&r?r=0:(r++,cw=x<gridWidth-1?cellWidthA:cellWidthB,ch=y<gridHeight-1?cellHeightA:cellHeightB,ctx.fillRect(dx+x*cellWidth,dy+y*cellHeight,cw,ch));if(showAltCells&&src.altFillAlpha>0)for(FillStyleCanvas(ctx,src,src.altFillColor,src.altFillAlpha*alpha),y=0;y<gridHeight;y++)for(showAltCells&&(r=y%2),x=0;x<gridWidth;x++)!showAltCells||r?(r=0,cw=x<gridWidth-1?cellWidthA:cellWidthB,ch=y<gridHeight-1?cellHeightA:cellHeightB,ctx.fillRect(dx+x*cellWidth,dy+y*cellHeight,cw,ch)):r=1;if(showOutline&&src.outlineFillAlpha>0){for(LineStyleCanvas(ctx,src,src.outlineFillColor,src.outlineFillAlpha*alpha),x=1;x<gridWidth;x++){var x1=x*cellWidth;ctx.beginPath(),ctx.moveTo(x1+dx,dy),ctx.lineTo(x1+dx,height+dy),ctx.stroke()}for(y=1;y<gridHeight;y++){var y1=y*cellHeight;ctx.beginPath(),ctx.moveTo(dx,y1+dy),ctx.lineTo(dx+width,y1+dy),ctx.stroke()}}ctx.restore()}}},function(module,exports,__webpack_require__){var renderWebGL=__webpack_require__(2),renderCanvas=__webpack_require__(2);renderWebGL=__webpack_require__(1013),renderCanvas=__webpack_require__(1014),module.exports={renderWebGL:renderWebGL,renderCanvas:renderCanvas}},function(module,exports,__webpack_require__){var Utils=__webpack_require__(10);module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){var pipeline=this.pipeline,camMatrix=pipeline._tempMatrix1,shapeMatrix=pipeline._tempMatrix2,calcMatrix=pipeline._tempMatrix3;renderer.setPipeline(pipeline),shapeMatrix.applyITRS(src.x,src.y,src.rotation,src.scaleX,src.scaleY),camMatrix.copyFrom(camera.matrix),parentMatrix?(camMatrix.multiplyWithOffset(parentMatrix,-camera.scrollX*src.scrollFactorX,-camera.scrollY*src.scrollFactorY),shapeMatrix.e=src.x,shapeMatrix.f=src.y):(shapeMatrix.e-=camera.scrollX*src.scrollFactorX,shapeMatrix.f-=camera.scrollY*src.scrollFactorY),camMatrix.multiply(shapeMatrix,calcMatrix);var tint,x0,y0,x1,y1,x2,y2,x3,y3,size=src.width,height=src.height,sizeA=size/2,sizeB=size/src.projection,alpha=camera.alpha*src.alpha;src.isFilled&&(src.showTop&&(tint=Utils.getTintAppendFloatAlphaAndSwap(src.fillTop,alpha),x0=calcMatrix.getX(-sizeA,-height),y0=calcMatrix.getY(-sizeA,-height),x1=calcMatrix.getX(0,-sizeB-height),y1=calcMatrix.getY(0,-sizeB-height),x2=calcMatrix.getX(sizeA,-height),y2=calcMatrix.getY(sizeA,-height),x3=calcMatrix.getX(0,sizeB-height),y3=calcMatrix.getY(0,sizeB-height),pipeline.setTexture2D(),pipeline.batchQuad(x0,y0,x1,y1,x2,y2,x3,y3,0,0,1,1,tint,tint,tint,tint,2)),src.showLeft&&(tint=Utils.getTintAppendFloatAlphaAndSwap(src.fillLeft,alpha),x0=calcMatrix.getX(-sizeA,0),y0=calcMatrix.getY(-sizeA,0),x1=calcMatrix.getX(0,sizeB),y1=calcMatrix.getY(0,sizeB),x2=calcMatrix.getX(0,sizeB-height),y2=calcMatrix.getY(0,sizeB-height),x3=calcMatrix.getX(-sizeA,-height),y3=calcMatrix.getY(-sizeA,-height),pipeline.setTexture2D(),pipeline.batchQuad(x0,y0,x1,y1,x2,y2,x3,y3,0,0,1,1,tint,tint,tint,tint,2)),src.showRight&&(tint=Utils.getTintAppendFloatAlphaAndSwap(src.fillRight,alpha),x0=calcMatrix.getX(sizeA,0),y0=calcMatrix.getY(sizeA,0),x1=calcMatrix.getX(0,sizeB),y1=calcMatrix.getY(0,sizeB),x2=calcMatrix.getX(0,sizeB-height),y2=calcMatrix.getY(0,sizeB-height),x3=calcMatrix.getX(sizeA,-height),y3=calcMatrix.getY(sizeA,-height),pipeline.setTexture2D(),pipeline.batchQuad(x0,y0,x1,y1,x2,y2,x3,y3,0,0,1,1,tint,tint,tint,tint,2)))}},function(module,exports,__webpack_require__){var FillStyleCanvas=__webpack_require__(42),SetTransform=__webpack_require__(29);module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){var ctx=renderer.currentContext;if(SetTransform(renderer,ctx,src,camera,parentMatrix)&&src.isFilled){var size=src.width,height=src.height,sizeA=size/2,sizeB=size/src.projection;src.showTop&&(FillStyleCanvas(ctx,src,src.fillTop),ctx.beginPath(),ctx.moveTo(-sizeA,-height),ctx.lineTo(0,-sizeB-height),ctx.lineTo(sizeA,-height),ctx.lineTo(sizeA,-1),ctx.lineTo(0,sizeB-1),ctx.lineTo(-sizeA,-1),ctx.lineTo(-sizeA,-height),ctx.fill()),src.showLeft&&(FillStyleCanvas(ctx,src,src.fillLeft),ctx.beginPath(),ctx.moveTo(-sizeA,0),ctx.lineTo(0,sizeB),ctx.lineTo(0,sizeB-height),ctx.lineTo(-sizeA,-height),ctx.lineTo(-sizeA,0),ctx.fill()),src.showRight&&(FillStyleCanvas(ctx,src,src.fillRight),ctx.beginPath(),ctx.moveTo(sizeA,0),ctx.lineTo(0,sizeB),ctx.lineTo(0,sizeB-height),ctx.lineTo(sizeA,-height),ctx.lineTo(sizeA,0),ctx.fill()),ctx.restore()}}},function(module,exports,__webpack_require__){var renderWebGL=__webpack_require__(2),renderCanvas=__webpack_require__(2);renderWebGL=__webpack_require__(1016),renderCanvas=__webpack_require__(1017),module.exports={renderWebGL:renderWebGL,renderCanvas:renderCanvas}},function(module,exports,__webpack_require__){var Utils=__webpack_require__(10);module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){var pipeline=this.pipeline,camMatrix=pipeline._tempMatrix1,shapeMatrix=pipeline._tempMatrix2,calcMatrix=pipeline._tempMatrix3;renderer.setPipeline(pipeline),shapeMatrix.applyITRS(src.x,src.y,src.rotation,src.scaleX,src.scaleY),camMatrix.copyFrom(camera.matrix),parentMatrix?(camMatrix.multiplyWithOffset(parentMatrix,-camera.scrollX*src.scrollFactorX,-camera.scrollY*src.scrollFactorY),shapeMatrix.e=src.x,shapeMatrix.f=src.y):(shapeMatrix.e-=camera.scrollX*src.scrollFactorX,shapeMatrix.f-=camera.scrollY*src.scrollFactorY),camMatrix.multiply(shapeMatrix,calcMatrix);var size=src.width,height=src.height,sizeA=size/2,sizeB=size/src.projection,reversed=src.isReversed,alpha=camera.alpha*src.alpha;if(src.isFilled){var tint,x0,y0,x1,y1,x2,y2;if(src.showTop&&reversed){tint=Utils.getTintAppendFloatAlphaAndSwap(src.fillTop,alpha),x0=calcMatrix.getX(-sizeA,-height),y0=calcMatrix.getY(-sizeA,-height),x1=calcMatrix.getX(0,-sizeB-height),y1=calcMatrix.getY(0,-sizeB-height),x2=calcMatrix.getX(sizeA,-height),y2=calcMatrix.getY(sizeA,-height);var x3=calcMatrix.getX(0,sizeB-height),y3=calcMatrix.getY(0,sizeB-height);pipeline.setTexture2D(),pipeline.batchQuad(x0,y0,x1,y1,x2,y2,x3,y3,0,0,1,1,tint,tint,tint,tint,2)}src.showLeft&&(tint=Utils.getTintAppendFloatAlphaAndSwap(src.fillLeft,alpha),reversed?(x0=calcMatrix.getX(-sizeA,-height),y0=calcMatrix.getY(-sizeA,-height),x1=calcMatrix.getX(0,sizeB),y1=calcMatrix.getY(0,sizeB),x2=calcMatrix.getX(0,sizeB-height),y2=calcMatrix.getY(0,sizeB-height)):(x0=calcMatrix.getX(-sizeA,0),y0=calcMatrix.getY(-sizeA,0),x1=calcMatrix.getX(0,sizeB),y1=calcMatrix.getY(0,sizeB),x2=calcMatrix.getX(0,sizeB-height),y2=calcMatrix.getY(0,sizeB-height)),pipeline.batchTri(x0,y0,x1,y1,x2,y2,0,0,1,1,tint,tint,tint,2)),src.showRight&&(tint=Utils.getTintAppendFloatAlphaAndSwap(src.fillRight,alpha),reversed?(x0=calcMatrix.getX(sizeA,-height),y0=calcMatrix.getY(sizeA,-height),x1=calcMatrix.getX(0,sizeB),y1=calcMatrix.getY(0,sizeB),x2=calcMatrix.getX(0,sizeB-height),y2=calcMatrix.getY(0,sizeB-height)):(x0=calcMatrix.getX(sizeA,0),y0=calcMatrix.getY(sizeA,0),x1=calcMatrix.getX(0,sizeB),y1=calcMatrix.getY(0,sizeB),x2=calcMatrix.getX(0,sizeB-height),y2=calcMatrix.getY(0,sizeB-height)),pipeline.setTexture2D(),pipeline.batchTri(x0,y0,x1,y1,x2,y2,0,0,1,1,tint,tint,tint,2))}}},function(module,exports,__webpack_require__){var FillStyleCanvas=__webpack_require__(42),SetTransform=__webpack_require__(29);module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){var ctx=renderer.currentContext;if(SetTransform(renderer,ctx,src,camera,parentMatrix)&&src.isFilled){var size=src.width,height=src.height,sizeA=size/2,sizeB=size/src.projection,reversed=src.isReversed;src.showTop&&reversed&&(FillStyleCanvas(ctx,src,src.fillTop),ctx.beginPath(),ctx.moveTo(-sizeA,-height),ctx.lineTo(0,-sizeB-height),ctx.lineTo(sizeA,-height),ctx.lineTo(0,sizeB-height),ctx.fill()),src.showLeft&&(FillStyleCanvas(ctx,src,src.fillLeft),ctx.beginPath(),reversed?(ctx.moveTo(-sizeA,-height),ctx.lineTo(0,sizeB),ctx.lineTo(0,sizeB-height)):(ctx.moveTo(-sizeA,0),ctx.lineTo(0,sizeB),ctx.lineTo(0,sizeB-height)),ctx.fill()),src.showRight&&(FillStyleCanvas(ctx,src,src.fillRight),ctx.beginPath(),reversed?(ctx.moveTo(sizeA,-height),ctx.lineTo(0,sizeB),ctx.lineTo(0,sizeB-height)):(ctx.moveTo(sizeA,0),ctx.lineTo(0,sizeB),ctx.lineTo(0,sizeB-height)),ctx.fill()),ctx.restore()}}},function(module,exports,__webpack_require__){var renderWebGL=__webpack_require__(2),renderCanvas=__webpack_require__(2);renderWebGL=__webpack_require__(1019),renderCanvas=__webpack_require__(1020),module.exports={renderWebGL:renderWebGL,renderCanvas:renderCanvas}},function(module,exports,__webpack_require__){var Utils=__webpack_require__(10);module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){var pipeline=this.pipeline,camMatrix=pipeline._tempMatrix1,shapeMatrix=pipeline._tempMatrix2;renderer.setPipeline(pipeline),shapeMatrix.applyITRS(src.x,src.y,src.rotation,src.scaleX,src.scaleY),camMatrix.copyFrom(camera.matrix),parentMatrix?(camMatrix.multiplyWithOffset(parentMatrix,-camera.scrollX*src.scrollFactorX,-camera.scrollY*src.scrollFactorY),shapeMatrix.e=src.x,shapeMatrix.f=src.y):(shapeMatrix.e-=camera.scrollX*src.scrollFactorX,shapeMatrix.f-=camera.scrollY*src.scrollFactorY);var dx=src._displayOriginX,dy=src._displayOriginY,alpha=camera.alpha*src.alpha;if(src.isStroked){var strokeTint=pipeline.strokeTint,color=Utils.getTintAppendFloatAlphaAndSwap(src.strokeColor,src.strokeAlpha*alpha);strokeTint.TL=color,strokeTint.TR=color,strokeTint.BL=color,strokeTint.BR=color;var startWidth=src._startWidth,endWidth=src._endWidth;pipeline.setTexture2D(),pipeline.batchLine(src.geom.x1-dx,src.geom.y1-dy,src.geom.x2-dx,src.geom.y2-dy,startWidth,endWidth,1,0,!1,shapeMatrix,camMatrix)}}},function(module,exports,__webpack_require__){var LineStyleCanvas=__webpack_require__(58),SetTransform=__webpack_require__(29);module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){var ctx=renderer.currentContext;if(SetTransform(renderer,ctx,src,camera,parentMatrix)){var dx=src._displayOriginX,dy=src._displayOriginY;src.isStroked&&(LineStyleCanvas(ctx,src),ctx.beginPath(),ctx.moveTo(src.geom.x1-dx,src.geom.y1-dy),ctx.lineTo(src.geom.x2-dx,src.geom.y2-dy),ctx.stroke()),ctx.restore()}}},function(module,exports,__webpack_require__){var renderWebGL=__webpack_require__(2),renderCanvas=__webpack_require__(2);renderWebGL=__webpack_require__(1022),renderCanvas=__webpack_require__(1023),module.exports={renderWebGL:renderWebGL,renderCanvas:renderCanvas}},function(module,exports,__webpack_require__){var FillPathWebGL=__webpack_require__(110),StrokePathWebGL=__webpack_require__(74);module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){var pipeline=this.pipeline,camMatrix=pipeline._tempMatrix1,shapeMatrix=pipeline._tempMatrix2,calcMatrix=pipeline._tempMatrix3;renderer.setPipeline(pipeline),shapeMatrix.applyITRS(src.x,src.y,src.rotation,src.scaleX,src.scaleY),camMatrix.copyFrom(camera.matrix),parentMatrix?(camMatrix.multiplyWithOffset(parentMatrix,-camera.scrollX*src.scrollFactorX,-camera.scrollY*src.scrollFactorY),shapeMatrix.e=src.x,shapeMatrix.f=src.y):(shapeMatrix.e-=camera.scrollX*src.scrollFactorX,shapeMatrix.f-=camera.scrollY*src.scrollFactorY),camMatrix.multiply(shapeMatrix,calcMatrix);var dx=src._displayOriginX,dy=src._displayOriginY,alpha=camera.alpha*src.alpha;src.isFilled&&FillPathWebGL(pipeline,calcMatrix,src,alpha,dx,dy),src.isStroked&&StrokePathWebGL(pipeline,src,alpha,dx,dy)}},function(module,exports,__webpack_require__){var FillStyleCanvas=__webpack_require__(42),LineStyleCanvas=__webpack_require__(58),SetTransform=__webpack_require__(29);module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){var ctx=renderer.currentContext;if(SetTransform(renderer,ctx,src,camera,parentMatrix)){var dx=src._displayOriginX,dy=src._displayOriginY,path=src.pathData,pathLength=path.length-1,px1=path[0]-dx,py1=path[1]-dy;ctx.beginPath(),ctx.moveTo(px1,py1),src.closePath||(pathLength-=2);for(var i=2;i<pathLength;i+=2){var px2=path[i]-dx,py2=path[i+1]-dy;ctx.lineTo(px2,py2)}ctx.closePath(),src.isFilled&&(FillStyleCanvas(ctx,src),ctx.fill()),src.isStroked&&(LineStyleCanvas(ctx,src),ctx.stroke()),ctx.restore()}}},function(module,exports,__webpack_require__){var renderWebGL=__webpack_require__(2),renderCanvas=__webpack_require__(2);renderWebGL=__webpack_require__(1025),renderCanvas=__webpack_require__(1026),module.exports={renderWebGL:renderWebGL,renderCanvas:renderCanvas}},function(module,exports,__webpack_require__){var StrokePathWebGL=__webpack_require__(74),Utils=__webpack_require__(10);module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){var pipeline=this.pipeline,camMatrix=pipeline._tempMatrix1,shapeMatrix=pipeline._tempMatrix2,calcMatrix=pipeline._tempMatrix3;renderer.setPipeline(pipeline),shapeMatrix.applyITRS(src.x,src.y,src.rotation,src.scaleX,src.scaleY),camMatrix.copyFrom(camera.matrix),parentMatrix?(camMatrix.multiplyWithOffset(parentMatrix,-camera.scrollX*src.scrollFactorX,-camera.scrollY*src.scrollFactorY),shapeMatrix.e=src.x,shapeMatrix.f=src.y):(shapeMatrix.e-=camera.scrollX*src.scrollFactorX,shapeMatrix.f-=camera.scrollY*src.scrollFactorY),camMatrix.multiply(shapeMatrix,calcMatrix);var dx=src._displayOriginX,dy=src._displayOriginY,alpha=camera.alpha*src.alpha;if(src.isFilled){var fillTint=pipeline.fillTint,fillTintColor=Utils.getTintAppendFloatAlphaAndSwap(src.fillColor,src.fillAlpha*alpha);fillTint.TL=fillTintColor,fillTint.TR=fillTintColor,fillTint.BL=fillTintColor,fillTint.BR=fillTintColor,pipeline.setTexture2D(),pipeline.batchFillRect(-dx,-dy,src.width,src.height)}src.isStroked&&StrokePathWebGL(pipeline,src,alpha,dx,dy)}},function(module,exports,__webpack_require__){var FillStyleCanvas=__webpack_require__(42),LineStyleCanvas=__webpack_require__(58),SetTransform=__webpack_require__(29);module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){var ctx=renderer.currentContext;if(SetTransform(renderer,ctx,src,camera,parentMatrix)){var dx=src._displayOriginX,dy=src._displayOriginY;src.isFilled&&(FillStyleCanvas(ctx,src),ctx.fillRect(-dx,-dy,src.width,src.height)),src.isStroked&&(LineStyleCanvas(ctx,src),ctx.beginPath(),ctx.rect(-dx,-dy,src.width,src.height),ctx.stroke()),ctx.restore()}}},function(module,exports,__webpack_require__){var renderWebGL=__webpack_require__(2),renderCanvas=__webpack_require__(2);renderWebGL=__webpack_require__(1028),renderCanvas=__webpack_require__(1029),module.exports={renderWebGL:renderWebGL,renderCanvas:renderCanvas}},function(module,exports,__webpack_require__){var FillPathWebGL=__webpack_require__(110),StrokePathWebGL=__webpack_require__(74);module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){var pipeline=this.pipeline,camMatrix=pipeline._tempMatrix1,shapeMatrix=pipeline._tempMatrix2,calcMatrix=pipeline._tempMatrix3;renderer.setPipeline(pipeline),shapeMatrix.applyITRS(src.x,src.y,src.rotation,src.scaleX,src.scaleY),camMatrix.copyFrom(camera.matrix),parentMatrix?(camMatrix.multiplyWithOffset(parentMatrix,-camera.scrollX*src.scrollFactorX,-camera.scrollY*src.scrollFactorY),shapeMatrix.e=src.x,shapeMatrix.f=src.y):(shapeMatrix.e-=camera.scrollX*src.scrollFactorX,shapeMatrix.f-=camera.scrollY*src.scrollFactorY),camMatrix.multiply(shapeMatrix,calcMatrix);var dx=src._displayOriginX,dy=src._displayOriginY,alpha=camera.alpha*src.alpha;src.isFilled&&FillPathWebGL(pipeline,calcMatrix,src,alpha,dx,dy),src.isStroked&&StrokePathWebGL(pipeline,src,alpha,dx,dy)}},function(module,exports,__webpack_require__){var FillStyleCanvas=__webpack_require__(42),LineStyleCanvas=__webpack_require__(58),SetTransform=__webpack_require__(29);module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){var ctx=renderer.currentContext;if(SetTransform(renderer,ctx,src,camera,parentMatrix)){var dx=src._displayOriginX,dy=src._displayOriginY,path=src.pathData,pathLength=path.length-1,px1=path[0]-dx,py1=path[1]-dy;ctx.beginPath(),ctx.moveTo(px1,py1),src.closePath||(pathLength-=2);for(var i=2;i<pathLength;i+=2){var px2=path[i]-dx,py2=path[i+1]-dy;ctx.lineTo(px2,py2)}ctx.closePath(),src.isFilled&&(FillStyleCanvas(ctx,src),ctx.fill()),src.isStroked&&(LineStyleCanvas(ctx,src),ctx.stroke()),ctx.restore()}}},function(module,exports,__webpack_require__){var renderWebGL=__webpack_require__(2),renderCanvas=__webpack_require__(2);renderWebGL=__webpack_require__(1031),renderCanvas=__webpack_require__(1032),module.exports={renderWebGL:renderWebGL,renderCanvas:renderCanvas}},function(module,exports,__webpack_require__){var StrokePathWebGL=__webpack_require__(74),Utils=__webpack_require__(10);module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){var pipeline=this.pipeline,camMatrix=pipeline._tempMatrix1,shapeMatrix=pipeline._tempMatrix2,calcMatrix=pipeline._tempMatrix3;renderer.setPipeline(pipeline),shapeMatrix.applyITRS(src.x,src.y,src.rotation,src.scaleX,src.scaleY),camMatrix.copyFrom(camera.matrix),parentMatrix?(camMatrix.multiplyWithOffset(parentMatrix,-camera.scrollX*src.scrollFactorX,-camera.scrollY*src.scrollFactorY),shapeMatrix.e=src.x,shapeMatrix.f=src.y):(shapeMatrix.e-=camera.scrollX*src.scrollFactorX,shapeMatrix.f-=camera.scrollY*src.scrollFactorY),camMatrix.multiply(shapeMatrix,calcMatrix);var dx=src._displayOriginX,dy=src._displayOriginY,alpha=camera.alpha*src.alpha;if(src.isFilled){var fillTint=pipeline.fillTint,fillTintColor=Utils.getTintAppendFloatAlphaAndSwap(src.fillColor,src.fillAlpha*alpha);fillTint.TL=fillTintColor,fillTint.TR=fillTintColor,fillTint.BL=fillTintColor,fillTint.BR=fillTintColor;var x1=src.geom.x1-dx,y1=src.geom.y1-dy,x2=src.geom.x2-dx,y2=src.geom.y2-dy,x3=src.geom.x3-dx,y3=src.geom.y3-dy;pipeline.setTexture2D(),pipeline.batchFillTriangle(x1,y1,x2,y2,x3,y3,shapeMatrix,camMatrix)}src.isStroked&&StrokePathWebGL(pipeline,src,alpha,dx,dy)}},function(module,exports,__webpack_require__){var FillStyleCanvas=__webpack_require__(42),LineStyleCanvas=__webpack_require__(58),SetTransform=__webpack_require__(29);module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){var ctx=renderer.currentContext;if(SetTransform(renderer,ctx,src,camera,parentMatrix)){var dx=src._displayOriginX,dy=src._displayOriginY,x1=src.geom.x1-dx,y1=src.geom.y1-dy,x2=src.geom.x2-dx,y2=src.geom.y2-dy,x3=src.geom.x3-dx,y3=src.geom.y3-dy;ctx.beginPath(),ctx.moveTo(x1,y1),ctx.lineTo(x2,y2),ctx.lineTo(x3,y3),ctx.closePath(),src.isFilled&&(FillStyleCanvas(ctx,src),ctx.fill()),src.isStroked&&(LineStyleCanvas(ctx,src),ctx.stroke()),ctx.restore()}}},function(module,exports,__webpack_require__){var Blitter=__webpack_require__(205);__webpack_require__(6).register("blitter",(function(x,y,key,frame){return this.displayList.add(new Blitter(this.scene,x,y,key,frame))}))},function(module,exports,__webpack_require__){var Container=__webpack_require__(206);__webpack_require__(6).register("container",(function(x,y,children){return this.displayList.add(new Container(this.scene,x,y,children))}))},function(module,exports,__webpack_require__){var DOMElement=__webpack_require__(400);__webpack_require__(6).register("dom",(function(x,y,element,style,innerText){var gameObject=new DOMElement(this.scene,x,y,element,style,innerText);return this.displayList.add(gameObject),this.updateList.add(gameObject),gameObject}))},function(module,exports,__webpack_require__){var DynamicBitmapText=__webpack_require__(207);__webpack_require__(6).register("dynamicBitmapText",(function(x,y,font,text,size){return this.displayList.add(new DynamicBitmapText(this.scene,x,y,font,text,size))}))},function(module,exports,__webpack_require__){var Extern=__webpack_require__(402);__webpack_require__(6).register("extern",(function(){var extern=new Extern(this.scene);return this.displayList.add(extern),this.updateList.add(extern),extern}))},function(module,exports,__webpack_require__){var Graphics=__webpack_require__(208);__webpack_require__(6).register("graphics",(function(config){return this.displayList.add(new Graphics(this.scene,config))}))},function(module,exports,__webpack_require__){var Group=__webpack_require__(109);__webpack_require__(6).register("group",(function(children,config){return this.updateList.add(new Group(this.scene,children,config))}))},function(module,exports,__webpack_require__){var Image=__webpack_require__(91);__webpack_require__(6).register("image",(function(x,y,key,frame){return this.displayList.add(new Image(this.scene,x,y,key,frame))}))},function(module,exports,__webpack_require__){var GameObjectFactory=__webpack_require__(6),ParticleEmitterManager=__webpack_require__(211);GameObjectFactory.register("particles",(function(key,frame,emitters){var manager=new ParticleEmitterManager(this.scene,key,frame,emitters);return this.displayList.add(manager),this.updateList.add(manager),manager}))},function(module,exports,__webpack_require__){var GameObjectFactory=__webpack_require__(6),PathFollower=__webpack_require__(414);GameObjectFactory.register("follower",(function(path,x,y,key,frame){var sprite=new PathFollower(this.scene,path,x,y,key,frame);return this.displayList.add(sprite),this.updateList.add(sprite),sprite}))},function(module,exports,__webpack_require__){var GameObjectFactory=__webpack_require__(6),RenderTexture=__webpack_require__(212);GameObjectFactory.register("renderTexture",(function(x,y,width,height,key,frame){return this.displayList.add(new RenderTexture(this.scene,x,y,width,height,key,frame))}))},function(module,exports,__webpack_require__){var GameObjectFactory=__webpack_require__(6),Sprite=__webpack_require__(57);GameObjectFactory.register("sprite",(function(x,y,key,frame){var sprite=new Sprite(this.scene,x,y,key,frame);return this.displayList.add(sprite),this.updateList.add(sprite),sprite}))},function(module,exports,__webpack_require__){var BitmapText=__webpack_require__(141);__webpack_require__(6).register("bitmapText",(function(x,y,font,text,size,align){return this.displayList.add(new BitmapText(this.scene,x,y,font,text,size,align))}))},function(module,exports,__webpack_require__){var Text=__webpack_require__(213);__webpack_require__(6).register("text",(function(x,y,text,style){return this.displayList.add(new Text(this.scene,x,y,text,style))}))},function(module,exports,__webpack_require__){var TileSprite=__webpack_require__(214);__webpack_require__(6).register("tileSprite",(function(x,y,width,height,key,frame){return this.displayList.add(new TileSprite(this.scene,x,y,width,height,key,frame))}))},function(module,exports,__webpack_require__){var Zone=__webpack_require__(118);__webpack_require__(6).register("zone",(function(x,y,width,height){return this.displayList.add(new Zone(this.scene,x,y,width,height))}))},function(module,exports,__webpack_require__){var Arc=__webpack_require__(416),GameObjectFactory=__webpack_require__(6);GameObjectFactory.register("arc",(function(x,y,radius,startAngle,endAngle,anticlockwise,fillColor,fillAlpha){return this.displayList.add(new Arc(this.scene,x,y,radius,startAngle,endAngle,anticlockwise,fillColor,fillAlpha))})),GameObjectFactory.register("circle",(function(x,y,radius,fillColor,fillAlpha){return this.displayList.add(new Arc(this.scene,x,y,radius,0,360,!1,fillColor,fillAlpha))}))},function(module,exports,__webpack_require__){var GameObjectFactory=__webpack_require__(6),Curve=__webpack_require__(417);GameObjectFactory.register("curve",(function(x,y,curve,fillColor,fillAlpha){return this.displayList.add(new Curve(this.scene,x,y,curve,fillColor,fillAlpha))}))},function(module,exports,__webpack_require__){var Ellipse=__webpack_require__(418);__webpack_require__(6).register("ellipse",(function(x,y,width,height,fillColor,fillAlpha){return this.displayList.add(new Ellipse(this.scene,x,y,width,height,fillColor,fillAlpha))}))},function(module,exports,__webpack_require__){var GameObjectFactory=__webpack_require__(6),Grid=__webpack_require__(419);GameObjectFactory.register("grid",(function(x,y,width,height,cellWidth,cellHeight,fillColor,fillAlpha,outlineFillColor,outlineFillAlpha){return this.displayList.add(new Grid(this.scene,x,y,width,height,cellWidth,cellHeight,fillColor,fillAlpha,outlineFillColor,outlineFillAlpha))}))},function(module,exports,__webpack_require__){var GameObjectFactory=__webpack_require__(6),IsoBox=__webpack_require__(420);GameObjectFactory.register("isobox",(function(x,y,size,height,fillTop,fillLeft,fillRight){return this.displayList.add(new IsoBox(this.scene,x,y,size,height,fillTop,fillLeft,fillRight))}))},function(module,exports,__webpack_require__){var GameObjectFactory=__webpack_require__(6),IsoTriangle=__webpack_require__(421);GameObjectFactory.register("isotriangle",(function(x,y,size,height,reversed,fillTop,fillLeft,fillRight){return this.displayList.add(new IsoTriangle(this.scene,x,y,size,height,reversed,fillTop,fillLeft,fillRight))}))},function(module,exports,__webpack_require__){var GameObjectFactory=__webpack_require__(6),Line=__webpack_require__(422);GameObjectFactory.register("line",(function(x,y,x1,y1,x2,y2,strokeColor,strokeAlpha){return this.displayList.add(new Line(this.scene,x,y,x1,y1,x2,y2,strokeColor,strokeAlpha))}))},function(module,exports,__webpack_require__){var GameObjectFactory=__webpack_require__(6),Polygon=__webpack_require__(423);GameObjectFactory.register("polygon",(function(x,y,points,fillColor,fillAlpha){return this.displayList.add(new Polygon(this.scene,x,y,points,fillColor,fillAlpha))}))},function(module,exports,__webpack_require__){var GameObjectFactory=__webpack_require__(6),Rectangle=__webpack_require__(428);GameObjectFactory.register("rectangle",(function(x,y,width,height,fillColor,fillAlpha){return this.displayList.add(new Rectangle(this.scene,x,y,width,height,fillColor,fillAlpha))}))},function(module,exports,__webpack_require__){var Star=__webpack_require__(429);__webpack_require__(6).register("star",(function(x,y,points,innerRadius,outerRadius,fillColor,fillAlpha){return this.displayList.add(new Star(this.scene,x,y,points,innerRadius,outerRadius,fillColor,fillAlpha))}))},function(module,exports,__webpack_require__){var GameObjectFactory=__webpack_require__(6),Triangle=__webpack_require__(430);GameObjectFactory.register("triangle",(function(x,y,x1,y1,x2,y2,x3,y3,fillColor,fillAlpha){return this.displayList.add(new Triangle(this.scene,x,y,x1,y1,x2,y2,x3,y3,fillColor,fillAlpha))}))},function(module,exports,__webpack_require__){var Blitter=__webpack_require__(205),BuildGameObject=__webpack_require__(30),GameObjectCreator=__webpack_require__(16),GetAdvancedValue=__webpack_require__(14);GameObjectCreator.register("blitter",(function(config,addToScene){void 0===config&&(config={});var key=GetAdvancedValue(config,"key",null),frame=GetAdvancedValue(config,"frame",null),blitter=new Blitter(this.scene,0,0,key,frame);return void 0!==addToScene&&(config.add=addToScene),BuildGameObject(this.scene,blitter,config),blitter}))},function(module,exports,__webpack_require__){var BuildGameObject=__webpack_require__(30),Container=__webpack_require__(206),GameObjectCreator=__webpack_require__(16),GetAdvancedValue=__webpack_require__(14);GameObjectCreator.register("container",(function(config,addToScene){void 0===config&&(config={});var x=GetAdvancedValue(config,"x",0),y=GetAdvancedValue(config,"y",0),container=new Container(this.scene,x,y);return void 0!==addToScene&&(config.add=addToScene),BuildGameObject(this.scene,container,config),container}))},function(module,exports,__webpack_require__){var BitmapText=__webpack_require__(207),BuildGameObject=__webpack_require__(30),GameObjectCreator=__webpack_require__(16),GetAdvancedValue=__webpack_require__(14);GameObjectCreator.register("dynamicBitmapText",(function(config,addToScene){void 0===config&&(config={});var font=GetAdvancedValue(config,"font",""),text=GetAdvancedValue(config,"text",""),size=GetAdvancedValue(config,"size",!1),bitmapText=new BitmapText(this.scene,0,0,font,text,size);return void 0!==addToScene&&(config.add=addToScene),BuildGameObject(this.scene,bitmapText,config),bitmapText}))},function(module,exports,__webpack_require__){var GameObjectCreator=__webpack_require__(16),Graphics=__webpack_require__(208);GameObjectCreator.register("graphics",(function(config,addToScene){void 0===config&&(config={}),void 0!==addToScene&&(config.add=addToScene);var graphics=new Graphics(this.scene,config);return config.add&&this.scene.sys.displayList.add(graphics),graphics}))},function(module,exports,__webpack_require__){var GameObjectCreator=__webpack_require__(16),Group=__webpack_require__(109);GameObjectCreator.register("group",(function(config){return new Group(this.scene,null,config)}))},function(module,exports,__webpack_require__){var BuildGameObject=__webpack_require__(30),GameObjectCreator=__webpack_require__(16),GetAdvancedValue=__webpack_require__(14),Image=__webpack_require__(91);GameObjectCreator.register("image",(function(config,addToScene){void 0===config&&(config={});var key=GetAdvancedValue(config,"key",null),frame=GetAdvancedValue(config,"frame",null),image=new Image(this.scene,0,0,key,frame);return void 0!==addToScene&&(config.add=addToScene),BuildGameObject(this.scene,image,config),image}))},function(module,exports,__webpack_require__){var GameObjectCreator=__webpack_require__(16),GetAdvancedValue=__webpack_require__(14),GetFastValue=__webpack_require__(1),ParticleEmitterManager=__webpack_require__(211);GameObjectCreator.register("particles",(function(config,addToScene){void 0===config&&(config={});var key=GetAdvancedValue(config,"key",null),frame=GetAdvancedValue(config,"frame",null),emitters=GetFastValue(config,"emitters",null),manager=new ParticleEmitterManager(this.scene,key,frame,emitters);return void 0!==addToScene&&(config.add=addToScene),GetFastValue(config,"add",!1)&&this.displayList.add(manager),this.updateList.add(manager),manager}))},function(module,exports,__webpack_require__){var BuildGameObject=__webpack_require__(30),GameObjectCreator=__webpack_require__(16),GetAdvancedValue=__webpack_require__(14),RenderTexture=__webpack_require__(212);GameObjectCreator.register("renderTexture",(function(config,addToScene){void 0===config&&(config={});var x=GetAdvancedValue(config,"x",0),y=GetAdvancedValue(config,"y",0),width=GetAdvancedValue(config,"width",32),height=GetAdvancedValue(config,"height",32),key=GetAdvancedValue(config,"key",void 0),frame=GetAdvancedValue(config,"frame",void 0),renderTexture=new RenderTexture(this.scene,x,y,width,height,key,frame);return void 0!==addToScene&&(config.add=addToScene),BuildGameObject(this.scene,renderTexture,config),renderTexture}))},function(module,exports,__webpack_require__){var BuildGameObject=__webpack_require__(30),BuildGameObjectAnimation=__webpack_require__(203),GameObjectCreator=__webpack_require__(16),GetAdvancedValue=__webpack_require__(14),Sprite=__webpack_require__(57);GameObjectCreator.register("sprite",(function(config,addToScene){void 0===config&&(config={});var key=GetAdvancedValue(config,"key",null),frame=GetAdvancedValue(config,"frame",null),sprite=new Sprite(this.scene,0,0,key,frame);return void 0!==addToScene&&(config.add=addToScene),BuildGameObject(this.scene,sprite,config),BuildGameObjectAnimation(sprite,config),sprite}))},function(module,exports,__webpack_require__){var BitmapText=__webpack_require__(141),BuildGameObject=__webpack_require__(30),GameObjectCreator=__webpack_require__(16),GetAdvancedValue=__webpack_require__(14),GetValue=__webpack_require__(5);GameObjectCreator.register("bitmapText",(function(config,addToScene){void 0===config&&(config={});var font=GetValue(config,"font",""),text=GetAdvancedValue(config,"text",""),size=GetAdvancedValue(config,"size",!1),align=GetValue(config,"align",0),bitmapText=new BitmapText(this.scene,0,0,font,text,size,align);return void 0!==addToScene&&(config.add=addToScene),BuildGameObject(this.scene,bitmapText,config),bitmapText}))},function(module,exports,__webpack_require__){var BuildGameObject=__webpack_require__(30),GameObjectCreator=__webpack_require__(16),GetAdvancedValue=__webpack_require__(14),Text=__webpack_require__(213);GameObjectCreator.register("text",(function(config,addToScene){void 0===config&&(config={});var content=GetAdvancedValue(config,"text",""),style=GetAdvancedValue(config,"style",null),padding=GetAdvancedValue(config,"padding",null);null!==padding&&(style.padding=padding);var text=new Text(this.scene,0,0,content,style);return void 0!==addToScene&&(config.add=addToScene),BuildGameObject(this.scene,text,config),text.autoRound=GetAdvancedValue(config,"autoRound",!0),text.resolution=GetAdvancedValue(config,"resolution",1),text}))},function(module,exports,__webpack_require__){var BuildGameObject=__webpack_require__(30),GameObjectCreator=__webpack_require__(16),GetAdvancedValue=__webpack_require__(14),TileSprite=__webpack_require__(214);GameObjectCreator.register("tileSprite",(function(config,addToScene){void 0===config&&(config={});var x=GetAdvancedValue(config,"x",0),y=GetAdvancedValue(config,"y",0),width=GetAdvancedValue(config,"width",512),height=GetAdvancedValue(config,"height",512),key=GetAdvancedValue(config,"key",""),frame=GetAdvancedValue(config,"frame",""),tile=new TileSprite(this.scene,x,y,width,height,key,frame);return void 0!==addToScene&&(config.add=addToScene),BuildGameObject(this.scene,tile,config),tile}))},function(module,exports,__webpack_require__){var GameObjectCreator=__webpack_require__(16),GetAdvancedValue=__webpack_require__(14),Zone=__webpack_require__(118);GameObjectCreator.register("zone",(function(config){var x=GetAdvancedValue(config,"x",0),y=GetAdvancedValue(config,"y",0),width=GetAdvancedValue(config,"width",1),height=GetAdvancedValue(config,"height",width);return new Zone(this.scene,x,y,width,height)}))},function(module,exports,__webpack_require__){var renderWebGL=__webpack_require__(2),renderCanvas=__webpack_require__(2);renderWebGL=__webpack_require__(1074),renderCanvas=__webpack_require__(1075),module.exports={renderWebGL:renderWebGL,renderCanvas:renderCanvas}},function(module,exports,__webpack_require__){var Utils=__webpack_require__(10);module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){var pipeline=this.pipeline;renderer.setPipeline(pipeline,src);var camMatrix=pipeline._tempMatrix1,spriteMatrix=pipeline._tempMatrix2,calcMatrix=pipeline._tempMatrix3;spriteMatrix.applyITRS(src.x,src.y,src.rotation,src.scaleX,src.scaleY),camMatrix.copyFrom(camera.matrix),parentMatrix?(camMatrix.multiplyWithOffset(parentMatrix,-camera.scrollX*src.scrollFactorX,-camera.scrollY*src.scrollFactorY),spriteMatrix.e=src.x,spriteMatrix.f=src.y,camMatrix.multiply(spriteMatrix,calcMatrix)):(spriteMatrix.e-=camera.scrollX*src.scrollFactorX,spriteMatrix.f-=camera.scrollY*src.scrollFactorY,camMatrix.multiply(spriteMatrix,calcMatrix));var texture=src.frame.glTexture,vertices=src.vertices,uvs=src.uv,colors=src.colors,alphas=src.alphas,meshVerticesLength=vertices.length,vertexCount=Math.floor(.5*meshVerticesLength);pipeline.vertexCount+vertexCount>pipeline.vertexCapacity&&pipeline.flush(),pipeline.setTexture2D(texture,0);for(var vertexViewF32=pipeline.vertexViewF32,vertexViewU32=pipeline.vertexViewU32,vertexOffset=pipeline.vertexCount*pipeline.vertexComponentCount-1,colorIndex=0,tintEffect=src.tintFill,i=0;i<meshVerticesLength;i+=2){var x=vertices[i+0],y=vertices[i+1],tx=x*calcMatrix.a+y*calcMatrix.c+calcMatrix.e,ty=x*calcMatrix.b+y*calcMatrix.d+calcMatrix.f;camera.roundPixels&&(tx=Math.round(tx),ty=Math.round(ty)),vertexViewF32[++vertexOffset]=tx,vertexViewF32[++vertexOffset]=ty,vertexViewF32[++vertexOffset]=uvs[i+0],vertexViewF32[++vertexOffset]=uvs[i+1],vertexViewF32[++vertexOffset]=tintEffect,vertexViewU32[++vertexOffset]=Utils.getTintAppendFloatAlpha(colors[colorIndex],camera.alpha*alphas[colorIndex]),colorIndex++}pipeline.vertexCount+=vertexCount}},function(module,exports){module.exports=function(){}},function(module,exports,__webpack_require__){var renderWebGL=__webpack_require__(2),renderCanvas=__webpack_require__(2);renderWebGL=__webpack_require__(1077),renderCanvas=__webpack_require__(1078),module.exports={renderWebGL:renderWebGL,renderCanvas:renderCanvas}},function(module,exports){module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){if(src.shader){var pipeline=renderer.currentPipeline;if(renderer.clearPipeline(),src.renderToTexture)src.load(),src.flush();else{var camMatrix=src._tempMatrix1,shapeMatrix=src._tempMatrix2,calcMatrix=src._tempMatrix3;shapeMatrix.applyITRS(src.x,src.y,src.rotation,src.scaleX,src.scaleY),camMatrix.copyFrom(camera.matrix),parentMatrix?(camMatrix.multiplyWithOffset(parentMatrix,-camera.scrollX*src.scrollFactorX,-camera.scrollY*src.scrollFactorY),shapeMatrix.e=src.x,shapeMatrix.f=src.y):(shapeMatrix.e-=camera.scrollX*src.scrollFactorX,shapeMatrix.f-=camera.scrollY*src.scrollFactorY),camMatrix.multiply(shapeMatrix,calcMatrix),renderer.width===src._rendererWidth&&renderer.height===src._rendererHeight||src.projOrtho(0,renderer.width,renderer.height,0),src.load(calcMatrix.matrix),src.flush()}renderer.rebindPipeline(pipeline)}}},function(module,exports){module.exports=function(){}},function(module,exports,__webpack_require__){var Mesh=__webpack_require__(142);__webpack_require__(6).register("mesh",(function(x,y,vertices,uv,colors,alphas,texture,frame){return this.displayList.add(new Mesh(this.scene,x,y,vertices,uv,colors,alphas,texture,frame))}))},function(module,exports,__webpack_require__){var Quad=__webpack_require__(217);__webpack_require__(6).register("quad",(function(x,y,key,frame){return this.displayList.add(new Quad(this.scene,x,y,key,frame))}))},function(module,exports,__webpack_require__){var Shader=__webpack_require__(218);__webpack_require__(6).register("shader",(function(key,x,y,width,height,textures){return this.displayList.add(new Shader(this.scene,key,x,y,width,height,textures))}))},function(module,exports,__webpack_require__){var BuildGameObject=__webpack_require__(30),GameObjectCreator=__webpack_require__(16),GetAdvancedValue=__webpack_require__(14),GetValue=__webpack_require__(5),Mesh=__webpack_require__(142);GameObjectCreator.register("mesh",(function(config,addToScene){void 0===config&&(config={});var key=GetAdvancedValue(config,"key",null),frame=GetAdvancedValue(config,"frame",null),vertices=GetValue(config,"vertices",[]),colors=GetValue(config,"colors",[]),alphas=GetValue(config,"alphas",[]),uv=GetValue(config,"uv",[]),mesh=new Mesh(this.scene,0,0,vertices,uv,colors,alphas,key,frame);return void 0!==addToScene&&(config.add=addToScene),BuildGameObject(this.scene,mesh,config),mesh}))},function(module,exports,__webpack_require__){var BuildGameObject=__webpack_require__(30),GameObjectCreator=__webpack_require__(16),GetAdvancedValue=__webpack_require__(14),Quad=__webpack_require__(217);GameObjectCreator.register("quad",(function(config,addToScene){void 0===config&&(config={});var x=GetAdvancedValue(config,"x",0),y=GetAdvancedValue(config,"y",0),key=GetAdvancedValue(config,"key",null),frame=GetAdvancedValue(config,"frame",null),quad=new Quad(this.scene,x,y,key,frame);return void 0!==addToScene&&(config.add=addToScene),BuildGameObject(this.scene,quad,config),quad}))},function(module,exports,__webpack_require__){var BuildGameObject=__webpack_require__(30),GameObjectCreator=__webpack_require__(16),GetAdvancedValue=__webpack_require__(14),Shader=__webpack_require__(218);GameObjectCreator.register("shader",(function(config,addToScene){void 0===config&&(config={});var key=GetAdvancedValue(config,"key",null),x=GetAdvancedValue(config,"x",0),y=GetAdvancedValue(config,"y",0),width=GetAdvancedValue(config,"width",128),height=GetAdvancedValue(config,"height",128),shader=new Shader(this.scene,key,x,y,width,height);return void 0!==addToScene&&(config.add=addToScene),BuildGameObject(this.scene,shader,config),shader}))},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),LightsManager=__webpack_require__(435),PluginCache=__webpack_require__(18),SceneEvents=__webpack_require__(20),LightsPlugin=new Class({Extends:LightsManager,initialize:function(scene){this.scene=scene,this.systems=scene.sys,scene.sys.settings.isBooted||scene.sys.events.once(SceneEvents.BOOT,this.boot,this),LightsManager.call(this)},boot:function(){var eventEmitter=this.systems.events;eventEmitter.on(SceneEvents.SHUTDOWN,this.shutdown,this),eventEmitter.on(SceneEvents.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});PluginCache.register("LightsPlugin",LightsPlugin,"lights"),module.exports=LightsPlugin},function(module,exports,__webpack_require__){var Circle=__webpack_require__(84);Circle.Area=__webpack_require__(1087),Circle.Circumference=__webpack_require__(270),Circle.CircumferencePoint=__webpack_require__(160),Circle.Clone=__webpack_require__(1088),Circle.Contains=__webpack_require__(52),Circle.ContainsPoint=__webpack_require__(1089),Circle.ContainsRect=__webpack_require__(1090),Circle.CopyFrom=__webpack_require__(1091),Circle.Equals=__webpack_require__(1092),Circle.GetBounds=__webpack_require__(1093),Circle.GetPoint=__webpack_require__(268),Circle.GetPoints=__webpack_require__(269),Circle.Offset=__webpack_require__(1094),Circle.OffsetPoint=__webpack_require__(1095),Circle.Random=__webpack_require__(161),module.exports=Circle},function(module,exports){module.exports=function(circle){return circle.radius>0?Math.PI*circle.radius*circle.radius:0}},function(module,exports,__webpack_require__){var Circle=__webpack_require__(84);module.exports=function(source){return new Circle(source.x,source.y,source.radius)}},function(module,exports,__webpack_require__){var Contains=__webpack_require__(52);module.exports=function(circle,point){return Contains(circle,point.x,point.y)}},function(module,exports,__webpack_require__){var Contains=__webpack_require__(52);module.exports=function(circle,rect){return Contains(circle,rect.x,rect.y)&&Contains(circle,rect.right,rect.y)&&Contains(circle,rect.x,rect.bottom)&&Contains(circle,rect.right,rect.bottom)}},function(module,exports){module.exports=function(source,dest){return dest.setTo(source.x,source.y,source.radius)}},function(module,exports){module.exports=function(circle,toCompare){return circle.x===toCompare.x&&circle.y===toCompare.y&&circle.radius===toCompare.radius}},function(module,exports,__webpack_require__){var Rectangle=__webpack_require__(11);module.exports=function(circle,out){return void 0===out&&(out=new Rectangle),out.x=circle.left,out.y=circle.top,out.width=circle.diameter,out.height=circle.diameter,out}},function(module,exports){module.exports=function(circle,x,y){return circle.x+=x,circle.y+=y,circle}},function(module,exports){module.exports=function(circle,point){return circle.x+=point.x,circle.y+=point.y,circle}},function(module,exports,__webpack_require__){var Ellipse=__webpack_require__(107);Ellipse.Area=__webpack_require__(1097),Ellipse.Circumference=__webpack_require__(405),Ellipse.CircumferencePoint=__webpack_require__(210),Ellipse.Clone=__webpack_require__(1098),Ellipse.Contains=__webpack_require__(108),Ellipse.ContainsPoint=__webpack_require__(1099),Ellipse.ContainsRect=__webpack_require__(1100),Ellipse.CopyFrom=__webpack_require__(1101),Ellipse.Equals=__webpack_require__(1102),Ellipse.GetBounds=__webpack_require__(1103),Ellipse.GetPoint=__webpack_require__(403),Ellipse.GetPoints=__webpack_require__(404),Ellipse.Offset=__webpack_require__(1104),Ellipse.OffsetPoint=__webpack_require__(1105),Ellipse.Random=__webpack_require__(169),module.exports=Ellipse},function(module,exports){module.exports=function(ellipse){return ellipse.isEmpty()?0:ellipse.getMajorRadius()*ellipse.getMinorRadius()*Math.PI}},function(module,exports,__webpack_require__){var Ellipse=__webpack_require__(107);module.exports=function(source){return new Ellipse(source.x,source.y,source.width,source.height)}},function(module,exports,__webpack_require__){var Contains=__webpack_require__(108);module.exports=function(ellipse,point){return Contains(ellipse,point.x,point.y)}},function(module,exports,__webpack_require__){var Contains=__webpack_require__(108);module.exports=function(ellipse,rect){return Contains(ellipse,rect.x,rect.y)&&Contains(ellipse,rect.right,rect.y)&&Contains(ellipse,rect.x,rect.bottom)&&Contains(ellipse,rect.right,rect.bottom)}},function(module,exports){module.exports=function(source,dest){return dest.setTo(source.x,source.y,source.width,source.height)}},function(module,exports){module.exports=function(ellipse,toCompare){return ellipse.x===toCompare.x&&ellipse.y===toCompare.y&&ellipse.width===toCompare.width&&ellipse.height===toCompare.height}},function(module,exports,__webpack_require__){var Rectangle=__webpack_require__(11);module.exports=function(ellipse,out){return void 0===out&&(out=new Rectangle),out.x=ellipse.left,out.y=ellipse.top,out.width=ellipse.width,out.height=ellipse.height,out}},function(module,exports){module.exports=function(ellipse,x,y){return ellipse.x+=x,ellipse.y+=y,ellipse}},function(module,exports){module.exports=function(ellipse,point){return ellipse.x+=point.x,ellipse.y+=point.y,ellipse}},function(module,exports,__webpack_require__){var Point=__webpack_require__(4),CircleToCircle=__webpack_require__(438);module.exports=function(circleA,circleB,out){if(void 0===out&&(out=[]),CircleToCircle(circleA,circleB)){var coefficientA,coefficientB,lambda,x,x0=circleA.x,y0=circleA.y,r0=circleA.radius,x1=circleB.x,y1=circleB.y,r1=circleB.radius;if(y0===y1)0===(lambda=(coefficientB=-2*y1)*coefficientB-4*(coefficientA=1)*(x1*x1+(x=(r1*r1-r0*r0-x1*x1+x0*x0)/(2*(x0-x1)))*x-2*x1*x+y1*y1-r1*r1))?out.push(new Point(x,-coefficientB/(2*coefficientA))):lambda>0&&(out.push(new Point(x,(-coefficientB+Math.sqrt(lambda))/(2*coefficientA))),out.push(new Point(x,(-coefficientB-Math.sqrt(lambda))/(2*coefficientA))));else{var v1=(x0-x1)/(y0-y1),n=(r1*r1-r0*r0-x1*x1+x0*x0-y1*y1+y0*y0)/(2*(y0-y1));0===(lambda=(coefficientB=2*y0*v1-2*n*v1-2*x0)*coefficientB-4*(coefficientA=v1*v1+1)*(x0*x0+y0*y0+n*n-r0*r0-2*y0*n))?(x=-coefficientB/(2*coefficientA),out.push(new Point(x,n-x*v1))):lambda>0&&(x=(-coefficientB+Math.sqrt(lambda))/(2*coefficientA),out.push(new Point(x,n-x*v1)),x=(-coefficientB-Math.sqrt(lambda))/(2*coefficientA),out.push(new Point(x,n-x*v1)))}}return out}},function(module,exports,__webpack_require__){var GetLineToCircle=__webpack_require__(219),CircleToRectangle=__webpack_require__(439);module.exports=function(circle,rect,out){if(void 0===out&&(out=[]),CircleToRectangle(circle,rect)){var lineA=rect.getLineA(),lineB=rect.getLineB(),lineC=rect.getLineC(),lineD=rect.getLineD();GetLineToCircle(lineA,circle,out),GetLineToCircle(lineB,circle,out),GetLineToCircle(lineC,circle,out),GetLineToCircle(lineD,circle,out)}return out}},function(module,exports,__webpack_require__){var Rectangle=__webpack_require__(11),RectangleToRectangle=__webpack_require__(143);module.exports=function(rectA,rectB,output){return void 0===output&&(output=new Rectangle),RectangleToRectangle(rectA,rectB)&&(output.x=Math.max(rectA.x,rectB.x),output.y=Math.max(rectA.y,rectB.y),output.width=Math.min(rectA.right,rectB.right)-output.x,output.height=Math.min(rectA.bottom,rectB.bottom)-output.y),output}},function(module,exports,__webpack_require__){var GetLineToRectangle=__webpack_require__(221),RectangleToRectangle=__webpack_require__(143);module.exports=function(rectA,rectB,out){if(void 0===out&&(out=[]),RectangleToRectangle(rectA,rectB)){var lineA=rectA.getLineA(),lineB=rectA.getLineB(),lineC=rectA.getLineC(),lineD=rectA.getLineD();GetLineToRectangle(lineA,rectB,out),GetLineToRectangle(lineB,rectB,out),GetLineToRectangle(lineC,rectB,out),GetLineToRectangle(lineD,rectB,out)}return out}},function(module,exports,__webpack_require__){var RectangleToTriangle=__webpack_require__(441),GetLineToRectangle=__webpack_require__(221);module.exports=function(rect,triangle,out){if(void 0===out&&(out=[]),RectangleToTriangle(rect,triangle)){var lineA=triangle.getLineA(),lineB=triangle.getLineB(),lineC=triangle.getLineC();GetLineToRectangle(lineA,rect,out),GetLineToRectangle(lineB,rect,out),GetLineToRectangle(lineC,rect,out)}return out}},function(module,exports,__webpack_require__){var GetLineToCircle=__webpack_require__(219),TriangleToCircle=__webpack_require__(443);module.exports=function(triangle,circle,out){if(void 0===out&&(out=[]),TriangleToCircle(triangle,circle)){var lineA=triangle.getLineA(),lineB=triangle.getLineB(),lineC=triangle.getLineC();GetLineToCircle(lineA,circle,out),GetLineToCircle(lineB,circle,out),GetLineToCircle(lineC,circle,out)}return out}},function(module,exports,__webpack_require__){var TriangleToTriangle=__webpack_require__(446),GetTriangleToLine=__webpack_require__(444);module.exports=function(triangleA,triangleB,out){if(void 0===out&&(out=[]),TriangleToTriangle(triangleA,triangleB)){var lineA=triangleB.getLineA(),lineB=triangleB.getLineB(),lineC=triangleB.getLineC();GetTriangleToLine(triangleA,lineA,out),GetTriangleToLine(triangleA,lineB,out),GetTriangleToLine(triangleA,lineC,out)}return out}},function(module,exports,__webpack_require__){var PointToLine=__webpack_require__(448);module.exports=function(point,line){if(!PointToLine(point,line))return!1;var xMin=Math.min(line.x1,line.x2),xMax=Math.max(line.x1,line.x2),yMin=Math.min(line.y1,line.y2),yMax=Math.max(line.y1,line.y2);return point.x>=xMin&&point.x<=xMax&&point.y>=yMin&&point.y<=yMax}},function(module,exports){module.exports=function(rect,left,right,top,bottom,tolerance){return void 0===tolerance&&(tolerance=0),!(left>rect.right+tolerance||right<rect.left-tolerance||top>rect.bottom+tolerance||bottom<rect.top-tolerance)}},function(module,exports,__webpack_require__){var Line=__webpack_require__(62);Line.Angle=__webpack_require__(96),Line.BresenhamPoints=__webpack_require__(291),Line.CenterOn=__webpack_require__(1116),Line.Clone=__webpack_require__(1117),Line.CopyFrom=__webpack_require__(1118),Line.Equals=__webpack_require__(1119),Line.Extend=__webpack_require__(1120),Line.GetMidPoint=__webpack_require__(1121),Line.GetNearestPoint=__webpack_require__(1122),Line.GetNormal=__webpack_require__(1123),Line.GetPoint=__webpack_require__(278),Line.GetPoints=__webpack_require__(164),Line.GetShortestDistance=__webpack_require__(1124),Line.Height=__webpack_require__(1125),Line.Length=__webpack_require__(63),Line.NormalAngle=__webpack_require__(449),Line.NormalX=__webpack_require__(1126),Line.NormalY=__webpack_require__(1127),Line.Offset=__webpack_require__(1128),Line.PerpSlope=__webpack_require__(1129),Line.Random=__webpack_require__(165),Line.ReflectAngle=__webpack_require__(1130),Line.Rotate=__webpack_require__(1131),Line.RotateAroundPoint=__webpack_require__(1132),Line.RotateAroundXY=__webpack_require__(223),Line.SetToAngle=__webpack_require__(1133),Line.Slope=__webpack_require__(1134),Line.Width=__webpack_require__(1135),module.exports=Line},function(module,exports){module.exports=function(line,x,y){var tx=x-(line.x1+line.x2)/2,ty=y-(line.y1+line.y2)/2;return line.x1+=tx,line.y1+=ty,line.x2+=tx,line.y2+=ty,line}},function(module,exports,__webpack_require__){var Line=__webpack_require__(62);module.exports=function(source){return new Line(source.x1,source.y1,source.x2,source.y2)}},function(module,exports){module.exports=function(source,dest){return dest.setTo(source.x1,source.y1,source.x2,source.y2)}},function(module,exports){module.exports=function(line,toCompare){return line.x1===toCompare.x1&&line.y1===toCompare.y1&&line.x2===toCompare.x2&&line.y2===toCompare.y2}},function(module,exports,__webpack_require__){var Length=__webpack_require__(63);module.exports=function(line,left,right){void 0===right&&(right=left);var length=Length(line),slopX=line.x2-line.x1,slopY=line.y2-line.y1;return left&&(line.x1=line.x1-slopX/length*left,line.y1=line.y1-slopY/length*left),right&&(line.x2=line.x2+slopX/length*right,line.y2=line.y2+slopY/length*right),line}},function(module,exports,__webpack_require__){var Point=__webpack_require__(4);module.exports=function(line,out){return void 0===out&&(out=new Point),out.x=(line.x1+line.x2)/2,out.y=(line.y1+line.y2)/2,out}},function(module,exports,__webpack_require__){var Point=__webpack_require__(4);module.exports=function(line,point,out){void 0===out&&(out=new Point);var x1=line.x1,y1=line.y1,x2=line.x2,y2=line.y2,L2=(x2-x1)*(x2-x1)+(y2-y1)*(y2-y1);if(0===L2)return out;var r=((point.x-x1)*(x2-x1)+(point.y-y1)*(y2-y1))/L2;return out.x=x1+r*(x2-x1),out.y=y1+r*(y2-y1),out}},function(module,exports,__webpack_require__){var MATH_CONST=__webpack_require__(22),Angle=__webpack_require__(96),Point=__webpack_require__(4);module.exports=function(line,out){void 0===out&&(out=new Point);var a=Angle(line)-MATH_CONST.TAU;return out.x=Math.cos(a),out.y=Math.sin(a),out}},function(module,exports){module.exports=function(line,point){var x1=line.x1,y1=line.y1,x2=line.x2,y2=line.y2,L2=(x2-x1)*(x2-x1)+(y2-y1)*(y2-y1);if(0===L2)return!1;var s=((y1-point.y)*(x2-x1)-(x1-point.x)*(y2-y1))/L2;return Math.abs(s)*Math.sqrt(L2)}},function(module,exports){module.exports=function(line){return Math.abs(line.y1-line.y2)}},function(module,exports,__webpack_require__){var MATH_CONST=__webpack_require__(22),Angle=__webpack_require__(96);module.exports=function(line){return Math.cos(Angle(line)-MATH_CONST.TAU)}},function(module,exports,__webpack_require__){var MATH_CONST=__webpack_require__(22),Angle=__webpack_require__(96);module.exports=function(line){return Math.sin(Angle(line)-MATH_CONST.TAU)}},function(module,exports){module.exports=function(line,x,y){return line.x1+=x,line.y1+=y,line.x2+=x,line.y2+=y,line}},function(module,exports){module.exports=function(line){return-(line.x2-line.x1)/(line.y2-line.y1)}},function(module,exports,__webpack_require__){var Angle=__webpack_require__(96),NormalAngle=__webpack_require__(449);module.exports=function(lineA,lineB){return 2*NormalAngle(lineB)-Math.PI-Angle(lineA)}},function(module,exports,__webpack_require__){var RotateAroundXY=__webpack_require__(223);module.exports=function(line,angle){var x=(line.x1+line.x2)/2,y=(line.y1+line.y2)/2;return RotateAroundXY(line,x,y,angle)}},function(module,exports,__webpack_require__){var RotateAroundXY=__webpack_require__(223);module.exports=function(line,point,angle){return RotateAroundXY(line,point.x,point.y,angle)}},function(module,exports){module.exports=function(line,x,y,angle,length){return line.x1=x,line.y1=y,line.x2=x+Math.cos(angle)*length,line.y2=y+Math.sin(angle)*length,line}},function(module,exports){module.exports=function(line){return(line.y2-line.y1)/(line.x2-line.x1)}},function(module,exports){module.exports=function(line){return Math.abs(line.x1-line.x2)}},function(module,exports,__webpack_require__){var Point=__webpack_require__(4);Point.Ceil=__webpack_require__(1137),Point.Clone=__webpack_require__(1138),Point.CopyFrom=__webpack_require__(1139),Point.Equals=__webpack_require__(1140),Point.Floor=__webpack_require__(1141),Point.GetCentroid=__webpack_require__(1142),Point.GetMagnitude=__webpack_require__(450),Point.GetMagnitudeSq=__webpack_require__(451),Point.GetRectangleFromPoints=__webpack_require__(1143),Point.Interpolate=__webpack_require__(1144),Point.Invert=__webpack_require__(1145),Point.Negative=__webpack_require__(1146),Point.Project=__webpack_require__(1147),Point.ProjectUnit=__webpack_require__(1148),Point.SetMagnitude=__webpack_require__(1149),module.exports=Point},function(module,exports){module.exports=function(point){return point.setTo(Math.ceil(point.x),Math.ceil(point.y))}},function(module,exports,__webpack_require__){var Point=__webpack_require__(4);module.exports=function(source){return new Point(source.x,source.y)}},function(module,exports){module.exports=function(source,dest){return dest.setTo(source.x,source.y)}},function(module,exports){module.exports=function(point,toCompare){return point.x===toCompare.x&&point.y===toCompare.y}},function(module,exports){module.exports=function(point){return point.setTo(Math.floor(point.x),Math.floor(point.y))}},function(module,exports,__webpack_require__){var Point=__webpack_require__(4);module.exports=function(points,out){if(void 0===out&&(out=new Point),!Array.isArray(points))throw new Error("GetCentroid points argument must be an array");var len=points.length;if(len<1)throw new Error("GetCentroid points array must not be empty");if(1===len)out.x=points[0].x,out.y=points[0].y;else{for(var i=0;i<len;i++)out.x+=points[i].x,out.y+=points[i].y;out.x/=len,out.y/=len}return out}},function(module,exports,__webpack_require__){var Rectangle=__webpack_require__(11);module.exports=function(points,out){void 0===out&&(out=new Rectangle);for(var xMax=Number.NEGATIVE_INFINITY,xMin=Number.POSITIVE_INFINITY,yMax=Number.NEGATIVE_INFINITY,yMin=Number.POSITIVE_INFINITY,i=0;i<points.length;i++){var point=points[i];point.x>xMax&&(xMax=point.x),point.x<xMin&&(xMin=point.x),point.y>yMax&&(yMax=point.y),point.y<yMin&&(yMin=point.y)}return out.x=xMin,out.y=yMin,out.width=xMax-xMin,out.height=yMax-yMin,out}},function(module,exports,__webpack_require__){var Point=__webpack_require__(4);module.exports=function(pointA,pointB,t,out){return void 0===t&&(t=0),void 0===out&&(out=new Point),out.x=pointA.x+(pointB.x-pointA.x)*t,out.y=pointA.y+(pointB.y-pointA.y)*t,out}},function(module,exports){module.exports=function(point){return point.setTo(point.y,point.x)}},function(module,exports,__webpack_require__){var Point=__webpack_require__(4);module.exports=function(point,out){return void 0===out&&(out=new Point),out.setTo(-point.x,-point.y)}},function(module,exports,__webpack_require__){var Point=__webpack_require__(4),GetMagnitudeSq=__webpack_require__(451);module.exports=function(pointA,pointB,out){void 0===out&&(out=new Point);var amt=(pointA.x*pointB.x+pointA.y*pointB.y)/GetMagnitudeSq(pointB);return 0!==amt&&(out.x=amt*pointB.x,out.y=amt*pointB.y),out}},function(module,exports,__webpack_require__){var Point=__webpack_require__(4);module.exports=function(pointA,pointB,out){void 0===out&&(out=new Point);var amt=pointA.x*pointB.x+pointA.y*pointB.y;return 0!==amt&&(out.x=amt*pointB.x,out.y=amt*pointB.y),out}},function(module,exports,__webpack_require__){var GetMagnitude=__webpack_require__(450);module.exports=function(point,magnitude){if(0!==point.x||0!==point.y){var m=GetMagnitude(point);point.x/=m,point.y/=m}return point.x*=magnitude,point.y*=magnitude,point}},function(module,exports,__webpack_require__){var Polygon=__webpack_require__(215);Polygon.Clone=__webpack_require__(1151),Polygon.Contains=__webpack_require__(216),Polygon.ContainsPoint=__webpack_require__(1152),Polygon.GetAABB=__webpack_require__(424),Polygon.GetNumberArray=__webpack_require__(1153),Polygon.GetPoints=__webpack_require__(425),Polygon.Perimeter=__webpack_require__(426),Polygon.Reverse=__webpack_require__(1154),Polygon.Smooth=__webpack_require__(427),module.exports=Polygon},function(module,exports,__webpack_require__){var Polygon=__webpack_require__(215);module.exports=function(polygon){return new Polygon(polygon.points)}},function(module,exports,__webpack_require__){var Contains=__webpack_require__(216);module.exports=function(polygon,point){return Contains(polygon,point.x,point.y)}},function(module,exports){module.exports=function(polygon,output){void 0===output&&(output=[]);for(var i=0;i<polygon.points.length;i++)output.push(polygon.points[i].x),output.push(polygon.points[i].y);return output}},function(module,exports){module.exports=function(polygon){return polygon.points.reverse(),polygon}},function(module,exports){module.exports=function(rect){return rect.width*rect.height}},function(module,exports){module.exports=function(rect){return rect.x=Math.ceil(rect.x),rect.y=Math.ceil(rect.y),rect}},function(module,exports){module.exports=function(rect){return rect.x=Math.ceil(rect.x),rect.y=Math.ceil(rect.y),rect.width=Math.ceil(rect.width),rect.height=Math.ceil(rect.height),rect}},function(module,exports,__webpack_require__){var Rectangle=__webpack_require__(11);module.exports=function(source){return new Rectangle(source.x,source.y,source.width,source.height)}},function(module,exports,__webpack_require__){var Contains=__webpack_require__(54);module.exports=function(rect,point){return Contains(rect,point.x,point.y)}},function(module,exports){module.exports=function(source,dest){return dest.setTo(source.x,source.y,source.width,source.height)}},function(module,exports){module.exports=function(rect,toCompare){return rect.x===toCompare.x&&rect.y===toCompare.y&&rect.width===toCompare.width&&rect.height===toCompare.height}},function(module,exports,__webpack_require__){var GetAspectRatio=__webpack_require__(224);module.exports=function(target,source){var ratio=GetAspectRatio(target);return ratio<GetAspectRatio(source)?target.setSize(source.height*ratio,source.height):target.setSize(source.width,source.width/ratio),target.setPosition(source.centerX-target.width/2,source.centerY-target.height/2)}},function(module,exports,__webpack_require__){var GetAspectRatio=__webpack_require__(224);module.exports=function(target,source){var ratio=GetAspectRatio(target);return ratio>GetAspectRatio(source)?target.setSize(source.height*ratio,source.height):target.setSize(source.width,source.width/ratio),target.setPosition(source.centerX-target.width/2,source.centerY-target.height/2)}},function(module,exports){module.exports=function(rect){return rect.x=Math.floor(rect.x),rect.y=Math.floor(rect.y),rect}},function(module,exports){module.exports=function(rect){return rect.x=Math.floor(rect.x),rect.y=Math.floor(rect.y),rect.width=Math.floor(rect.width),rect.height=Math.floor(rect.height),rect}},function(module,exports,__webpack_require__){var Point=__webpack_require__(4);module.exports=function(rect,out){return void 0===out&&(out=new Point),out.x=rect.centerX,out.y=rect.centerY,out}},function(module,exports,__webpack_require__){var Point=__webpack_require__(4);module.exports=function(rect,out){return void 0===out&&(out=new Point),out.x=rect.width,out.y=rect.height,out}},function(module,exports,__webpack_require__){var CenterOn=__webpack_require__(179);module.exports=function(rect,x,y){var cx=rect.centerX,cy=rect.centerY;return rect.setSize(rect.width+2*x,rect.height+2*y),CenterOn(rect,cx,cy)}},function(module,exports,__webpack_require__){var Rectangle=__webpack_require__(11),Intersects=__webpack_require__(143);module.exports=function(rectA,rectB,out){return void 0===out&&(out=new Rectangle),Intersects(rectA,rectB)?(out.x=Math.max(rectA.x,rectB.x),out.y=Math.max(rectA.y,rectB.y),out.width=Math.min(rectA.right,rectB.right)-out.x,out.height=Math.min(rectA.bottom,rectB.bottom)-out.y):out.setEmpty(),out}},function(module,exports){module.exports=function(target,points){for(var minX=target.x,maxX=target.right,minY=target.y,maxY=target.bottom,i=0;i<points.length;i++)minX=Math.min(minX,points[i].x),maxX=Math.max(maxX,points[i].x),minY=Math.min(minY,points[i].y),maxY=Math.max(maxY,points[i].y);return target.x=minX,target.y=minY,target.width=maxX-minX,target.height=maxY-minY,target}},function(module,exports){module.exports=function(target,source){var minX=Math.min(target.x,source.x),maxX=Math.max(target.right,source.right);target.x=minX,target.width=maxX-minX;var minY=Math.min(target.y,source.y),maxY=Math.max(target.bottom,source.bottom);return target.y=minY,target.height=maxY-minY,target}},function(module,exports){module.exports=function(target,x,y){var minX=Math.min(target.x,x),maxX=Math.max(target.right,x);target.x=minX,target.width=maxX-minX;var minY=Math.min(target.y,y),maxY=Math.max(target.bottom,y);return target.y=minY,target.height=maxY-minY,target}},function(module,exports){module.exports=function(rect,x,y){return rect.x+=x,rect.y+=y,rect}},function(module,exports){module.exports=function(rect,point){return rect.x+=point.x,rect.y+=point.y,rect}},function(module,exports){module.exports=function(rectA,rectB){return rectA.x<rectB.right&&rectA.right>rectB.x&&rectA.y<rectB.bottom&&rectA.bottom>rectB.y}},function(module,exports,__webpack_require__){var Point=__webpack_require__(4),DegToRad=__webpack_require__(41);module.exports=function(rectangle,angle,out){void 0===out&&(out=new Point),angle=DegToRad(angle);var s=Math.sin(angle),c=Math.cos(angle),dx=c>0?rectangle.width/2:rectangle.width/-2,dy=s>0?rectangle.height/2:rectangle.height/-2;return Math.abs(dx*s)<Math.abs(dy*c)?dy=dx*s/c:dx=dy*c/s,out.x=dx+rectangle.centerX,out.y=dy+rectangle.centerY,out}},function(module,exports,__webpack_require__){var Between=__webpack_require__(185),ContainsRect=__webpack_require__(453),Point=__webpack_require__(4);module.exports=function(outer,inner,out){if(void 0===out&&(out=new Point),ContainsRect(outer,inner))switch(Between(0,3)){case 0:out.x=outer.x+Math.random()*(inner.right-outer.x),out.y=outer.y+Math.random()*(inner.top-outer.y);break;case 1:out.x=inner.x+Math.random()*(outer.right-inner.x),out.y=inner.bottom+Math.random()*(outer.bottom-inner.bottom);break;case 2:out.x=outer.x+Math.random()*(inner.x-outer.x),out.y=inner.y+Math.random()*(outer.bottom-inner.y);break;case 3:out.x=inner.right+Math.random()*(outer.right-inner.right),out.y=outer.y+Math.random()*(inner.bottom-outer.y)}return out}},function(module,exports){module.exports=function(rect,toCompare){return rect.width===toCompare.width&&rect.height===toCompare.height}},function(module,exports){module.exports=function(rect,x,y){return void 0===y&&(y=x),rect.width*=x,rect.height*=y,rect}},function(module,exports,__webpack_require__){var Triangle=__webpack_require__(75);Triangle.Area=__webpack_require__(1181),Triangle.BuildEquilateral=__webpack_require__(1182),Triangle.BuildFromPolygon=__webpack_require__(1183),Triangle.BuildRight=__webpack_require__(1184),Triangle.CenterOn=__webpack_require__(1185),Triangle.Centroid=__webpack_require__(454),Triangle.CircumCenter=__webpack_require__(1186),Triangle.CircumCircle=__webpack_require__(1187),Triangle.Clone=__webpack_require__(1188),Triangle.Contains=__webpack_require__(94),Triangle.ContainsArray=__webpack_require__(222),Triangle.ContainsPoint=__webpack_require__(1189),Triangle.CopyFrom=__webpack_require__(1190),Triangle.Decompose=__webpack_require__(447),Triangle.Equals=__webpack_require__(1191),Triangle.GetPoint=__webpack_require__(431),Triangle.GetPoints=__webpack_require__(432),Triangle.InCenter=__webpack_require__(456),Triangle.Perimeter=__webpack_require__(1192),Triangle.Offset=__webpack_require__(455),Triangle.Random=__webpack_require__(170),Triangle.Rotate=__webpack_require__(1193),Triangle.RotateAroundPoint=__webpack_require__(1194),Triangle.RotateAroundXY=__webpack_require__(225),module.exports=Triangle},function(module,exports){module.exports=function(triangle){var x1=triangle.x1,y1=triangle.y1,x2=triangle.x2,y2=triangle.y2,x3=triangle.x3,y3=triangle.y3;return Math.abs(((x3-x1)*(y2-y1)-(x2-x1)*(y3-y1))/2)}},function(module,exports,__webpack_require__){var Triangle=__webpack_require__(75);module.exports=function(x,y,length){var height=length*(Math.sqrt(3)/2);return new Triangle(x,y,x+length/2,y+height,x-length/2,y+height)}},function(module,exports,__webpack_require__){var EarCut=__webpack_require__(70),Triangle=__webpack_require__(75);module.exports=function(data,holes,scaleX,scaleY,out){void 0===holes&&(holes=null),void 0===scaleX&&(scaleX=1),void 0===scaleY&&(scaleY=1),void 0===out&&(out=[]);for(var a,b,c,x1,y1,x2,y2,x3,y3,tris=EarCut(data,holes),i=0;i<tris.length;i+=3)a=tris[i],b=tris[i+1],c=tris[i+2],x1=data[2*a]*scaleX,y1=data[2*a+1]*scaleY,x2=data[2*b]*scaleX,y2=data[2*b+1]*scaleY,x3=data[2*c]*scaleX,y3=data[2*c+1]*scaleY,out.push(new Triangle(x1,y1,x2,y2,x3,y3));return out}},function(module,exports,__webpack_require__){var Triangle=__webpack_require__(75);module.exports=function(x,y,width,height){return void 0===height&&(height=width),new Triangle(x,y,x,y-height,x+width,y)}},function(module,exports,__webpack_require__){var Centroid=__webpack_require__(454),Offset=__webpack_require__(455);module.exports=function(triangle,x,y,centerFunc){void 0===centerFunc&&(centerFunc=Centroid);var center=centerFunc(triangle),diffX=x-center.x,diffY=y-center.y;return Offset(triangle,diffX,diffY)}},function(module,exports,__webpack_require__){var Vector2=__webpack_require__(3);function det(m00,m01,m10,m11){return m00*m11-m01*m10}module.exports=function(triangle,out){void 0===out&&(out=new Vector2);var cx=triangle.x3,cy=triangle.y3,ax=triangle.x1-cx,ay=triangle.y1-cy,bx=triangle.x2-cx,by=triangle.y2-cy,denom=2*det(ax,ay,bx,by),numx=det(ay,ax*ax+ay*ay,by,bx*bx+by*by),numy=det(ax,ax*ax+ay*ay,bx,bx*bx+by*by);return out.x=cx-numx/denom,out.y=cy+numy/denom,out}},function(module,exports,__webpack_require__){var Circle=__webpack_require__(84);module.exports=function(triangle,out){void 0===out&&(out=new Circle);var dx,dy,x1=triangle.x1,y1=triangle.y1,x2=triangle.x2,y2=triangle.y2,x3=triangle.x3,y3=triangle.y3,A=x2-x1,B=y2-y1,C=x3-x1,D=y3-y1,E=A*(x1+x2)+B*(y1+y2),F=C*(x1+x3)+D*(y1+y3),G=2*(A*(y3-y2)-B*(x3-x2));if(Math.abs(G)<1e-6){var minX=Math.min(x1,x2,x3),minY=Math.min(y1,y2,y3);dx=.5*(Math.max(x1,x2,x3)-minX),dy=.5*(Math.max(y1,y2,y3)-minY),out.x=minX+dx,out.y=minY+dy,out.radius=Math.sqrt(dx*dx+dy*dy)}else out.x=(D*E-B*F)/G,out.y=(A*F-C*E)/G,dx=out.x-x1,dy=out.y-y1,out.radius=Math.sqrt(dx*dx+dy*dy);return out}},function(module,exports,__webpack_require__){var Triangle=__webpack_require__(75);module.exports=function(source){return new Triangle(source.x1,source.y1,source.x2,source.y2,source.x3,source.y3)}},function(module,exports,__webpack_require__){var Contains=__webpack_require__(94);module.exports=function(triangle,point){return Contains(triangle,point.x,point.y)}},function(module,exports){module.exports=function(source,dest){return dest.setTo(source.x1,source.y1,source.x2,source.y2,source.x3,source.y3)}},function(module,exports){module.exports=function(triangle,toCompare){return triangle.x1===toCompare.x1&&triangle.y1===toCompare.y1&&triangle.x2===toCompare.x2&&triangle.y2===toCompare.y2&&triangle.x3===toCompare.x3&&triangle.y3===toCompare.y3}},function(module,exports,__webpack_require__){var Length=__webpack_require__(63);module.exports=function(triangle){var line1=triangle.getLineA(),line2=triangle.getLineB(),line3=triangle.getLineC();return Length(line1)+Length(line2)+Length(line3)}},function(module,exports,__webpack_require__){var RotateAroundXY=__webpack_require__(225),InCenter=__webpack_require__(456);module.exports=function(triangle,angle){var point=InCenter(triangle);return RotateAroundXY(triangle,point.x,point.y,angle)}},function(module,exports,__webpack_require__){var RotateAroundXY=__webpack_require__(225);module.exports=function(triangle,point,angle){return RotateAroundXY(triangle,point.x,point.y,angle)}},function(module,exports,__webpack_require__){var CONST=__webpack_require__(196),Extend=__webpack_require__(17),Input={CreateInteractiveObject:__webpack_require__(457),Events:__webpack_require__(56),Gamepad:__webpack_require__(1196),InputManager:__webpack_require__(372),InputPlugin:__webpack_require__(1208),InputPluginCache:__webpack_require__(144),Keyboard:__webpack_require__(1210),Mouse:__webpack_require__(1227),Pointer:__webpack_require__(375),Touch:__webpack_require__(1228)};Input=Extend(!1,Input,CONST),module.exports=Input},function(module,exports,__webpack_require__){module.exports={Axis:__webpack_require__(458),Button:__webpack_require__(459),Events:__webpack_require__(226),Gamepad:__webpack_require__(460),GamepadPlugin:__webpack_require__(1203),Configs:__webpack_require__(1204)}},function(module,exports){module.exports="down"},function(module,exports){module.exports="up"},function(module,exports){module.exports="connected"},function(module,exports){module.exports="disconnected"},function(module,exports){module.exports="down"},function(module,exports){module.exports="up"},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),EventEmitter=__webpack_require__(9),Events=__webpack_require__(226),Gamepad=__webpack_require__(460),GetValue=__webpack_require__(5),InputPluginCache=__webpack_require__(144),InputEvents=__webpack_require__(56),GamepadPlugin=new Class({Extends:EventEmitter,initialize:function(sceneInputPlugin){EventEmitter.call(this),this.scene=sceneInputPlugin.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=sceneInputPlugin,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,sceneInputPlugin.pluginEvents.once(InputEvents.BOOT,this.boot,this),sceneInputPlugin.pluginEvents.on(InputEvents.START,this.start,this)},boot:function(){var game=this.scene.sys.game,settings=this.settings.input,config=game.config;this.enabled=GetValue(settings,"gamepad",config.inputGamepad)&&game.device.input.gamepads,this.target=GetValue(settings,"gamepad.target",config.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(InputEvents.DESTROY,this.destroy,this)},start:function(){this.enabled&&this.startListeners(),this.sceneInputPlugin.pluginEvents.once(InputEvents.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var _this=this,target=this.target,handler=function(event){!event.defaultPrevented&&_this.isActive()&&(_this.refreshPads(),_this.queue.push(event))};this.onGamepadHandler=handler,target.addEventListener("gamepadconnected",handler,!1),target.addEventListener("gamepaddisconnected",handler,!1),this.sceneInputPlugin.pluginEvents.on(InputEvents.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(InputEvents.UPDATE,this.update)},disconnectAll:function(){for(var i=0;i<this.gamepads.length;i++)this.gamepads.connected=!1},refreshPads:function(){var connectedPads=navigator.getGamepads();if(connectedPads)for(var currentPads=this.gamepads,i=0;i<connectedPads.length;i++){var livePad=connectedPads[i];if(livePad){var id=livePad.id,index=livePad.index,currentPad=currentPads[index];if(currentPad)currentPad.id!==id?(currentPad.destroy(),currentPads[index]=new Gamepad(this,livePad)):currentPad.update(livePad);else{var newPad=new Gamepad(this,livePad);currentPads[index]=newPad,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=newPad):this._pad3=newPad:this._pad2=newPad:this._pad1=newPad}}}else this.disconnectAll()},getAll:function(){for(var out=[],pads=this.gamepads,i=0;i<pads.length;i++)pads[i]&&out.push(pads[i]);return out},getPad:function(index){for(var pads=this.gamepads,i=0;i<pads.length;i++)if(pads[i]&&pads[i].index===index)return pads[i]},update:function(){if(this.enabled){this.refreshPads();var len=this.queue.length;if(0!==len)for(var queue=this.queue.splice(0,len),i=0;i<len;i++){var event=queue[i],pad=this.getPad(event.gamepad.index);"gamepadconnected"===event.type?this.emit(Events.CONNECTED,pad,event):"gamepaddisconnected"===event.type&&this.emit(Events.DISCONNECTED,pad,event)}}},shutdown:function(){this.stopListeners(),this.disconnectAll(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var i=0;i<this.gamepads.length;i++)this.gamepads[i]&&this.gamepads[i].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});InputPluginCache.register("GamepadPlugin",GamepadPlugin,"gamepad","gamepad","inputGamepad"),module.exports=GamepadPlugin},function(module,exports,__webpack_require__){module.exports={DUALSHOCK_4:__webpack_require__(1205),SNES_USB:__webpack_require__(1206),XBOX_360:__webpack_require__(1207)}},function(module,exports){module.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(module,exports){module.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(module,exports){module.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(module,exports,__webpack_require__){var Circle=__webpack_require__(84),CircleContains=__webpack_require__(52),Class=__webpack_require__(0),CONST=__webpack_require__(196),CreateInteractiveObject=__webpack_require__(457),CreatePixelPerfectHandler=__webpack_require__(1209),DistanceBetween=__webpack_require__(65),Ellipse=__webpack_require__(107),EllipseContains=__webpack_require__(108),Events=__webpack_require__(56),EventEmitter=__webpack_require__(9),GetFastValue=__webpack_require__(1),GEOM_CONST=__webpack_require__(53),InputPluginCache=__webpack_require__(144),IsPlainObject=__webpack_require__(7),PluginCache=__webpack_require__(18),Rectangle=__webpack_require__(11),RectangleContains=__webpack_require__(54),SceneEvents=__webpack_require__(20),Triangle=__webpack_require__(75),TriangleContains=__webpack_require__(94),InputPlugin=new Class({Extends:EventEmitter,initialize:function(scene){EventEmitter.call(this),this.scene=scene,this.systems=scene.sys,this.settings=scene.sys.settings,this.manager=scene.sys.game.input,this.pluginEvents=new EventEmitter,this.enabled=!0,this.displayList,this.cameras,InputPluginCache.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var _eventData={cancelled:!1};this._eventContainer={stopPropagation:function(){_eventData.cancelled=!0}},this._eventData=_eventData,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,scene.sys.events.once(SceneEvents.BOOT,this.boot,this),scene.sys.events.on(SceneEvents.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(SceneEvents.DESTROY,this.destroy,this),this.pluginEvents.emit(Events.BOOT)},start:function(){var eventEmitter=this.systems.events;eventEmitter.on(SceneEvents.TRANSITION_START,this.transitionIn,this),eventEmitter.on(SceneEvents.TRANSITION_OUT,this.transitionOut,this),eventEmitter.on(SceneEvents.TRANSITION_COMPLETE,this.transitionComplete,this),eventEmitter.on(SceneEvents.PRE_UPDATE,this.preUpdate,this),eventEmitter.once(SceneEvents.SHUTDOWN,this.shutdown,this),this.manager.events.on(Events.GAME_OUT,this.onGameOut,this),this.manager.events.on(Events.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(Events.START)},onGameOver:function(event){this.isActive()&&this.emit(Events.GAME_OVER,event.timeStamp,event)},onGameOut:function(event){this.isActive()&&this.emit(Events.GAME_OUT,event.timeStamp,event)},preUpdate:function(){this.pluginEvents.emit(Events.PRE_UPDATE);var removeList=this._pendingRemoval,insertList=this._pendingInsertion,toRemove=removeList.length,toInsert=insertList.length;if(0!==toRemove||0!==toInsert){for(var current=this._list,i=0;i<toRemove;i++){var gameObject=removeList[i],index=current.indexOf(gameObject);index>-1&&(current.splice(index,1),this.clear(gameObject,!0))}removeList.length=0,this._pendingRemoval.length=0,this._list=current.concat(insertList.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(time,delta){if(!this.isActive())return!1;if(this.pluginEvents.emit(Events.UPDATE,time,delta),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var i,manager=this.manager,pointers=manager.pointers,pointersTotal=manager.pointersTotal;for(i=0;i<pointersTotal;i++)pointers[i].updateMotion();if(0===this._list.length)return!1;var rate=this.pollRate;if(-1===rate)return!1;if(rate>0){if(this._pollTimer-=delta,!(this._pollTimer<0))return!1;this._pollTimer=this.pollRate}var captured=!1;for(i=0;i<pointersTotal;i++){var total=0,pointer=pointers[i];this._tempZones=[],this._temp=this.hitTestPointer(pointer),this.sortGameObjects(this._temp),this.sortGameObjects(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),total+=this.processOverOutEvents(pointer),this.processDragThresholdEvent(pointer),total>0&&(captured=!0)}return captured},update:function(type,pointers){if(!this.isActive())return!1;for(var pointersTotal=pointers.length,captured=!1,i=0;i<pointersTotal;i++){var total=0,pointer=pointers[i];switch(this._tempZones=[],this._temp=this.hitTestPointer(pointer),this.sortGameObjects(this._temp),this.sortGameObjects(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),type){case CONST.MOUSE_DOWN:total+=this.processDragDownEvent(pointer),total+=this.processDownEvents(pointer),total+=this.processOverOutEvents(pointer);break;case CONST.MOUSE_UP:total+=this.processDragUpEvent(pointer),total+=this.processUpEvents(pointer),total+=this.processOverOutEvents(pointer);break;case CONST.TOUCH_START:total+=this.processDragDownEvent(pointer),total+=this.processDownEvents(pointer),total+=this.processOverEvents(pointer);break;case CONST.TOUCH_END:case CONST.TOUCH_CANCEL:total+=this.processDragUpEvent(pointer),total+=this.processUpEvents(pointer),total+=this.processOutEvents(pointer);break;case CONST.MOUSE_MOVE:case CONST.TOUCH_MOVE:total+=this.processDragMoveEvent(pointer),total+=this.processMoveEvents(pointer),total+=this.processOverOutEvents(pointer);break;case CONST.MOUSE_WHEEL:total+=this.processWheelEvent(pointer)}total>0&&(captured=!0)}return this._updatedThisFrame=!0,captured},clear:function(gameObject,skipQueue){void 0===skipQueue&&(skipQueue=!1);var input=gameObject.input;if(input){skipQueue||this.queueForRemoval(gameObject),input.gameObject=void 0,input.target=void 0,input.hitArea=void 0,input.hitAreaCallback=void 0,input.callbackContext=void 0,this.manager.resetCursor(input),gameObject.input=null;var index=this._draggable.indexOf(gameObject);return index>-1&&this._draggable.splice(index,1),(index=this._drag[0].indexOf(gameObject))>-1&&this._drag[0].splice(index,1),(index=this._over[0].indexOf(gameObject))>-1&&this._over[0].splice(index,1),gameObject}},disable:function(gameObject){gameObject.input.enabled=!1},enable:function(gameObject,shape,callback,dropZone){return void 0===dropZone&&(dropZone=!1),gameObject.input?gameObject.input.enabled=!0:this.setHitArea(gameObject,shape,callback),gameObject.input&&dropZone&&!gameObject.input.dropZone&&(gameObject.input.dropZone=dropZone),this},hitTestPointer:function(pointer){for(var cameras=this.cameras.getCamerasBelowPointer(pointer),c=0;c<cameras.length;c++){for(var camera=cameras[c],over=this.manager.hitTest(pointer,this._list,camera),i=0;i<over.length;i++){var obj=over[i];obj.input.dropZone&&this._tempZones.push(obj)}if(over.length>0)return pointer.camera=camera,over}return pointer.camera=cameras[0],[]},processDownEvents:function(pointer){var total=0,currentlyOver=this._temp,_eventData=this._eventData,_eventContainer=this._eventContainer;_eventData.cancelled=!1;for(var aborted=!1,i=0;i<currentlyOver.length;i++){var gameObject=currentlyOver[i];if(gameObject.input){if(total++,gameObject.emit(Events.GAMEOBJECT_POINTER_DOWN,pointer,gameObject.input.localX,gameObject.input.localY,_eventContainer),_eventData.cancelled||!gameObject.input){aborted=!0;break}if(this.emit(Events.GAMEOBJECT_DOWN,pointer,gameObject,_eventContainer),_eventData.cancelled||!gameObject.input){aborted=!0;break}}}return!aborted&&this.manager&&(pointer.downElement===this.manager.game.canvas?this.emit(Events.POINTER_DOWN,pointer,currentlyOver):this.emit(Events.POINTER_DOWN_OUTSIDE,pointer)),total},getDragState:function(pointer){return this._dragState[pointer.id]},setDragState:function(pointer,state){this._dragState[pointer.id]=state},processDragThresholdEvent:function(pointer,time){var passed=!1,timeThreshold=this.dragTimeThreshold,distanceThreshold=this.dragDistanceThreshold;if(distanceThreshold>0&&DistanceBetween(pointer.x,pointer.y,pointer.downX,pointer.downY)>=distanceThreshold?passed=!0:timeThreshold>0&&time>=pointer.downTime+timeThreshold&&(passed=!0),passed)return this.setDragState(pointer,3),this.processDragStartList(pointer)},processDragStartList:function(pointer){if(3!==this.getDragState(pointer))return 0;for(var list=this._drag[pointer.id],i=0;i<list.length;i++){var gameObject=list[i],input=gameObject.input;input.dragState=2,input.dragStartX=gameObject.x,input.dragStartY=gameObject.y,input.dragStartXGlobal=pointer.x,input.dragStartYGlobal=pointer.y,input.dragX=input.dragStartXGlobal-input.dragStartX,input.dragY=input.dragStartYGlobal-input.dragStartY,gameObject.emit(Events.GAMEOBJECT_DRAG_START,pointer,input.dragX,input.dragY),this.emit(Events.DRAG_START,pointer,gameObject)}return this.setDragState(pointer,4),list.length},processDragDownEvent:function(pointer){var currentlyOver=this._temp;if(0===this._draggable.length||0===currentlyOver.length||!pointer.primaryDown||0!==this.getDragState(pointer))return 0;this.setDragState(pointer,1);for(var draglist=[],i=0;i<currentlyOver.length;i++){var gameObject=currentlyOver[i];gameObject.input.draggable&&0===gameObject.input.dragState&&draglist.push(gameObject)}return 0===draglist.length?(this.setDragState(pointer,0),0):(draglist.length>1&&(this.sortGameObjects(draglist),this.topOnly&&draglist.splice(1)),this._drag[pointer.id]=draglist,0===this.dragDistanceThreshold||0===this.dragTimeThreshold?(this.setDragState(pointer,3),this.processDragStartList(pointer)):(this.setDragState(pointer,2),0))},processDragMoveEvent:function(pointer){if(4!==this.getDragState(pointer))return 0;for(var dropZones=this._tempZones,list=this._drag[pointer.id],i=0;i<list.length;i++){var dragX,dragY,gameObject=list[i],input=gameObject.input,target=input.target;if(target){var index=dropZones.indexOf(target);0===index?(gameObject.emit(Events.GAMEOBJECT_DRAG_OVER,pointer,target),this.emit(Events.DRAG_OVER,pointer,gameObject,target)):index>0?(gameObject.emit(Events.GAMEOBJECT_DRAG_LEAVE,pointer,target),this.emit(Events.DRAG_LEAVE,pointer,gameObject,target),input.target=dropZones[0],target=input.target,gameObject.emit(Events.GAMEOBJECT_DRAG_ENTER,pointer,target),this.emit(Events.DRAG_ENTER,pointer,gameObject,target)):(gameObject.emit(Events.GAMEOBJECT_DRAG_LEAVE,pointer,target),this.emit(Events.DRAG_LEAVE,pointer,gameObject,target),dropZones[0]?(input.target=dropZones[0],target=input.target,gameObject.emit(Events.GAMEOBJECT_DRAG_ENTER,pointer,target),this.emit(Events.DRAG_ENTER,pointer,gameObject,target)):input.target=null)}else!target&&dropZones[0]&&(input.target=dropZones[0],target=input.target,gameObject.emit(Events.GAMEOBJECT_DRAG_ENTER,pointer,target),this.emit(Events.DRAG_ENTER,pointer,gameObject,target));if(gameObject.parentContainer){var dx=pointer.x-input.dragStartXGlobal,dy=pointer.y-input.dragStartYGlobal,rotation=gameObject.getParentRotation(),dxRotated=dx*Math.cos(rotation)+dy*Math.sin(rotation),dyRotated=dy*Math.cos(rotation)-dx*Math.sin(rotation);dragX=dxRotated+input.dragStartX,dragY=dyRotated+input.dragStartY}else dragX=pointer.x-input.dragX,dragY=pointer.y-input.dragY;gameObject.emit(Events.GAMEOBJECT_DRAG,pointer,dragX,dragY),this.emit(Events.DRAG,pointer,gameObject,dragX,dragY)}return list.length},processDragUpEvent:function(pointer){for(var list=this._drag[pointer.id],i=0;i<list.length;i++){var gameObject=list[i],input=gameObject.input;if(input&&2===input.dragState){input.dragState=0,input.dragX=input.localX-gameObject.displayOriginX,input.dragY=input.localY-gameObject.displayOriginY;var dropped=!1,target=input.target;target&&(gameObject.emit(Events.GAMEOBJECT_DROP,pointer,target),this.emit(Events.DROP,pointer,gameObject,target),input.target=null,dropped=!0),gameObject.input&&(gameObject.emit(Events.GAMEOBJECT_DRAG_END,pointer,input.dragX,input.dragY,dropped),this.emit(Events.DRAG_END,pointer,gameObject,dropped))}}return this.setDragState(pointer,0),list.splice(0),0},processMoveEvents:function(pointer){var total=0,currentlyOver=this._temp,_eventData=this._eventData,_eventContainer=this._eventContainer;_eventData.cancelled=!1;for(var aborted=!1,i=0;i<currentlyOver.length;i++){var gameObject=currentlyOver[i];if(gameObject.input){if(total++,gameObject.emit(Events.GAMEOBJECT_POINTER_MOVE,pointer,gameObject.input.localX,gameObject.input.localY,_eventContainer),_eventData.cancelled||!gameObject.input){aborted=!0;break}if(this.emit(Events.GAMEOBJECT_MOVE,pointer,gameObject,_eventContainer),_eventData.cancelled||!gameObject.input){aborted=!0;break}if(this.topOnly)break}}return aborted||this.emit(Events.POINTER_MOVE,pointer,currentlyOver),total},processWheelEvent:function(pointer){var total=0,currentlyOver=this._temp,_eventData=this._eventData,_eventContainer=this._eventContainer;_eventData.cancelled=!1;for(var aborted=!1,dx=pointer.deltaX,dy=pointer.deltaY,dz=pointer.deltaZ,i=0;i<currentlyOver.length;i++){var gameObject=currentlyOver[i];if(gameObject.input){if(total++,gameObject.emit(Events.GAMEOBJECT_POINTER_WHEEL,pointer,dx,dy,dz,_eventContainer),_eventData.cancelled||!gameObject.input){aborted=!0;break}if(this.emit(Events.GAMEOBJECT_WHEEL,pointer,gameObject,dx,dy,dz,_eventContainer),_eventData.cancelled||!gameObject.input){aborted=!0;break}}}return aborted||this.emit(Events.POINTER_WHEEL,pointer,currentlyOver,dx,dy,dz),total},processOverEvents:function(pointer){var currentlyOver=this._temp,totalInteracted=0,total=currentlyOver.length,justOver=[];if(total>0){var manager=this.manager,_eventData=this._eventData,_eventContainer=this._eventContainer;_eventData.cancelled=!1;for(var aborted=!1,i=0;i<total;i++){var gameObject=currentlyOver[i];if(gameObject.input){if(justOver.push(gameObject),manager.setCursor(gameObject.input),gameObject.emit(Events.GAMEOBJECT_POINTER_OVER,pointer,gameObject.input.localX,gameObject.input.localY,_eventContainer),totalInteracted++,_eventData.cancelled||!gameObject.input){aborted=!0;break}if(this.emit(Events.GAMEOBJECT_OVER,pointer,gameObject,_eventContainer),_eventData.cancelled||!gameObject.input){aborted=!0;break}}}aborted||this.emit(Events.POINTER_OVER,pointer,justOver)}return this._over[pointer.id]=justOver,totalInteracted},processOutEvents:function(pointer){var previouslyOver=this._over[pointer.id],totalInteracted=0,total=previouslyOver.length;if(total>0){var manager=this.manager,_eventData=this._eventData,_eventContainer=this._eventContainer;_eventData.cancelled=!1;var aborted=!1;this.sortGameObjects(previouslyOver);for(var i=0;i<total;i++){var gameObject=previouslyOver[i];for(i=0;i<total;i++)if((gameObject=previouslyOver[i]).input){if(manager.resetCursor(gameObject.input),gameObject.emit(Events.GAMEOBJECT_POINTER_OUT,pointer,_eventContainer),totalInteracted++,_eventData.cancelled||!gameObject.input){aborted=!0;break}if(this.emit(Events.GAMEOBJECT_OUT,pointer,gameObject,_eventContainer),_eventData.cancelled||!gameObject.input){aborted=!0;break}}aborted||this.emit(Events.POINTER_OUT,pointer,previouslyOver)}this._over[pointer.id]=[]}return totalInteracted},processOverOutEvents:function(pointer){var i,gameObject,currentlyOver=this._temp,justOut=[],justOver=[],stillOver=[],previouslyOver=this._over[pointer.id],currentlyDragging=this._drag[pointer.id],manager=this.manager;for(i=0;i<previouslyOver.length;i++)gameObject=previouslyOver[i],-1===currentlyOver.indexOf(gameObject)&&-1===currentlyDragging.indexOf(gameObject)?justOut.push(gameObject):stillOver.push(gameObject);for(i=0;i<currentlyOver.length;i++)gameObject=currentlyOver[i],-1===previouslyOver.indexOf(gameObject)&&justOver.push(gameObject);var total=justOut.length,totalInteracted=0,_eventData=this._eventData,_eventContainer=this._eventContainer;_eventData.cancelled=!1;var aborted=!1;if(total>0){for(this.sortGameObjects(justOut),i=0;i<total;i++)if((gameObject=justOut[i]).input){if(manager.resetCursor(gameObject.input),gameObject.emit(Events.GAMEOBJECT_POINTER_OUT,pointer,_eventContainer),totalInteracted++,_eventData.cancelled||!gameObject.input){aborted=!0;break}if(this.emit(Events.GAMEOBJECT_OUT,pointer,gameObject,_eventContainer),_eventData.cancelled||!gameObject.input){aborted=!0;break}}aborted||this.emit(Events.POINTER_OUT,pointer,justOut)}if(total=justOver.length,_eventData.cancelled=!1,aborted=!1,total>0){for(this.sortGameObjects(justOver),i=0;i<total;i++)if((gameObject=justOver[i]).input){if(manager.setCursor(gameObject.input),gameObject.emit(Events.GAMEOBJECT_POINTER_OVER,pointer,gameObject.input.localX,gameObject.input.localY,_eventContainer),totalInteracted++,_eventData.cancelled||!gameObject.input){aborted=!0;break}if(this.emit(Events.GAMEOBJECT_OVER,pointer,gameObject,_eventContainer),_eventData.cancelled||!gameObject.input){aborted=!0;break}}aborted||this.emit(Events.POINTER_OVER,pointer,justOver)}return previouslyOver=stillOver.concat(justOver),this._over[pointer.id]=this.sortGameObjects(previouslyOver),totalInteracted},processUpEvents:function(pointer){var currentlyOver=this._temp,_eventData=this._eventData,_eventContainer=this._eventContainer;_eventData.cancelled=!1;for(var aborted=!1,i=0;i<currentlyOver.length;i++){var gameObject=currentlyOver[i];if(gameObject.input){if(gameObject.emit(Events.GAMEOBJECT_POINTER_UP,pointer,gameObject.input.localX,gameObject.input.localY,_eventContainer),_eventData.cancelled||!gameObject.input){aborted=!0;break}if(this.emit(Events.GAMEOBJECT_UP,pointer,gameObject,_eventContainer),_eventData.cancelled||!gameObject.input){aborted=!0;break}}}return!aborted&&this.manager&&(pointer.upElement===this.manager.game.canvas?this.emit(Events.POINTER_UP,pointer,currentlyOver):this.emit(Events.POINTER_UP_OUTSIDE,pointer)),currentlyOver.length},queueForInsertion:function(child){return-1===this._pendingInsertion.indexOf(child)&&-1===this._list.indexOf(child)&&this._pendingInsertion.push(child),this},queueForRemoval:function(child){return this._pendingRemoval.push(child),this},setDraggable:function(gameObjects,value){void 0===value&&(value=!0),Array.isArray(gameObjects)||(gameObjects=[gameObjects]);for(var i=0;i<gameObjects.length;i++){var gameObject=gameObjects[i];gameObject.input.draggable=value;var index=this._draggable.indexOf(gameObject);value&&-1===index?this._draggable.push(gameObject):!value&&index>-1&&this._draggable.splice(index,1)}return this},makePixelPerfect:function(alphaTolerance){void 0===alphaTolerance&&(alphaTolerance=1);var textureManager=this.systems.textures;return CreatePixelPerfectHandler(textureManager,alphaTolerance)},setHitArea:function(gameObjects,shape,callback){if(void 0===shape)return this.setHitAreaFromTexture(gameObjects);Array.isArray(gameObjects)||(gameObjects=[gameObjects]);var draggable=!1,dropZone=!1,cursor=!1,useHandCursor=!1,pixelPerfect=!1,customHitArea=!0;if(IsPlainObject(shape)){var config=shape;shape=GetFastValue(config,"hitArea",null),callback=GetFastValue(config,"hitAreaCallback",null),draggable=GetFastValue(config,"draggable",!1),dropZone=GetFastValue(config,"dropZone",!1),cursor=GetFastValue(config,"cursor",!1),useHandCursor=GetFastValue(config,"useHandCursor",!1),pixelPerfect=GetFastValue(config,"pixelPerfect",!1);var alphaTolerance=GetFastValue(config,"alphaTolerance",1);pixelPerfect&&(shape={},callback=this.makePixelPerfect(alphaTolerance)),shape&&callback||(this.setHitAreaFromTexture(gameObjects),customHitArea=!1)}else"function"!=typeof shape||callback||(callback=shape,shape={});for(var i=0;i<gameObjects.length;i++){var gameObject=gameObjects[i];if(pixelPerfect&&"Container"===gameObject.type)console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");else{var io=gameObject.input?gameObject.input:CreateInteractiveObject(gameObject,shape,callback);io.customHitArea=customHitArea,io.dropZone=dropZone,io.cursor=useHandCursor?"pointer":cursor,gameObject.input=io,draggable&&this.setDraggable(gameObject),this.queueForInsertion(gameObject)}}return this},setHitAreaCircle:function(gameObjects,x,y,radius,callback){void 0===callback&&(callback=CircleContains);var shape=new Circle(x,y,radius);return this.setHitArea(gameObjects,shape,callback)},setHitAreaEllipse:function(gameObjects,x,y,width,height,callback){void 0===callback&&(callback=EllipseContains);var shape=new Ellipse(x,y,width,height);return this.setHitArea(gameObjects,shape,callback)},setHitAreaFromTexture:function(gameObjects,callback){void 0===callback&&(callback=RectangleContains),Array.isArray(gameObjects)||(gameObjects=[gameObjects]);for(var i=0;i<gameObjects.length;i++){var gameObject=gameObjects[i],frame=gameObject.frame,width=0,height=0;gameObject.width?(width=gameObject.width,height=gameObject.height):frame&&(width=frame.realWidth,height=frame.realHeight),"Container"!==gameObject.type||0!==width&&0!==height?0!==width&&0!==height&&(gameObject.input=CreateInteractiveObject(gameObject,new Rectangle(0,0,width,height),callback),this.queueForInsertion(gameObject)):console.warn("Container.setInteractive must specify a Shape or call setSize() first")}return this},setHitAreaRectangle:function(gameObjects,x,y,width,height,callback){void 0===callback&&(callback=RectangleContains);var shape=new Rectangle(x,y,width,height);return this.setHitArea(gameObjects,shape,callback)},setHitAreaTriangle:function(gameObjects,x1,y1,x2,y2,x3,y3,callback){void 0===callback&&(callback=TriangleContains);var shape=new Triangle(x1,y1,x2,y2,x3,y3);return this.setHitArea(gameObjects,shape,callback)},enableDebug:function(gameObject,color){void 0===color&&(color=65280);var input=gameObject.input;if(!input||!input.hitArea)return this;var shape=input.hitArea,shapeType=shape.type,debug=input.hitAreaDebug,factory=this.systems.add,updateList=this.systems.updateList;switch(debug&&(updateList.remove(debug),debug.destroy(),debug=null),shapeType){case GEOM_CONST.CIRCLE:debug=factory.arc(0,0,shape.radius);break;case GEOM_CONST.ELLIPSE:debug=factory.ellipse(0,0,shape.width,shape.height);break;case GEOM_CONST.LINE:debug=factory.line(0,0,shape.x1,shape.y1,shape.x2,shape.y2);break;case GEOM_CONST.POLYGON:debug=factory.polygon(0,0,shape.points);break;case GEOM_CONST.RECTANGLE:debug=factory.rectangle(0,0,shape.width,shape.height);break;case GEOM_CONST.TRIANGLE:debug=factory.triangle(0,0,shape.x1,shape.y1,shape.x2,shape.y2,shape.x3,shape.y3)}return debug&&(debug.isFilled=!1,debug.preUpdate=function(){debug.setStrokeStyle(1/gameObject.scale,color),debug.setDisplayOrigin(gameObject.displayOriginX,gameObject.displayOriginY),debug.setRotation(gameObject.rotation),debug.setScale(gameObject.scaleX,gameObject.scaleY),debug.setPosition(gameObject.x,gameObject.y),debug.setScrollFactor(gameObject.scrollFactorX,gameObject.scrollFactorY)},updateList.add(debug),input.hitAreaDebug=debug),this},removeDebug:function(gameObject){var input=gameObject.input;if(input&&input.hitAreaDebug){var debug=input.hitAreaDebug;this.systems.updateList.remove(debug),debug.destroy(),input.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(value){return this.pollRate=value,this._pollTimer=0,this},setGlobalTopOnly:function(value){return this.manager.globalTopOnly=value,this},setTopOnly:function(value){return this.topOnly=value,this},sortGameObjects:function(gameObjects){return gameObjects.length<2?gameObjects:(this.scene.sys.depthSort(),gameObjects.sort(this.sortHandlerGO.bind(this)))},sortHandlerGO:function(childA,childB){if(!childA.parentContainer&&!childB.parentContainer)return this.displayList.getIndex(childB)-this.displayList.getIndex(childA);if(childA.parentContainer===childB.parentContainer)return childB.parentContainer.getIndex(childB)-childA.parentContainer.getIndex(childA);if(childA.parentContainer===childB)return-1;if(childB.parentContainer===childA)return 1;for(var listA=childA.getIndexList(),listB=childB.getIndexList(),len=Math.min(listA.length,listB.length),i=0;i<len;i++){var indexA=listA[i],indexB=listB[i];if(indexA!==indexB)return indexB-indexA}return 0},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(quantity){return this.manager.addPointer(quantity)},setDefaultCursor:function(cursor){return this.manager.setDefaultCursor(cursor),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(Events.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var i=0;i<10;i++)this._drag[i]=[],this._over[i]=[];this.removeAllListeners();var eventEmitter=this.systems.events;eventEmitter.off(SceneEvents.TRANSITION_START,this.transitionIn,this),eventEmitter.off(SceneEvents.TRANSITION_OUT,this.transitionOut,this),eventEmitter.off(SceneEvents.TRANSITION_COMPLETE,this.transitionComplete,this),eventEmitter.off(SceneEvents.PRE_UPDATE,this.preUpdate,this),this.manager.events.off(Events.GAME_OUT,this.onGameOut,this),this.manager.events.off(Events.GAME_OVER,this.onGameOver,this),eventEmitter.off(SceneEvents.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(Events.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(SceneEvents.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});PluginCache.register("InputPlugin",InputPlugin,"input"),module.exports=InputPlugin},function(module,exports){module.exports=function(textureManager,alphaTolerance){return function(hitArea,x,y,gameObject){var alpha=textureManager.getPixelAlpha(x,y,gameObject.texture.key,gameObject.frame.name);return alpha&&alpha>=alphaTolerance}}},function(module,exports,__webpack_require__){module.exports={Events:__webpack_require__(145),KeyboardManager:__webpack_require__(373),KeyboardPlugin:__webpack_require__(1218),Key:__webpack_require__(461),KeyCodes:__webpack_require__(134),KeyCombo:__webpack_require__(462),JustDown:__webpack_require__(1223),JustUp:__webpack_require__(1224),DownDuration:__webpack_require__(1225),UpDuration:__webpack_require__(1226)}},function(module,exports){module.exports="keydown"},function(module,exports){module.exports="keyup"},function(module,exports){module.exports="keycombomatch"},function(module,exports){module.exports="down"},function(module,exports){module.exports="keydown-"},function(module,exports){module.exports="keyup-"},function(module,exports){module.exports="up"},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),EventEmitter=__webpack_require__(9),Events=__webpack_require__(145),GameEvents=__webpack_require__(23),GetValue=__webpack_require__(5),InputEvents=__webpack_require__(56),InputPluginCache=__webpack_require__(144),Key=__webpack_require__(461),KeyCodes=__webpack_require__(134),KeyCombo=__webpack_require__(462),KeyMap=__webpack_require__(1222),SnapFloor=__webpack_require__(105),KeyboardPlugin=new Class({Extends:EventEmitter,initialize:function(sceneInputPlugin){EventEmitter.call(this),this.game=sceneInputPlugin.systems.game,this.scene=sceneInputPlugin.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=sceneInputPlugin,this.manager=sceneInputPlugin.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],sceneInputPlugin.pluginEvents.once(InputEvents.BOOT,this.boot,this),sceneInputPlugin.pluginEvents.on(InputEvents.START,this.start,this)},boot:function(){var settings=this.settings.input;this.enabled=GetValue(settings,"keyboard",!0);var captures=GetValue(settings,"keyboard.capture",null);captures&&this.addCaptures(captures),this.sceneInputPlugin.pluginEvents.once(InputEvents.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.useQueue?this.sceneInputPlugin.pluginEvents.on(InputEvents.UPDATE,this.update,this):this.sceneInputPlugin.manager.events.on(InputEvents.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(InputEvents.SHUTDOWN,this.shutdown,this),this.game.events.on(GameEvents.BLUR,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(keycode){return this.manager.addCapture(keycode),this},removeCapture:function(keycode){return this.manager.removeCapture(keycode),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:KeyCodes.UP,down:KeyCodes.DOWN,left:KeyCodes.LEFT,right:KeyCodes.RIGHT,space:KeyCodes.SPACE,shift:KeyCodes.SHIFT})},addKeys:function(keys,enableCapture,emitOnRepeat){void 0===enableCapture&&(enableCapture=!0),void 0===emitOnRepeat&&(emitOnRepeat=!1);var output={};if("string"==typeof keys){keys=keys.split(",");for(var i=0;i<keys.length;i++){var currentKey=keys[i].trim();currentKey&&(output[currentKey]=this.addKey(currentKey,enableCapture,emitOnRepeat))}}else for(var key in keys)output[key]=this.addKey(keys[key],enableCapture,emitOnRepeat);return output},addKey:function(key,enableCapture,emitOnRepeat){void 0===enableCapture&&(enableCapture=!0),void 0===emitOnRepeat&&(emitOnRepeat=!1);var keys=this.keys;if(key instanceof Key){var idx=keys.indexOf(key);return idx>-1?keys[idx]=key:keys[key.keyCode]=key,enableCapture&&this.addCapture(key.keyCode),key.setEmitOnRepeat(emitOnRepeat),key}return"string"==typeof key&&(key=KeyCodes[key.toUpperCase()]),keys[key]||(keys[key]=new Key(this,key),enableCapture&&this.addCapture(key),keys[key].setEmitOnRepeat(emitOnRepeat)),keys[key]},removeKey:function(key,destroy){void 0===destroy&&(destroy=!1);var ref,keys=this.keys;if(key instanceof Key){var idx=keys.indexOf(key);idx>-1&&(ref=this.keys[idx],this.keys[idx]=void 0)}else"string"==typeof key&&(key=KeyCodes[key.toUpperCase()]);return keys[key]&&(ref=keys[key],keys[key]=void 0),ref&&(ref.plugin=null,destroy&&ref.destroy()),this},createCombo:function(keys,config){return new KeyCombo(this,keys,config)},checkDown:function(key,duration){if(this.enabled&&key.isDown){var t=SnapFloor(this.time-key.timeDown,duration);if(t>key._tick)return key._tick=t,!0}return!1},update:function(){var queue=this.manager.queue,len=queue.length;if(this.isActive()&&0!==len)for(var keys=this.keys,i=0;i<len;i++){var event=queue[i],code=event.keyCode,key=keys[code],repeat=!1;void 0===event.cancelled&&(event.cancelled=0,event.stopImmediatePropagation=function(){event.cancelled=1},event.stopPropagation=function(){event.cancelled=-1}),-1!==event.cancelled&&("keydown"===event.type?(key&&(repeat=key.isDown,key.onDown(event)),event.cancelled||key&&repeat||(KeyMap[code]&&(this.emit(Events.KEY_DOWN+KeyMap[code],event),this.emit("keydown_"+KeyMap[code],event)),event.cancelled||this.emit(Events.ANY_KEY_DOWN,event))):(key&&key.onUp(event),event.cancelled||(KeyMap[code]&&(this.emit(Events.KEY_UP+KeyMap[code],event),this.emit("keyup_"+KeyMap[code],event)),event.cancelled||this.emit(Events.ANY_KEY_UP,event))),1===event.cancelled&&(event.cancelled=0))}},resetKeys:function(){for(var keys=this.keys,i=0;i<keys.length;i++)keys[i]&&keys[i].reset();return this},shutdown:function(){this.resetKeys(),this.sceneInputPlugin.manager.useQueue?this.sceneInputPlugin.pluginEvents.off(InputEvents.UPDATE,this.update,this):this.sceneInputPlugin.manager.events.off(InputEvents.MANAGER_PROCESS,this.update,this),this.game.events.off(GameEvents.BLUR,this.resetKeys),this.removeAllListeners(),this.queue=[]},destroy:function(){this.shutdown();for(var keys=this.keys,i=0;i<keys.length;i++)keys[i]&&keys[i].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});InputPluginCache.register("KeyboardPlugin",KeyboardPlugin,"keyboard","keyboard","inputKeyboard"),module.exports=KeyboardPlugin},function(module,exports,__webpack_require__){var AdvanceKeyCombo=__webpack_require__(1220);module.exports=function(event,combo){if(combo.matched)return!0;var comboMatched=!1,keyMatched=!1;if(event.keyCode===combo.current)if(combo.index>0&&combo.maxKeyDelay>0){var timeLimit=combo.timeLastMatched+combo.maxKeyDelay;event.timeStamp<=timeLimit&&(keyMatched=!0,comboMatched=AdvanceKeyCombo(event,combo))}else keyMatched=!0,comboMatched=AdvanceKeyCombo(event,combo);return!keyMatched&&combo.resetOnWrongKey&&(combo.index=0,combo.current=combo.keyCodes[0]),comboMatched&&(combo.timeLastMatched=event.timeStamp,combo.matched=!0,combo.timeMatched=event.timeStamp),comboMatched}},function(module,exports){module.exports=function(event,combo){return combo.timeLastMatched=event.timeStamp,combo.index++,combo.index===combo.size||(combo.current=combo.keyCodes[combo.index],!1)}},function(module,exports){module.exports=function(combo){return combo.current=combo.keyCodes[0],combo.index=0,combo.timeLastMatched=0,combo.matched=!1,combo.timeMatched=0,combo}},function(module,exports,__webpack_require__){var KeyCodes=__webpack_require__(134),KeyMap={};for(var key in KeyCodes)KeyMap[KeyCodes[key]]=key;module.exports=KeyMap},function(module,exports){module.exports=function(key){return!!key._justDown&&(key._justDown=!1,!0)}},function(module,exports){module.exports=function(key){return!!key._justUp&&(key._justUp=!1,!0)}},function(module,exports){module.exports=function(key,duration){void 0===duration&&(duration=50);var current=key.plugin.game.loop.time-key.timeDown;return key.isDown&&current<duration}},function(module,exports){module.exports=function(key,duration){void 0===duration&&(duration=50);var current=key.plugin.game.loop.time-key.timeUp;return key.isUp&&current<duration}},function(module,exports,__webpack_require__){module.exports={MouseManager:__webpack_require__(374)}},function(module,exports,__webpack_require__){module.exports={TouchManager:__webpack_require__(376)}},function(module,exports,__webpack_require__){var CONST=__webpack_require__(21),Extend=__webpack_require__(17),Loader={Events:__webpack_require__(88),FileTypes:__webpack_require__(1230),File:__webpack_require__(24),FileTypesManager:__webpack_require__(8),GetURL:__webpack_require__(227),LoaderPlugin:__webpack_require__(1253),MergeXHRSettings:__webpack_require__(228),MultiFile:__webpack_require__(67),XHRLoader:__webpack_require__(463),XHRSettings:__webpack_require__(146)};Loader=Extend(!1,Loader,CONST),module.exports=Loader},function(module,exports,__webpack_require__){module.exports={AnimationJSONFile:__webpack_require__(1231),AtlasJSONFile:__webpack_require__(1232),AtlasXMLFile:__webpack_require__(1233),AudioFile:__webpack_require__(464),AudioSpriteFile:__webpack_require__(1234),BinaryFile:__webpack_require__(1235),BitmapFontFile:__webpack_require__(1236),CSSFile:__webpack_require__(1237),GLSLFile:__webpack_require__(1238),HTML5AudioFile:__webpack_require__(465),HTMLFile:__webpack_require__(1239),HTMLTextureFile:__webpack_require__(1240),ImageFile:__webpack_require__(76),JSONFile:__webpack_require__(66),MultiAtlasFile:__webpack_require__(1241),MultiScriptFile:__webpack_require__(1242),PackFile:__webpack_require__(1243),PluginFile:__webpack_require__(1244),SceneFile:__webpack_require__(1245),ScenePluginFile:__webpack_require__(1246),ScriptFile:__webpack_require__(466),SpriteSheetFile:__webpack_require__(1247),SVGFile:__webpack_require__(1248),TextFile:__webpack_require__(467),TilemapCSVFile:__webpack_require__(1249),TilemapImpactFile:__webpack_require__(1250),TilemapJSONFile:__webpack_require__(1251),UnityAtlasFile:__webpack_require__(1252),XMLFile:__webpack_require__(229)}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),FileTypesManager=__webpack_require__(8),JSONFile=__webpack_require__(66),LoaderEvents=__webpack_require__(88),AnimationJSONFile=new Class({Extends:JSONFile,initialize:function(loader,key,url,xhrSettings,dataKey){JSONFile.call(this,loader,key,url,xhrSettings,dataKey),this.type="animationJSON"},onProcess:function(){this.loader.once(LoaderEvents.POST_PROCESS,this.onLoadComplete,this),JSONFile.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data),this.pendingDestroy()}});FileTypesManager.register("animation",(function(key,url,dataKey,xhrSettings){if(Array.isArray(key))for(var i=0;i<key.length;i++)this.addFile(new AnimationJSONFile(this,key[i]));else this.addFile(new AnimationJSONFile(this,key,url,xhrSettings,dataKey));return this})),module.exports=AnimationJSONFile},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),FileTypesManager=__webpack_require__(8),GetFastValue=__webpack_require__(1),ImageFile=__webpack_require__(76),IsPlainObject=__webpack_require__(7),JSONFile=__webpack_require__(66),MultiFile=__webpack_require__(67),AtlasJSONFile=new Class({Extends:MultiFile,initialize:function(loader,key,textureURL,atlasURL,textureXhrSettings,atlasXhrSettings){var image,data;if(IsPlainObject(key)){var config=key;key=GetFastValue(config,"key"),image=new ImageFile(loader,{key:key,url:GetFastValue(config,"textureURL"),extension:GetFastValue(config,"textureExtension","png"),normalMap:GetFastValue(config,"normalMap"),xhrSettings:GetFastValue(config,"textureXhrSettings")}),data=new JSONFile(loader,{key:key,url:GetFastValue(config,"atlasURL"),extension:GetFastValue(config,"atlasExtension","json"),xhrSettings:GetFastValue(config,"atlasXhrSettings")})}else image=new ImageFile(loader,key,textureURL,textureXhrSettings),data=new JSONFile(loader,key,atlasURL,atlasXhrSettings);image.linkFile?MultiFile.call(this,loader,"atlasjson",key,[image,data,image.linkFile]):MultiFile.call(this,loader,"atlasjson",key,[image,data])},addToCache:function(){if(this.isReadyToProcess()){var image=this.files[0],json=this.files[1],normalMap=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(image.key,image.data,json.data,normalMap),json.addToCache(),this.complete=!0}}});FileTypesManager.register("atlas",(function(key,textureURL,atlasURL,textureXhrSettings,atlasXhrSettings){var multifile;if(Array.isArray(key))for(var i=0;i<key.length;i++)multifile=new AtlasJSONFile(this,key[i]),this.addFile(multifile.files);else multifile=new AtlasJSONFile(this,key,textureURL,atlasURL,textureXhrSettings,atlasXhrSettings),this.addFile(multifile.files);return this})),module.exports=AtlasJSONFile},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),FileTypesManager=__webpack_require__(8),GetFastValue=__webpack_require__(1),ImageFile=__webpack_require__(76),IsPlainObject=__webpack_require__(7),MultiFile=__webpack_require__(67),XMLFile=__webpack_require__(229),AtlasXMLFile=new Class({Extends:MultiFile,initialize:function(loader,key,textureURL,atlasURL,textureXhrSettings,atlasXhrSettings){var image,data;if(IsPlainObject(key)){var config=key;key=GetFastValue(config,"key"),image=new ImageFile(loader,{key:key,url:GetFastValue(config,"textureURL"),extension:GetFastValue(config,"textureExtension","png"),normalMap:GetFastValue(config,"normalMap"),xhrSettings:GetFastValue(config,"textureXhrSettings")}),data=new XMLFile(loader,{key:key,url:GetFastValue(config,"atlasURL"),extension:GetFastValue(config,"atlasExtension","xml"),xhrSettings:GetFastValue(config,"atlasXhrSettings")})}else image=new ImageFile(loader,key,textureURL,textureXhrSettings),data=new XMLFile(loader,key,atlasURL,atlasXhrSettings);image.linkFile?MultiFile.call(this,loader,"atlasxml",key,[image,data,image.linkFile]):MultiFile.call(this,loader,"atlasxml",key,[image,data])},addToCache:function(){if(this.isReadyToProcess()){var image=this.files[0],xml=this.files[1],normalMap=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(image.key,image.data,xml.data,normalMap),xml.addToCache(),this.complete=!0}}});FileTypesManager.register("atlasXML",(function(key,textureURL,atlasURL,textureXhrSettings,atlasXhrSettings){var multifile;if(Array.isArray(key))for(var i=0;i<key.length;i++)multifile=new AtlasXMLFile(this,key[i]),this.addFile(multifile.files);else multifile=new AtlasXMLFile(this,key,textureURL,atlasURL,textureXhrSettings,atlasXhrSettings),this.addFile(multifile.files);return this})),module.exports=AtlasXMLFile},function(module,exports,__webpack_require__){var AudioFile=__webpack_require__(464),Class=__webpack_require__(0),FileTypesManager=__webpack_require__(8),GetFastValue=__webpack_require__(1),IsPlainObject=__webpack_require__(7),JSONFile=__webpack_require__(66),MultiFile=__webpack_require__(67),AudioSpriteFile=new Class({Extends:MultiFile,initialize:function(loader,key,jsonURL,audioURL,audioConfig,audioXhrSettings,jsonXhrSettings){if(IsPlainObject(key)){var config=key;key=GetFastValue(config,"key"),jsonURL=GetFastValue(config,"jsonURL"),audioURL=GetFastValue(config,"audioURL"),audioConfig=GetFastValue(config,"audioConfig"),audioXhrSettings=GetFastValue(config,"audioXhrSettings"),jsonXhrSettings=GetFastValue(config,"jsonXhrSettings")}var data;if(audioURL){var audio=AudioFile.create(loader,key,audioURL,audioConfig,audioXhrSettings);audio&&(data=new JSONFile(loader,key,jsonURL,jsonXhrSettings),MultiFile.call(this,loader,"audiosprite",key,[audio,data]),this.config.resourceLoad=!1)}else data=new JSONFile(loader,key,jsonURL,jsonXhrSettings),MultiFile.call(this,loader,"audiosprite",key,[data]),this.config.resourceLoad=!0,this.config.audioConfig=audioConfig,this.config.audioXhrSettings=audioXhrSettings},onFileComplete:function(file){if(-1!==this.files.indexOf(file)&&(this.pending--,this.config.resourceLoad&&"json"===file.type&&file.data.hasOwnProperty("resources"))){var urls=file.data.resources,audioConfig=GetFastValue(this.config,"audioConfig"),audioXhrSettings=GetFastValue(this.config,"audioXhrSettings"),audio=AudioFile.create(this.loader,file.key,urls,audioConfig,audioXhrSettings);audio&&(this.addToMultiFile(audio),this.loader.addFile(audio))}},addToCache:function(){if(this.isReadyToProcess()){var fileA=this.files[0],fileB=this.files[1];fileA.addToCache(),fileB.addToCache(),this.complete=!0}}});FileTypesManager.register("audioSprite",(function(key,jsonURL,audioURL,audioConfig,audioXhrSettings,jsonXhrSettings){var multifile,game=this.systems.game,gameAudioConfig=game.config.audio,deviceAudio=game.device.audio;if(gameAudioConfig&&gameAudioConfig.noAudio||!deviceAudio.webAudio&&!deviceAudio.audioData)return this;if(Array.isArray(key))for(var i=0;i<key.length;i++)(multifile=new AudioSpriteFile(this,key[i])).files&&this.addFile(multifile.files);else(multifile=new AudioSpriteFile(this,key,jsonURL,audioURL,audioConfig,audioXhrSettings,jsonXhrSettings)).files&&this.addFile(multifile.files);return this}))},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),CONST=__webpack_require__(21),File=__webpack_require__(24),FileTypesManager=__webpack_require__(8),GetFastValue=__webpack_require__(1),IsPlainObject=__webpack_require__(7),BinaryFile=new Class({Extends:File,initialize:function(loader,key,url,xhrSettings,dataType){var extension="bin";if(IsPlainObject(key)){var config=key;key=GetFastValue(config,"key"),url=GetFastValue(config,"url"),xhrSettings=GetFastValue(config,"xhrSettings"),extension=GetFastValue(config,"extension",extension),dataType=GetFastValue(config,"dataType",dataType)}var fileConfig={type:"binary",cache:loader.cacheManager.binary,extension:extension,responseType:"arraybuffer",key:key,url:url,xhrSettings:xhrSettings,config:{dataType:dataType}};File.call(this,loader,fileConfig)},onProcess:function(){this.state=CONST.FILE_PROCESSING;var ctor=this.config.dataType;this.data=ctor?new ctor(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});FileTypesManager.register("binary",(function(key,url,dataType,xhrSettings){if(Array.isArray(key))for(var i=0;i<key.length;i++)this.addFile(new BinaryFile(this,key[i]));else this.addFile(new BinaryFile(this,key,url,xhrSettings,dataType));return this})),module.exports=BinaryFile},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),FileTypesManager=__webpack_require__(8),GetFastValue=__webpack_require__(1),ImageFile=__webpack_require__(76),IsPlainObject=__webpack_require__(7),MultiFile=__webpack_require__(67),ParseXMLBitmapFont=__webpack_require__(204),XMLFile=__webpack_require__(229),BitmapFontFile=new Class({Extends:MultiFile,initialize:function(loader,key,textureURL,fontDataURL,textureXhrSettings,fontDataXhrSettings){var image,data;if(IsPlainObject(key)){var config=key;key=GetFastValue(config,"key"),image=new ImageFile(loader,{key:key,url:GetFastValue(config,"textureURL"),extension:GetFastValue(config,"textureExtension","png"),normalMap:GetFastValue(config,"normalMap"),xhrSettings:GetFastValue(config,"textureXhrSettings")}),data=new XMLFile(loader,{key:key,url:GetFastValue(config,"fontDataURL"),extension:GetFastValue(config,"fontDataExtension","xml"),xhrSettings:GetFastValue(config,"fontDataXhrSettings")})}else image=new ImageFile(loader,key,textureURL,textureXhrSettings),data=new XMLFile(loader,key,fontDataURL,fontDataXhrSettings);image.linkFile?MultiFile.call(this,loader,"bitmapfont",key,[image,data,image.linkFile]):MultiFile.call(this,loader,"bitmapfont",key,[image,data])},addToCache:function(){if(this.isReadyToProcess()){var image=this.files[0],xml=this.files[1];image.addToCache(),xml.addToCache(),this.loader.cacheManager.bitmapFont.add(image.key,{data:ParseXMLBitmapFont(xml.data),texture:image.key,frame:null}),this.complete=!0}}});FileTypesManager.register("bitmapFont",(function(key,textureURL,fontDataURL,textureXhrSettings,fontDataXhrSettings){var multifile;if(Array.isArray(key))for(var i=0;i<key.length;i++)multifile=new BitmapFontFile(this,key[i]),this.addFile(multifile.files);else multifile=new BitmapFontFile(this,key,textureURL,fontDataURL,textureXhrSettings,fontDataXhrSettings),this.addFile(multifile.files);return this})),module.exports=BitmapFontFile},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),CONST=__webpack_require__(21),File=__webpack_require__(24),FileTypesManager=__webpack_require__(8),GetFastValue=__webpack_require__(1),IsPlainObject=__webpack_require__(7),CSSFile=new Class({Extends:File,initialize:function(loader,key,url,xhrSettings){var extension="css";if(IsPlainObject(key)){var config=key;key=GetFastValue(config,"key"),url=GetFastValue(config,"url"),xhrSettings=GetFastValue(config,"xhrSettings"),extension=GetFastValue(config,"extension",extension)}var fileConfig={type:"script",cache:!1,extension:extension,responseType:"text",key:key,url:url,xhrSettings:xhrSettings};File.call(this,loader,fileConfig)},onProcess:function(){this.state=CONST.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});FileTypesManager.register("css",(function(key,url,xhrSettings){if(Array.isArray(key))for(var i=0;i<key.length;i++)this.addFile(new CSSFile(this,key[i]));else this.addFile(new CSSFile(this,key,url,xhrSettings));return this})),module.exports=CSSFile},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),CONST=__webpack_require__(21),File=__webpack_require__(24),FileTypesManager=__webpack_require__(8),GetFastValue=__webpack_require__(1),IsPlainObject=__webpack_require__(7),Shader=__webpack_require__(360),GLSLFile=new Class({Extends:File,initialize:function(loader,key,url,shaderType,xhrSettings){var extension="glsl";if(IsPlainObject(key)){var config=key;key=GetFastValue(config,"key"),url=GetFastValue(config,"url"),shaderType=GetFastValue(config,"shaderType","fragment"),xhrSettings=GetFastValue(config,"xhrSettings"),extension=GetFastValue(config,"extension",extension)}else void 0===shaderType&&(shaderType="fragment");var fileConfig={type:"glsl",cache:loader.cacheManager.shader,extension:extension,responseType:"text",key:key,url:url,config:{shaderType:shaderType},xhrSettings:xhrSettings};File.call(this,loader,fileConfig)},onProcess:function(){this.state=CONST.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var data=this.data.split("\n"),block=this.extractBlock(data,0);if(block)for(;block;){var key=this.getShaderName(block.header),shaderType=this.getShaderType(block.header),uniforms=this.getShaderUniforms(block.header),shaderSrc=block.shader;if(this.cache.has(key)){var shader=this.cache.get(key);"fragment"===shaderType?shader.fragmentSrc=shaderSrc:shader.vertexSrc=shaderSrc,shader.uniforms||(shader.uniforms=uniforms)}else"fragment"===shaderType?this.cache.add(key,new Shader(key,shaderSrc,"",uniforms)):this.cache.add(key,new Shader(key,"",shaderSrc,uniforms));block=this.extractBlock(data,block.offset)}else"fragment"===this.config.shaderType?this.cache.add(this.key,new Shader(this.key,this.data)):this.cache.add(this.key,new Shader(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(headerSource){for(var i=0;i<headerSource.length;i++){var line=headerSource[i].trim();if("name:"===line.substring(0,5))return line.substring(5).trim()}return this.key},getShaderType:function(headerSource){for(var i=0;i<headerSource.length;i++){var line=headerSource[i].trim();if("type:"===line.substring(0,5))return line.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(headerSource){for(var uniforms={},i=0;i<headerSource.length;i++){var line=headerSource[i].trim();if("uniform."===line.substring(0,8)){var pos=line.indexOf(":");if(pos){var key=line.substring(8,pos);try{uniforms[key]=JSON.parse(line.substring(pos+1))}catch(e){console.warn("Invalid uniform JSON: "+key)}}}}return uniforms},extractBlock:function(data,offset){for(var headerStart=-1,headerEnd=-1,blockEnd=-1,headerOpen=!1,captureSource=!1,headerSource=[],shaderSource=[],i=offset;i<data.length;i++){var line=data[i].trim();if("---"===line)if(-1===headerStart)headerStart=i,headerOpen=!0;else{if(!headerOpen){captureSource=!1;break}headerEnd=i,headerOpen=!1,captureSource=!0}else headerOpen?headerSource.push(line):captureSource&&(shaderSource.push(line),blockEnd=i)}return headerOpen||-1===headerEnd?null:{header:headerSource,shader:shaderSource.join("\n"),offset:blockEnd}}});FileTypesManager.register("glsl",(function(key,url,shaderType,xhrSettings){if(Array.isArray(key))for(var i=0;i<key.length;i++)this.addFile(new GLSLFile(this,key[i]));else this.addFile(new GLSLFile(this,key,url,shaderType,xhrSettings));return this})),module.exports=GLSLFile},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),CONST=__webpack_require__(21),File=__webpack_require__(24),FileTypesManager=__webpack_require__(8),GetFastValue=__webpack_require__(1),IsPlainObject=__webpack_require__(7),HTMLFile=new Class({Extends:File,initialize:function(loader,key,url,xhrSettings){var extension="html";if(IsPlainObject(key)){var config=key;key=GetFastValue(config,"key"),url=GetFastValue(config,"url"),xhrSettings=GetFastValue(config,"xhrSettings"),extension=GetFastValue(config,"extension",extension)}var fileConfig={type:"text",cache:loader.cacheManager.html,extension:extension,responseType:"text",key:key,url:url,xhrSettings:xhrSettings};File.call(this,loader,fileConfig)},onProcess:function(){this.state=CONST.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});FileTypesManager.register("html",(function(key,url,xhrSettings){if(Array.isArray(key))for(var i=0;i<key.length;i++)this.addFile(new HTMLFile(this,key[i]));else this.addFile(new HTMLFile(this,key,url,xhrSettings));return this})),module.exports=HTMLFile},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),CONST=__webpack_require__(21),File=__webpack_require__(24),FileTypesManager=__webpack_require__(8),GetFastValue=__webpack_require__(1),IsPlainObject=__webpack_require__(7),HTMLTextureFile=new Class({Extends:File,initialize:function(loader,key,url,width,height,xhrSettings){void 0===width&&(width=512),void 0===height&&(height=512);var extension="html";if(IsPlainObject(key)){var config=key;key=GetFastValue(config,"key"),url=GetFastValue(config,"url"),xhrSettings=GetFastValue(config,"xhrSettings"),extension=GetFastValue(config,"extension",extension),width=GetFastValue(config,"width",width),height=GetFastValue(config,"height",height)}var fileConfig={type:"html",cache:loader.textureManager,extension:extension,responseType:"text",key:key,url:url,xhrSettings:xhrSettings,config:{width:width,height:height}};File.call(this,loader,fileConfig)},onProcess:function(){this.state=CONST.FILE_PROCESSING;var w=this.config.width,h=this.config.height,data=[];data.push('<svg width="'+w+'px" height="'+h+'px" viewBox="0 0 '+w+" "+h+'" xmlns="http://www.w3.org/2000/svg">'),data.push('<foreignObject width="100%" height="100%">'),data.push('<body xmlns="http://www.w3.org/1999/xhtml">'),data.push(this.xhrLoader.responseText),data.push("</body>"),data.push("</foreignObject>"),data.push("</svg>");var svg=[data.join("\n")],_this=this;try{var blob=new window.Blob(svg,{type:"image/svg+xml;charset=utf-8"})}catch(e){return _this.state=CONST.FILE_ERRORED,void _this.onProcessComplete()}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){File.revokeObjectURL(_this.data),_this.onProcessComplete()},this.data.onerror=function(){File.revokeObjectURL(_this.data),_this.onProcessError()},File.createObjectURL(this.data,blob,"image/svg+xml")},addToCache:function(){var texture=this.cache.addImage(this.key,this.data);this.pendingDestroy(texture)}});FileTypesManager.register("htmlTexture",(function(key,url,width,height,xhrSettings){if(Array.isArray(key))for(var i=0;i<key.length;i++)this.addFile(new HTMLTextureFile(this,key[i]));else this.addFile(new HTMLTextureFile(this,key,url,width,height,xhrSettings));return this})),module.exports=HTMLTextureFile},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),FileTypesManager=__webpack_require__(8),GetFastValue=__webpack_require__(1),ImageFile=__webpack_require__(76),IsPlainObject=__webpack_require__(7),JSONFile=__webpack_require__(66),MultiFile=__webpack_require__(67),MultiAtlasFile=new Class({Extends:MultiFile,initialize:function(loader,key,atlasURL,path,baseURL,atlasXhrSettings,textureXhrSettings){if(IsPlainObject(key)){var config=key;key=GetFastValue(config,"key"),atlasURL=GetFastValue(config,"url"),atlasXhrSettings=GetFastValue(config,"xhrSettings"),path=GetFastValue(config,"path"),baseURL=GetFastValue(config,"baseURL"),textureXhrSettings=GetFastValue(config,"textureXhrSettings")}var data=new JSONFile(loader,key,atlasURL,atlasXhrSettings);MultiFile.call(this,loader,"multiatlas",key,[data]),this.config.path=path,this.config.baseURL=baseURL,this.config.textureXhrSettings=textureXhrSettings},onFileComplete:function(file){if(-1!==this.files.indexOf(file)&&(this.pending--,"json"===file.type&&file.data.hasOwnProperty("textures"))){var textures=file.data.textures,config=this.config,loader=this.loader,currentBaseURL=loader.baseURL,currentPath=loader.path,currentPrefix=loader.prefix,baseURL=GetFastValue(config,"baseURL",currentBaseURL),path=GetFastValue(config,"path",currentPath),prefix=GetFastValue(config,"prefix",currentPrefix),textureXhrSettings=GetFastValue(config,"textureXhrSettings");loader.setBaseURL(baseURL),loader.setPath(path),loader.setPrefix(prefix);for(var i=0;i<textures.length;i++){var textureURL=textures[i].image,key="_MA_"+textureURL,image=new ImageFile(loader,key,textureURL,textureXhrSettings);if(this.addToMultiFile(image),loader.addFile(image),textures[i].normalMap){var normalMap=new ImageFile(loader,key,textures[i].normalMap,textureXhrSettings);normalMap.type="normalMap",image.setLink(normalMap),this.addToMultiFile(normalMap),loader.addFile(normalMap)}}loader.setBaseURL(currentBaseURL),loader.setPath(currentPath),loader.setPrefix(currentPrefix)}},addToCache:function(){if(this.isReadyToProcess()){var fileJSON=this.files[0];fileJSON.addToCache();for(var data=[],images=[],normalMaps=[],i=1;i<this.files.length;i++){var file=this.files[i];if("normalMap"!==file.type)for(var key=file.key.substr(4),image=file.data,t=0;t<fileJSON.data.textures.length;t++){var item=fileJSON.data.textures[t];if(item.image===key){images.push(image),data.push(item),file.linkFile&&normalMaps.push(file.linkFile.data);break}}}for(0===normalMaps.length&&(normalMaps=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,images,data,normalMaps),this.complete=!0,i=0;i<this.files.length;i++)this.files[i].pendingDestroy()}}});FileTypesManager.register("multiatlas",(function(key,atlasURL,path,baseURL,atlasXhrSettings){var multifile;if(Array.isArray(key))for(var i=0;i<key.length;i++)multifile=new MultiAtlasFile(this,key[i]),this.addFile(multifile.files);else multifile=new MultiAtlasFile(this,key,atlasURL,path,baseURL,atlasXhrSettings),this.addFile(multifile.files);return this})),module.exports=MultiAtlasFile},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),FileTypesManager=__webpack_require__(8),GetFastValue=__webpack_require__(1),IsPlainObject=__webpack_require__(7),MultiFile=__webpack_require__(67),ScriptFile=__webpack_require__(466),MultiScriptFile=new Class({Extends:MultiFile,initialize:function(loader,key,url,xhrSettings){var extension="js",files=[];if(IsPlainObject(key)){var config=key;key=GetFastValue(config,"key"),url=GetFastValue(config,"url"),xhrSettings=GetFastValue(config,"xhrSettings"),extension=GetFastValue(config,"extension",extension)}Array.isArray(url)||(url=[url]);for(var i=0;i<url.length;i++){var scriptFile=new ScriptFile(loader,{key:key+"_"+i.toString(),url:url[i],extension:extension,xhrSettings:xhrSettings});scriptFile.onProcess=function(){this.onProcessComplete()},files.push(scriptFile)}MultiFile.call(this,loader,"scripts",key,files)},addToCache:function(){if(this.isReadyToProcess()){for(var i=0;i<this.files.length;i++){var file=this.files[i];file.data=document.createElement("script"),file.data.language="javascript",file.data.type="text/javascript",file.data.defer=!1,file.data.text=file.xhrLoader.responseText,document.head.appendChild(file.data)}this.complete=!0}}});FileTypesManager.register("scripts",(function(key,url,xhrSettings){var multifile;if(Array.isArray(key))for(var i=0;i<key.length;i++)multifile=new MultiScriptFile(this,key[i]),this.addFile(multifile.files);else multifile=new MultiScriptFile(this,key,url,xhrSettings),this.addFile(multifile.files);return this})),module.exports=MultiScriptFile},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),CONST=__webpack_require__(21),FileTypesManager=__webpack_require__(8),JSONFile=__webpack_require__(66),PackFile=new Class({Extends:JSONFile,initialize:function(loader,key,url,xhrSettings,dataKey){JSONFile.call(this,loader,key,url,xhrSettings,dataKey),this.type="packfile"},onProcess:function(){this.state!==CONST.FILE_POPULATED&&(this.state=CONST.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});FileTypesManager.register("pack",(function(key,url,packKey,xhrSettings){if(Array.isArray(key))for(var i=0;i<key.length;i++)this.addFile(new PackFile(this,key[i]));else this.addFile(new PackFile(this,key,url,xhrSettings,packKey));return this})),module.exports=PackFile},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),CONST=__webpack_require__(21),File=__webpack_require__(24),FileTypesManager=__webpack_require__(8),GetFastValue=__webpack_require__(1),IsPlainObject=__webpack_require__(7),PluginFile=new Class({Extends:File,initialize:function(loader,key,url,start,mapping,xhrSettings){var extension="js";if(IsPlainObject(key)){var config=key;key=GetFastValue(config,"key"),url=GetFastValue(config,"url"),xhrSettings=GetFastValue(config,"xhrSettings"),extension=GetFastValue(config,"extension",extension),start=GetFastValue(config,"start"),mapping=GetFastValue(config,"mapping")}var fileConfig={type:"plugin",cache:!1,extension:extension,responseType:"text",key:key,url:url,xhrSettings:xhrSettings,config:{start:start,mapping:mapping}};File.call(this,loader,fileConfig),"function"==typeof url&&(this.data=url,this.state=CONST.FILE_POPULATED)},onProcess:function(){var pluginManager=this.loader.systems.plugins,config=this.config,start=GetFastValue(config,"start",!1),mapping=GetFastValue(config,"mapping",null);if(this.state===CONST.FILE_POPULATED)pluginManager.install(this.key,this.data,start,mapping);else{this.state=CONST.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var plugin=pluginManager.install(this.key,window[this.key],start,mapping);(start||mapping)&&(this.loader.systems[mapping]=plugin,this.loader.scene[mapping]=plugin)}this.onProcessComplete()}});FileTypesManager.register("plugin",(function(key,url,start,mapping,xhrSettings){if(Array.isArray(key))for(var i=0;i<key.length;i++)this.addFile(new PluginFile(this,key[i]));else this.addFile(new PluginFile(this,key,url,start,mapping,xhrSettings));return this})),module.exports=PluginFile},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),CONST=__webpack_require__(21),File=__webpack_require__(24),FileTypesManager=__webpack_require__(8),GetFastValue=__webpack_require__(1),IsPlainObject=__webpack_require__(7),SceneFile=new Class({Extends:File,initialize:function(loader,key,url,xhrSettings){var extension="js";if(IsPlainObject(key)){var config=key;key=GetFastValue(config,"key"),url=GetFastValue(config,"url"),xhrSettings=GetFastValue(config,"xhrSettings"),extension=GetFastValue(config,"extension",extension)}var fileConfig={type:"text",cache:loader.cacheManager.text,extension:extension,responseType:"text",key:key,url:url,xhrSettings:xhrSettings};File.call(this,loader,fileConfig)},onProcess:function(){this.state=CONST.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var code=this.data.concat("(function(){\nreturn new "+this.key+"();\n}).call(this);");this.loader.sceneManager.add(this.key,eval(code)),this.complete=!0}});FileTypesManager.register("sceneFile",(function(key,url,xhrSettings){if(Array.isArray(key))for(var i=0;i<key.length;i++)this.addFile(new SceneFile(this,key[i]));else this.addFile(new SceneFile(this,key,url,xhrSettings));return this})),module.exports=SceneFile},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),CONST=__webpack_require__(21),File=__webpack_require__(24),FileTypesManager=__webpack_require__(8),GetFastValue=__webpack_require__(1),IsPlainObject=__webpack_require__(7),ScenePluginFile=new Class({Extends:File,initialize:function(loader,key,url,systemKey,sceneKey,xhrSettings){var extension="js";if(IsPlainObject(key)){var config=key;key=GetFastValue(config,"key"),url=GetFastValue(config,"url"),xhrSettings=GetFastValue(config,"xhrSettings"),extension=GetFastValue(config,"extension",extension),systemKey=GetFastValue(config,"systemKey"),sceneKey=GetFastValue(config,"sceneKey")}var fileConfig={type:"scenePlugin",cache:!1,extension:extension,responseType:"text",key:key,url:url,xhrSettings:xhrSettings,config:{systemKey:systemKey,sceneKey:sceneKey}};File.call(this,loader,fileConfig),"function"==typeof url&&(this.data=url,this.state=CONST.FILE_POPULATED)},onProcess:function(){var pluginManager=this.loader.systems.plugins,config=this.config,key=this.key,systemKey=GetFastValue(config,"systemKey",key),sceneKey=GetFastValue(config,"sceneKey",key);this.state===CONST.FILE_POPULATED?pluginManager.installScenePlugin(systemKey,this.data,sceneKey,this.loader.scene,!0):(this.state=CONST.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),pluginManager.installScenePlugin(systemKey,window[this.key],sceneKey,this.loader.scene,!0)),this.onProcessComplete()}});FileTypesManager.register("scenePlugin",(function(key,url,systemKey,sceneKey,xhrSettings){if(Array.isArray(key))for(var i=0;i<key.length;i++)this.addFile(new ScenePluginFile(this,key[i]));else this.addFile(new ScenePluginFile(this,key,url,systemKey,sceneKey,xhrSettings));return this})),module.exports=ScenePluginFile},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),FileTypesManager=__webpack_require__(8),ImageFile=__webpack_require__(76),SpriteSheetFile=new Class({Extends:ImageFile,initialize:function(loader,key,url,frameConfig,xhrSettings){ImageFile.call(this,loader,key,url,xhrSettings,frameConfig),this.type="spritesheet"},addToCache:function(){var texture=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(texture)}});FileTypesManager.register("spritesheet",(function(key,url,frameConfig,xhrSettings){if(Array.isArray(key))for(var i=0;i<key.length;i++)this.addFile(new SpriteSheetFile(this,key[i]));else this.addFile(new SpriteSheetFile(this,key,url,frameConfig,xhrSettings));return this})),module.exports=SpriteSheetFile},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),CONST=__webpack_require__(21),File=__webpack_require__(24),FileTypesManager=__webpack_require__(8),GetFastValue=__webpack_require__(1),IsPlainObject=__webpack_require__(7),SVGFile=new Class({Extends:File,initialize:function(loader,key,url,svgConfig,xhrSettings){var extension="svg";if(IsPlainObject(key)){var config=key;key=GetFastValue(config,"key"),url=GetFastValue(config,"url"),svgConfig=GetFastValue(config,"svgConfig",{}),xhrSettings=GetFastValue(config,"xhrSettings"),extension=GetFastValue(config,"extension",extension)}var fileConfig={type:"svg",cache:loader.textureManager,extension:extension,responseType:"text",key:key,url:url,xhrSettings:xhrSettings,config:{width:GetFastValue(svgConfig,"width"),height:GetFastValue(svgConfig,"height"),scale:GetFastValue(svgConfig,"scale")}};File.call(this,loader,fileConfig)},onProcess:function(){this.state=CONST.FILE_PROCESSING;var text=this.xhrLoader.responseText,svg=[text],width=this.config.width,height=this.config.height,scale=this.config.scale;resize:if(width&&height||scale){var svgXML=(new DOMParser).parseFromString(text,"text/xml").getElementsByTagName("svg")[0],hasViewBox=svgXML.hasAttribute("viewBox"),svgWidth=parseFloat(svgXML.getAttribute("width")),svgHeight=parseFloat(svgXML.getAttribute("height"));if(!hasViewBox&&svgWidth&&svgHeight)svgXML.setAttribute("viewBox","0  0 "+svgWidth+" "+svgHeight);else if(hasViewBox&&!svgWidth&&!svgHeight){var viewBox=svgXML.getAttribute("viewBox").split(/\s+|,/);svgWidth=viewBox[2],svgHeight=viewBox[3]}if(scale){if(!svgWidth||!svgHeight)break resize;width=svgWidth*scale,height=svgHeight*scale}svgXML.setAttribute("width",width.toString()+"px"),svgXML.setAttribute("height",height.toString()+"px"),svg=[(new XMLSerializer).serializeToString(svgXML)]}try{var blob=new window.Blob(svg,{type:"image/svg+xml;charset=utf-8"})}catch(e){return void this.onProcessError()}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var _this=this,retry=!1;this.data.onload=function(){retry||File.revokeObjectURL(_this.data),_this.onProcessComplete()},this.data.onerror=function(){retry?_this.onProcessError():(retry=!0,File.revokeObjectURL(_this.data),_this.data.src="data:image/svg+xml,"+encodeURIComponent(svg.join("")))},File.createObjectURL(this.data,blob,"image/svg+xml")},addToCache:function(){var texture=this.cache.addImage(this.key,this.data);this.pendingDestroy(texture)}});FileTypesManager.register("svg",(function(key,url,svgConfig,xhrSettings){if(Array.isArray(key))for(var i=0;i<key.length;i++)this.addFile(new SVGFile(this,key[i]));else this.addFile(new SVGFile(this,key,url,svgConfig,xhrSettings));return this})),module.exports=SVGFile},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),CONST=__webpack_require__(21),File=__webpack_require__(24),FileTypesManager=__webpack_require__(8),GetFastValue=__webpack_require__(1),IsPlainObject=__webpack_require__(7),TILEMAP_FORMATS=__webpack_require__(34),TilemapCSVFile=new Class({Extends:File,initialize:function(loader,key,url,xhrSettings){var extension="csv";if(IsPlainObject(key)){var config=key;key=GetFastValue(config,"key"),url=GetFastValue(config,"url"),xhrSettings=GetFastValue(config,"xhrSettings"),extension=GetFastValue(config,"extension",extension)}var fileConfig={type:"tilemapCSV",cache:loader.cacheManager.tilemap,extension:extension,responseType:"text",key:key,url:url,xhrSettings:xhrSettings};File.call(this,loader,fileConfig),this.tilemapFormat=TILEMAP_FORMATS.CSV},onProcess:function(){this.state=CONST.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var tiledata={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,tiledata),this.pendingDestroy(tiledata)}});FileTypesManager.register("tilemapCSV",(function(key,url,xhrSettings){if(Array.isArray(key))for(var i=0;i<key.length;i++)this.addFile(new TilemapCSVFile(this,key[i]));else this.addFile(new TilemapCSVFile(this,key,url,xhrSettings));return this})),module.exports=TilemapCSVFile},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),FileTypesManager=__webpack_require__(8),JSONFile=__webpack_require__(66),TILEMAP_FORMATS=__webpack_require__(34),TilemapImpactFile=new Class({Extends:JSONFile,initialize:function(loader,key,url,xhrSettings){JSONFile.call(this,loader,key,url,xhrSettings),this.type="tilemapJSON",this.cache=loader.cacheManager.tilemap},addToCache:function(){var tiledata={format:TILEMAP_FORMATS.WELTMEISTER,data:this.data};this.cache.add(this.key,tiledata),this.pendingDestroy(tiledata)}});FileTypesManager.register("tilemapImpact",(function(key,url,xhrSettings){if(Array.isArray(key))for(var i=0;i<key.length;i++)this.addFile(new TilemapImpactFile(this,key[i]));else this.addFile(new TilemapImpactFile(this,key,url,xhrSettings));return this})),module.exports=TilemapImpactFile},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),FileTypesManager=__webpack_require__(8),JSONFile=__webpack_require__(66),TILEMAP_FORMATS=__webpack_require__(34),TilemapJSONFile=new Class({Extends:JSONFile,initialize:function(loader,key,url,xhrSettings){JSONFile.call(this,loader,key,url,xhrSettings),this.type="tilemapJSON",this.cache=loader.cacheManager.tilemap},addToCache:function(){var tiledata={format:TILEMAP_FORMATS.TILED_JSON,data:this.data};this.cache.add(this.key,tiledata),this.pendingDestroy(tiledata)}});FileTypesManager.register("tilemapTiledJSON",(function(key,url,xhrSettings){if(Array.isArray(key))for(var i=0;i<key.length;i++)this.addFile(new TilemapJSONFile(this,key[i]));else this.addFile(new TilemapJSONFile(this,key,url,xhrSettings));return this})),module.exports=TilemapJSONFile},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),FileTypesManager=__webpack_require__(8),GetFastValue=__webpack_require__(1),ImageFile=__webpack_require__(76),IsPlainObject=__webpack_require__(7),MultiFile=__webpack_require__(67),TextFile=__webpack_require__(467),UnityAtlasFile=new Class({Extends:MultiFile,initialize:function(loader,key,textureURL,atlasURL,textureXhrSettings,atlasXhrSettings){var image,data;if(IsPlainObject(key)){var config=key;key=GetFastValue(config,"key"),image=new ImageFile(loader,{key:key,url:GetFastValue(config,"textureURL"),extension:GetFastValue(config,"textureExtension","png"),normalMap:GetFastValue(config,"normalMap"),xhrSettings:GetFastValue(config,"textureXhrSettings")}),data=new TextFile(loader,{key:key,url:GetFastValue(config,"atlasURL"),extension:GetFastValue(config,"atlasExtension","txt"),xhrSettings:GetFastValue(config,"atlasXhrSettings")})}else image=new ImageFile(loader,key,textureURL,textureXhrSettings),data=new TextFile(loader,key,atlasURL,atlasXhrSettings);image.linkFile?MultiFile.call(this,loader,"unityatlas",key,[image,data,image.linkFile]):MultiFile.call(this,loader,"unityatlas",key,[image,data])},addToCache:function(){if(this.isReadyToProcess()){var image=this.files[0],text=this.files[1],normalMap=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(image.key,image.data,text.data,normalMap),text.addToCache(),this.complete=!0}}});FileTypesManager.register("unityAtlas",(function(key,textureURL,atlasURL,textureXhrSettings,atlasXhrSettings){var multifile;if(Array.isArray(key))for(var i=0;i<key.length;i++)multifile=new UnityAtlasFile(this,key[i]),this.addFile(multifile.files);else multifile=new UnityAtlasFile(this,key,textureURL,atlasURL,textureXhrSettings,atlasXhrSettings),this.addFile(multifile.files);return this})),module.exports=UnityAtlasFile},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),CONST=__webpack_require__(21),CustomSet=__webpack_require__(90),EventEmitter=__webpack_require__(9),Events=__webpack_require__(88),FileTypesManager=__webpack_require__(8),GetFastValue=__webpack_require__(1),PluginCache=__webpack_require__(18),SceneEvents=__webpack_require__(20),XHRSettings=__webpack_require__(146),LoaderPlugin=new Class({Extends:EventEmitter,initialize:function(scene){EventEmitter.call(this);var gameConfig=scene.sys.game.config,sceneConfig=scene.sys.settings.loader;this.scene=scene,this.systems=scene.sys,this.cacheManager=scene.sys.cache,this.textureManager=scene.sys.textures,this.sceneManager=scene.sys.game.scene,FileTypesManager.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(GetFastValue(sceneConfig,"baseURL",gameConfig.loaderBaseURL)),this.setPath(GetFastValue(sceneConfig,"path",gameConfig.loaderPath)),this.setPrefix(GetFastValue(sceneConfig,"prefix",gameConfig.loaderPrefix)),this.maxParallelDownloads=GetFastValue(sceneConfig,"maxParallelDownloads",gameConfig.loaderMaxParallelDownloads),this.xhr=XHRSettings(GetFastValue(sceneConfig,"responseType",gameConfig.loaderResponseType),GetFastValue(sceneConfig,"async",gameConfig.loaderAsync),GetFastValue(sceneConfig,"user",gameConfig.loaderUser),GetFastValue(sceneConfig,"password",gameConfig.loaderPassword),GetFastValue(sceneConfig,"timeout",gameConfig.loaderTimeout)),this.crossOrigin=GetFastValue(sceneConfig,"crossOrigin",gameConfig.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new CustomSet,this.inflight=new CustomSet,this.queue=new CustomSet,this._deleteQueue=new CustomSet,this.totalFailed=0,this.totalComplete=0,this.state=CONST.LOADER_IDLE,scene.sys.events.once(SceneEvents.BOOT,this.boot,this),scene.sys.events.on(SceneEvents.START,this.pluginStart,this)},boot:function(){this.systems.events.once(SceneEvents.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(SceneEvents.SHUTDOWN,this.shutdown,this)},setBaseURL:function(url){return void 0===url&&(url=""),""!==url&&"/"!==url.substr(-1)&&(url=url.concat("/")),this.baseURL=url,this},setPath:function(path){return void 0===path&&(path=""),""!==path&&"/"!==path.substr(-1)&&(path=path.concat("/")),this.path=path,this},setPrefix:function(prefix){return void 0===prefix&&(prefix=""),this.prefix=prefix,this},setCORS:function(crossOrigin){return this.crossOrigin=crossOrigin,this},addFile:function(file){Array.isArray(file)||(file=[file]);for(var i=0;i<file.length;i++){var item=file[i];this.keyExists(item)||(this.list.set(item),this.emit(Events.ADD,item.key,item.type,this,item),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(file){var keyConflict=file.hasCacheConflict();return keyConflict||this.list.iterate((function(item){if(item.type===file.type&&item.key===file.key)return keyConflict=!0,!1})),!keyConflict&&this.isLoading()&&(this.inflight.iterate((function(item){if(item.type===file.type&&item.key===file.key)return keyConflict=!0,!1})),this.queue.iterate((function(item){if(item.type===file.type&&item.key===file.key)return keyConflict=!0,!1}))),keyConflict},addPack:function(pack,packKey){packKey&&pack.hasOwnProperty(packKey)&&(pack={packKey:pack[packKey]});var total=0,currentBaseURL=this.baseURL,currentPath=this.path,currentPrefix=this.prefix;for(var key in pack){var config=pack[key],baseURL=GetFastValue(config,"baseURL",currentBaseURL),path=GetFastValue(config,"path",currentPath),prefix=GetFastValue(config,"prefix",currentPrefix),files=GetFastValue(config,"files",null),defaultType=GetFastValue(config,"defaultType","void");if(Array.isArray(files)){this.setBaseURL(baseURL),this.setPath(path),this.setPrefix(prefix);for(var i=0;i<files.length;i++){var file=files[i],type=file.hasOwnProperty("type")?file.type:defaultType;this[type]&&(this[type](file),total++)}}}return this.setBaseURL(currentBaseURL),this.setPath(currentPath),this.setPrefix(currentPrefix),total>0},isLoading:function(){return this.state===CONST.LOADER_LOADING||this.state===CONST.LOADER_PROCESSING},isReady:function(){return this.state===CONST.LOADER_IDLE||this.state===CONST.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(Events.START,this),0===this.list.size?this.loadComplete():(this.state=CONST.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(SceneEvents.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(Events.PROGRESS,this.progress)},update:function(){this.state===CONST.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each((function(file){if((file.state===CONST.FILE_POPULATED||file.state===CONST.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(file),this.list.delete(file),file.crossOrigin||(file.crossOrigin=this.crossOrigin),file.load()),this.inflight.size===this.maxParallelDownloads)return!1}),this)},nextFile:function(file,success){this.inflight&&(this.inflight.delete(file),this.updateProgress(),success?(this.totalComplete++,this.queue.set(file),this.emit(Events.FILE_LOAD,file),file.onProcess()):(this.totalFailed++,this._deleteQueue.set(file),this.emit(Events.FILE_LOAD_ERROR,file),this.fileProcessComplete(file)))},fileProcessComplete:function(file){this.scene&&this.systems&&this.systems.game&&!this.systems.game.pendingDestroy&&(file.state===CONST.FILE_ERRORED?file.multiFile&&file.multiFile.onFileFailed(file):file.state===CONST.FILE_COMPLETE&&(file.multiFile?file.multiFile.isReadyToProcess()&&file.multiFile.addToCache():file.addToCache()),this.queue.delete(file),0===this.list.size&&0===this.inflight.size&&0===this.queue.size&&this.loadComplete())},loadComplete:function(){this.emit(Events.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=CONST.LOADER_COMPLETE,this.systems.events.off(SceneEvents.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(Events.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(file){this._deleteQueue.set(file)},saveJSON:function(data,filename){return this.save(JSON.stringify(data),filename)},save:function(data,filename,filetype){void 0===filename&&(filename="file.json"),void 0===filetype&&(filetype="application/json");var blob=new Blob([data],{type:filetype}),url=URL.createObjectURL(blob),a=document.createElement("a");return a.download=filename,a.textContent="Download "+filename,a.href=url,a.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var gameConfig=this.systems.game.config,sceneConfig=this.systems.settings.loader;this.setBaseURL(GetFastValue(sceneConfig,"baseURL",gameConfig.loaderBaseURL)),this.setPath(GetFastValue(sceneConfig,"path",gameConfig.loaderPath)),this.setPrefix(GetFastValue(sceneConfig,"prefix",gameConfig.loaderPrefix)),this.state=CONST.LOADER_IDLE},shutdown:function(){this.reset(),this.state=CONST.LOADER_SHUTDOWN,this.systems.events.off(SceneEvents.UPDATE,this.update,this),this.systems.events.off(SceneEvents.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=CONST.LOADER_DESTROYED,this.systems.events.off(SceneEvents.UPDATE,this.update,this),this.systems.events.off(SceneEvents.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});PluginCache.register("Loader",LoaderPlugin,"load"),module.exports=LoaderPlugin},function(module,exports,__webpack_require__){module.exports={Arcade:__webpack_require__(1255),Impact:__webpack_require__(1286),Matter:__webpack_require__(1309)}},function(module,exports,__webpack_require__){var CONST=__webpack_require__(59),Extend=__webpack_require__(17),Arcade={ArcadePhysics:__webpack_require__(1256),Body:__webpack_require__(473),Collider:__webpack_require__(474),Components:__webpack_require__(230),Events:__webpack_require__(231),Factory:__webpack_require__(468),Group:__webpack_require__(470),Image:__webpack_require__(469),Sprite:__webpack_require__(147),StaticBody:__webpack_require__(480),StaticGroup:__webpack_require__(471),World:__webpack_require__(472)};Arcade=Extend(!1,Arcade,CONST),module.exports=Arcade},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),DegToRad=__webpack_require__(41),DistanceBetween=__webpack_require__(65),DistanceSquared=__webpack_require__(322),Factory=__webpack_require__(468),GetFastValue=__webpack_require__(1),Merge=__webpack_require__(89),OverlapRect=__webpack_require__(1269),PluginCache=__webpack_require__(18),SceneEvents=__webpack_require__(20),Vector2=__webpack_require__(3),World=__webpack_require__(472),ArcadePhysics=new Class({initialize:function(scene){this.scene=scene,this.systems=scene.sys,this.config=this.getConfig(),this.world,this.add,scene.sys.events.once(SceneEvents.BOOT,this.boot,this),scene.sys.events.on(SceneEvents.START,this.start,this)},boot:function(){this.world=new World(this.scene,this.config),this.add=new Factory(this.world),this.systems.events.once(SceneEvents.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new World(this.scene,this.config),this.add=new Factory(this.world));var eventEmitter=this.systems.events;eventEmitter.on(SceneEvents.UPDATE,this.world.update,this.world),eventEmitter.on(SceneEvents.POST_UPDATE,this.world.postUpdate,this.world),eventEmitter.once(SceneEvents.SHUTDOWN,this.shutdown,this)},getConfig:function(){var gameConfig=this.systems.game.config.physics,sceneConfig=this.systems.settings.physics;return Merge(GetFastValue(sceneConfig,"arcade",{}),GetFastValue(gameConfig,"arcade",{}))},overlap:function(object1,object2,overlapCallback,processCallback,callbackContext){return void 0===overlapCallback&&(overlapCallback=null),void 0===processCallback&&(processCallback=null),void 0===callbackContext&&(callbackContext=overlapCallback),this.world.collideObjects(object1,object2,overlapCallback,processCallback,callbackContext,!0)},collide:function(object1,object2,collideCallback,processCallback,callbackContext){return void 0===collideCallback&&(collideCallback=null),void 0===processCallback&&(processCallback=null),void 0===callbackContext&&(callbackContext=collideCallback),this.world.collideObjects(object1,object2,collideCallback,processCallback,callbackContext,!1)},collideTiles:function(sprite,tiles,collideCallback,processCallback,callbackContext){return this.world.collideTiles(sprite,tiles,collideCallback,processCallback,callbackContext)},overlapTiles:function(sprite,tiles,collideCallback,processCallback,callbackContext){return this.world.overlapTiles(sprite,tiles,collideCallback,processCallback,callbackContext)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(gameObject,x,y,speed,xSpeedMax,ySpeedMax){void 0===speed&&(speed=60);var angle=Math.atan2(y-gameObject.y,x-gameObject.x);return gameObject.body.acceleration.setToPolar(angle,speed),void 0!==xSpeedMax&&void 0!==ySpeedMax&&gameObject.body.maxVelocity.set(xSpeedMax,ySpeedMax),angle},accelerateToObject:function(gameObject,destination,speed,xSpeedMax,ySpeedMax){return this.accelerateTo(gameObject,destination.x,destination.y,speed,xSpeedMax,ySpeedMax)},closest:function(source){var bodies=this.world.bodies,min=Number.MAX_VALUE,closest=null,x=source.x,y=source.y;return bodies.iterate((function(target){var distance=DistanceSquared(x,y,target.x,target.y);distance<min&&(closest=target,min=distance)})),closest},furthest:function(source){var bodies=this.world.bodies,max=-1,farthest=null,x=source.x,y=source.y;return bodies.iterate((function(target){var distance=DistanceSquared(x,y,target.x,target.y);distance>max&&(farthest=target,max=distance)})),farthest},moveTo:function(gameObject,x,y,speed,maxTime){void 0===speed&&(speed=60),void 0===maxTime&&(maxTime=0);var angle=Math.atan2(y-gameObject.y,x-gameObject.x);return maxTime>0&&(speed=DistanceBetween(gameObject.x,gameObject.y,x,y)/(maxTime/1e3)),gameObject.body.velocity.setToPolar(angle,speed),angle},moveToObject:function(gameObject,destination,speed,maxTime){return this.moveTo(gameObject,destination.x,destination.y,speed,maxTime)},velocityFromAngle:function(angle,speed,vec2){return void 0===speed&&(speed=60),void 0===vec2&&(vec2=new Vector2),vec2.setToPolar(DegToRad(angle),speed)},velocityFromRotation:function(rotation,speed,vec2){return void 0===speed&&(speed=60),void 0===vec2&&(vec2=new Vector2),vec2.setToPolar(rotation,speed)},overlapRect:function(x,y,width,height,includeDynamic,includeStatic){return OverlapRect(this.world,x,y,width,height,includeDynamic,includeStatic)},shutdown:function(){if(this.world){var eventEmitter=this.systems.events;eventEmitter.off(SceneEvents.UPDATE,this.world.update,this.world),eventEmitter.off(SceneEvents.POST_UPDATE,this.world.postUpdate,this.world),eventEmitter.off(SceneEvents.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(SceneEvents.START,this.start,this),this.scene=null,this.systems=null}});PluginCache.register("ArcadePhysics",ArcadePhysics,"arcadePhysics"),module.exports=ArcadePhysics},function(module,exports){module.exports={setAcceleration:function(x,y){return this.body.acceleration.set(x,y),this},setAccelerationX:function(value){return this.body.acceleration.x=value,this},setAccelerationY:function(value){return this.body.acceleration.y=value,this}}},function(module,exports){module.exports={setAngularVelocity:function(value){return this.body.angularVelocity=value,this},setAngularAcceleration:function(value){return this.body.angularAcceleration=value,this},setAngularDrag:function(value){return this.body.angularDrag=value,this}}},function(module,exports){module.exports={setBounce:function(x,y){return this.body.bounce.set(x,y),this},setBounceX:function(value){return this.body.bounce.x=value,this},setBounceY:function(value){return this.body.bounce.y=value,this},setCollideWorldBounds:function(value,bounceX,bounceY){return this.body.setCollideWorldBounds(value,bounceX,bounceY),this}}},function(module,exports){module.exports={setDebug:function(showBody,showVelocity,bodyColor){return this.debugShowBody=showBody,this.debugShowVelocity=showVelocity,this.debugBodyColor=bodyColor,this},setDebugBodyColor:function(value){return this.body.debugBodyColor=value,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(value){this.body.debugShowBody=value}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(value){this.body.debugShowVelocity=value}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(value){this.body.debugBodyColor=value}}}},function(module,exports){module.exports={setDrag:function(x,y){return this.body.drag.set(x,y),this},setDragX:function(value){return this.body.drag.x=value,this},setDragY:function(value){return this.body.drag.y=value,this},setDamping:function(value){return this.body.useDamping=value,this}}},function(module,exports){var Enable={enableBody:function(reset,x,y,enableGameObject,showGameObject){return reset&&this.body.reset(x,y),enableGameObject&&(this.body.gameObject.active=!0),showGameObject&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(disableGameObject,hideGameObject){return void 0===disableGameObject&&(disableGameObject=!1),void 0===hideGameObject&&(hideGameObject=!1),this.body.stop(),this.body.enable=!1,disableGameObject&&(this.body.gameObject.active=!1),hideGameObject&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};module.exports=Enable},function(module,exports){module.exports={setFriction:function(x,y){return this.body.friction.set(x,y),this},setFrictionX:function(x){return this.body.friction.x=x,this},setFrictionY:function(y){return this.body.friction.y=y,this}}},function(module,exports){module.exports={setGravity:function(x,y){return this.body.gravity.set(x,y),this},setGravityX:function(x){return this.body.gravity.x=x,this},setGravityY:function(y){return this.body.gravity.y=y,this}}},function(module,exports){var Immovable={setImmovable:function(value){return void 0===value&&(value=!0),this.body.immovable=value,this}};module.exports=Immovable},function(module,exports){module.exports={setMass:function(value){return this.body.mass=value,this}}},function(module,exports){module.exports={setOffset:function(x,y){return this.body.setOffset(x,y),this},setSize:function(width,height,center){return this.body.setSize(width,height,center),this},setCircle:function(radius,offsetX,offsetY){return this.body.setCircle(radius,offsetX,offsetY),this}}},function(module,exports){module.exports={setVelocity:function(x,y){return this.body.setVelocity(x,y),this},setVelocityX:function(x){return this.body.setVelocityX(x),this},setVelocityY:function(y){return this.body.setVelocityY(y),this},setMaxVelocity:function(x,y){return this.body.maxVelocity.set(x,y),this}}},function(module,exports){module.exports=function(world,x,y,width,height,includeDynamic,includeStatic){void 0===includeDynamic&&(includeDynamic=!0),void 0===includeStatic&&(includeStatic=!1);var dynamicBodies=[],staticBodies=[],minMax=world.treeMinMax;if(minMax.minX=x,minMax.minY=y,minMax.maxX=x+width,minMax.maxY=y+height,includeStatic&&(staticBodies=world.staticTree.search(minMax)),includeDynamic&&world.useTree)dynamicBodies=world.tree.search(minMax);else if(includeDynamic){var bodies=world.bodies,fakeBody={position:{x:x,y:y},left:x,top:y,right:x+width,bottom:y+height,isCircle:!1},intersects=world.intersects;bodies.iterate((function(target){intersects(target,fakeBody)&&dynamicBodies.push(target)}))}return staticBodies.concat(dynamicBodies)}},function(module,exports){module.exports="collide"},function(module,exports){module.exports="overlap"},function(module,exports){module.exports="pause"},function(module,exports){module.exports="resume"},function(module,exports){module.exports="tilecollide"},function(module,exports){module.exports="tileoverlap"},function(module,exports){module.exports="worldbounds"},function(module,exports){module.exports="worldstep"},function(module,exports){module.exports=function(tile,sprite){return tile.collisionCallback?!tile.collisionCallback.call(tile.collisionCallbackContext,sprite,tile):!tile.layer.callbacks[tile.index]||!tile.layer.callbacks[tile.index].callback.call(tile.layer.callbacks[tile.index].callbackContext,sprite,tile)}},function(module,exports,__webpack_require__){var TileCheckX=__webpack_require__(1280),TileCheckY=__webpack_require__(1282),TileIntersectsBody=__webpack_require__(479);module.exports=function(i,body,tile,tileWorldRect,tilemapLayer,tileBias,isLayer){var tileLeft=tileWorldRect.left,tileTop=tileWorldRect.top,tileRight=tileWorldRect.right,tileBottom=tileWorldRect.bottom,faceHorizontal=tile.faceLeft||tile.faceRight,faceVertical=tile.faceTop||tile.faceBottom;if(isLayer||(faceHorizontal=!0,faceVertical=!0),!faceHorizontal&&!faceVertical)return!1;var ox=0,oy=0,minX=0,minY=1;if(body.deltaAbsX()>body.deltaAbsY()?minX=-1:body.deltaAbsX()<body.deltaAbsY()&&(minY=-1),0!==body.deltaX()&&0!==body.deltaY()&&faceHorizontal&&faceVertical&&(minX=Math.min(Math.abs(body.position.x-tileRight),Math.abs(body.right-tileLeft)),minY=Math.min(Math.abs(body.position.y-tileBottom),Math.abs(body.bottom-tileTop))),minX<minY){if(faceHorizontal&&0!==(ox=TileCheckX(body,tile,tileLeft,tileRight,tileBias,isLayer))&&!TileIntersectsBody(tileWorldRect,body))return!0;faceVertical&&(oy=TileCheckY(body,tile,tileTop,tileBottom,tileBias,isLayer))}else{if(faceVertical&&0!==(oy=TileCheckY(body,tile,tileTop,tileBottom,tileBias,isLayer))&&!TileIntersectsBody(tileWorldRect,body))return!0;faceHorizontal&&(ox=TileCheckX(body,tile,tileLeft,tileRight,tileBias,isLayer))}return 0!==ox||0!==oy}},function(module,exports,__webpack_require__){var ProcessTileSeparationX=__webpack_require__(1281);module.exports=function(body,tile,tileLeft,tileRight,tileBias,isLayer){var ox=0,faceLeft=tile.faceLeft,faceRight=tile.faceRight,collideLeft=tile.collideLeft,collideRight=tile.collideRight;return isLayer||(faceLeft=!0,faceRight=!0,collideLeft=!0,collideRight=!0),body.deltaX()<0&&!body.blocked.left&&collideRight&&body.checkCollision.left?faceRight&&body.x<tileRight&&(ox=body.x-tileRight)<-tileBias&&(ox=0):body.deltaX()>0&&!body.blocked.right&&collideLeft&&body.checkCollision.right&&faceLeft&&body.right>tileLeft&&(ox=body.right-tileLeft)>tileBias&&(ox=0),0!==ox&&(body.customSeparateX?body.overlapX=ox:ProcessTileSeparationX(body,ox)),ox}},function(module,exports){module.exports=function(body,x){x<0?(body.blocked.none=!1,body.blocked.left=!0):x>0&&(body.blocked.none=!1,body.blocked.right=!0),body.position.x-=x,0===body.bounce.x?body.velocity.x=0:body.velocity.x=-body.velocity.x*body.bounce.x}},function(module,exports,__webpack_require__){var ProcessTileSeparationY=__webpack_require__(1283);module.exports=function(body,tile,tileTop,tileBottom,tileBias,isLayer){var oy=0,faceTop=tile.faceTop,faceBottom=tile.faceBottom,collideUp=tile.collideUp,collideDown=tile.collideDown;return isLayer||(faceTop=!0,faceBottom=!0,collideUp=!0,collideDown=!0),body.deltaY()<0&&!body.blocked.up&&collideDown&&body.checkCollision.up?faceBottom&&body.y<tileBottom&&(oy=body.y-tileBottom)<-tileBias&&(oy=0):body.deltaY()>0&&!body.blocked.down&&collideUp&&body.checkCollision.down&&faceTop&&body.bottom>tileTop&&(oy=body.bottom-tileTop)>tileBias&&(oy=0),0!==oy&&(body.customSeparateY?body.overlapY=oy:ProcessTileSeparationY(body,oy)),oy}},function(module,exports){module.exports=function(body,y){y<0?(body.blocked.none=!1,body.blocked.up=!0):y>0&&(body.blocked.none=!1,body.blocked.down=!0),body.position.y-=y,0===body.bounce.y?body.velocity.y=0:body.velocity.y=-body.velocity.y*body.bounce.y}},function(module,exports,__webpack_require__){var GetOverlapX=__webpack_require__(475);module.exports=function(body1,body2,overlapOnly,bias){var overlap=GetOverlapX(body1,body2,overlapOnly,bias);if(overlapOnly||0===overlap||body1.immovable&&body2.immovable||body1.customSeparateX||body2.customSeparateX)return 0!==overlap||body1.embedded&&body2.embedded;var v1=body1.velocity.x,v2=body2.velocity.x;if(body1.immovable||body2.immovable)body1.immovable?(body2.x+=overlap,body2.velocity.x=v1-v2*body2.bounce.x,body1.moves&&(body2.y+=(body1.y-body1.prev.y)*body1.friction.y)):(body1.x-=overlap,body1.velocity.x=v2-v1*body1.bounce.x,body2.moves&&(body1.y+=(body2.y-body2.prev.y)*body2.friction.y));else{overlap*=.5,body1.x-=overlap,body2.x+=overlap;var nv1=Math.sqrt(v2*v2*body2.mass/body1.mass)*(v2>0?1:-1),nv2=Math.sqrt(v1*v1*body1.mass/body2.mass)*(v1>0?1:-1),avg=.5*(nv1+nv2);nv1-=avg,nv2-=avg,body1.velocity.x=avg+nv1*body1.bounce.x,body2.velocity.x=avg+nv2*body2.bounce.x}return!0}},function(module,exports,__webpack_require__){var GetOverlapY=__webpack_require__(476);module.exports=function(body1,body2,overlapOnly,bias){var overlap=GetOverlapY(body1,body2,overlapOnly,bias);if(overlapOnly||0===overlap||body1.immovable&&body2.immovable||body1.customSeparateY||body2.customSeparateY)return 0!==overlap||body1.embedded&&body2.embedded;var v1=body1.velocity.y,v2=body2.velocity.y;if(body1.immovable||body2.immovable)body1.immovable?(body2.y+=overlap,body2.velocity.y=v1-v2*body2.bounce.y,body1.moves&&(body2.x+=(body1.x-body1.prev.x)*body1.friction.x)):(body1.y-=overlap,body1.velocity.y=v2-v1*body1.bounce.y,body2.moves&&(body1.x+=(body2.x-body2.prev.x)*body2.friction.x));else{overlap*=.5,body1.y-=overlap,body2.y+=overlap;var nv1=Math.sqrt(v2*v2*body2.mass/body1.mass)*(v2>0?1:-1),nv2=Math.sqrt(v1*v1*body1.mass/body2.mass)*(v1>0?1:-1),avg=.5*(nv1+nv2);nv1-=avg,nv2-=avg,body1.velocity.y=avg+nv1*body1.bounce.y,body2.velocity.y=avg+nv2*body2.bounce.y}return!0}},function(module,exports,__webpack_require__){module.exports={Body:__webpack_require__(481),Events:__webpack_require__(232),COLLIDES:__webpack_require__(111),CollisionMap:__webpack_require__(482),Factory:__webpack_require__(483),Image:__webpack_require__(485),ImpactBody:__webpack_require__(484),ImpactPhysics:__webpack_require__(1305),Sprite:__webpack_require__(486),TYPE:__webpack_require__(112),World:__webpack_require__(487)}},function(module,exports,__webpack_require__){var Clamp=__webpack_require__(25);module.exports=function(delta,vel,accel,friction,max){if(accel)return Clamp(vel+accel*delta,-max,max);if(friction){var frictionDelta=friction*delta;return vel-frictionDelta>0?vel-frictionDelta:vel+frictionDelta<0?vel+frictionDelta:0}return Clamp(vel,-max,max)}},function(module,exports){module.exports=function(body,res){if(body.standing=!1,res.collision.y&&(body.bounciness>0&&Math.abs(body.vel.y)>body.minBounceVelocity?body.vel.y*=-body.bounciness:(body.vel.y>0&&(body.standing=!0),body.vel.y=0)),res.collision.x&&(body.bounciness>0&&Math.abs(body.vel.x)>body.minBounceVelocity?body.vel.x*=-body.bounciness:body.vel.x=0),res.collision.slope){var s=res.collision.slope;if(body.bounciness>0){var proj=body.vel.x*s.nx+body.vel.y*s.ny;body.vel.x=(body.vel.x-s.nx*proj*2)*body.bounciness,body.vel.y=(body.vel.y-s.ny*proj*2)*body.bounciness}else{var lengthSquared=s.x*s.x+s.y*s.y,dot=(body.vel.x*s.x+body.vel.y*s.y)/lengthSquared;body.vel.x=s.x*dot,body.vel.y=s.y*dot;var angle=Math.atan2(s.x,s.y);angle>body.slopeStanding.min&&angle<body.slopeStanding.max&&(body.standing=!0)}}body.pos.x=res.pos.x,body.pos.y=res.pos.y}},function(module,exports){module.exports="collide"},function(module,exports){module.exports="pause"},function(module,exports){module.exports="resume"},function(module,exports){var H=.5,N=1/3,M=2/3;module.exports={2:[0,1,1,0,!0],3:[0,1,1,H,!0],4:[0,H,1,0,!0],5:[0,1,1,M,!0],6:[0,M,1,N,!0],7:[0,N,1,0,!0],8:[H,1,0,0,!0],9:[1,0,H,1,!0],10:[H,1,1,0,!0],11:[0,0,H,1,!0],12:[0,0,1,0,!1],13:[1,1,0,0,!0],14:[1,H,0,0,!0],15:[1,1,0,H,!0],16:[1,N,0,0,!0],17:[1,M,0,N,!0],18:[1,1,0,M,!0],19:[1,1,H,0,!0],20:[H,0,0,1,!0],21:[0,1,H,0,!0],22:[H,0,1,1,!0],23:[1,1,0,1,!1],24:[0,0,1,1,!0],25:[0,0,1,H,!0],26:[0,H,1,1,!0],27:[0,0,1,N,!0],28:[0,N,1,M,!0],29:[0,M,1,1,!0],30:[N,1,0,0,!0],31:[1,0,M,1,!0],32:[M,1,1,0,!0],33:[0,0,N,1,!0],34:[1,0,1,1,!1],35:[1,0,0,1,!0],36:[1,H,0,1,!0],37:[1,0,0,H,!0],38:[1,M,0,1,!0],39:[1,N,0,M,!0],40:[1,0,0,N,!0],41:[M,1,N,0,!0],42:[M,0,N,1,!0],43:[N,1,M,0,!0],44:[N,0,M,1,!0],45:[0,1,0,0,!1],52:[1,1,M,0,!0],53:[N,0,0,1,!0],54:[0,1,N,0,!0],55:[M,0,1,1,!0]}},function(module,exports){module.exports={setAccelerationX:function(x){return this.accel.x=x,this},setAccelerationY:function(y){return this.accel.y=y,this},setAcceleration:function(x,y){return this.accel.x=x,this.accel.y=y,this}}},function(module,exports){var BodyScale={setBodySize:function(width,height){return void 0===height&&(height=width),this.body.size.x=Math.round(width),this.body.size.y=Math.round(height),this},setBodyScale:function(scaleX,scaleY){void 0===scaleY&&(scaleY=scaleX);var gameObject=this.body.gameObject;return gameObject?(gameObject.setScale(scaleX,scaleY),this.setBodySize(gameObject.width*gameObject.scaleX,gameObject.height*gameObject.scaleY)):this.setBodySize(this.body.size.x*scaleX,this.body.size.y*scaleY)}};module.exports=BodyScale},function(module,exports,__webpack_require__){var TYPE=__webpack_require__(112),BodyType={getBodyType:function(){return this.body.type},setTypeNone:function(){return this.body.type=TYPE.NONE,this},setTypeA:function(){return this.body.type=TYPE.A,this},setTypeB:function(){return this.body.type=TYPE.B,this}};module.exports=BodyType},function(module,exports){module.exports={setBounce:function(value){return this.body.bounciness=value,this},setMinBounceVelocity:function(value){return this.body.minBounceVelocity=value,this},bounce:{get:function(){return this.body.bounciness},set:function(value){this.body.bounciness=value}}}},function(module,exports,__webpack_require__){var TYPE=__webpack_require__(112),CheckAgainst={setAvsB:function(){return this.setTypeA(),this.setCheckAgainstB()},setBvsA:function(){return this.setTypeB(),this.setCheckAgainstA()},setCheckAgainstNone:function(){return this.body.checkAgainst=TYPE.NONE,this},setCheckAgainstA:function(){return this.body.checkAgainst=TYPE.A,this},setCheckAgainstB:function(){return this.body.checkAgainst=TYPE.B,this},checkAgainst:{get:function(){return this.body.checkAgainst},set:function(value){this.body.checkAgainst=value}}};module.exports=CheckAgainst},function(module,exports,__webpack_require__){var COLLIDES=__webpack_require__(111),Collides={_collideCallback:null,_callbackScope:null,setCollideCallback:function(callback,scope){return this._collideCallback=callback,scope&&(this._callbackScope=scope),this},setCollidesNever:function(){return this.body.collides=COLLIDES.NEVER,this},setLiteCollision:function(){return this.body.collides=COLLIDES.LITE,this},setPassiveCollision:function(){return this.body.collides=COLLIDES.PASSIVE,this},setActiveCollision:function(){return this.body.collides=COLLIDES.ACTIVE,this},setFixedCollision:function(){return this.body.collides=COLLIDES.FIXED,this},collides:{get:function(){return this.body.collides},set:function(value){this.body.collides=value}}};module.exports=Collides},function(module,exports){module.exports={setDebug:function(showBody,showVelocity,bodyColor){return this.debugShowBody=showBody,this.debugShowVelocity=showVelocity,this.debugBodyColor=bodyColor,this},setDebugBodyColor:function(value){return this.body.debugBodyColor=value,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(value){this.body.debugShowBody=value}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(value){this.body.debugShowVelocity=value}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(value){this.body.debugBodyColor=value}}}},function(module,exports){module.exports={setFrictionX:function(x){return this.friction.x=x,this},setFrictionY:function(y){return this.friction.y=y,this},setFriction:function(x,y){return this.friction.x=x,this.friction.y=y,this}}},function(module,exports){module.exports={setGravity:function(value){return this.body.gravityFactor=value,this},gravity:{get:function(){return this.body.gravityFactor},set:function(value){this.body.gravityFactor=value}}}},function(module,exports){module.exports={setOffset:function(x,y,width,height){return this.body.offset.x=x,this.body.offset.y=y,width&&this.setBodySize(width,height),this}}},function(module,exports){var SetGameObject={setGameObject:function(gameObject,sync){return void 0===sync&&(sync=!0),gameObject?(this.body.gameObject=gameObject,sync&&this.syncGameObject()):this.body.gameObject=null,this},syncGameObject:function(){var gameObject=this.body.gameObject;return gameObject&&this.setBodySize(gameObject.width*gameObject.scaleX,gameObject.height*gameObject.scaleY),this}};module.exports=SetGameObject},function(module,exports){var Velocity={setVelocityX:function(x){return this.vel.x=x,this},setVelocityY:function(y){return this.vel.y=y,this},setVelocity:function(x,y){return void 0===y&&(y=x),this.vel.x=x,this.vel.y=y,this},setMaxVelocity:function(x,y){return void 0===y&&(y=x),this.maxVel.x=x,this.maxVel.y=y,this}};module.exports=Velocity},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),Factory=__webpack_require__(483),GetFastValue=__webpack_require__(1),Merge=__webpack_require__(89),PluginCache=__webpack_require__(18),SceneEvents=__webpack_require__(20),World=__webpack_require__(487),ImpactPhysics=new Class({initialize:function(scene){this.scene=scene,this.systems=scene.sys,this.config=this.getConfig(),this.world,this.add,scene.sys.events.once(SceneEvents.BOOT,this.boot,this),scene.sys.events.on(SceneEvents.START,this.start,this)},boot:function(){this.world=new World(this.scene,this.config),this.add=new Factory(this.world),this.systems.events.once(SceneEvents.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new World(this.scene,this.config),this.add=new Factory(this.world));var eventEmitter=this.systems.events;eventEmitter.on(SceneEvents.UPDATE,this.world.update,this.world),eventEmitter.once(SceneEvents.SHUTDOWN,this.shutdown,this)},getConfig:function(){var gameConfig=this.systems.game.config.physics,sceneConfig=this.systems.settings.physics;return Merge(GetFastValue(sceneConfig,"impact",{}),GetFastValue(gameConfig,"impact",{}))},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},shutdown:function(){var eventEmitter=this.systems.events;eventEmitter.off(SceneEvents.UPDATE,this.world.update,this.world),eventEmitter.off(SceneEvents.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(SceneEvents.START,this.start,this),this.scene=null,this.systems=null}});PluginCache.register("ImpactPhysics",ImpactPhysics,"impactPhysics"),module.exports=ImpactPhysics},function(module,exports,__webpack_require__){var COLLIDES=__webpack_require__(111),Events=__webpack_require__(232),SeparateX=__webpack_require__(1307),SeparateY=__webpack_require__(1308);module.exports=function(world,bodyA,bodyB){var weak=null;bodyA.collides===COLLIDES.LITE||bodyB.collides===COLLIDES.FIXED?weak=bodyA:bodyB.collides!==COLLIDES.LITE&&bodyA.collides!==COLLIDES.FIXED||(weak=bodyB),bodyA.last.x+bodyA.size.x>bodyB.last.x&&bodyA.last.x<bodyB.last.x+bodyB.size.x?(bodyA.last.y<bodyB.last.y?SeparateY(world,bodyA,bodyB,weak):SeparateY(world,bodyB,bodyA,weak),bodyA.collideWith(bodyB,"y"),bodyB.collideWith(bodyA,"y"),world.emit(Events.COLLIDE,bodyA,bodyB,"y")):bodyA.last.y+bodyA.size.y>bodyB.last.y&&bodyA.last.y<bodyB.last.y+bodyB.size.y&&(bodyA.last.x<bodyB.last.x?SeparateX(world,bodyA,bodyB,weak):SeparateX(world,bodyB,bodyA,weak),bodyA.collideWith(bodyB,"x"),bodyB.collideWith(bodyA,"x"),world.emit(Events.COLLIDE,bodyA,bodyB,"x"))}},function(module,exports){module.exports=function(world,left,right,weak){var nudge=left.pos.x+left.size.x-right.pos.x;if(weak){var strong=left===weak?right:left;weak.vel.x=-weak.vel.x*weak.bounciness+strong.vel.x;var resWeak=world.collisionMap.trace(weak.pos.x,weak.pos.y,weak===left?-nudge:nudge,0,weak.size.x,weak.size.y);weak.pos.x=resWeak.pos.x}else{var v2=(left.vel.x-right.vel.x)/2;left.vel.x=-v2,right.vel.x=v2;var resLeft=world.collisionMap.trace(left.pos.x,left.pos.y,-nudge/2,0,left.size.x,left.size.y);left.pos.x=Math.floor(resLeft.pos.x);var resRight=world.collisionMap.trace(right.pos.x,right.pos.y,nudge/2,0,right.size.x,right.size.y);right.pos.x=Math.ceil(resRight.pos.x)}}},function(module,exports){module.exports=function(world,top,bottom,weak){var nudgeX,resTop,nudge=top.pos.y+top.size.y-bottom.pos.y;if(weak){var strong=top===weak?bottom:top;weak.vel.y=-weak.vel.y*weak.bounciness+strong.vel.y,nudgeX=0,weak===top&&Math.abs(weak.vel.y-strong.vel.y)<weak.minBounceVelocity&&(weak.standing=!0,nudgeX=strong.vel.x*world.delta);var resWeak=world.collisionMap.trace(weak.pos.x,weak.pos.y,nudgeX,weak===top?-nudge:nudge,weak.size.x,weak.size.y);weak.pos.y=resWeak.pos.y,weak.pos.x=resWeak.pos.x}else if(world.gravity&&(bottom.standing||top.vel.y>0))resTop=world.collisionMap.trace(top.pos.x,top.pos.y,0,-(top.pos.y+top.size.y-bottom.pos.y),top.size.x,top.size.y),top.pos.y=resTop.pos.y,top.bounciness>0&&top.vel.y>top.minBounceVelocity?top.vel.y*=-top.bounciness:(top.standing=!0,top.vel.y=0);else{var v2=(top.vel.y-bottom.vel.y)/2;top.vel.y=-v2,bottom.vel.y=v2,nudgeX=bottom.vel.x*world.delta,resTop=world.collisionMap.trace(top.pos.x,top.pos.y,nudgeX,-nudge/2,top.size.x,top.size.y),top.pos.y=resTop.pos.y;var resBottom=world.collisionMap.trace(bottom.pos.x,bottom.pos.y,0,nudge/2,bottom.size.x,bottom.size.y);bottom.pos.y=resBottom.pos.y}}},function(module,exports,__webpack_require__){module.exports={Factory:__webpack_require__(488),Image:__webpack_require__(492),Matter:__webpack_require__(239),MatterPhysics:__webpack_require__(1339),PolyDecomp:__webpack_require__(489),Sprite:__webpack_require__(493),TileBody:__webpack_require__(236),PhysicsEditorParser:__webpack_require__(491),World:__webpack_require__(499)}},function(module,exports,__webpack_require__){var Components=__webpack_require__(148),GetFastValue=__webpack_require__(1),Vector2=__webpack_require__(3);module.exports=function(world,gameObject,options){void 0===options&&(options={});var x=gameObject.x,y=gameObject.y;if(gameObject.body={temp:!0,position:{x:x,y:y}},[Components.Bounce,Components.Collision,Components.Force,Components.Friction,Components.Gravity,Components.Mass,Components.Sensor,Components.SetBody,Components.Sleep,Components.Static,Components.Transform,Components.Velocity].forEach((function(mixin){for(var key in mixin)(def=mixin[key]).get&&"function"==typeof def.get||def.set&&"function"==typeof def.set?Object.defineProperty(gameObject,key,{get:mixin[key].get,set:mixin[key].set}):Object.defineProperty(gameObject,key,{value:mixin[key]});var def})),gameObject.world=world,gameObject._tempVec2=new Vector2(x,y),options.hasOwnProperty("type")&&"body"===options.type)gameObject.setExistingBody(options,!0);else{var shape=GetFastValue(options,"shape",null);shape||(shape="rectangle"),gameObject.setBody(shape,options)}return gameObject}},function(module,exports){module.exports={setBounce:function(value){return this.body.restitution=value,this}}},function(module,exports){var Collision={setCollisionCategory:function(value){return this.body.collisionFilter.category=value,this},setCollisionGroup:function(value){return this.body.collisionFilter.group=value,this},setCollidesWith:function(categories){var flags=0;if(Array.isArray(categories))for(var i=0;i<categories.length;i++)flags|=categories[i];else flags=categories;return this.body.collisionFilter.mask=flags,this}};module.exports=Collision},function(module,exports,__webpack_require__){var Body=__webpack_require__(26),Force={applyForce:function(force){return this._tempVec2.set(this.body.position.x,this.body.position.y),Body.applyForce(this.body,this._tempVec2,force),this},applyForceFrom:function(position,force){return Body.applyForce(this.body,position,force),this},thrust:function(speed){var angle=this.body.angle;return this._tempVec2.set(speed*Math.cos(angle),speed*Math.sin(angle)),Body.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(speed){var angle=this.body.angle-Math.PI/2;return this._tempVec2.set(speed*Math.cos(angle),speed*Math.sin(angle)),Body.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(speed){var angle=this.body.angle+Math.PI/2;return this._tempVec2.set(speed*Math.cos(angle),speed*Math.sin(angle)),Body.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(speed){var angle=this.body.angle-Math.PI;return this._tempVec2.set(speed*Math.cos(angle),speed*Math.sin(angle)),Body.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};module.exports=Force},function(module,exports){var Friction={setFriction:function(value,air,fstatic){return this.body.friction=value,void 0!==air&&(this.body.frictionAir=air),void 0!==fstatic&&(this.body.frictionStatic=fstatic),this},setFrictionAir:function(value){return this.body.frictionAir=value,this},setFrictionStatic:function(value){return this.body.frictionStatic=value,this}};module.exports=Friction},function(module,exports){module.exports={setIgnoreGravity:function(value){return this.body.ignoreGravity=value,this}}},function(module,exports,__webpack_require__){var Body=__webpack_require__(26),Vector2=__webpack_require__(3),Mass={setMass:function(value){return Body.setMass(this.body,value),this},setDensity:function(value){return Body.setDensity(this.body,value),this},centerOfMass:{get:function(){return new Vector2(this.body.render.sprite.xOffset*this.width,this.body.render.sprite.yOffset*this.height)}}};module.exports=Mass},function(module,exports,__webpack_require__){var Body=__webpack_require__(26),Static={setStatic:function(value){return Body.setStatic(this.body,value),this},isStatic:function(){return this.body.isStatic}};module.exports=Static},function(module,exports){module.exports={setSensor:function(value){return this.body.isSensor=value,this},isSensor:function(){return this.body.isSensor}}},function(module,exports,__webpack_require__){var Bodies=__webpack_require__(60),Body=__webpack_require__(26),GetFastValue=__webpack_require__(1),PhysicsEditorParser=__webpack_require__(491),Vertices=__webpack_require__(32),SetBody={setRectangle:function(width,height,options){return this.setBody({type:"rectangle",width:width,height:height},options)},setCircle:function(radius,options){return this.setBody({type:"circle",radius:radius},options)},setPolygon:function(radius,sides,options){return this.setBody({type:"polygon",sides:sides,radius:radius},options)},setTrapezoid:function(width,height,slope,options){return this.setBody({type:"trapezoid",width:width,height:height,slope:slope},options)},setExistingBody:function(body,addToWorld){void 0===addToWorld&&(addToWorld=!0),this.body&&this.world.remove(this.body),this.body=body;for(var i=0;i<body.parts.length;i++)body.parts[i].gameObject=this;var _this=this;return body.destroy=function(){_this.world.remove(_this.body),_this.body.gameObject=null},addToWorld&&this.world.add(body),this._originComponent&&this.setOrigin(body.render.sprite.xOffset,body.render.sprite.yOffset),this},setBody:function(config,options){if(!config)return this;var body;"string"==typeof config&&(config={type:config});var shapeType=GetFastValue(config,"type","rectangle"),bodyX=GetFastValue(config,"x",this._tempVec2.x),bodyY=GetFastValue(config,"y",this._tempVec2.y),bodyWidth=GetFastValue(config,"width",this.width),bodyHeight=GetFastValue(config,"height",this.height);switch(shapeType){case"rectangle":body=Bodies.rectangle(bodyX,bodyY,bodyWidth,bodyHeight,options);break;case"circle":var radius=GetFastValue(config,"radius",Math.max(bodyWidth,bodyHeight)/2),maxSides=GetFastValue(config,"maxSides",25);body=Bodies.circle(bodyX,bodyY,radius,options,maxSides);break;case"trapezoid":var slope=GetFastValue(config,"slope",.5);body=Bodies.trapezoid(bodyX,bodyY,bodyWidth,bodyHeight,slope,options);break;case"polygon":var sides=GetFastValue(config,"sides",5),pRadius=GetFastValue(config,"radius",Math.max(bodyWidth,bodyHeight)/2);body=Bodies.polygon(bodyX,bodyY,sides,pRadius,options);break;case"fromVertices":case"fromVerts":var verts=GetFastValue(config,"verts",null);if(verts)if("string"==typeof verts&&(verts=Vertices.fromPath(verts)),this.body&&!this.body.hasOwnProperty("temp"))Body.setVertices(this.body,verts),body=this.body;else{var flagInternal=GetFastValue(config,"flagInternal",!1),removeCollinear=GetFastValue(config,"removeCollinear",.01),minimumArea=GetFastValue(config,"minimumArea",10);body=Bodies.fromVertices(bodyX,bodyY,verts,options,flagInternal,removeCollinear,minimumArea)}break;case"fromPhysicsEditor":body=PhysicsEditorParser.parseBody(bodyX,bodyY,bodyWidth,bodyHeight,config)}return body&&this.setExistingBody(body,config.addToWorld),this}};module.exports=SetBody},function(module,exports,__webpack_require__){var Events=__webpack_require__(235),MatterEvents=__webpack_require__(97),Sleep={setSleepThreshold:function(value){return void 0===value&&(value=60),this.body.sleepThreshold=value,this},setSleepEvents:function(start,end){return this.setSleepStartEvent(start),this.setSleepEndEvent(end),this},setSleepStartEvent:function(value){if(value){var world=this.world;MatterEvents.on(this.body,"sleepStart",(function(event){world.emit(Events.SLEEP_START,event,this)}))}else MatterEvents.off(this.body,"sleepStart");return this},setSleepEndEvent:function(value){if(value){var world=this.world;MatterEvents.on(this.body,"sleepEnd",(function(event){world.emit(Events.SLEEP_END,event,this)}))}else MatterEvents.off(this.body,"sleepEnd");return this}};module.exports=Sleep},function(module,exports){module.exports="afterupdate"},function(module,exports){module.exports="beforeupdate"},function(module,exports){module.exports="collisionactive"},function(module,exports){module.exports="collisionend"},function(module,exports){module.exports="collisionstart"},function(module,exports){module.exports="dragend"},function(module,exports){module.exports="drag"},function(module,exports){module.exports="dragstart"},function(module,exports){module.exports="pause"},function(module,exports){module.exports="resume"},function(module,exports){module.exports="sleepend"},function(module,exports){module.exports="sleepstart"},function(module,exports,__webpack_require__){var Body=__webpack_require__(26),MATH_CONST=__webpack_require__(22),WrapAngle=__webpack_require__(167),WrapAngleDegrees=__webpack_require__(168),Transform={x:{get:function(){return this.body.position.x},set:function(value){this._tempVec2.set(value,this.y),Body.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(value){this._tempVec2.set(this.x,value),Body.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(value){var factorX=1/this._scaleX,factorY=1/this._scaleY;this._scaleX=value,0===this._scaleX?this.renderFlags&=-5:this.renderFlags|=4,Body.scale(this.body,factorX,factorY),Body.scale(this.body,value,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(value){var factorX=1/this._scaleX,factorY=1/this._scaleY;this._scaleY=value,0===this._scaleY?this.renderFlags&=-5:this.renderFlags|=4,Body.scale(this.body,factorX,factorY),Body.scale(this.body,this._scaleX,value)}},angle:{get:function(){return WrapAngleDegrees(this.body.angle*MATH_CONST.RAD_TO_DEG)},set:function(value){this.rotation=WrapAngleDegrees(value)*MATH_CONST.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(value){this._rotation=WrapAngle(value),Body.setAngle(this.body,this._rotation)}},setPosition:function(x,y){return void 0===x&&(x=0),void 0===y&&(y=x),this._tempVec2.set(x,y),Body.setPosition(this.body,this._tempVec2),this},setRotation:function(radians){return void 0===radians&&(radians=0),this._rotation=WrapAngle(radians),Body.setAngle(this.body,radians),this},setFixedRotation:function(){return Body.setInertia(this.body,1/0),this},setAngle:function(degrees){return void 0===degrees&&(degrees=0),this.angle=degrees,Body.setAngle(this.body,this.rotation),this},setScale:function(x,y,point){void 0===x&&(x=1),void 0===y&&(y=x);var factorX=1/this._scaleX,factorY=1/this._scaleY;return this._scaleX=x,this._scaleY=y,Body.scale(this.body,factorX,factorY,point),Body.scale(this.body,x,y,point),this}};module.exports=Transform},function(module,exports,__webpack_require__){var Body=__webpack_require__(26),Velocity={setAngularVelocity:function(value){return Body.setAngularVelocity(this.body,value),this},setVelocityX:function(x){return this._tempVec2.set(x,this.body.velocity.y),Body.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(y){return this._tempVec2.set(this.body.velocity.x,y),Body.setVelocity(this.body,this._tempVec2),this},setVelocity:function(x,y){return this._tempVec2.set(x,y),Body.setVelocity(this.body,this._tempVec2),this}};module.exports=Velocity},function(module,exports,__webpack_require__){var Bounds=__webpack_require__(39),Class=__webpack_require__(0),Composite=__webpack_require__(77),Constraint=__webpack_require__(98),Detector=__webpack_require__(237),Events=__webpack_require__(235),InputEvents=__webpack_require__(56),Merge=__webpack_require__(89),Sleeping=__webpack_require__(113),Vector2=__webpack_require__(3),Vertices=__webpack_require__(32),PointerConstraint=new Class({initialize:function(scene,world,options){void 0===options&&(options={});this.scene=scene,this.world=world,this.camera=null,this.pointer=null,this.active=!0,this.position=new Vector2,this.body=null,this.part=null,this.constraint=Constraint.create(Merge(options,{label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},damping:0,length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}})),this.world.on(Events.BEFORE_UPDATE,this.update,this),scene.sys.input.on(InputEvents.POINTER_DOWN,this.onDown,this)},onDown:function(pointer){this.pointer||this.getBody(pointer)&&(this.pointer=pointer,this.camera=pointer.camera)},getBody:function(pointer){var pos=this.position,constraint=this.constraint;pointer.camera.getWorldPoint(pointer.x,pointer.y,pos);for(var bodies=Composite.allBodies(this.world.localWorld),i=0;i<bodies.length;i++){var body=bodies[i];if(!body.ignorePointer&&Bounds.contains(body.bounds,pos)&&Detector.canCollide(body.collisionFilter,constraint.collisionFilter)&&this.hitTestBody(body,pos))return this.world.emit(Events.DRAG_START,this.body,this.part,this),!0}return!1},hitTestBody:function(body,position){for(var constraint=this.constraint,i=body.parts.length>1?1:0;i<body.parts.length;i++){var part=body.parts[i];if(Vertices.contains(part.vertices,position))return constraint.bodyB=body,constraint.pointA.x=position.x,constraint.pointA.y=position.y,constraint.pointB.x=position.x-body.position.x,constraint.pointB.y=position.y-body.position.y,constraint.angleB=body.angle,Sleeping.set(body,!1),this.part=part,this.body=body,!0}return!1},update:function(){var body=this.body,pointer=this.pointer;if(this.active&&pointer&&body)if(pointer.isDown){var pos=this.position,constraint=this.constraint;this.camera.getWorldPoint(pointer.x,pointer.y,pos),Sleeping.set(body,!1),constraint.pointA.x=pos.x,constraint.pointA.y=pos.y,this.world.emit(Events.DRAG,body,this)}else this.stopDrag()},stopDrag:function(){var body=this.body,constraint=this.constraint;body&&(this.world.emit(Events.DRAG_END,body,this),this.pointer=null,this.body=null,this.part=null,constraint.bodyB=null)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(Events.BEFORE_UPDATE,this.update),this.scene.sys.input.off(InputEvents.POINTER_DOWN,this.onDown,this)}});module.exports=PointerConstraint},function(module,exports,__webpack_require__){var Query={};module.exports=Query;var Vector=__webpack_require__(38),SAT=__webpack_require__(238),Bounds=__webpack_require__(39),Bodies=__webpack_require__(60),Vertices=__webpack_require__(32);Query.collides=function(body,bodies){for(var collisions=[],i=0;i<bodies.length;i++){var bodyA=bodies[i];if(Bounds.overlaps(bodyA.bounds,body.bounds))for(var j=1===bodyA.parts.length?0:1;j<bodyA.parts.length;j++){var part=bodyA.parts[j];if(Bounds.overlaps(part.bounds,body.bounds)){var collision=SAT.collides(part,body);if(collision.collided){collisions.push(collision);break}}}}return collisions},Query.ray=function(bodies,startPoint,endPoint,rayWidth){rayWidth=rayWidth||1e-100;for(var rayAngle=Vector.angle(startPoint,endPoint),rayLength=Vector.magnitude(Vector.sub(startPoint,endPoint)),rayX=.5*(endPoint.x+startPoint.x),rayY=.5*(endPoint.y+startPoint.y),ray=Bodies.rectangle(rayX,rayY,rayLength,rayWidth,{angle:rayAngle}),collisions=Query.collides(ray,bodies),i=0;i<collisions.length;i+=1){var collision=collisions[i];collision.body=collision.bodyB=collision.bodyA}return collisions},Query.region=function(bodies,bounds,outside){for(var result=[],i=0;i<bodies.length;i++){var body=bodies[i],overlaps=Bounds.overlaps(body.bounds,bounds);(overlaps&&!outside||!overlaps&&outside)&&result.push(body)}return result},Query.point=function(bodies,point){for(var result=[],i=0;i<bodies.length;i++){var body=bodies[i];if(Bounds.contains(body.bounds,point))for(var j=1===body.parts.length?0:1;j<body.parts.length;j++){var part=body.parts[j];if(Bounds.contains(part.bounds,point)&&Vertices.contains(part.vertices,point)){result.push(body);break}}}return result}},function(module,exports,__webpack_require__){var Metrics={};module.exports=Metrics;var Composite=__webpack_require__(77),Common=__webpack_require__(19);Metrics.create=function(options){return Common.extend({extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0},!1,options)},Metrics.reset=function(metrics){metrics.extended&&(metrics.narrowDetections=0,metrics.narrowphaseTests=0,metrics.narrowReuse=0,metrics.narrowReuseCount=0,metrics.midphaseTests=0,metrics.broadphaseTests=0,metrics.narrowEff=0,metrics.midEff=0,metrics.broadEff=0,metrics.collisions=0,metrics.buckets=0,metrics.pairs=0,metrics.bodies=0)},Metrics.update=function(metrics,engine){if(metrics.extended){var world=engine.world,bodies=Composite.allBodies(world);metrics.collisions=metrics.narrowDetections,metrics.pairs=engine.pairs.list.length,metrics.bodies=bodies.length,metrics.midEff=(metrics.narrowDetections/(metrics.midphaseTests||1)).toFixed(2),metrics.narrowEff=(metrics.narrowDetections/(metrics.narrowphaseTests||1)).toFixed(2),metrics.broadEff=(1-metrics.broadphaseTests/(bodies.length||1)).toFixed(2),metrics.narrowReuse=(metrics.narrowReuseCount/(metrics.narrowphaseTests||1)).toFixed(2)}}},function(module,exports,__webpack_require__){var Svg={};module.exports=Svg;__webpack_require__(39);var Common=__webpack_require__(19);Svg.pathToVertices=function(path,sampleLength){"undefined"==typeof window||"SVGPathSeg"in window||Common.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var i,il,total,point,segment,segments,segmentsQueue,lastSegment,lastPoint,lx,ly,points=[],length=0,x=0,y=0;sampleLength=sampleLength||15;var addPoint=function(px,py,pathSegType){var isRelative=pathSegType%2==1&&pathSegType>1;if(!lastPoint||px!=lastPoint.x||py!=lastPoint.y){lastPoint&&isRelative?(lx=lastPoint.x,ly=lastPoint.y):(lx=0,ly=0);var point={x:lx+px,y:ly+py};!isRelative&&lastPoint||(lastPoint=point),points.push(point),x=lx+px,y=ly+py}},addSegmentPoint=function(segment){var segType=segment.pathSegTypeAsLetter.toUpperCase();if("Z"!==segType){switch(segType){case"M":case"L":case"T":case"C":case"S":case"Q":x=segment.x,y=segment.y;break;case"H":x=segment.x;break;case"V":y=segment.y}addPoint(x,y,segment.pathSegType)}};for(Svg._svgPathToAbsolute(path),total=path.getTotalLength(),segments=[],i=0;i<path.pathSegList.numberOfItems;i+=1)segments.push(path.pathSegList.getItem(i));for(segmentsQueue=segments.concat();length<total;){if((segment=segments[path.getPathSegAtLength(length)])!=lastSegment){for(;segmentsQueue.length&&segmentsQueue[0]!=segment;)addSegmentPoint(segmentsQueue.shift());lastSegment=segment}switch(segment.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":point=path.getPointAtLength(length),addPoint(point.x,point.y,0)}length+=sampleLength}for(i=0,il=segmentsQueue.length;i<il;++i)addSegmentPoint(segmentsQueue[i]);return points},Svg._svgPathToAbsolute=function(path){for(var x0,y0,x1,y1,x2,y2,segs=path.pathSegList,x=0,y=0,len=segs.numberOfItems,i=0;i<len;++i){var seg=segs.getItem(i),segType=seg.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(segType))"x"in seg&&(x=seg.x),"y"in seg&&(y=seg.y);else switch("x1"in seg&&(x1=x+seg.x1),"x2"in seg&&(x2=x+seg.x2),"y1"in seg&&(y1=y+seg.y1),"y2"in seg&&(y2=y+seg.y2),"x"in seg&&(x+=seg.x),"y"in seg&&(y+=seg.y),segType){case"m":segs.replaceItem(path.createSVGPathSegMovetoAbs(x,y),i);break;case"l":segs.replaceItem(path.createSVGPathSegLinetoAbs(x,y),i);break;case"h":segs.replaceItem(path.createSVGPathSegLinetoHorizontalAbs(x),i);break;case"v":segs.replaceItem(path.createSVGPathSegLinetoVerticalAbs(y),i);break;case"c":segs.replaceItem(path.createSVGPathSegCurvetoCubicAbs(x,y,x1,y1,x2,y2),i);break;case"s":segs.replaceItem(path.createSVGPathSegCurvetoCubicSmoothAbs(x,y,x2,y2),i);break;case"q":segs.replaceItem(path.createSVGPathSegCurvetoQuadraticAbs(x,y,x1,y1),i);break;case"t":segs.replaceItem(path.createSVGPathSegCurvetoQuadraticSmoothAbs(x,y),i);break;case"a":segs.replaceItem(path.createSVGPathSegArcAbs(x,y,seg.r1,seg.r2,seg.angle,seg.largeArcFlag,seg.sweepFlag),i);break;case"z":case"Z":x=x0,y=y0}"M"!=segType&&"m"!=segType||(x0=x,y0=y)}}},function(module,exports,__webpack_require__){var Body=__webpack_require__(26),Bodies=__webpack_require__(60),Class=__webpack_require__(0),Factory=__webpack_require__(488),GetFastValue=__webpack_require__(1),GetValue=__webpack_require__(5),MatterAttractors=__webpack_require__(1340),MatterLib=__webpack_require__(494),MatterWrap=__webpack_require__(1341),Merge=__webpack_require__(89),Plugin=__webpack_require__(240),PluginCache=__webpack_require__(18),SceneEvents=__webpack_require__(20),World=__webpack_require__(499),Vertices=__webpack_require__(32),MatterPhysics=new Class({initialize:function(scene){this.scene=scene,this.systems=scene.sys,this.config=this.getConfig(),this.world,this.add,this.verts=Vertices,this.body=Body,this.bodies=Bodies,GetValue(this.config,"plugins.attractors",!1)&&(Plugin.register(MatterAttractors),Plugin.use(MatterLib,MatterAttractors)),GetValue(this.config,"plugins.wrap",!1)&&(Plugin.register(MatterWrap),Plugin.use(MatterLib,MatterWrap)),scene.sys.events.once(SceneEvents.BOOT,this.boot,this),scene.sys.events.on(SceneEvents.START,this.start,this)},boot:function(){this.world=new World(this.scene,this.config),this.add=new Factory(this.world),this.systems.events.once(SceneEvents.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new World(this.scene,this.config),this.add=new Factory(this.world));var eventEmitter=this.systems.events;eventEmitter.on(SceneEvents.UPDATE,this.world.update,this.world),eventEmitter.on(SceneEvents.POST_UPDATE,this.world.postUpdate,this.world),eventEmitter.once(SceneEvents.SHUTDOWN,this.shutdown,this)},getConfig:function(){var gameConfig=this.systems.game.config.physics,sceneConfig=this.systems.settings.physics;return Merge(GetFastValue(sceneConfig,"matter",{}),GetFastValue(gameConfig,"matter",{}))},enableAttractorPlugin:function(){return Plugin.register(MatterAttractors),Plugin.use(MatterLib,MatterAttractors),this},enableWrapPlugin:function(){return Plugin.register(MatterWrap),Plugin.use(MatterLib,MatterWrap),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(delta,correction){this.world.step(delta,correction)},shutdown:function(){var eventEmitter=this.systems.events;eventEmitter.off(SceneEvents.UPDATE,this.world.update,this.world),eventEmitter.off(SceneEvents.POST_UPDATE,this.world.postUpdate,this.world),eventEmitter.off(SceneEvents.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(SceneEvents.START,this.start,this),this.scene=null,this.systems=null}});PluginCache.register("MatterPhysics",MatterPhysics,"matterPhysics"),module.exports=MatterPhysics},function(module,exports,__webpack_require__){var Matter=__webpack_require__(239),MatterAttractors={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.13.1",silent:!0,install:function(base){base.after("Body.create",(function(){MatterAttractors.Body.init(this)})),base.before("Engine.update",(function(engine){MatterAttractors.Engine.update(engine)}))},Body:{init:function(body){body.plugin.attractors=body.plugin.attractors||[]}},Engine:{update:function(engine){for(var world=engine.world,bodies=Matter.Composite.allBodies(world),i=0;i<bodies.length;i+=1){var bodyA=bodies[i],attractors=bodyA.plugin.attractors;if(attractors&&attractors.length>0)for(var j=i+1;j<bodies.length;j+=1)for(var bodyB=bodies[j],k=0;k<attractors.length;k+=1){var attractor=attractors[k],forceVector=attractor;Matter.Common.isFunction(attractor)&&(forceVector=attractor(bodyA,bodyB)),forceVector&&Matter.Body.applyForce(bodyB,bodyB.position,forceVector)}}}},Attractors:{gravityConstant:.001,gravity:function(bodyA,bodyB){var bToA=Matter.Vector.sub(bodyB.position,bodyA.position),distanceSq=Matter.Vector.magnitudeSquared(bToA)||1e-4,normal=Matter.Vector.normalise(bToA),magnitude=-MatterAttractors.Attractors.gravityConstant*(bodyA.mass*bodyB.mass/distanceSq),force=Matter.Vector.mult(normal,magnitude);Matter.Body.applyForce(bodyA,bodyA.position,Matter.Vector.neg(force)),Matter.Body.applyForce(bodyB,bodyB.position,force)}}};module.exports=MatterAttractors},function(module,exports,__webpack_require__){var Matter=__webpack_require__(239),MatterWrap={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.13.1",silent:!0,install:function(base){base.after("Engine.update",(function(){MatterWrap.Engine.update(this)}))},Engine:{update:function(engine){for(var world=engine.world,bodies=Matter.Composite.allBodies(world),composites=Matter.Composite.allComposites(world),i=0;i<bodies.length;i+=1){var body=bodies[i];body.plugin.wrap&&MatterWrap.Body.wrap(body,body.plugin.wrap)}for(i=0;i<composites.length;i+=1){var composite=composites[i];composite.plugin.wrap&&MatterWrap.Composite.wrap(composite,composite.plugin.wrap)}}},Bounds:{wrap:function(objectBounds,bounds){var x=null,y=null;if(void 0!==bounds.min.x&&void 0!==bounds.max.x&&(objectBounds.min.x>bounds.max.x?x=bounds.min.x-objectBounds.max.x:objectBounds.max.x<bounds.min.x&&(x=bounds.max.x-objectBounds.min.x)),void 0!==bounds.min.y&&void 0!==bounds.max.y&&(objectBounds.min.y>bounds.max.y?y=bounds.min.y-objectBounds.max.y:objectBounds.max.y<bounds.min.y&&(y=bounds.max.y-objectBounds.min.y)),null!==x||null!==y)return{x:x||0,y:y||0}}},Body:{wrap:function(body,bounds){var translation=MatterWrap.Bounds.wrap(body.bounds,bounds);return translation&&Matter.Body.translate(body,translation),translation}},Composite:{bounds:function(composite){for(var bodies=Matter.Composite.allBodies(composite),vertices=[],i=0;i<bodies.length;i+=1){var body=bodies[i];vertices.push(body.bounds.min,body.bounds.max)}return Matter.Bounds.create(vertices)},wrap:function(composite,bounds){var translation=MatterWrap.Bounds.wrap(MatterWrap.Composite.bounds(composite),bounds);return translation&&Matter.Composite.translate(composite,translation),translation}}};module.exports=MatterWrap},function(module,exports,__webpack_require__){module.exports={BasePlugin:__webpack_require__(500),DefaultPlugins:__webpack_require__(188),PluginCache:__webpack_require__(18),PluginManager:__webpack_require__(377),ScenePlugin:__webpack_require__(1343)}},function(module,exports,__webpack_require__){var BasePlugin=__webpack_require__(500),Class=__webpack_require__(0),SceneEvents=__webpack_require__(20),ScenePlugin=new Class({Extends:BasePlugin,initialize:function(scene,pluginManager){BasePlugin.call(this,pluginManager),this.scene=scene,this.systems=scene.sys,scene.sys.events.once(SceneEvents.BOOT,this.boot,this)},boot:function(){}});module.exports=ScenePlugin},function(module,exports,__webpack_require__){module.exports={Canvas:__webpack_require__(1345),Snapshot:__webpack_require__(1346),WebGL:__webpack_require__(1347)}},function(module,exports,__webpack_require__){module.exports={CanvasRenderer:__webpack_require__(189),GetBlendModes:__webpack_require__(344),SetTransform:__webpack_require__(29)}},function(module,exports,__webpack_require__){module.exports={Canvas:__webpack_require__(343),WebGL:__webpack_require__(345)}},function(module,exports,__webpack_require__){module.exports={Utils:__webpack_require__(10),WebGLPipeline:__webpack_require__(191),WebGLRenderer:__webpack_require__(190),Pipelines:__webpack_require__(1348),BYTE:0,SHORT:1,UNSIGNED_BYTE:2,UNSIGNED_SHORT:3,FLOAT:4}},function(module,exports,__webpack_require__){module.exports={BitmapMaskPipeline:__webpack_require__(346),ForwardDiffuseLightPipeline:__webpack_require__(347),TextureTintPipeline:__webpack_require__(192),ModelViewProjection:__webpack_require__(348)}},function(module,exports,__webpack_require__){var Extend=__webpack_require__(17),CONST=__webpack_require__(194),Scale={Center:__webpack_require__(366),Events:__webpack_require__(104),Orientation:__webpack_require__(367),ScaleManager:__webpack_require__(378),ScaleModes:__webpack_require__(368),Zoom:__webpack_require__(369)};Scale=Extend(!1,Scale,CONST.CENTER),Scale=Extend(!1,Scale,CONST.ORIENTATION),Scale=Extend(!1,Scale,CONST.SCALE_MODE),Scale=Extend(!1,Scale,CONST.ZOOM),module.exports=Scale},function(module,exports,__webpack_require__){var CONST=__webpack_require__(135),Extend=__webpack_require__(17),Scene={Events:__webpack_require__(20),SceneManager:__webpack_require__(380),ScenePlugin:__webpack_require__(1351),Settings:__webpack_require__(382),Systems:__webpack_require__(197)};Scene=Extend(!1,Scene,CONST),module.exports=Scene},function(module,exports,__webpack_require__){var Clamp=__webpack_require__(25),Class=__webpack_require__(0),Events=__webpack_require__(20),GetFastValue=__webpack_require__(1),PluginCache=__webpack_require__(18),ScenePlugin=new Class({initialize:function(scene){this.scene=scene,this.systems=scene.sys,this.settings=scene.sys.settings,this.key=scene.sys.settings.key,this.manager=scene.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,scene.sys.events.once(Events.BOOT,this.boot,this),scene.sys.events.on(Events.START,this.pluginStart,this)},boot:function(){this.systems.events.once(Events.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(Events.SHUTDOWN,this.shutdown,this)},start:function(key,data){return void 0===key&&(key=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",key,data),this},restart:function(data){var key=this.key;return this.manager.queueOp("stop",key),this.manager.queueOp("start",key,data),this},transition:function(config){void 0===config&&(config={});var key=GetFastValue(config,"target",!1),target=this.manager.getScene(key);if(!key||!this.checkValidTransition(target))return!1;var duration=GetFastValue(config,"duration",1e3);this._elapsed=0,this._target=target,this._duration=duration,this._willSleep=GetFastValue(config,"sleep",!1),this._willRemove=GetFastValue(config,"remove",!1);var callback=GetFastValue(config,"onUpdate",null);callback&&(this._onUpdate=callback,this._onUpdateScope=GetFastValue(config,"onUpdateScope",this.scene));var allowInput=GetFastValue(config,"allowInput",!1);this.settings.transitionAllowInput=allowInput;var targetSettings=target.sys.settings;return targetSettings.isTransition=!0,targetSettings.transitionFrom=this.scene,targetSettings.transitionDuration=duration,targetSettings.transitionAllowInput=allowInput,GetFastValue(config,"moveAbove",!1)?this.manager.moveAbove(this.key,key):GetFastValue(config,"moveBelow",!1)&&this.manager.moveBelow(this.key,key),target.sys.isSleeping()?target.sys.wake():this.manager.start(key,GetFastValue(config,"data")),this.systems.events.emit(Events.TRANSITION_OUT,target,duration),this.systems.events.on(Events.UPDATE,this.step,this),!0},checkValidTransition:function(target){return!(!target||target.sys.isActive()||target.sys.isTransitioning()||target===this.scene||this.systems.isTransitioning())},step:function(time,delta){this._elapsed+=delta,this.transitionProgress=Clamp(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var targetSys=this._target.sys,targetSettings=this._target.sys.settings;this.systems.events.off(Events.UPDATE,this.step,this),targetSys.events.emit(Events.TRANSITION_COMPLETE,this.scene),targetSettings.isTransition=!1,targetSettings.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(key,sceneConfig,autoStart,data){return this.manager.add(key,sceneConfig,autoStart,data)},launch:function(key,data){return key&&key!==this.key&&this.manager.queueOp("start",key,data),this},run:function(key,data){return key&&key!==this.key&&this.manager.queueOp("run",key,data),this},pause:function(key,data){return void 0===key&&(key=this.key),this.manager.queueOp("pause",key,data),this},resume:function(key,data){return void 0===key&&(key=this.key),this.manager.queueOp("resume",key,data),this},sleep:function(key,data){return void 0===key&&(key=this.key),this.manager.queueOp("sleep",key,data),this},wake:function(key,data){return void 0===key&&(key=this.key),this.manager.queueOp("wake",key,data),this},switch:function(key){return key!==this.key&&this.manager.queueOp("switch",this.key,key),this},stop:function(key){return void 0===key&&(key=this.key),this.manager.queueOp("stop",key),this},setActive:function(value,key,data){void 0===key&&(key=this.key);var scene=this.manager.getScene(key);return scene&&scene.sys.setActive(value,data),this},setVisible:function(value,key){void 0===key&&(key=this.key);var scene=this.manager.getScene(key);return scene&&scene.sys.setVisible(value),this},isSleeping:function(key){return void 0===key&&(key=this.key),this.manager.isSleeping(key)},isActive:function(key){return void 0===key&&(key=this.key),this.manager.isActive(key)},isPaused:function(key){return void 0===key&&(key=this.key),this.manager.isPaused(key)},isVisible:function(key){return void 0===key&&(key=this.key),this.manager.isVisible(key)},swapPosition:function(keyA,keyB){return void 0===keyB&&(keyB=this.key),keyA!==keyB&&this.manager.swapPosition(keyA,keyB),this},moveAbove:function(keyA,keyB){return void 0===keyB&&(keyB=this.key),keyA!==keyB&&this.manager.moveAbove(keyA,keyB),this},moveBelow:function(keyA,keyB){return void 0===keyB&&(keyB=this.key),keyA!==keyB&&this.manager.moveBelow(keyA,keyB),this},remove:function(key){return void 0===key&&(key=this.key),this.manager.remove(key),this},moveUp:function(key){return void 0===key&&(key=this.key),this.manager.moveUp(key),this},moveDown:function(key){return void 0===key&&(key=this.key),this.manager.moveDown(key),this},bringToTop:function(key){return void 0===key&&(key=this.key),this.manager.bringToTop(key),this},sendToBack:function(key){return void 0===key&&(key=this.key),this.manager.sendToBack(key),this},get:function(key){return this.manager.getScene(key)},getIndex:function(key){return void 0===key&&(key=this.key),this.manager.getIndex(key)},shutdown:function(){var eventEmitter=this.systems.events;eventEmitter.off(Events.SHUTDOWN,this.shutdown,this),eventEmitter.off(Events.POST_UPDATE,this.step,this),eventEmitter.off(Events.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(Events.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});PluginCache.register("ScenePlugin",ScenePlugin,"scenePlugin"),module.exports=ScenePlugin},function(module,exports,__webpack_require__){module.exports={List:__webpack_require__(138),Map:__webpack_require__(174),ProcessQueue:__webpack_require__(477),RTree:__webpack_require__(478),Set:__webpack_require__(90),Size:__webpack_require__(379)}},function(module,exports,__webpack_require__){var Extend=__webpack_require__(17),FilterMode=__webpack_require__(1354),Textures={CanvasTexture:__webpack_require__(384),Events:__webpack_require__(131),FilterMode:FilterMode,Frame:__webpack_require__(106),Parsers:__webpack_require__(386),Texture:__webpack_require__(199),TextureManager:__webpack_require__(383),TextureSource:__webpack_require__(385)};Textures=Extend(!1,Textures,FilterMode),module.exports=Textures},function(module,exports){module.exports={LINEAR:0,NEAREST:1}},function(module,exports,__webpack_require__){module.exports={Components:__webpack_require__(150),Parsers:__webpack_require__(1385),Formats:__webpack_require__(34),ImageCollection:__webpack_require__(511),ParseToTilemap:__webpack_require__(248),Tile:__webpack_require__(79),Tilemap:__webpack_require__(520),TilemapCreator:__webpack_require__(1394),TilemapFactory:__webpack_require__(1395),Tileset:__webpack_require__(154),LayerData:__webpack_require__(115),MapData:__webpack_require__(116),ObjectLayer:__webpack_require__(514),DynamicTilemapLayer:__webpack_require__(521),StaticTilemapLayer:__webpack_require__(522)}},function(module,exports,__webpack_require__){var GetTilesWithin=__webpack_require__(27),CalculateFacesWithin=__webpack_require__(61);module.exports=function(srcTileX,srcTileY,width,height,destTileX,destTileY,recalculateFaces,layer){srcTileX<0&&(srcTileX=0),srcTileY<0&&(srcTileY=0),void 0===recalculateFaces&&(recalculateFaces=!0);for(var srcTiles=GetTilesWithin(srcTileX,srcTileY,width,height,null,layer),offsetX=destTileX-srcTileX,offsetY=destTileY-srcTileY,i=0;i<srcTiles.length;i++){var tileX=srcTiles[i].x+offsetX,tileY=srcTiles[i].y+offsetY;tileX>=0&&tileX<layer.width&&tileY>=0&&tileY<layer.height&&layer.data[tileY][tileX]&&layer.data[tileY][tileX].copy(srcTiles[i])}recalculateFaces&&CalculateFacesWithin(destTileX-1,destTileY-1,width+2,height+2,layer)}},function(module,exports,__webpack_require__){var TileToWorldX=__webpack_require__(152),TileToWorldY=__webpack_require__(153),GetTilesWithin=__webpack_require__(27),ReplaceByIndex=__webpack_require__(501);module.exports=function(indexes,replacements,spriteConfig,scene,camera,layer){void 0===spriteConfig&&(spriteConfig={}),Array.isArray(indexes)||(indexes=[indexes]);var tilemapLayer=layer.tilemapLayer;void 0===scene&&(scene=tilemapLayer.scene),void 0===camera&&(camera=scene.cameras.main);var i,tiles=GetTilesWithin(0,0,layer.width,layer.height,null,layer),sprites=[];for(i=0;i<tiles.length;i++){var tile=tiles[i];if(-1!==indexes.indexOf(tile.index)){spriteConfig.x=TileToWorldX(tile.x,camera,layer),spriteConfig.y=TileToWorldY(tile.y,camera,layer);var sprite=scene.make.sprite(spriteConfig);sprites.push(sprite)}}if("number"==typeof replacements)for(i=0;i<indexes.length;i++)ReplaceByIndex(indexes[i],replacements,0,0,layer.width,layer.height,layer);else if(Array.isArray(replacements))for(i=0;i<indexes.length;i++)ReplaceByIndex(indexes[i],replacements[i],0,0,layer.width,layer.height,layer);return sprites}},function(module,exports,__webpack_require__){var SnapFloor=__webpack_require__(105),SnapCeil=__webpack_require__(331);module.exports=function(layer,camera,outputArray,renderOrder){void 0===outputArray&&(outputArray=[]),void 0===renderOrder&&(renderOrder=0),outputArray.length=0;var x,y,tile,tilemap=layer.tilemapLayer.tilemap,tilemapLayer=layer.tilemapLayer,mapData=layer.data,mapWidth=layer.width,mapHeight=layer.height,tileW=Math.floor(tilemap.tileWidth*tilemapLayer.scaleX),tileH=Math.floor(tilemap.tileHeight*tilemapLayer.scaleY),drawLeft=0,drawRight=mapWidth,drawTop=0,drawBottom=mapHeight;if(!tilemapLayer.skipCull&&1===tilemapLayer.scrollFactorX&&1===tilemapLayer.scrollFactorY){var boundsLeft=SnapFloor(camera.worldView.x-tilemapLayer.x,tileW,0,!0)-tilemapLayer.cullPaddingX,boundsRight=SnapCeil(camera.worldView.right-tilemapLayer.x,tileW,0,!0)+tilemapLayer.cullPaddingX,boundsTop=SnapFloor(camera.worldView.y-tilemapLayer.y,tileH,0,!0)-tilemapLayer.cullPaddingY,boundsBottom=SnapCeil(camera.worldView.bottom-tilemapLayer.y,tileH,0,!0)+tilemapLayer.cullPaddingY;drawLeft=Math.max(0,boundsLeft),drawRight=Math.min(mapWidth,boundsRight),drawTop=Math.max(0,boundsTop),drawBottom=Math.min(mapHeight,boundsBottom)}if(0===renderOrder)for(y=drawTop;y<drawBottom;y++)for(x=drawLeft;mapData[y]&&x<drawRight;x++)(tile=mapData[y][x])&&-1!==tile.index&&tile.visible&&0!==tile.alpha&&outputArray.push(tile);else if(1===renderOrder)for(y=drawTop;y<drawBottom;y++)for(x=drawRight;mapData[y]&&x>=drawLeft;x--)(tile=mapData[y][x])&&-1!==tile.index&&tile.visible&&0!==tile.alpha&&outputArray.push(tile);else if(2===renderOrder)for(y=drawBottom;y>=drawTop;y--)for(x=drawLeft;mapData[y]&&x<drawRight;x++)(tile=mapData[y][x])&&-1!==tile.index&&tile.visible&&0!==tile.alpha&&outputArray.push(tile);else if(3===renderOrder)for(y=drawBottom;y>=drawTop;y--)for(x=drawRight;mapData[y]&&x>=drawLeft;x--)(tile=mapData[y][x])&&-1!==tile.index&&tile.visible&&0!==tile.alpha&&outputArray.push(tile);return tilemapLayer.tilesDrawn=outputArray.length,tilemapLayer.tilesTotal=mapWidth*mapHeight,outputArray}},function(module,exports,__webpack_require__){var GetTilesWithin=__webpack_require__(27),CalculateFacesWithin=__webpack_require__(61),SetTileCollision=__webpack_require__(78);module.exports=function(index,tileX,tileY,width,height,recalculateFaces,layer){for(var doesIndexCollide=-1!==layer.collideIndexes.indexOf(index),tiles=GetTilesWithin(tileX,tileY,width,height,null,layer),i=0;i<tiles.length;i++)tiles[i].index=index,SetTileCollision(tiles[i],doesIndexCollide);recalculateFaces&&CalculateFacesWithin(tileX-1,tileY-1,width+2,height+2,layer)}},function(module,exports,__webpack_require__){var GetTilesWithin=__webpack_require__(27);module.exports=function(callback,context,tileX,tileY,width,height,filteringOptions,layer){return GetTilesWithin(tileX,tileY,width,height,filteringOptions,layer).filter(callback,context)}},function(module,exports){module.exports=function(findIndex,skip,reverse,layer){void 0===skip&&(skip=0),void 0===reverse&&(reverse=!1);var tx,ty,tile,count=0;if(reverse){for(ty=layer.height-1;ty>=0;ty--)for(tx=layer.width-1;tx>=0;tx--)if((tile=layer.data[ty][tx])&&tile.index===findIndex){if(count===skip)return tile;count+=1}}else for(ty=0;ty<layer.height;ty++)for(tx=0;tx<layer.width;tx++)if((tile=layer.data[ty][tx])&&tile.index===findIndex){if(count===skip)return tile;count+=1}return null}},function(module,exports,__webpack_require__){var GetTilesWithin=__webpack_require__(27);module.exports=function(callback,context,tileX,tileY,width,height,filteringOptions,layer){return GetTilesWithin(tileX,tileY,width,height,filteringOptions,layer).find(callback,context)||null}},function(module,exports,__webpack_require__){var GetTilesWithin=__webpack_require__(27);module.exports=function(callback,context,tileX,tileY,width,height,filteringOptions,layer){GetTilesWithin(tileX,tileY,width,height,filteringOptions,layer).forEach(callback,context)}},function(module,exports,__webpack_require__){var GetTileAt=__webpack_require__(151),WorldToTileX=__webpack_require__(68),WorldToTileY=__webpack_require__(69);module.exports=function(worldX,worldY,nonNull,camera,layer){var tileX=WorldToTileX(worldX,!0,camera,layer),tileY=WorldToTileY(worldY,!0,camera,layer);return GetTileAt(tileX,tileY,nonNull,layer)}},function(module,exports,__webpack_require__){var Geom=__webpack_require__(436),GetTilesWithin=__webpack_require__(27),Intersects=__webpack_require__(437),NOOP=__webpack_require__(2),TileToWorldX=__webpack_require__(152),TileToWorldY=__webpack_require__(153),WorldToTileX=__webpack_require__(68),WorldToTileY=__webpack_require__(69),TriangleToRectangle=function(triangle,rect){return Intersects.RectangleToTriangle(rect,triangle)};module.exports=function(shape,filteringOptions,camera,layer){if(void 0===shape)return[];var intersectTest=NOOP;shape instanceof Geom.Circle?intersectTest=Intersects.CircleToRectangle:shape instanceof Geom.Rectangle?intersectTest=Intersects.RectangleToRectangle:shape instanceof Geom.Triangle?intersectTest=TriangleToRectangle:shape instanceof Geom.Line&&(intersectTest=Intersects.LineToRectangle);var xStart=WorldToTileX(shape.left,!0,camera,layer),yStart=WorldToTileY(shape.top,!0,camera,layer),xEnd=Math.ceil(WorldToTileX(shape.right,!1,camera,layer)),yEnd=Math.ceil(WorldToTileY(shape.bottom,!1,camera,layer)),width=Math.max(xEnd-xStart,1),height=Math.max(yEnd-yStart,1),tiles=GetTilesWithin(xStart,yStart,width,height,filteringOptions,layer),tileWidth=layer.tileWidth,tileHeight=layer.tileHeight;layer.tilemapLayer&&(tileWidth*=layer.tilemapLayer.scaleX,tileHeight*=layer.tilemapLayer.scaleY);for(var results=[],tileRect=new Geom.Rectangle(0,0,tileWidth,tileHeight),i=0;i<tiles.length;i++){var tile=tiles[i];tileRect.x=TileToWorldX(tile.x,camera,layer),tileRect.y=TileToWorldY(tile.y,camera,layer),intersectTest(shape,tileRect)&&results.push(tile)}return results}},function(module,exports,__webpack_require__){var GetTilesWithin=__webpack_require__(27),WorldToTileX=__webpack_require__(68),WorldToTileY=__webpack_require__(69);module.exports=function(worldX,worldY,width,height,filteringOptions,camera,layer){var xStart=WorldToTileX(worldX,!0,camera,layer),yStart=WorldToTileY(worldY,!0,camera,layer),xEnd=Math.ceil(WorldToTileX(worldX+width,!1,camera,layer)),yEnd=Math.ceil(WorldToTileY(worldY+height,!1,camera,layer));return GetTilesWithin(xStart,yStart,xEnd-xStart,yEnd-yStart,filteringOptions,layer)}},function(module,exports,__webpack_require__){var HasTileAt=__webpack_require__(502),WorldToTileX=__webpack_require__(68),WorldToTileY=__webpack_require__(69);module.exports=function(worldX,worldY,camera,layer){var tileX=WorldToTileX(worldX,!0,camera,layer),tileY=WorldToTileY(worldY,!0,camera,layer);return HasTileAt(tileX,tileY,layer)}},function(module,exports,__webpack_require__){var PutTileAt=__webpack_require__(243),WorldToTileX=__webpack_require__(68),WorldToTileY=__webpack_require__(69);module.exports=function(tile,worldX,worldY,recalculateFaces,camera,layer){var tileX=WorldToTileX(worldX,!0,camera,layer),tileY=WorldToTileY(worldY,!0,camera,layer);return PutTileAt(tile,tileX,tileY,recalculateFaces,layer)}},function(module,exports,__webpack_require__){var CalculateFacesWithin=__webpack_require__(61),PutTileAt=__webpack_require__(243);module.exports=function(tilesArray,tileX,tileY,recalculateFaces,layer){if(!Array.isArray(tilesArray))return null;void 0===recalculateFaces&&(recalculateFaces=!0),Array.isArray(tilesArray[0])||(tilesArray=[tilesArray]);for(var height=tilesArray.length,width=tilesArray[0].length,ty=0;ty<height;ty++)for(var tx=0;tx<width;tx++){var tile=tilesArray[ty][tx];PutTileAt(tile,tileX+tx,tileY+ty,!1,layer)}recalculateFaces&&CalculateFacesWithin(tileX-1,tileY-1,width+2,height+2,layer)}},function(module,exports,__webpack_require__){var GetTilesWithin=__webpack_require__(27),GetRandom=__webpack_require__(202);module.exports=function(tileX,tileY,width,height,indexes,layer){var i,tiles=GetTilesWithin(tileX,tileY,width,height,null,layer);if(void 0===indexes)for(indexes=[],i=0;i<tiles.length;i++)-1===indexes.indexOf(tiles[i].index)&&indexes.push(tiles[i].index);for(i=0;i<tiles.length;i++)tiles[i].index=GetRandom(indexes)}},function(module,exports,__webpack_require__){var RemoveTileAt=__webpack_require__(503),WorldToTileX=__webpack_require__(68),WorldToTileY=__webpack_require__(69);module.exports=function(worldX,worldY,replaceWithNull,recalculateFaces,camera,layer){var tileX=WorldToTileX(worldX,!0,camera,layer),tileY=WorldToTileY(worldY,!0,camera,layer);return RemoveTileAt(tileX,tileY,replaceWithNull,recalculateFaces,layer)}},function(module,exports,__webpack_require__){var GetTilesWithin=__webpack_require__(27),Color=__webpack_require__(361),defaultTileColor=new Color(105,210,231,150),defaultCollidingTileColor=new Color(243,134,48,200),defaultFaceColor=new Color(40,39,37,150);module.exports=function(graphics,styleConfig,layer){void 0===styleConfig&&(styleConfig={});var tileColor=void 0!==styleConfig.tileColor?styleConfig.tileColor:defaultTileColor,collidingTileColor=void 0!==styleConfig.collidingTileColor?styleConfig.collidingTileColor:defaultCollidingTileColor,faceColor=void 0!==styleConfig.faceColor?styleConfig.faceColor:defaultFaceColor,tiles=GetTilesWithin(0,0,layer.width,layer.height,null,layer);graphics.translateCanvas(layer.tilemapLayer.x,layer.tilemapLayer.y),graphics.scaleCanvas(layer.tilemapLayer.scaleX,layer.tilemapLayer.scaleY);for(var i=0;i<tiles.length;i++){var tile=tiles[i],tw=tile.width,th=tile.height,x=tile.pixelX,y=tile.pixelY,color=tile.collides?collidingTileColor:tileColor;null!==color&&(graphics.fillStyle(color.color,color.alpha/255),graphics.fillRect(x,y,tw,th)),x+=1,y+=1,tw-=2,th-=2,null!==faceColor&&(graphics.lineStyle(1,faceColor.color,faceColor.alpha/255),tile.faceTop&&graphics.lineBetween(x,y,x+tw,y),tile.faceRight&&graphics.lineBetween(x+tw,y,x+tw,y+th),tile.faceBottom&&graphics.lineBetween(x,y+th,x+tw,y+th),tile.faceLeft&&graphics.lineBetween(x,y,x,y+th))}}},function(module,exports,__webpack_require__){var SetTileCollision=__webpack_require__(78),CalculateFacesWithin=__webpack_require__(61),SetLayerCollisionIndex=__webpack_require__(244);module.exports=function(indexes,collides,recalculateFaces,layer){void 0===collides&&(collides=!0),void 0===recalculateFaces&&(recalculateFaces=!0),Array.isArray(indexes)||(indexes=[indexes]);for(var i=0;i<indexes.length;i++)SetLayerCollisionIndex(indexes[i],collides,layer);for(var ty=0;ty<layer.height;ty++)for(var tx=0;tx<layer.width;tx++){var tile=layer.data[ty][tx];tile&&-1!==indexes.indexOf(tile.index)&&SetTileCollision(tile,collides)}recalculateFaces&&CalculateFacesWithin(0,0,layer.width,layer.height,layer)}},function(module,exports,__webpack_require__){var SetTileCollision=__webpack_require__(78),CalculateFacesWithin=__webpack_require__(61),SetLayerCollisionIndex=__webpack_require__(244);module.exports=function(start,stop,collides,recalculateFaces,layer){if(void 0===collides&&(collides=!0),void 0===recalculateFaces&&(recalculateFaces=!0),!(start>stop)){for(var index=start;index<=stop;index++)SetLayerCollisionIndex(index,collides,layer);for(var ty=0;ty<layer.height;ty++)for(var tx=0;tx<layer.width;tx++){var tile=layer.data[ty][tx];tile&&tile.index>=start&&tile.index<=stop&&SetTileCollision(tile,collides)}recalculateFaces&&CalculateFacesWithin(0,0,layer.width,layer.height,layer)}}},function(module,exports,__webpack_require__){var SetTileCollision=__webpack_require__(78),CalculateFacesWithin=__webpack_require__(61),SetLayerCollisionIndex=__webpack_require__(244);module.exports=function(indexes,collides,recalculateFaces,layer){void 0===collides&&(collides=!0),void 0===recalculateFaces&&(recalculateFaces=!0),Array.isArray(indexes)||(indexes=[indexes]);for(var ty=0;ty<layer.height;ty++)for(var tx=0;tx<layer.width;tx++){var tile=layer.data[ty][tx];tile&&-1===indexes.indexOf(tile.index)&&(SetTileCollision(tile,collides),SetLayerCollisionIndex(tile.index,collides,layer))}recalculateFaces&&CalculateFacesWithin(0,0,layer.width,layer.height,layer)}},function(module,exports,__webpack_require__){var SetTileCollision=__webpack_require__(78),CalculateFacesWithin=__webpack_require__(61),HasValue=__webpack_require__(93);module.exports=function(properties,collides,recalculateFaces,layer){void 0===collides&&(collides=!0),void 0===recalculateFaces&&(recalculateFaces=!0);for(var ty=0;ty<layer.height;ty++)for(var tx=0;tx<layer.width;tx++){var tile=layer.data[ty][tx];if(tile)for(var property in properties)if(HasValue(tile.properties,property)){var values=properties[property];Array.isArray(values)||(values=[values]);for(var i=0;i<values.length;i++)tile.properties[property]===values[i]&&SetTileCollision(tile,collides)}}recalculateFaces&&CalculateFacesWithin(0,0,layer.width,layer.height,layer)}},function(module,exports,__webpack_require__){var SetTileCollision=__webpack_require__(78),CalculateFacesWithin=__webpack_require__(61);module.exports=function(collides,recalculateFaces,layer){void 0===collides&&(collides=!0),void 0===recalculateFaces&&(recalculateFaces=!0);for(var ty=0;ty<layer.height;ty++)for(var tx=0;tx<layer.width;tx++){var tile=layer.data[ty][tx];if(tile){var collisionGroup=tile.getCollisionGroup();collisionGroup&&collisionGroup.objects&&collisionGroup.objects.length>0&&SetTileCollision(tile,collides)}}recalculateFaces&&CalculateFacesWithin(0,0,layer.width,layer.height,layer)}},function(module,exports){module.exports=function(indexes,callback,callbackContext,layer){if("number"==typeof indexes)layer.callbacks[indexes]=null!==callback?{callback:callback,callbackContext:callbackContext}:void 0;else for(var i=0,len=indexes.length;i<len;i++)layer.callbacks[indexes[i]]=null!==callback?{callback:callback,callbackContext:callbackContext}:void 0}},function(module,exports,__webpack_require__){var GetTilesWithin=__webpack_require__(27);module.exports=function(tileX,tileY,width,height,callback,callbackContext,layer){for(var tiles=GetTilesWithin(tileX,tileY,width,height,null,layer),i=0;i<tiles.length;i++)tiles[i].setCollisionCallback(callback,callbackContext)}},function(module,exports,__webpack_require__){var GetTilesWithin=__webpack_require__(27),ShuffleArray=__webpack_require__(123);module.exports=function(tileX,tileY,width,height,layer){var tiles=GetTilesWithin(tileX,tileY,width,height,null,layer),indexes=tiles.map((function(tile){return tile.index}));ShuffleArray(indexes);for(var i=0;i<tiles.length;i++)tiles[i].index=indexes[i]}},function(module,exports,__webpack_require__){var GetTilesWithin=__webpack_require__(27);module.exports=function(indexA,indexB,tileX,tileY,width,height,layer){for(var tiles=GetTilesWithin(tileX,tileY,width,height,null,layer),i=0;i<tiles.length;i++)tiles[i]&&(tiles[i].index===indexA?tiles[i].index=indexB:tiles[i].index===indexB&&(tiles[i].index=indexA))}},function(module,exports,__webpack_require__){var TileToWorldX=__webpack_require__(152),TileToWorldY=__webpack_require__(153),Vector2=__webpack_require__(3);module.exports=function(tileX,tileY,point,camera,layer){return void 0===point&&(point=new Vector2(0,0)),point.x=TileToWorldX(tileX,camera,layer),point.y=TileToWorldY(tileY,camera,layer),point}},function(module,exports,__webpack_require__){var GetTilesWithin=__webpack_require__(27);module.exports=function(tileX,tileY,width,height,weightedIndexes,layer){if(void 0!==weightedIndexes){var i,tiles=GetTilesWithin(tileX,tileY,width,height,null,layer),weightTotal=0;for(i=0;i<weightedIndexes.length;i++)weightTotal+=weightedIndexes[i].weight;if(!(weightTotal<=0))for(i=0;i<tiles.length;i++){for(var rand=Math.random()*weightTotal,sum=0,randomIndex=-1,j=0;j<weightedIndexes.length;j++)if(rand<=(sum+=weightedIndexes[j].weight)){var chosen=weightedIndexes[j].index;randomIndex=Array.isArray(chosen)?chosen[Math.floor(Math.random()*chosen.length)]:chosen;break}tiles[i].index=randomIndex}}}},function(module,exports,__webpack_require__){var WorldToTileX=__webpack_require__(68),WorldToTileY=__webpack_require__(69),Vector2=__webpack_require__(3);module.exports=function(worldX,worldY,snapToFloor,point,camera,layer){return void 0===point&&(point=new Vector2(0,0)),point.x=WorldToTileX(worldX,snapToFloor,camera,layer),point.y=WorldToTileY(worldY,snapToFloor,camera,layer),point}},function(module,exports,__webpack_require__){module.exports={Parse:__webpack_require__(504),Parse2DArray:__webpack_require__(245),ParseCSV:__webpack_require__(505),Impact:__webpack_require__(1386),Tiled:__webpack_require__(1387)}},function(module,exports,__webpack_require__){module.exports={ParseTileLayers:__webpack_require__(518),ParseTilesets:__webpack_require__(519),ParseWeltmeister:__webpack_require__(517)}},function(module,exports,__webpack_require__){module.exports={AssignTileProperties:__webpack_require__(516),Base64Decode:__webpack_require__(508),BuildTilesetIndex:__webpack_require__(515),ParseGID:__webpack_require__(246),ParseImageLayers:__webpack_require__(509),ParseJSONTiled:__webpack_require__(506),ParseObject:__webpack_require__(247),ParseObjectLayers:__webpack_require__(513),ParseTileLayers:__webpack_require__(507),ParseTilesets:__webpack_require__(510)}},function(module,exports,__webpack_require__){var renderWebGL=__webpack_require__(2),renderCanvas=__webpack_require__(2);renderWebGL=__webpack_require__(1389),renderCanvas=__webpack_require__(1390),module.exports={renderWebGL:renderWebGL,renderCanvas:renderCanvas}},function(module,exports,__webpack_require__){var Utils=__webpack_require__(10);module.exports=function(renderer,src,interpolationPercentage,camera){src.cull(camera);var renderTiles=src.culledTiles,tileCount=renderTiles.length,alpha=camera.alpha*src.alpha;if(!(0===tileCount||alpha<=0))for(var gidMap=src.gidMap,pipeline=src.pipeline,getTint=Utils.getTintAppendFloatAlpha,scrollFactorX=src.scrollFactorX,scrollFactorY=src.scrollFactorY,x=src.x,y=src.y,sx=src.scaleX,sy=src.scaleY,tilesets=src.tileset,c=0;c<tilesets.length;c++)for(var currentSet=tilesets[c],texture=currentSet.glTexture,i=0;i<tileCount;i++){var tile=renderTiles[i],tileset=gidMap[tile.index];if(tileset===currentSet){var tileTexCoords=tileset.getTileTextureCoordinates(tile.index);if(null!==tileTexCoords){var frameWidth=tile.width,frameHeight=tile.height,frameX=tileTexCoords.x,frameY=tileTexCoords.y,tw=.5*tile.width,th=.5*tile.height,tint=getTint(tile.tint,alpha*tile.alpha);pipeline.batchTexture(src,texture,texture.width,texture.height,x+(tw+tile.pixelX)*sx,y+(th+tile.pixelY)*sy,tile.width,tile.height,sx,sy,tile.rotation,tile.flipX,tile.flipY,scrollFactorX,scrollFactorY,tw,th,frameX,frameY,frameWidth,frameHeight,tint,tint,tint,tint,!1,0,0,camera,null,!0)}}}}},function(module,exports){module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){src.cull(camera);var renderTiles=src.culledTiles,tileCount=renderTiles.length;if(0!==tileCount){var camMatrix=renderer._tempMatrix1,layerMatrix=renderer._tempMatrix2,calcMatrix=renderer._tempMatrix3;layerMatrix.applyITRS(src.x,src.y,src.rotation,src.scaleX,src.scaleY),camMatrix.copyFrom(camera.matrix);var ctx=renderer.currentContext,gidMap=src.gidMap;ctx.save(),parentMatrix?(camMatrix.multiplyWithOffset(parentMatrix,-camera.scrollX*src.scrollFactorX,-camera.scrollY*src.scrollFactorY),layerMatrix.e=src.x,layerMatrix.f=src.y,camMatrix.multiply(layerMatrix,calcMatrix),calcMatrix.copyToContext(ctx)):(layerMatrix.e-=camera.scrollX*src.scrollFactorX,layerMatrix.f-=camera.scrollY*src.scrollFactorY,layerMatrix.copyToContext(ctx));for(var alpha=camera.alpha*src.alpha,i=0;i<tileCount;i++){var tile=renderTiles[i],tileset=gidMap[tile.index];if(tileset){var image=tileset.image.getSourceImage(),tileTexCoords=tileset.getTileTextureCoordinates(tile.index);if(tileTexCoords){var halfWidth=tile.width/2,halfHeight=tile.height/2;ctx.save(),ctx.translate(tile.pixelX+halfWidth,tile.pixelY+halfHeight),0!==tile.rotation&&ctx.rotate(tile.rotation),(tile.flipX||tile.flipY)&&ctx.scale(tile.flipX?-1:1,tile.flipY?-1:1),ctx.globalAlpha=alpha*tile.alpha,ctx.drawImage(image,tileTexCoords.x,tileTexCoords.y,tile.width,tile.height,-halfWidth,-halfHeight,tile.width,tile.height),ctx.restore()}}}ctx.restore()}}},function(module,exports,__webpack_require__){var renderWebGL=__webpack_require__(2),renderCanvas=__webpack_require__(2);renderWebGL=__webpack_require__(1392),renderCanvas=__webpack_require__(1393),module.exports={renderWebGL:renderWebGL,renderCanvas:renderCanvas}},function(module,exports){module.exports=function(renderer,src,interpolationPercentage,camera){var tilesets=src.tileset,pipeline=src.pipeline,pipelineVertexBuffer=pipeline.vertexBuffer;renderer.setPipeline(pipeline),pipeline.modelIdentity(),pipeline.modelTranslate(src.x-camera.scrollX*src.scrollFactorX,src.y-camera.scrollY*src.scrollFactorY,0),pipeline.modelScale(src.scaleX,src.scaleY,1),pipeline.viewLoad2D(camera.matrix.matrix);for(var i=0;i<tilesets.length;i++)src.upload(camera,i),src.vertexCount[i]>0&&(renderer.currentPipeline&&renderer.currentPipeline.vertexCount>0&&renderer.flush(),pipeline.vertexBuffer=src.vertexBuffer[i],renderer.setPipeline(pipeline),renderer.setTexture2D(tilesets[i].glTexture,0),renderer.gl.drawArrays(pipeline.topology,0,src.vertexCount[i]));pipeline.vertexBuffer=pipelineVertexBuffer,pipeline.viewIdentity(),pipeline.modelIdentity()}},function(module,exports){module.exports=function(renderer,src,interpolationPercentage,camera,parentMatrix){src.cull(camera);var renderTiles=src.culledTiles,tileCount=renderTiles.length;if(0!==tileCount){var camMatrix=renderer._tempMatrix1,layerMatrix=renderer._tempMatrix2,calcMatrix=renderer._tempMatrix3;layerMatrix.applyITRS(src.x,src.y,src.rotation,src.scaleX,src.scaleY),camMatrix.copyFrom(camera.matrix);var ctx=renderer.currentContext,gidMap=src.gidMap;ctx.save(),parentMatrix?(camMatrix.multiplyWithOffset(parentMatrix,-camera.scrollX*src.scrollFactorX,-camera.scrollY*src.scrollFactorY),layerMatrix.e=src.x,layerMatrix.f=src.y,camMatrix.multiply(layerMatrix,calcMatrix),calcMatrix.copyToContext(ctx)):(layerMatrix.e-=camera.scrollX*src.scrollFactorX,layerMatrix.f-=camera.scrollY*src.scrollFactorY,layerMatrix.copyToContext(ctx));var alpha=camera.alpha*src.alpha;ctx.globalAlpha=camera.alpha*src.alpha;for(var i=0;i<tileCount;i++){var tile=renderTiles[i],tileset=gidMap[tile.index];if(tileset){var image=tileset.image.getSourceImage(),tileTexCoords=tileset.getTileTextureCoordinates(tile.index);if(tileTexCoords){var tileWidth=tileset.tileWidth,tileHeight=tileset.tileHeight,halfWidth=tileWidth/2,halfHeight=tileHeight/2;ctx.save(),ctx.translate(tile.pixelX+halfWidth,tile.pixelY+halfHeight),0!==tile.rotation&&ctx.rotate(tile.rotation),(tile.flipX||tile.flipY)&&ctx.scale(tile.flipX?-1:1,tile.flipY?-1:1),ctx.globalAlpha=alpha*tile.alpha,ctx.drawImage(image,tileTexCoords.x,tileTexCoords.y,tileWidth,tileHeight,-halfWidth,-halfHeight,tileWidth,tileHeight),ctx.restore()}}}ctx.restore()}}},function(module,exports,__webpack_require__){var GameObjectCreator=__webpack_require__(16),ParseToTilemap=__webpack_require__(248);GameObjectCreator.register("tilemap",(function(config){var c=void 0!==config?config:{};return ParseToTilemap(this.scene,c.key,c.tileWidth,c.tileHeight,c.width,c.height,c.data,c.insertNull)}))},function(module,exports,__webpack_require__){var GameObjectFactory=__webpack_require__(6),ParseToTilemap=__webpack_require__(248);GameObjectFactory.register("tilemap",(function(key,tileWidth,tileHeight,width,height,data,insertNull){return null===key&&(key=void 0),null===tileWidth&&(tileWidth=void 0),null===tileHeight&&(tileHeight=void 0),null===width&&(width=void 0),null===height&&(height=void 0),ParseToTilemap(this.scene,key,tileWidth,tileHeight,width,height,data,insertNull)}))},function(module,exports,__webpack_require__){module.exports={Clock:__webpack_require__(1397),TimerEvent:__webpack_require__(523)}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),PluginCache=__webpack_require__(18),SceneEvents=__webpack_require__(20),TimerEvent=__webpack_require__(523),Clock=new Class({initialize:function(scene){this.scene=scene,this.systems=scene.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],scene.sys.events.once(SceneEvents.BOOT,this.boot,this),scene.sys.events.on(SceneEvents.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(SceneEvents.DESTROY,this.destroy,this)},start:function(){var eventEmitter=this.systems.events;eventEmitter.on(SceneEvents.PRE_UPDATE,this.preUpdate,this),eventEmitter.on(SceneEvents.UPDATE,this.update,this),eventEmitter.once(SceneEvents.SHUTDOWN,this.shutdown,this)},addEvent:function(config){var event=new TimerEvent(config);return this._pendingInsertion.push(event),event},delayedCall:function(delay,callback,args,callbackScope){return this.addEvent({delay:delay,callback:callback,args:args,callbackScope:callbackScope})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var toRemove=this._pendingRemoval.length,toInsert=this._pendingInsertion.length;if(0!==toRemove||0!==toInsert){var i,event;for(i=0;i<toRemove;i++){event=this._pendingRemoval[i];var index=this._active.indexOf(event);index>-1&&this._active.splice(index,1),event.destroy()}for(i=0;i<toInsert;i++)event=this._pendingInsertion[i],this._active.push(event);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(time,delta){if(this.now=time,!this.paused){delta*=this.timeScale;for(var i=0;i<this._active.length;i++){var event=this._active[i];if(!event.paused&&(event.elapsed+=delta*event.timeScale,event.elapsed>=event.delay)){var remainder=event.elapsed-event.delay;event.elapsed=event.delay,!event.hasDispatched&&event.callback&&(event.hasDispatched=!0,event.callback.apply(event.callbackScope,event.args)),event.repeatCount>0?(event.repeatCount--,event.elapsed=remainder,event.hasDispatched=!1):this._pendingRemoval.push(event)}}}},shutdown:function(){var i;for(i=0;i<this._pendingInsertion.length;i++)this._pendingInsertion[i].destroy();for(i=0;i<this._active.length;i++)this._active[i].destroy();for(i=0;i<this._pendingRemoval.length;i++)this._pendingRemoval[i].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var eventEmitter=this.systems.events;eventEmitter.off(SceneEvents.PRE_UPDATE,this.preUpdate,this),eventEmitter.off(SceneEvents.UPDATE,this.update,this),eventEmitter.off(SceneEvents.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(SceneEvents.START,this.start,this),this.scene=null,this.systems=null}});PluginCache.register("Clock",Clock,"time"),module.exports=Clock},function(module,exports,__webpack_require__){var CONST=__webpack_require__(102),Extend=__webpack_require__(17),Tweens={Builders:__webpack_require__(1399),Events:__webpack_require__(253),TweenManager:__webpack_require__(1414),Tween:__webpack_require__(252),TweenData:__webpack_require__(254),Timeline:__webpack_require__(528)};Tweens=Extend(!1,Tweens,CONST),module.exports=Tweens},function(module,exports,__webpack_require__){module.exports={GetBoolean:__webpack_require__(101),GetEaseFunction:__webpack_require__(92),GetNewValue:__webpack_require__(155),GetProps:__webpack_require__(524),GetTargets:__webpack_require__(249),GetTweens:__webpack_require__(525),GetValueOp:__webpack_require__(250),NumberTweenBuilder:__webpack_require__(526),TimelineBuilder:__webpack_require__(527),TweenBuilder:__webpack_require__(156)}},function(module,exports){module.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},function(module,exports){module.exports="complete"},function(module,exports){module.exports="loop"},function(module,exports){module.exports="pause"},function(module,exports){module.exports="resume"},function(module,exports){module.exports="start"},function(module,exports){module.exports="update"},function(module,exports){module.exports="active"},function(module,exports){module.exports="complete"},function(module,exports){module.exports="loop"},function(module,exports){module.exports="repeat"},function(module,exports){module.exports="start"},function(module,exports){module.exports="update"},function(module,exports){module.exports="yoyo"},function(module,exports,__webpack_require__){var ArrayRemove=__webpack_require__(133),Class=__webpack_require__(0),NumberTweenBuilder=__webpack_require__(526),PluginCache=__webpack_require__(18),SceneEvents=__webpack_require__(20),StaggerBuilder=__webpack_require__(1415),TimelineBuilder=__webpack_require__(527),TWEEN_CONST=__webpack_require__(102),TweenBuilder=__webpack_require__(156),TweenManager=new Class({initialize:function(scene){this.scene=scene,this.systems=scene.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,scene.sys.events.once(SceneEvents.BOOT,this.boot,this),scene.sys.events.on(SceneEvents.START,this.start,this)},boot:function(){this.systems.events.once(SceneEvents.DESTROY,this.destroy,this)},start:function(){var eventEmitter=this.systems.events;eventEmitter.on(SceneEvents.PRE_UPDATE,this.preUpdate,this),eventEmitter.on(SceneEvents.UPDATE,this.update,this),eventEmitter.once(SceneEvents.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(config){return TimelineBuilder(this,config)},timeline:function(config){var timeline=TimelineBuilder(this,config);return timeline.paused||(this._add.push(timeline),this._toProcess++),timeline},create:function(config){return TweenBuilder(this,config)},add:function(config){var tween=TweenBuilder(this,config);return this._add.push(tween),this._toProcess++,tween},existing:function(tween){return this._add.push(tween),this._toProcess++,this},addCounter:function(config){var tween=NumberTweenBuilder(this,config);return this._add.push(tween),this._toProcess++,tween},stagger:function(value,options){return StaggerBuilder(value,options)},preUpdate:function(){if(0!==this._toProcess){var i,tween,list=this._destroy,active=this._active,pending=this._pending;for(i=0;i<list.length;i++){tween=list[i];var idx=active.indexOf(tween);-1===idx?(idx=pending.indexOf(tween))>-1&&(tween.state=TWEEN_CONST.REMOVED,pending.splice(idx,1)):(tween.state=TWEEN_CONST.REMOVED,active.splice(idx,1))}for(list.length=0,list=this._add,i=0;i<list.length;i++)(tween=list[i]).state===TWEEN_CONST.PENDING_ADD&&(tween.init()?(tween.play(),this._active.push(tween)):this._pending.push(tween));list.length=0,this._toProcess=0}},update:function(timestamp,delta){var tween,list=this._active;delta*=this.timeScale;for(var i=0;i<list.length;i++)(tween=list[i]).update(timestamp,delta)&&(this._destroy.push(tween),this._toProcess++)},remove:function(tween){return ArrayRemove(this._add,tween),ArrayRemove(this._pending,tween),ArrayRemove(this._active,tween),ArrayRemove(this._destroy,tween),tween.state=TWEEN_CONST.REMOVED,this},makeActive:function(tween){if(-1!==this._add.indexOf(tween)||-1!==this._active.indexOf(tween))return this;var idx=this._pending.indexOf(tween);return-1!==idx&&this._pending.splice(idx,1),this._add.push(tween),tween.state=TWEEN_CONST.PENDING_ADD,this._toProcess++,this},each:function(callback,scope){for(var args=[null],i=1;i<arguments.length;i++)args.push(arguments[i]);for(var texture in this.list)args[0]=this.list[texture],callback.apply(scope,args)},getAllTweens:function(){for(var list=this._active,output=[],i=0;i<list.length;i++)output.push(list[i]);return output},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(target){var tween,i,list=this._active,output=[];if(Array.isArray(target))for(i=0;i<list.length;i++){tween=list[i];for(var t=0;t<target.length;t++)tween.hasTarget(target[t])&&output.push(tween)}else for(i=0;i<list.length;i++)(tween=list[i]).hasTarget(target)&&output.push(tween);return output},isTweening:function(target){for(var tween,list=this._active,i=0;i<list.length;i++)if((tween=list[i]).hasTarget(target)&&tween.isPlaying())return!0;return!1},killAll:function(){for(var tweens=this.getAllTweens(),i=0;i<tweens.length;i++)tweens[i].stop();return this},killTweensOf:function(target){for(var tweens=this.getTweensOf(target),i=0;i<tweens.length;i++)tweens[i].stop();return this},pauseAll:function(){for(var list=this._active,i=0;i<list.length;i++)list[i].pause();return this},resumeAll:function(){for(var list=this._active,i=0;i<list.length;i++)list[i].resume();return this},setGlobalTimeScale:function(value){return this.timeScale=value,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var eventEmitter=this.systems.events;eventEmitter.off(SceneEvents.PRE_UPDATE,this.preUpdate,this),eventEmitter.off(SceneEvents.UPDATE,this.update,this),eventEmitter.off(SceneEvents.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(SceneEvents.START,this.start,this),this.scene=null,this.systems=null}});PluginCache.register("TweenManager",TweenManager,"tweens"),module.exports=TweenManager},function(module,exports,__webpack_require__){var GetEaseFunction=__webpack_require__(92),GetValue=__webpack_require__(5);module.exports=function(value,options){void 0===options&&(options={});var start=GetValue(options,"start",0),ease=GetValue(options,"ease",null),grid=GetValue(options,"grid",null),from=GetValue(options,"from",0),fromFirst="first"===from,fromCenter="center"===from,fromLast="last"===from,fromValue="number"==typeof from,isRange=Array.isArray(value),value1=isRange?parseFloat(value[0]):parseFloat(value),value2=isRange?parseFloat(value[1]):0,maxValue=Math.max(value1,value2);if(isRange&&(start+=value1),grid){var gridWidth=grid[0],gridHeight=grid[1],fromX=0,fromY=0,distanceX=0,distanceY=0,gridValues=[];fromLast?(fromX=gridWidth-1,fromY=gridHeight-1):fromValue?(fromX=from%gridWidth,fromY=Math.floor(from/gridWidth)):fromCenter&&(fromX=(gridWidth-1)/2,fromY=(gridHeight-1)/2);for(var gridMax=Number.MIN_SAFE_INTEGER,toY=0;toY<gridHeight;toY++){gridValues[toY]=[];for(var toX=0;toX<gridWidth;toX++){distanceX=fromX-toX,distanceY=fromY-toY;var dist=Math.sqrt(distanceX*distanceX+distanceY*distanceY);dist>gridMax&&(gridMax=dist),gridValues[toY][toX]=dist}}}var easeFunction=ease?GetEaseFunction(ease):null;return grid?function(target,key,value,index){var output,gridSpace=0,toX=index%gridWidth,toY=Math.floor(index/gridWidth);if(toX>=0&&toX<gridWidth&&toY>=0&&toY<gridHeight&&(gridSpace=gridValues[toY][toX]),isRange){var diff=value2-value1;output=easeFunction?gridSpace/gridMax*diff*easeFunction(gridSpace/gridMax):gridSpace/gridMax*diff}else output=easeFunction?gridSpace*value1*easeFunction(gridSpace/gridMax):gridSpace*value1;return output+start}:function(target,key,value,index,total){var fromIndex,output,spacing;(total--,fromFirst?fromIndex=index:fromCenter?fromIndex=Math.abs(total/2-index):fromLast?fromIndex=total-index:fromValue&&(fromIndex=Math.abs(from-index)),isRange)?(spacing=fromCenter?(value2-value1)/total*(2*fromIndex):(value2-value1)/total*fromIndex,output=easeFunction?spacing*easeFunction(fromIndex/total):spacing):output=easeFunction?total*maxValue*easeFunction(fromIndex/total):fromIndex*value1;return output+start}}},function(module,exports,__webpack_require__){module.exports={Array:__webpack_require__(200),Base64:__webpack_require__(1417),Objects:__webpack_require__(1419),String:__webpack_require__(1423)}},function(module,exports,__webpack_require__){module.exports={ArrayBufferToBase64:__webpack_require__(1418),Base64ToArrayBuffer:__webpack_require__(393)}},function(module,exports){var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";module.exports=function(arrayBuffer,mediaType){for(var bytes=new Uint8Array(arrayBuffer),len=bytes.length,base64=mediaType?"data:"+mediaType+";base64,":"",i=0;i<len;i+=3)base64+=chars[bytes[i]>>2],base64+=chars[(3&bytes[i])<<4|bytes[i+1]>>4],base64+=chars[(15&bytes[i+1])<<2|bytes[i+2]>>6],base64+=chars[63&bytes[i+2]];return len%3==2?base64=base64.substring(0,base64.length-1)+"=":len%3==1&&(base64=base64.substring(0,base64.length-2)+"=="),base64}},function(module,exports,__webpack_require__){module.exports={Clone:__webpack_require__(71),Extend:__webpack_require__(17),GetAdvancedValue:__webpack_require__(14),GetFastValue:__webpack_require__(1),GetMinMaxValue:__webpack_require__(1420),GetValue:__webpack_require__(5),HasAll:__webpack_require__(1421),HasAny:__webpack_require__(412),HasValue:__webpack_require__(93),IsPlainObject:__webpack_require__(7),Merge:__webpack_require__(89),MergeRight:__webpack_require__(1422),Pick:__webpack_require__(512),SetValue:__webpack_require__(433)}},function(module,exports,__webpack_require__){var GetValue=__webpack_require__(5),Clamp=__webpack_require__(25);module.exports=function(source,key,min,max,defaultValue){void 0===defaultValue&&(defaultValue=min);var value=GetValue(source,key,defaultValue);return Clamp(value,min,max)}},function(module,exports){module.exports=function(source,keys){for(var i=0;i<keys.length;i++)if(!source.hasOwnProperty(keys[i]))return!1;return!0}},function(module,exports,__webpack_require__){var Clone=__webpack_require__(71);module.exports=function(obj1,obj2){var clone=Clone(obj1);for(var key in obj2)clone.hasOwnProperty(key)&&(clone[key]=obj2[key]);return clone}},function(module,exports,__webpack_require__){module.exports={Format:__webpack_require__(1424),Pad:__webpack_require__(175),Reverse:__webpack_require__(1425),UppercaseFirst:__webpack_require__(198),UUID:__webpack_require__(415)}},function(module,exports){module.exports=function(string,values){return string.replace(/%([0-9]+)/g,(function(s,n){return values[Number(n)-1]}))}},function(module,exports){module.exports=function(string){return string.split("").reverse().join("")}},function(module,exports,__webpack_require__){module.exports={SoundManagerCreator:__webpack_require__(387),Events:__webpack_require__(72),BaseSound:__webpack_require__(137),BaseSoundManager:__webpack_require__(136),WebAudioSound:__webpack_require__(394),WebAudioSoundManager:__webpack_require__(392),HTML5AudioSound:__webpack_require__(389),HTML5AudioSoundManager:__webpack_require__(388),NoAudioSound:__webpack_require__(391),NoAudioSoundManager:__webpack_require__(390)}},function(module,exports,__webpack_require__){module.exports={Camera:__webpack_require__(255),CameraManager:__webpack_require__(1428),OrthographicCamera:__webpack_require__(529),PerspectiveCamera:__webpack_require__(530)}},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),OrthographicCamera=__webpack_require__(529),PerspectiveCamera=__webpack_require__(530),PluginCache=__webpack_require__(18),CameraManager=new Class({initialize:function(scene){this.scene=scene,this.systems=scene.sys,this.cameras=[],scene.sys.events.once("boot",this.boot,this),scene.sys.events.on("start",this.start,this)},boot:function(){this.systems.events.once("destroy",this.destroy,this)},start:function(){var eventEmitter=this.systems.events;eventEmitter.on("update",this.update,this),eventEmitter.once("shutdown",this.shutdown,this)},add:function(fieldOfView,width,height){return this.addPerspectiveCamera(fieldOfView,width,height)},addOrthographicCamera:function(width,height){var config=this.scene.sys.game.config;void 0===width&&(width=config.width),void 0===height&&(height=config.height);var camera=new OrthographicCamera(this.scene,width,height);return this.cameras.push(camera),camera},addPerspectiveCamera:function(fieldOfView,width,height){var config=this.scene.sys.game.config;void 0===fieldOfView&&(fieldOfView=80),void 0===width&&(width=config.width),void 0===height&&(height=config.height);var camera=new PerspectiveCamera(this.scene,fieldOfView,width,height);return this.cameras.push(camera),camera},getCamera:function(name){for(var i=0;i<this.cameras.length;i++)if(this.cameras[i].name===name)return this.cameras[i];return null},removeCamera:function(camera){var cameraIndex=this.cameras.indexOf(camera);-1!==cameraIndex&&this.cameras.splice(cameraIndex,1)},removeAll:function(){for(;this.cameras.length>0;){this.cameras.pop().destroy()}return this.main},update:function(timestep,delta){for(var i=0,l=this.cameras.length;i<l;++i)this.cameras[i].update(timestep,delta)},shutdown:function(){var eventEmitter=this.systems.events;eventEmitter.off("update",this.update,this),eventEmitter.off("shutdown",this.shutdown,this),this.removeAll()},destroy:function(){this.shutdown(),this.scene.sys.events.off("start",this.start,this),this.scene=null,this.systems=null}});PluginCache.register("CameraManager3D",CameraManager,"cameras3d"),module.exports=CameraManager},function(module,exports,__webpack_require__){var Sprite3D=__webpack_require__(157);__webpack_require__(6).register("sprite3D",(function(x,y,z,key,frame){var sprite=new Sprite3D(this.scene,x,y,z,key,frame);return this.displayList.add(sprite.gameObject),this.updateList.add(sprite.gameObject),sprite}))},function(module,exports,__webpack_require__){var BuildGameObject=__webpack_require__(30),BuildGameObjectAnimation=__webpack_require__(203),GameObjectCreator=__webpack_require__(16),GetAdvancedValue=__webpack_require__(14),Sprite3D=__webpack_require__(157);GameObjectCreator.register("sprite3D",(function(config,addToScene){void 0===config&&(config={});var key=GetAdvancedValue(config,"key",null),frame=GetAdvancedValue(config,"frame",null),sprite=new Sprite3D(this.scene,0,0,key,frame);return void 0!==addToScene&&(config.add=addToScene),BuildGameObject(this.scene,sprite,config),BuildGameObjectAnimation(sprite,config),sprite}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const Math_1=__webpack_require__(531);function*range(min,max,step=1){for(let i=min;i<max;i+=step)yield i}exports.rangeArr=function(min,max,step=1){return Array.from(range(min,max,step))},exports.range=range,exports.count=function(arr){let c=0;for(const _ of arr)c++;return c},exports.randomFrom=function(arr){return arr.length?arr[Math_1.randomInt(0,arr.length)]:null},exports.shuffle=function(arr){let t,i,m=arr.length;for(;m;)i=Math.floor(Math_1.random()*m--),t=arr[m],arr[m]=arr[i],arr[i]=t;return arr},exports.permutationsOf=function*(arr){const permutation=arr.slice(0),c=Array(arr.length).fill(0);let k,p,i=1;for(yield permutation.slice();i<arr.length;)c[i]<i?(k=i%2&&c[i],p=permutation[i],permutation[i]=permutation[k],permutation[k]=p,c[i]++,i=1,yield permutation.slice()):(c[i]=0,i++)},exports.combinationsOf=function*combinationsOf(arr,n){for(let i=0;i<arr.length;i++)if(1===n)yield[arr[i]];else{let remaining=combinationsOf(arr.slice(i+1,arr.length),n-1);for(let next of remaining)yield[arr[i],...next]}},exports.swap=function(arr,indexA,indexB){const v=arr[indexA];return arr[indexA]=arr[indexB],arr[indexB]=v,arr},exports.transpose=function(arr){return arr[0].map((col,i)=>arr.map(row=>row[i]))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Rectangle=class{constructor(x,y,width,height){this.x=x,this.y=y,this.right=x+width,this.bottom=y+height}get left(){return this.x}set left(val){this.x=val}get top(){return this.y}set top(val){this.y=val}get height(){return this.bottom-this.top}set height(val){this.bottom=this.y+val}get width(){return this.right-this.left}set width(val){this.right=this.x+val}intersects(rect){return rect.left<this.right&&rect.right>this.left&&rect.top>this.bottom&&rect.bottom<this.top}contains(point){return point.x>=this.left&&point.x<this.right&&point.y>=this.top&&point.y<this.bottom}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Emitter=class{constructor(){this.eventCallbacks={}}register(eventName){if(this.eventCallbacks[eventName])throw Error("An event with this name has already been registered: "+eventName);this.eventCallbacks[eventName]=[]}on(eventName,callback,context){this.eventCallbacks[eventName]||this.register(eventName),this.eventCallbacks[eventName].unshift({callback:callback,context:context})}off(eventName,callback,force=!1){if(!this.eventCallbacks[eventName]){if(force)return;throw Error("An event with this name has not been registered yet: "+eventName)}let cbInd=this.eventCallbacks[eventName].findIndex(cb=>cb.callback===callback);this.eventCallbacks[eventName].splice(cbInd,1)}dispatch(eventName,...args){if(this.eventCallbacks[eventName]){let i=this.eventCallbacks[eventName].length;for(;i--;)this.eventCallbacks[eventName][i].callback.call(this.eventCallbacks[eventName][i].context,...args)}}dispatchApply(eventName,args=[]){if(this.eventCallbacks[eventName]){let i=this.eventCallbacks[eventName].length;for(;i--;)this.eventCallbacks[eventName][i].callback.apply(this.eventCallbacks[eventName][i].context,args)}}emit(eventName,...args){this.dispatch(eventName,...args)}removeListeners(){this.eventCallbacks={}}hasListeners(){for(let key in this.eventCallbacks)if(this.eventCallbacks[key].length)return!0;return!1}}},function(module,exports){module.exports=function(){this.pointsToAvoid={},this.startX,this.callback,this.startY,this.endX,this.endY,this.nodeHash={},this.openList}},function(module,exports){module.exports=function(parent,x,y,costSoFar,simpleDistanceToTarget){this.parent=parent,this.x=x,this.y=y,this.costSoFar=costSoFar,this.simpleDistanceToTarget=simpleDistanceToTarget,this.bestGuessDistance=function(){return this.costSoFar+this.simpleDistanceToTarget}}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1437)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(){var Heap,defaultCmp,floor,heapify,heappop,heappush,heappushpop,heapreplace,insort,min,nlargest,nsmallest,updateItem,_siftdown,_siftup;floor=Math.floor,min=Math.min,defaultCmp=function(x,y){return x<y?-1:x>y?1:0},insort=function(a,x,lo,hi,cmp){var mid;if(null==lo&&(lo=0),null==cmp&&(cmp=defaultCmp),lo<0)throw new Error("lo must be non-negative");for(null==hi&&(hi=a.length);lo<hi;)cmp(x,a[mid=floor((lo+hi)/2)])<0?hi=mid:lo=mid+1;return[].splice.apply(a,[lo,lo-lo].concat(x)),x},heappush=function(array,item,cmp){return null==cmp&&(cmp=defaultCmp),array.push(item),_siftdown(array,0,array.length-1,cmp)},heappop=function(array,cmp){var lastelt,returnitem;return null==cmp&&(cmp=defaultCmp),lastelt=array.pop(),array.length?(returnitem=array[0],array[0]=lastelt,_siftup(array,0,cmp)):returnitem=lastelt,returnitem},heapreplace=function(array,item,cmp){var returnitem;return null==cmp&&(cmp=defaultCmp),returnitem=array[0],array[0]=item,_siftup(array,0,cmp),returnitem},heappushpop=function(array,item,cmp){var _ref;return null==cmp&&(cmp=defaultCmp),array.length&&cmp(array[0],item)<0&&(item=(_ref=[array[0],item])[0],array[0]=_ref[1],_siftup(array,0,cmp)),item},heapify=function(array,cmp){var i,_i,_len,_ref1,_results,_results1;for(null==cmp&&(cmp=defaultCmp),_results=[],_i=0,_len=(_ref1=function(){_results1=[];for(var _j=0,_ref=floor(array.length/2);0<=_ref?_j<_ref:_j>_ref;0<=_ref?_j++:_j--)_results1.push(_j);return _results1}.apply(this).reverse()).length;_i<_len;_i++)i=_ref1[_i],_results.push(_siftup(array,i,cmp));return _results},updateItem=function(array,item,cmp){var pos;if(null==cmp&&(cmp=defaultCmp),-1!==(pos=array.indexOf(item)))return _siftdown(array,0,pos,cmp),_siftup(array,pos,cmp)},nlargest=function(array,n,cmp){var elem,result,_i,_len,_ref;if(null==cmp&&(cmp=defaultCmp),!(result=array.slice(0,n)).length)return result;for(heapify(result,cmp),_i=0,_len=(_ref=array.slice(n)).length;_i<_len;_i++)elem=_ref[_i],heappushpop(result,elem,cmp);return result.sort(cmp).reverse()},nsmallest=function(array,n,cmp){var elem,los,result,_i,_j,_len,_ref,_ref1,_results;if(null==cmp&&(cmp=defaultCmp),10*n<=array.length){if(!(result=array.slice(0,n).sort(cmp)).length)return result;for(los=result[result.length-1],_i=0,_len=(_ref=array.slice(n)).length;_i<_len;_i++)cmp(elem=_ref[_i],los)<0&&(insort(result,elem,0,null,cmp),result.pop(),los=result[result.length-1]);return result}for(heapify(array,cmp),_results=[],_j=0,_ref1=min(n,array.length);0<=_ref1?_j<_ref1:_j>_ref1;0<=_ref1?++_j:--_j)_results.push(heappop(array,cmp));return _results},_siftdown=function(array,startpos,pos,cmp){var newitem,parent,parentpos;for(null==cmp&&(cmp=defaultCmp),newitem=array[pos];pos>startpos&&cmp(newitem,parent=array[parentpos=pos-1>>1])<0;)array[pos]=parent,pos=parentpos;return array[pos]=newitem},_siftup=function(array,pos,cmp){var childpos,endpos,newitem,rightpos,startpos;for(null==cmp&&(cmp=defaultCmp),endpos=array.length,startpos=pos,newitem=array[pos],childpos=2*pos+1;childpos<endpos;)(rightpos=childpos+1)<endpos&&!(cmp(array[childpos],array[rightpos])<0)&&(childpos=rightpos),array[pos]=array[childpos],childpos=2*(pos=childpos)+1;return array[pos]=newitem,_siftdown(array,startpos,pos,cmp)},Heap=function(){function Heap(cmp){this.cmp=null!=cmp?cmp:defaultCmp,this.nodes=[]}return Heap.push=heappush,Heap.pop=heappop,Heap.replace=heapreplace,Heap.pushpop=heappushpop,Heap.heapify=heapify,Heap.updateItem=updateItem,Heap.nlargest=nlargest,Heap.nsmallest=nsmallest,Heap.prototype.push=function(x){return heappush(this.nodes,x,this.cmp)},Heap.prototype.pop=function(){return heappop(this.nodes,this.cmp)},Heap.prototype.peek=function(){return this.nodes[0]},Heap.prototype.contains=function(x){return-1!==this.nodes.indexOf(x)},Heap.prototype.replace=function(x){return heapreplace(this.nodes,x,this.cmp)},Heap.prototype.pushpop=function(x){return heappushpop(this.nodes,x,this.cmp)},Heap.prototype.heapify=function(){return heapify(this.nodes,this.cmp)},Heap.prototype.updateItem=function(x){return updateItem(this.nodes,x,this.cmp)},Heap.prototype.clear=function(){return this.nodes=[]},Heap.prototype.empty=function(){return 0===this.nodes.length},Heap.prototype.size=function(){return this.nodes.length},Heap.prototype.clone=function(){var heap;return(heap=new Heap).nodes=this.nodes.slice(0),heap},Heap.prototype.toArray=function(){return this.nodes.slice(0)},Heap.prototype.insert=Heap.prototype.push,Heap.prototype.top=Heap.prototype.peek,Heap.prototype.front=Heap.prototype.peek,Heap.prototype.has=Heap.prototype.contains,Heap.prototype.copy=Heap.prototype.clone,Heap}(),__WEBPACK_AMD_DEFINE_ARRAY__=[],void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function(){return Heap})?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}).call(this)},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"976b24130f460bdb4ac6303a033a4fa0.wav"},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"cef9672243a0a4e587ecb1f1c72e3c4f.wav"},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"c047d39579ba11238d13c70f454c1e46.wav"},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"79cb5013a47cb205253ab1b5f7c2f1f5.wav"},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"cb58c20a1b83cf14f56ba031c014e297.wav"},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"33404662aaee123d14f20b01973d743e.wav"},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"e8ab43e698fd08be005c700a46df56ff.wav"},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"5fab8b9f14510b9d58383e6e602bfb2f.wav"},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"606e5ddc6a3e471307450963c1adb86b.wav"},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"4819df6ba22b00c661a7860c32d8a496.wav"},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"4dd35d768d05f7ed87489544b6788184.png"},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"05c8f8839f1d5e5c4b8c79fd0ec99cc6.png"},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"81379ba68c0a77cfef83b3fa40dc0137.png"},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"020d9a9922da416c33e1d54b8ec81953.png"},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"04d607f2eecc33188ce607214ec79e7d.png"},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"8aefc993de60cfa93e80194301567a15.png"},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"97fc2b2e50fbddea1d474644e955fc2b.png"},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"2cc5f96f18259465ddf23b0ce320f7e2.png"},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"1650000a70c2b80e179396ff41bb3403.json"},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"c24e904e53d1c95ad38af36245bb88bf.mp3"},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"166a2f016c3ca18fa243ede2a9d2d45c.png"},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"e0ae1ec52822b4b1f9674e69b905b8f0.png"},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var SpriteSheet,AnimStates,AnimKeys,CharKey,SceneKey,TileTypes,AudioKeys,phaser=__webpack_require__(117);!function(SpriteSheet){SpriteSheet.PLAYER="player",SpriteSheet.FRANKEN_ZAP="franken-zap",SpriteSheet.FRANKEN="franken",SpriteSheet.MESS="mess",SpriteSheet.TILESHEET="tilesheet",SpriteSheet.MUTE="mute",SpriteSheet.INFO="info",SpriteSheet.SHOPPER_1="shooper 1",SpriteSheet.SHOPPER_2="shooper 2",SpriteSheet.SHOPPER_3="shooper 3"}(SpriteSheet||(SpriteSheet={})),function(AnimStates){AnimStates.LEFT="left",AnimStates.RIGHT="right",AnimStates.UP="up",AnimStates.DOWN="down",AnimStates.LEFT_WALK="left-walk",AnimStates.RIGHT_WALK="right-walk",AnimStates.UP_WALK="up-walk",AnimStates.DOWN_WALK="down-walk"}(AnimStates||(AnimStates={})),function(AnimKeys){AnimKeys.FRANKEN_LAY="lay",AnimKeys.FRANKEN_ZAP="zap"}(AnimKeys||(AnimKeys={})),function(CharKey){CharKey.PLAYER="player",CharKey.SHOPPER1="shopper1",CharKey.SHOPPER2="shopper2",CharKey.SHOPPER3="shopper3",CharKey.FRANKEN="franken"}(CharKey||(CharKey={})),function(SceneKey){SceneKey.MENU="menu",SceneKey.GAME="game",SceneKey.HUD="hud"}(SceneKey||(SceneKey={})),function(TileTypes){TileTypes.VERTSHELF="vertshelf",TileTypes.HORIZSHELF="horizshelf",TileTypes.STORAGESHELF="storageshelf",TileTypes.OPERATING_TABLE="operating",TileTypes.CHANGING_ROOM="changing room",TileTypes.FRONTDOOR="frontdoor",TileTypes.MANNEQUIN_STAND="mannequin stand",TileTypes.REGISTER="register"}(TileTypes||(TileTypes={})),function(AudioKeys){AudioKeys.THEME="theme",AudioKeys.REGISTER="register",AudioKeys.FRANK_VOICE_1="frank 1",AudioKeys.FRANK_VOICE_2="frank 2",AudioKeys.FRANK_VOICE_3="frank 3",AudioKeys.SHOPPER_DEATH="death",AudioKeys.DOOR_1="door 1",AudioKeys.DOOR_2="door 2",AudioKeys.FRANK_ZAP_1="zap 1",AudioKeys.FRANK_ZAP_2="zap 2",AudioKeys.FRANK_ZAP_3="zap 3"}(AudioKeys||(AudioKeys={}));var extendStatics,Action,CharacterEvent,__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__spreadArrays=function(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;var r=Array(s),k=0;for(i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r},Character_Character=function(_super){function Character(scene,x,y,texture,charKey){var _this=_super.call(this,scene,x,y,texture,charKey)||this;return _this.scene=scene,_this.charKey=charKey,_this.facing=Direction.DOWN,_this.walkSpeed=100,_this.isLocked=!1,_this.blockStateChange=!1,_this.makeAnimMap(charKey),_this.anims.play(_this.animMap.down),_this.setDepth(2),_this.setOrigin(.2,1),_this.tileHeight=scene.map.tileHeight,_this.scene.physics.add.existing(_this),_this}return __extends(Character,_super),Character.prototype.makeAnimMap=function(key){this.animMap={up:key+"-"+AnimStates.UP,upWalk:key+"-"+AnimStates.UP_WALK,down:key+"-"+AnimStates.DOWN,downWalk:key+"-"+AnimStates.DOWN_WALK,left:key+"-"+AnimStates.LEFT,leftWalk:key+"-"+AnimStates.LEFT_WALK,right:key+"-"+AnimStates.RIGHT,rightWalk:key+"-"+AnimStates.RIGHT_WALK}},Character.prototype.log=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];console.log.apply(console,__spreadArrays([this.constructor.name+":"],args))},Character.prototype.preUpdate=function(time,delta){_super.prototype.preUpdate.call(this,time,delta),this.setDepth(this.scene.pathFinder.pixelsToTile(this.y+8,this.tileHeight)),this.blockStateChange||(this.body.velocity.y>0?this.anims.play(this.animMap.downWalk,!0):this.body.velocity.y<0?this.anims.play(this.animMap.upWalk,!0):this.body.velocity.x>0?this.anims.play(this.animMap.rightWalk,!0):this.body.velocity.x<0?this.anims.play(this.animMap.leftWalk,!0):0===this.body.velocity.y&&0===this.body.velocity.x&&(this.facing===Direction.DOWN?this.anims.play(this.animMap.down,!0):this.facing===Direction.UP?this.anims.play(this.animMap.up,!0):this.facing===Direction.RIGHT?this.anims.play(this.animMap.right,!0):this.facing===Direction.LEFT&&this.anims.play(this.animMap.left,!0)))},Character.prototype.moveRight=function(p){void 0===p&&(p=1),this.facing=Direction.RIGHT,this.body.setVelocityX(this.walkSpeed*p)},Character.prototype.moveLeft=function(p){void 0===p&&(p=1),this.facing=Direction.LEFT,this.body.setVelocityX(-this.walkSpeed*p)},Character.prototype.moveDown=function(p){void 0===p&&(p=1),this.facing=Direction.DOWN,this.body.setVelocityY(this.walkSpeed*p)},Character.prototype.moveUp=function(p){void 0===p&&(p=1),this.facing=Direction.UP,this.body.setVelocityY(-this.walkSpeed*p)},Character}(Phaser.GameObjects.Sprite),Vector2=Phaser.Math.Vector2,PathBins=function(){function PathBins(tolerance,path){void 0===tolerance&&(tolerance=2),void 0===path&&(path=[]),this.tolerance=tolerance,this.path=path,this.index=0}return PathBins.prototype.getNextDirection=function(pos){if(this.index>=this.path.length)return null;var nextPoint=this.path[this.index],dx=nextPoint.x-pos.x,dy=nextPoint.y-pos.y,v=new Vector2(dx,dy);return Math.abs(dx)<this.tolerance&&(v.x=0),Math.abs(dy)<this.tolerance&&(v.y=0),0===v.x&&0===v.y?(this.index++,this.getNextDirection(pos)):v.normalize()},PathBins.prototype.getPoint=function(){return this.path[this.index]},PathBins.prototype.reset=function(){this.path=[],this.index=0},PathBins.prototype.getPointAtTime=function(t){var index=Math.round(t*(this.path.length-1));return this.path[index]},PathBins.prototype.addPoint=function(point){this.path.push(point)},Object.defineProperty(PathBins.prototype,"isDone",{get:function(){return this.index>=this.path.length},enumerable:!0,configurable:!0}),PathBins}();!function(Action){Action[Action.KILL=0]="KILL",Action[Action.HELP=1]="HELP",Action[Action.BUILD=2]="BUILD"}(Action||(Action={})),function(CharacterEvent){CharacterEvent.PATH_COMPLETE="path-complete",CharacterEvent.PATH_RESET="path-reset"}(CharacterEvent||(CharacterEvent={}));var GameEvents,MovableCharacter_extends=function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},MovableCharacter_MovableCharacter=function(_super){function MovableCharacter(scene,x,y,texture,charKey){var _this=_super.call(this,scene,x,y,texture,charKey)||this;return _this.path=new PathBins,_this.isFollowingPath=!1,_this.pathFinder=scene.pathFinder,_this}return MovableCharacter_extends(MovableCharacter,_super),MovableCharacter.prototype.onPathComplete=function(){},MovableCharacter.prototype.onPathReset=function(){},MovableCharacter.prototype.moveTo=function(point){return __awaiter(this,void 0,void 0,(function(){var cellPath,_i,cellPath_1,cell,pathPoint;return __generator(this,(function(_a){switch(_a.label){case 0:return[4,this.pathFinder.findPathPixels({x:this.x,y:this.y},point)];case 1:for(cellPath=_a.sent(),this.path.reset(),_i=0,cellPath_1=cellPath;_i<cellPath_1.length;_i++)cell=cellPath_1[_i],pathPoint=this.pathFinder.cellPointToPoint(cell),this.path.addPoint(pathPoint);return this.isFollowingPath=!0,this.onPathReset(),this.emit(CharacterEvent.PATH_RESET),[2]}}))}))},MovableCharacter.prototype.moveToTile=function(tile){return __awaiter(this,void 0,void 0,(function(){var cellPath,i,cell,pathPoint;return __generator(this,(function(_a){switch(_a.label){case 0:return[4,this.pathFinder.findPathPixels({x:this.x,y:this.y},this.pathFinder.cellPointToPoint({x:tile.charX,y:tile.charY}))];case 1:for(cellPath=_a.sent(),this.path.reset(),i=2;i<cellPath.length;i++)cell=cellPath[i],(pathPoint=this.pathFinder.cellPointToPoint(cell)).x+=this.pathFinder.tileWidth/2,pathPoint.y+=this.pathFinder.tileHeight/2,this.path.addPoint(pathPoint);return this.isFollowingPath=!0,this.onPathReset(),[2]}}))}))},MovableCharacter.prototype.preUpdate=function(time,delta){if(_super.prototype.preUpdate.call(this,time,delta),!this.isLocked)if(this.path.isDone)this.isFollowingPath&&(this.isFollowingPath=!1,this.body.setVelocity(0,0),this.onPathComplete(),this.emit(CharacterEvent.PATH_COMPLETE));else{var v=this.path.getNextDirection(this),p=this.path.getPoint();v&&p&&(v.x>0?this.moveRight(Math.abs(v.x)):v.x<0?this.moveLeft(Math.abs(v.x)):(this.x=p.x,this.body.setVelocityX(0)),v.y>0?this.moveDown(Math.abs(v.y)):v.y<0?this.moveUp(Math.abs(v.y)):(this.y=p.y,this.body.setVelocityY(0)))}},MovableCharacter}(Character_Character),ActionableCharacter_extends=function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),ActionableCharacter=function(_super){function ActionableCharacter(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.isSelectable=!0,_this}return ActionableCharacter_extends(ActionableCharacter,_super),ActionableCharacter.prototype.act=function(key){for(var _a,args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];this.actions.hasOwnProperty(key)?(_a=this.actions)[key].apply(_a,args):console.error("action does not exist on entity",key)},ActionableCharacter}(MovableCharacter_MovableCharacter);function distanceSquaredBetweenPoints(a,b){return(b.x-a.x)*(b.x-a.x)+(b.y-a.y)*(b.y-a.y)}!function(GameEvents){GameEvents.SELECT="select",GameEvents.DESELECT="deselect",GameEvents.REDUCE_STOCK="reduce stock",GameEvents.ADD_DISPLAY="add display",GameEvents.PURCHASE_INVENTORY="purchase inventory",GameEvents.GET_SHIPMENT="get shipment",GameEvents.BUILD_FRANKEN="build-franken",GameEvents.CASH_REGISTER="cash-register",GameEvents.MURDER="murder",GameEvents.RETRIEVE_PARTS="retrieve parts",GameEvents.CUSTOMER_ENTERS="customer enter",GameEvents.CUSTOMER_LEAVE="customer leave",GameEvents.FRANK_BUILT="frank built",GameEvents.LOSS="debt",GameEvents.WIN="win",GameEvents.CANT_BUILD_FRANK="cant build frank"}(GameEvents||(GameEvents={}));var Direction,AICharacter_extends=function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AICharacter=function(_super){function AICharacter(scene,x,y,texture,charKey){var _this=_super.call(this,scene,x,y,texture,charKey)||this;return _this.decisionRate=1e4,_this.isDeciding=!1,_this.deferredDecisionTime=5e3,_this.startDecisions(),_this}return AICharacter_extends(AICharacter,_super),AICharacter.prototype.pauseDecisions=function(){this.isDeciding=!1,this.stopDecisions(),this.loopEvent&&(this.loopEvent.remove(),this.loopEvent.destroy(),this.loopEvent=null)},AICharacter.prototype.startDecisions=function(){this.isDeciding||(this.isDeciding=!0,this.decisionLoop())},AICharacter.prototype.lock=function(){this.isLocked=!0,this.anims.stop(),this.loopEvent&&(this.loopEvent.remove(),this.loopEvent.destroy(),this.loopEvent=null),this.body.setVelocity(0,0)},AICharacter.prototype.unlock=function(){this.isLocked=!1,this.isDeciding&&this.decisionLoop()},AICharacter.prototype.stopDecisions=function(){this.isDeciding=!1,this.deferredEvent&&(this.deferredEvent.remove(),this.deferredEvent.destroy(),this.deferredEvent=null)},AICharacter.prototype.deferredDecision=function(){this.log("deferred decision start"),this.deferredEvent||(this.deferredEvent=this.scene.time.delayedCall(this.deferredDecisionTime,this.startDecisions,[],this))},AICharacter.prototype.destroy=function(fromScene){this.pauseDecisions(),_super.prototype.destroy.call(this,fromScene)},AICharacter.prototype.decisionLoop=function(){this.isDeciding&&(this.makeDecision(),this.loopEvent=this.scene.time.delayedCall(this.decisionRate,this.decisionLoop,[],this))},AICharacter}(MovableCharacter_MovableCharacter),dist=__webpack_require__(15),Mess_extends=function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),objects_Mess=function(_super){function Mess(scene,x,y){var _this=_super.call(this,scene,x,y)||this;return _this.scene=scene,_this.blood=scene.add.image(x,y,SpriteSheet.MESS,0),_this.bodyParts=scene.add.image(x,y,SpriteSheet.MESS,1),_this.setSize(20,20),_this.scene.mainInputController.enableObject(_this),_this.depth=0,_this}return Mess_extends(Mess,_super),Mess.prototype.retrieveBodyParts=function(){var _this=this;this.scene.tweens.add({targets:this.bodyParts,alpha:{value:0,duration:500},duration:1e3,onComplete:function(){_this.bodyParts.destroy(!0),_this.scene.events.emit(GameEvents.RETRIEVE_PARTS,Object(dist.randomInt)(2,5))}})},Mess.prototype.destroy=function(){this.bodyParts.destroy(!0),this.blood.destroy(!0),_super.prototype.destroy.call(this,!0)},Mess.prototype.clean=function(){var _this=this;this.scene.tweens.add({targets:this.blood,alpha:{value:0,duration:500},duration:1e3,onComplete:function(){_this.destroy()}})},Mess.prototype.interact=function(){this.bodyParts.visible?this.retrieveBodyParts():this.clean()},Mess}(Phaser.GameObjects.Container),Shopper_extends=function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Shopper_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},Shopper_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},Shopper_Shopper=function(_super){function Shopper(scene,x,y,texture,charKey){var _this=_super.call(this,scene,x,y,texture,charKey)||this;return _this.scene=scene,_this.clothes=1,_this.bodyParts=5,_this.inventory=0,_this.purchaseProbability=.3,_this.leaveProbability=.2,_this.multiPurchaseProbability=.3,_this.currentAction=null,_this.money=Object(dist.randomFrom)([25,50,75,100]),charKey===CharKey.SHOPPER1?_this.setSize(22,43):charKey===CharKey.SHOPPER2?_this.setSize(19,46):_this.setSize(22,37),_this.setOrigin(.5,1),_this}return Shopper_extends(Shopper,_super),Shopper.prototype.makeDecision=function(){return Shopper_awaiter(this,void 0,void 0,(function(){var clothingRack,cost,_this=this;return Shopper_generator(this,(function(_a){switch(_a.label){case 0:if(this.log("decision",this.charKey,this.currentAction),this.currentAction)return[3,5];clothingRack=Object(dist.randomFrom)(this.scene.staticObjects.frontShelves),this.pauseDecisions(),_a.label=1;case 1:return _a.trys.push([1,3,,4]),[4,this.moveToTile(clothingRack)];case 2:return _a.sent(),this.once(CharacterEvent.PATH_COMPLETE,(function(){_this.deferredDecision()})),[3,4];case 3:return _a.sent(),this.log("failed to find a shelf",this.charKey,this.currentAction),[2,this.startDecisions()];case 4:return this.currentAction="check shelf",[3,14];case 5:return"check shelf"!==this.currentAction?[3,13]:this.scene.gameState.frontInventory>0&&Math.random()<this.purchaseProbability?(this.inventory++,Math.random()<this.multiPurchaseProbability?(this.currentAction=null,this.deferredDecision(),[3,10]):[3,6]):[3,11];case 6:this.currentAction="check out",_a.label=7;case 7:return _a.trys.push([7,9,,10]),this.pauseDecisions(),[4,this.moveToTile(Object(dist.randomFrom)(this.scene.staticObjects.cashRegister))];case 8:return _a.sent(),this.once(CharacterEvent.PATH_COMPLETE,(function(){_this.deferredDecision()})),[3,10];case 9:return _a.sent(),this.log("failed to find the register",this.charKey,this.currentAction),[2,this.startDecisions()];case 10:return[3,12];case 11:Math.random()<this.leaveProbability&&this.leave(),_a.label=12;case 12:return[3,14];case 13:"check out"===this.currentAction&&(cost=this.inventory*this.scene.gameState.price,this.scene.events.emit(GameEvents.CASH_REGISTER,{inventory:this.inventory,income:cost}),this.leave()),_a.label=14;case 14:return this.log("action",this.currentAction,this.inventory,this.isFollowingPath,this.isDeciding),[2]}}))}))},Shopper.prototype.leave=function(){return Shopper_awaiter(this,void 0,void 0,(function(){var _this=this;return Shopper_generator(this,(function(_a){switch(_a.label){case 0:this.currentAction="leaving",_a.label=1;case 1:return _a.trys.push([1,3,,4]),this.pauseDecisions(),[4,this.moveToTile(Object(dist.randomFrom)(this.scene.staticObjects.frontDoor))];case 2:return _a.sent(),this.once(CharacterEvent.PATH_COMPLETE,(function(){_this.destroy(!0)})),[3,4];case 3:return _a.sent(),this.deferredDecision(),[3,4];case 4:return[2]}}))}))},Shopper.prototype.kill=function(){this.log("killing"),this.scene.events.emit(GameEvents.MURDER,this),new objects_Mess(this.scene,this.x,this.y),this.currentAction=null,this.stopDecisions(),this.destroy(!0),this.setVisible(!1),this.setActive(!1)},Shopper.prototype.onPathComplete=function(){this.deferredDecision()},Shopper}(AICharacter),Player_extends=function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Player_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},Player_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};!function(Direction){Direction[Direction.UP=0]="UP",Direction[Direction.DOWN=1]="DOWN",Direction[Direction.RIGHT=2]="RIGHT",Direction[Direction.LEFT=3]="LEFT"}(Direction||(Direction={}));var FrankenAssignment,Player_Player=function(_super){function Player(scene,x,y,texture){var _a,_this=_super.call(this,scene,x,y,texture,CharKey.PLAYER)||this;return _this.scene=scene,_this.actions=((_a={})[Action.KILL]=_this.killChar.bind(_this),_a[Action.HELP]=_this.helpChar.bind(_this),_a[Action.BUILD]=_this.buildFranken.bind(_this),_a),_this.actionState="idle",_this.actionRadius2=Math.pow(2*Math.max(_this.scene.map.tileWidth,_this.scene.map.tileHeight),2),_this.setSize(25,37).setOrigin(.5,.8),_this}return Player_extends(Player,_super),Player.prototype.buildFranken=function(){var d=distanceSquaredBetweenPoints(this.scene.tableLocation,this);this.log(d,this.actionRadius2),d>this.actionRadius2?this.moveTo(this.scene.tableLocation):(this.log("build franken"),this.scene.events.emit(GameEvents.BUILD_FRANKEN))},Player.prototype.killChar=function(char){return Player_awaiter(this,void 0,void 0,(function(){var DOWN_KEY,movePoint,_this=this;return Player_generator(this,(function(_a){switch(_a.label){case 0:if(this.log("Player kill char",char),"kill char"===this.actionState)return[2];this.actionState="kill char",this.charKey+"-stab-up",DOWN_KEY=this.charKey+"-stab-down",char.lock(),movePoint={x:char.x,y:char.y},_a.label=1;case 1:return _a.trys.push([1,3,,4]),[4,this.moveTo(movePoint)];case 2:return _a.sent(),this.once(CharacterEvent.PATH_COMPLETE,(function(){_this.log("Player path complete"),_this.stab(_this.charKey+"-"+AnimStates.DOWN,DOWN_KEY,char)})),[3,4];case 3:return _a.sent(),this.log("Skipping player movement"),this.stab(this.charKey+"-"+AnimStates.DOWN,DOWN_KEY,char),[3,4];case 4:return[2]}}))}))},Player.prototype.stab=function(dirAnimKey,stabKey,char){var _this=this;this.log("turning player",dirAnimKey),this.blockStateChange=!0,this.once("animationcomplete",(function(){_this.scene.time.delayedCall(1,(function(){_this.once("animationcomplete-"+stabKey,(function(){_this.blockStateChange=!1,char.kill(),_this.actionState="idle"})),_this.play(stabKey)}),[],null)})),this.play(dirAnimKey,!1)},Player.prototype.helpChar=function(char){},Player.prototype.actOn=function(obj){this.log("act on",obj);var closeEnoughToAct=distanceSquaredBetweenPoints(this,obj)<this.actionRadius2;obj instanceof Shopper_Shopper?closeEnoughToAct?this.killChar(obj):this.moveTo(obj):obj instanceof objects_Mess&&closeEnoughToAct?obj.interact():this.moveTo(obj)},Player.prototype.actOnTile=function(tile){switch(this.log("act on tile",tile),tile.properties.type){case TileTypes.OPERATING_TABLE:this.buildFranken();break;default:this.moveToTile(tile)}},Player}(ActionableCharacter),easystar=__webpack_require__(532),util_PathFinder=function(){function PathFinder(map){this.grid=[],this.tileWidth=map.tileWidth,this.tileHeight=map.tileHeight,this.initEasyStar(map)}return PathFinder.prototype.initEasyStar=function(map){this.easyStar=new easystar.js,this.easyStar.enableDiagonals();for(var y=0;y<map.height;y++){for(var row=[],x=0;x<map.width;x++){for(var isCollision=!1,_i=0,_a=map.layers;_i<_a.length;_i++){var tile=_a[_i].data[y][x];if(tile.properties.hasOwnProperty("collides")&&tile.properties.collides){isCollision=!0;break}}isCollision?row.push(1):row.push(0)}this.grid.push(row)}console.log("collision this.grid",this.grid),this.easyStar.setGrid(this.grid),this.easyStar.setAcceptableTiles([0])},PathFinder.prototype.pointToCell=function(point){return{row:this.pixelsToTile(point.y,this.tileHeight),col:this.pixelsToTile(point.x,this.tileWidth)}},PathFinder.prototype.pointToCellPoint=function(point){return{y:this.pixelsToTile(point.y,this.tileHeight),x:this.pixelsToTile(point.x,this.tileWidth)}},PathFinder.prototype.pixelsToTile=function(pixels,tileSize){return Math.floor(Math.abs(pixels)/tileSize)},PathFinder.prototype.cellPointToPoint=function(cellPoint,offset){return{x:cellPoint.x*this.tileWidth,y:cellPoint.y*this.tileHeight}},PathFinder.prototype.cellPointToCell=function(cellPoint){return{row:cellPoint.y,col:cellPoint.x}},PathFinder.prototype.cellToPoint=function(cell){return{x:cell.col*this.tileWidth,y:cell.row*this.tileHeight}},PathFinder.prototype.findPathPixels=function(start,end){return this.findPath(this.pointToCell(start),this.pointToCell(end))},PathFinder.prototype.findPath=function(start,end){var _this=this;return new Promise((function(resolve,reject){_this.easyStar.findPath(start.col,start.row,end.col,end.row,(function(path){null!==path?resolve(path):reject(new Error("Path was not found between these points. "+start.col+", "+start.row+" and "+end.col+" "+end.row))}))}))},PathFinder.prototype.tileIsBlocked=function(cell){try{return 1===this.grid[cell.row][cell.col]}catch(err){return!0}},PathFinder.prototype.pointIsBlocked=function(point){try{return 1===this.grid[point.y][point.x]}catch(err){return!0}},PathFinder.prototype.findNearestClearPoint=function(point,r){void 0===r&&(r=2);var c=0;point={x:point.x,y:point.y};for(var pointBlocked=!0;pointBlocked&&c<100;)point.x+=Object(dist.randomInt)(-r,r+1),point.y+=Object(dist.randomInt)(-r,r+1),c++,pointBlocked=this.pointIsBlocked(point);return console.log("found cell in",c,point),point},PathFinder.prototype.update=function(){this.easyStar.calculate()},PathFinder}(),MainInputController_MainInputController=function(){function MainInputController(scene){var _this=this;this.scene=scene,this.canClickMap=!0,scene.input.mouse.capture=!0,scene.input.mouse.disableContextMenu(),scene.input.on("pointerup",(function(pointer){_this.canClickMap?(console.log("main map click",pointer),0===pointer.button?_this.clickMap(pointer):_this.deselect()):_this.canClickMap=!0}))}return MainInputController.prototype.select=function(char){this.selectedCharacter=char,this.scene.events.emit(GameEvents.SELECT,char)},MainInputController.prototype.deselect=function(){console.log("main deselect")},MainInputController.prototype.enableCharacter=function(char){var _this=this;char.setInteractive(),char.on("pointerdown",(function(pointer){0===pointer.button&&(_this.canClickMap=!1,_this.clickCharacter(char))}),null)},MainInputController.prototype.enableObject=function(obj){var _this=this;obj.setInteractive(),obj.on("pointerdown",(function(pointer){0===pointer.button&&(_this.canClickMap=!1,_this.selectedCharacter&&_this.selectedCharacter.actOn(obj))}))},MainInputController.prototype.clickCharacter=function(char){console.log("main clicked char",arguments),char!==this.selectedCharacter&&(this.selectedCharacter?this.selectedCharacter.actOn(char):char instanceof ActionableCharacter&&char.isSelectable&&this.select(char))},MainInputController.prototype.clickMap=function(pointer){if(console.log("main map click",this),this.selectedCharacter){var tiles=this.scene.map.getTilesWithinWorldXY(pointer.worldX,pointer.worldY,1,1);console.log("tiles",tiles);for(var _i=0,tiles_1=tiles;_i<tiles_1.length;_i++){var tile=tiles_1[_i];if(tile.properties&&tile.properties.type)return this.selectedCharacter.actOnTile(tile)}console.log("main move player to",pointer),this.selectedCharacter.moveTo({x:pointer.worldX,y:pointer.worldY})}},MainInputController}(),GameStateController_GameStateController=function(){function GameStateController(scene){this.scene=scene,this.stockPurchaseDelay=12e4,this.nStockPurchases=1,scene.time.delayedCall(5e3,this.addShopper,[],this),scene.time.delayedCall(12e4,this.purchaseStock,[],this)}return GameStateController.prototype.addShopper=function(){console.log("add shopper"),this.scene.addShopper();var shopperDelay=2e4-600*this.scene.gameState.frontInventory+200*this.scene.nShoppers;shopperDelay<3e3&&(shopperDelay=3e3),this.scene.time.delayedCall(shopperDelay,this.addShopper,[],this)},GameStateController.prototype.purchaseStock=function(){this.scene.events.emit(GameEvents.PURCHASE_INVENTORY,50*this.nStockPurchases),this.nStockPurchases++,this.scene.time.delayedCall(this.stockPurchaseDelay,this.purchaseStock,[],this)},GameStateController}();!function(FrankenAssignment){FrankenAssignment[FrankenAssignment.MANNEQUIN=0]="MANNEQUIN",FrankenAssignment[FrankenAssignment.RESTOCK=1]="RESTOCK",FrankenAssignment[FrankenAssignment.JANITOR=2]="JANITOR",FrankenAssignment[FrankenAssignment.REGISTER=3]="REGISTER",FrankenAssignment[FrankenAssignment.SECURITY=4]="SECURITY",FrankenAssignment[FrankenAssignment.MANAGER=5]="MANAGER",FrankenAssignment[FrankenAssignment.IDLE=6]="IDLE"}(FrankenAssignment||(FrankenAssignment={}));var Franken_extends=function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Franken_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},Franken_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},Franken_Franken=function(_super){function Franken(scene,x,y,texture,charKey){var _this=_super.call(this,scene,x,y,texture,charKey)||this;return _this.scene=scene,_this.controllerState=FrankenAssignment.RESTOCK,_this.currentAction=null,_this.isCarrying=!1,_this.inventory=0,_this.strength=Object(dist.randomInt)(1,4),_this.setSize(16,38),_this}return Franken_extends(Franken,_super),Franken.prototype.makeDecision=function(){switch(this.log("decision",this.controllerState),this.controllerState){case FrankenAssignment.RESTOCK:this.restock();break;case FrankenAssignment.REGISTER:this.register();break;default:this.log("idle"),this.startDecisions()}},Franken.prototype.register=function(){return Franken_awaiter(this,void 0,void 0,(function(){var AT_REGISTER,_this=this;return Franken_generator(this,(function(_a){switch(_a.label){case 0:return AT_REGISTER="at register",this.currentAction?[3,2]:(this.pauseDecisions(),[4,this.moveToTile(this.scene.staticObjects.cashRegister[1])]);case 1:return _a.sent(),this.once(CharacterEvent.PATH_COMPLETE,(function(){_this.deferredDecision()})),this.currentAction=AT_REGISTER,[3,3];case 2:this.scene.gameState.rearInventory>0&&(this.currentAction=null,this.controllerState=FrankenAssignment.RESTOCK),_a.label=3;case 3:return[2]}}))}))},Franken.prototype.moveToTile=function(tile){return _super.prototype.moveToTile.call(this,tile)},Franken.prototype.restock=function(){return Franken_awaiter(this,void 0,void 0,(function(){var GETTING_STOCK,MOVING_STOCK,nextTile,frontShelf,_this=this;return Franken_generator(this,(function(_b){switch(_b.label){case 0:switch(GETTING_STOCK="getting stock",MOVING_STOCK="moving stock",this.log("restock",this.currentAction),this.scene.gameState.rearInventory<=0?this.controllerState=FrankenAssignment.REGISTER:this.controllerState=FrankenAssignment.RESTOCK,this.currentAction){case null:return[3,1];case GETTING_STOCK:return[3,5]}return[3,10];case 1:return _b.trys.push([1,3,,4]),nextTile=Object(dist.randomFrom)(this.scene.staticObjects.stockShelves),this.pauseDecisions(),[4,this.moveToTile(nextTile)];case 2:return _b.sent(),this.once(CharacterEvent.PATH_COMPLETE,(function(){_this.inventory+=_this.scene.gameState.rearInventory>=_this.strength?_this.strength:_this.scene.gameState.rearInventory,_this.scene.events.emit(GameEvents.REDUCE_STOCK,_this.inventory),_this.isCarrying=!0,_this.deferredDecision()})),[3,4];case 3:return _b.sent(),this.log("failed to move to tile"),[2,this.startDecisions()];case 4:return this.currentAction=GETTING_STOCK,[3,11];case 5:frontShelf=Object(dist.randomFrom)(this.scene.staticObjects.frontShelves),_b.label=6;case 6:return _b.trys.push([6,8,,9]),this.pauseDecisions(),[4,this.moveToTile(frontShelf)];case 7:return _b.sent(),this.once(CharacterEvent.PATH_COMPLETE,(function(){return _this.scene.events.emit(GameEvents.ADD_DISPLAY,_this.inventory),_this.inventory=0,_this.isCarrying=!1,_this.currentAction=null,_this.deferredDecision()})),[3,9];case 8:return _b.sent(),this.log("failed to move to a front shelf"),[2,this.startDecisions()];case 9:return this.currentAction=MOVING_STOCK,[3,11];case 10:this.log("should not get here"),_b.label=11;case 11:return[2]}}))}))},Franken}(AICharacter),GameScene_extends=function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),scenes_GameScene=function(_super){function GameScene(){var _this=_super.call(this,{key:SceneKey.GAME})||this;return _this.nShoppers=0,_this.frankens=[],_this.layers=[],_this.depthTiles=[],_this.costs={franken:{money:100,bodyParts:6,inventory:1}},_this.staticObjects={cashRegister:[],changingRooms:[],mannequinStands:[],frontShelves:[],stockShelves:[],operatingTable:[],frontDoor:[]},_this.hudSize=50,_this}return GameScene_extends(GameScene,_super),GameScene.prototype.init=function(state){this.gameState={time:0,shoppers:[],frankens:[],money:0,rearInventory:0,frontInventory:0,bodyParts:0,price:50}},GameScene.prototype.initDebug=function(){for(var _this=this,i=0;i<2;i++)this.time.delayedCall(5e3*i,(function(){_this.events.emit(GameEvents.BUILD_FRANKEN)}),[],null)},GameScene.prototype.create=function(){this.scene.launch(SceneKey.HUD),this.createAnimations(),this.initializeInput(),this.makeMap(),this.pathFinder=new util_PathFinder(this.map),this.initializeChars(),this.initializeCollision(),this.cameras.main.setDeadzone(128,96),this.cameras.main.startFollow(this.player),this.cameras.main.roundPixels=!0,this.cameras.main.zoom=1.5;new GameStateController_GameStateController(this);this.initializeEvents()},GameScene.prototype.resize=function(gameSize,baseSize,displaySize,resolution){this.cameras.resize(gameSize.width,gameSize.height)},GameScene.prototype.loadAudio=function(){this.load.audio(AudioKeys.FRANK_VOICE_1,__webpack_require__(1438)),this.load.audio(AudioKeys.FRANK_VOICE_2,__webpack_require__(1439)),this.load.audio(AudioKeys.FRANK_VOICE_3,__webpack_require__(1440)),this.load.audio(AudioKeys.REGISTER,__webpack_require__(1441)),this.load.audio(AudioKeys.SHOPPER_DEATH,__webpack_require__(1442)),this.load.audio(AudioKeys.DOOR_1,__webpack_require__(1443)),this.load.audio(AudioKeys.DOOR_2,__webpack_require__(1444)),this.load.audio(AudioKeys.FRANK_ZAP_1,__webpack_require__(1445)),this.load.audio(AudioKeys.FRANK_ZAP_2,__webpack_require__(1446)),this.load.audio(AudioKeys.FRANK_ZAP_3,__webpack_require__(1447))},GameScene.prototype.loadSprites=function(){this.load.spritesheet(SpriteSheet.PLAYER,__webpack_require__(1448),{frameWidth:32,frameHeight:48}),this.load.spritesheet(SpriteSheet.SHOPPER_1,__webpack_require__(1449),{frameWidth:32,frameHeight:48}),this.load.spritesheet(SpriteSheet.SHOPPER_2,__webpack_require__(1450),{frameWidth:32,frameHeight:48}),this.load.spritesheet(SpriteSheet.SHOPPER_3,__webpack_require__(1451),{frameWidth:32,frameHeight:48}),this.load.spritesheet(SpriteSheet.FRANKEN,__webpack_require__(1452),{frameWidth:32,frameHeight:46}),this.load.spritesheet(SpriteSheet.FRANKEN_ZAP,__webpack_require__(1453),{frameWidth:90,frameHeight:67}),this.load.spritesheet(SpriteSheet.MESS,__webpack_require__(1454),{frameWidth:37,frameHeight:28})},GameScene.prototype.preload=function(){this.loadAudio(),this.loadSprites(),this.load.spritesheet(SpriteSheet.TILESHEET,__webpack_require__(1455),{frameWidth:16,frameHeight:16,spacing:2,margin:1}),this.load.tilemapTiledJSON("shop",__webpack_require__(1456))},GameScene.prototype.makeMap=function(){this.map=this.make.tilemap({key:"shop",tileWidth:16,tileHeight:16});var tiles=this.map.addTilesetImage("frankensheet",SpriteSheet.TILESHEET);function tileToInteractiveTile(tile){var interactiveTile=tile,xOffset=tile.properties&&tile.properties.xOffset?tile.properties.xOffset:0,yOffset=tile.properties&&tile.properties.yOffset?tile.properties.yOffset:0;return interactiveTile.charX=tile.x+xOffset,interactiveTile.charY=tile.y+yOffset,interactiveTile}for(var _i=0,_a=this.map.layers;_i<_a.length;_i++){var layerData=_a[_i],layer=layerData.properties.findIndex((function(p){return"static"===p.name&&p.value}))>-1?this.map.createStaticLayer(layerData.name,tiles):this.map.createDynamicLayer(layerData.name,tiles);this.layers.push(layer);for(var _b=0,_c=layerData.data;_b<_c.length;_b++)for(var row=_c[_b],i=0;i<row.length;i++){var tile=row[i];if(tile.properties&&tile.properties.type)switch(tile.properties.type){case TileTypes.VERTSHELF:case TileTypes.HORIZSHELF:this.staticObjects.frontShelves.push(tileToInteractiveTile(tile));break;case TileTypes.STORAGESHELF:this.staticObjects.stockShelves.push(tileToInteractiveTile(tile));break;case TileTypes.OPERATING_TABLE:this.tableLocation||(this.tableLocation={x:tile.pixelX,y:(tile.y+3)*this.map.tileHeight});break;case TileTypes.CHANGING_ROOM:break;case TileTypes.FRONTDOOR:this.staticObjects.frontDoor.push(tileToInteractiveTile(tile));break;case TileTypes.MANNEQUIN_STAND:break;case TileTypes.REGISTER:this.staticObjects.cashRegister.push(tileToInteractiveTile(tile))}if(tile.properties&&tile.properties.height){var tileImage=this.add.image(tile.pixelX+this.map.tileWidth,tile.pixelY+this.map.tileHeight,SpriteSheet.TILESHEET,tile.index-1);tileImage.setDepth(tile.y+tile.properties.height),tileImage.setOrigin(1,1),this.depthTiles.push(tileImage)}}}this.cameras.main.setBounds(0,-this.hudSize,this.map.widthInPixels,this.map.heightInPixels+this.hudSize)},GameScene.prototype.pause=function(){this.scene.pause()},GameScene.prototype.resume=function(){this.scene.resume()},GameScene.prototype.initializeInput=function(){var _this=this;this.mainInputController=new MainInputController_MainInputController(this),this.input.on("keyup-ESC",(function(){_this.scene.isPaused()?_this.resume():_this.pause()}))},GameScene.prototype.initializeEvents=function(){this.events.on(GameEvents.BUILD_FRANKEN,this.buildFranken,this)},GameScene.prototype.createAnimations=function(){for(var mainCharAnims=[[AnimStates.UP_WALK,{start:4,end:7}],[AnimStates.DOWN_WALK,{start:0,end:3}],[AnimStates.LEFT_WALK,{start:0,end:3}],[AnimStates.RIGHT_WALK,{start:4,end:7}],[AnimStates.UP,{start:4,end:4}],[AnimStates.DOWN,{start:1,end:1}],[AnimStates.LEFT,{start:1,end:1}],[AnimStates.RIGHT,{start:4,end:4}]],frankenAnims=[[AnimStates.UP_WALK,{start:4,end:7}],[AnimStates.DOWN_WALK,{start:0,end:3}],[AnimStates.LEFT_WALK,{start:0,end:3}],[AnimStates.RIGHT_WALK,{start:4,end:7}],[AnimStates.UP,{frames:[4,6]}],[AnimStates.DOWN,{frames:[0,2]}],[AnimStates.LEFT,{frames:[0,2]}],[AnimStates.RIGHT,{frames:[4,6]}]],shopperAnims=[[AnimStates.UP_WALK,{start:0,end:1}],[AnimStates.DOWN_WALK,{start:2,end:3}],[AnimStates.LEFT_WALK,{start:0,end:1}],[AnimStates.RIGHT_WALK,{start:2,end:3}],[AnimStates.UP,{frames:[0]}],[AnimStates.DOWN,{frames:[2]}],[AnimStates.LEFT,{frames:[0]}],[AnimStates.RIGHT,{frames:[2]}]],_i=0,thangs_1=[[CharKey.PLAYER,SpriteSheet.PLAYER,mainCharAnims],[CharKey.FRANKEN,SpriteSheet.FRANKEN,frankenAnims],[CharKey.SHOPPER1,SpriteSheet.SHOPPER_1,shopperAnims],[CharKey.SHOPPER2,SpriteSheet.SHOPPER_2,shopperAnims],[CharKey.SHOPPER3,SpriteSheet.SHOPPER_3,shopperAnims]];_i<thangs_1.length;_i++)for(var _a=thangs_1[_i],charKey=_a[0],spriteKey=_a[1],_b=0,anims_1=_a[2];_b<anims_1.length;_b++){var _c=anims_1[_b],key=_c[0],config=_c[1];this.anims.create({key:charKey+"-"+key,frames:this.anims.generateFrameNumbers(spriteKey,config),frameRate:6,repeat:-1})}this.anims.create({key:CharKey.PLAYER+"-stab-up",frames:this.anims.generateFrameNumbers(SpriteSheet.PLAYER,{start:16,end:21}),frameRate:6}),this.anims.create({key:CharKey.PLAYER+"-stab-down",frames:this.anims.generateFrameNumbers(SpriteSheet.PLAYER,{start:8,end:13}),frameRate:6}),this.anims.create({key:AnimKeys.FRANKEN_ZAP,frames:this.anims.generateFrameNumbers(SpriteSheet.FRANKEN_ZAP,{frames:[0,0,0,1,1,0,1,1,0,1,0,1,0,1,0,1]}),frameRate:12})},GameScene.prototype.initializeChars=function(){this.player=new Player_Player(this,20*this.map.tileWidth,20*this.map.tileHeight,SpriteSheet.PLAYER),this.add.existing(this.player),this.mainInputController.enableCharacter(this.player),this.tableFranken=this.add.sprite(this.tableLocation.x+1.5*this.map.tileWidth,this.tableLocation.y-2.1*this.map.tileHeight,SpriteSheet.FRANKEN_ZAP).setVisible(!1),this.tableFranken.setDepth(10),this.mainInputController.select(this.player)},GameScene.prototype.initializeCollision=function(){},GameScene.prototype.update=function(time,delta){this.pathFinder.update()},GameScene.prototype.addShopper=function(){if(!(this.nShoppers>=10)){var frontDoorTile=Object(dist.randomFrom)(this.staticObjects.frontDoor),randInt=Object(dist.randomInt)(0,3);console.log("add shopper",randInt);var keys=Object(dist.randomFrom)([[SpriteSheet.SHOPPER_1,CharKey.SHOPPER1],[SpriteSheet.SHOPPER_2,CharKey.SHOPPER2],[SpriteSheet.SHOPPER_3,CharKey.SHOPPER3]]),shopper=new Shopper_Shopper(this,frontDoorTile.pixelX,frontDoorTile.pixelY,keys[0],keys[1]);this.add.existing(shopper),this.mainInputController.enableCharacter(shopper),this.events.emit(GameEvents.CUSTOMER_ENTERS,shopper)}},GameScene.prototype.addFranken=function(){var franken=new Franken_Franken(this,this.tableLocation.x-this.map.tileWidth,this.tableLocation.y,SpriteSheet.FRANKEN,CharKey.FRANKEN);this.frankens.push(franken),this.add.existing(franken),this.mainInputController.enableCharacter(franken)},GameScene.prototype.buildFranken=function(){var _this=this,cost=this.costs.franken;if(this.gameState.money<cost.money||this.gameState.bodyParts<cost.bodyParts||this.gameState.rearInventory+this.gameState.frontInventory<cost.inventory)return this.events.emit(GameEvents.CANT_BUILD_FRANK);this.gameState.bodyParts-=cost.bodyParts,this.gameState.money-=cost.money,this.gameState.rearInventory>0?this.gameState.rearInventory-=cost.inventory:this.gameState.frontInventory-=cost.inventory,this.tableFranken.setVisible(!0),this.events.emit(GameEvents.FRANK_BUILT),this.time.delayedCall(1e3/13*16,(function(){_this.addFranken(),_this.tableFranken.setVisible(!1)}),[],null),this.tableFranken.play(AnimKeys.FRANKEN_ZAP)},GameScene}(Phaser.Scene),HUDScene_extends=function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),scenes_HUDScene=function(_super){function HUDScene(){var _this=_super.call(this,{key:SceneKey.HUD})||this;return _this.doors=[],_this.zaps=[],_this.boxColor=8656669,_this.hudColor=4143416,_this.boxPadding=20,_this.textPadding=10,_this.stockPrice=2,_this.baseStockPurchase=50,_this.numStockPurchases=1,_this.nextStockPurchase=50,_this.numShirtPurchases=0,_this.numFrankens=0,_this.warningPopups={},_this}return HUDScene_extends(HUDScene,_super),HUDScene.prototype.preload=function(){this.load.audio(AudioKeys.THEME,__webpack_require__(1457)),this.load.image(SpriteSheet.INFO,__webpack_require__(1458)),this.load.spritesheet(SpriteSheet.MUTE,__webpack_require__(1459),{frameWidth:32,frameHeight:32}),this.load.scenePlugin({key:"rexuiplugin",url:"https://raw.githubusercontent.com/rexrainbow/phaser3-rex-notes/master/plugins/dist/rexuiplugin.min.js",sceneKey:"rexUI"})},HUDScene.prototype.makeHud=function(){var _this=this,graphics=this.add.graphics();graphics.fillStyle(this.hudColor),graphics.fillRect(0,0,this.cameras.main.width,50),this.stockText=this.add.text(10,10,"Stock: 0"),this.bodyPartsText=this.add.text(10,30,"BodyParts: 0"),this.displayStockText=this.add.text(200,10,"Display: 0"),this.workersText=this.add.text(200,30,"Workers: 0"),this.moneyText=this.add.text(400,10,"Money: $0"),this.baseStockText=this.add.text(400,30,"Inventory shipment: $"+this.stockPrice*this.nextStockPurchase),this.updateStock(),this.updateBodyParts(),this.updateMoney(),this.muteButton=this.add.image(700,25,SpriteSheet.MUTE,0),this.time.delayedCall(2e3,(function(){_this.sound.mute&&_this.muteButton.setFrame(0)}),[],null),this.muteButton.setInteractive().on("pointerup",(function(){_this.sound.mute=!_this.sound.mute,_this.sound.mute?_this.muteButton.setFrame(0):_this.muteButton.setFrame(1)})),this.introButton=this.add.image(750,25,SpriteSheet.INFO,0),this.introButton.setInteractive().on("pointerup",(function(){_this.introTextBox.visible||_this.showIntro()}))},HUDScene.prototype.win=function(){this.winTextBox.setVisible(!0).setActive(!0).start("Congrats! You're officially a sociopath! Enjoy the rest of the game jam!",30)},HUDScene.prototype.updateMoney=function(){this.moneyText.setText("Money: $"+this.gameScene.gameState.money),this.gameScene.gameState.money>2e3&&this.win()},HUDScene.prototype.updateWorkers=function(){this.workersText.setText("Workers: "+this.numFrankens)},HUDScene.prototype.updateNextStock=function(){this.baseStockText.setText("Inventory shipment: $"+this.stockPrice*this.nextStockPurchase)},HUDScene.prototype.updateFrontInv=function(){this.displayStockText.setText("Display: "+this.gameScene.gameState.frontInventory)},HUDScene.prototype.updateStock=function(){this.stockText.setText("Stock: "+this.gameScene.gameState.rearInventory)},HUDScene.prototype.updateBodyParts=function(){this.bodyPartsText.setText("Body parts: "+this.gameScene.gameState.bodyParts)},HUDScene.prototype.create=function(){console.log("hud create"),this.gameScene=this.scene.get(SceneKey.GAME),this.makeAudio(),this.makeHud(),this.makeListeners(),this.makeTextBoxes(),this.showIntro(),this.makeWarnings()},HUDScene.prototype.makeWarnings=function(){for(var _this=this,costs=this.gameScene.costs.franken,warnings=[[GameEvents.CANT_BUILD_FRANK,"It costs "+costs.money+" money, "+costs.bodyParts+" body parts, and "+costs.inventory+" inventory to build a franken-worker. Make some sales or find another way to build one!"]],_loop_1=function(key,text){var box=this_1.makeBox(2*this_1.cameras.main.width/3,this_1.cameras.main.height/6,text).setOrigin(0).layout().setVisible(!1).setInteractive().setActive(!1);box.on("pointerup",(function(){box.isTyping?box.stop(!0):(_this.gameScene.resume(),box.setVisible(!1).setActive(!1))})),this_1.warningPopups[key]=box,this_1.gameScene.events.on(key,(function(){_this.gameScene.pause(),box.setVisible(!0).setActive(!0).start(text,30)}))},this_1=this,_i=0,warnings_1=warnings;_i<warnings_1.length;_i++){var _a=warnings_1[_i];_loop_1(_a[0],_a[1])}},HUDScene.prototype.makeBox=function(boxWidth,boxHeight,text,color){void 0===text&&(text=""),void 0===color&&(color=this.boxColor);var centerX=this.cameras.main.width/2,centerY=this.cameras.main.height/2;return this.rexUI.add.textBox({x:centerX-boxWidth/2,y:centerY-boxHeight/2,background:this.rexUI.add.roundRectangle(0,0,2,2,20,color),space:{left:this.boxPadding,right:this.boxPadding,top:this.boxPadding,text:this.textPadding},text:this.rexUI.add.BBCodeText(0,0,"",{fixedWidth:boxWidth,fixedHeight:boxHeight,wrap:{mode:"word",width:boxWidth}})})},HUDScene.prototype.makeTextBoxes=function(){var _this=this,boxHeight=this.cameras.main.height/4,boxWidth=2*this.cameras.main.width/3;this.introTextBox=this.makeBox(boxWidth,boxHeight).setOrigin(0).layout().setInteractive(),this.introTextBox.on("pointerup",(function(){_this.introTextBox.isTyping?_this.introTextBox.stop(!0):(_this.introTextBox.setVisible(!1).setActive(!1),_this.gameScene.resume())})),this.lossTextBox=this.makeBox(this.cameras.main.width/2,boxHeight).setOrigin(0).layout().setInteractive().setVisible(!1).setActive(!1),this.winTextBox=this.makeBox(this.cameras.main.width/4,this.cameras.main.width/2).setOrigin(0).layout().setInteractive().setVisible(!1).setActive(!1),this.winTextBox.on("pointerup",(function(){_this.winTextBox.isTyping?_this.winTextBox.stop(!0):_this.restart()}))},HUDScene.prototype.restart=function(){window.location.reload()},HUDScene.prototype.showLoss=function(){var _this=this;this.lossTextBox.setVisible(!0).setActive(!0),this.lossTextBox.on("pointerup",(function(){_this.lossTextBox.isTyping?_this.lossTextBox.stop(!0):_this.restart()})),this.lossTextBox.start("You lose! You weren't able to pay for your inventory shipment this month!",30)},HUDScene.prototype.showIntro=function(){this.gameScene.pause(),this.introTextBox.setVisible(!0),this.introTextBox.setActive(!0);this.introTextBox.start("It's the grand opening of \"Shirts for money\"! You don't have any workers or inventory. How can you make ends meet? You have to pay for your inventory shipment soon, try to make some money by talking to customers. \n\nUse the mouse to select the shopkeeper and move him around. Click on objects such as the operating table to interact with them.",30)},HUDScene.prototype.makeAudio=function(){var _this=this;this.sound.volume=.2,this.theme=this.sound.add(AudioKeys.THEME,{loop:!0}),this.theme.play(),this.register=this.sound.add(AudioKeys.REGISTER),this.death=this.sound.add(AudioKeys.SHOPPER_DEATH),this.doors=[AudioKeys.DOOR_1,AudioKeys.DOOR_2].map((function(key){return _this.sound.add(key)})),this.zaps=[AudioKeys.FRANK_ZAP_1,AudioKeys.FRANK_ZAP_2,AudioKeys.FRANK_ZAP_3].map((function(key){return _this.sound.add(key)}))},HUDScene.prototype.checkLose=function(){this.gameScene.gameState.money<0&&this.gameScene.events.emit(GameEvents.LOSS)},HUDScene.prototype.makeListeners=function(){var _this=this,gameState=this.gameScene.gameState;this.gameScene.events.on(GameEvents.PURCHASE_INVENTORY,(function(){console.log("event",GameEvents.PURCHASE_INVENTORY),gameState.money-=_this.stockPrice*_this.nextStockPurchase,gameState.rearInventory+=_this.nextStockPurchase,_this.numStockPurchases++,_this.nextStockPurchase=_this.numStockPurchases*_this.baseStockPurchase,_this.updateMoney(),_this.checkLose(),_this.updateNextStock()})),this.gameScene.events.on(GameEvents.GET_SHIPMENT,(function(quantity){console.log("event",GameEvents.GET_SHIPMENT),gameState.rearInventory+=quantity,_this.updateStock()})),this.gameScene.events.on(GameEvents.ADD_DISPLAY,(function(quantity){console.log("event",GameEvents.ADD_DISPLAY),gameState.frontInventory+=quantity,_this.updateFrontInv()})),this.gameScene.events.on(GameEvents.REDUCE_STOCK,(function(quantity){console.log("event",GameEvents.REDUCE_STOCK),gameState.rearInventory-=quantity,_this.updateStock()})),this.gameScene.events.on(GameEvents.CASH_REGISTER,(function(o){console.log("event",GameEvents.CASH_REGISTER),gameState.frontInventory-=o.inventory,gameState.money+=o.income,_this.numShirtPurchases++,_this.updateMoney(),_this.updateFrontInv(),_this.register.play()})),this.gameScene.events.on(GameEvents.MURDER,(function(shopper){console.log("event",GameEvents.MURDER),gameState.money+=shopper.money,gameState.rearInventory+=shopper.clothes,gameState.frontInventory+=shopper.inventory,_this.gameScene.nShoppers--,_this.updateMoney(),_this.updateStock(),_this.updateFrontInv(),_this.death.play()})),this.gameScene.events.on(GameEvents.RETRIEVE_PARTS,(function(parts){console.log("event",GameEvents.RETRIEVE_PARTS),gameState.bodyParts+=parts,_this.updateBodyParts()})),this.gameScene.events.on(GameEvents.CUSTOMER_LEAVE,(function(){Object(dist.randomFrom)(_this.doors).play(),_this.gameScene.nShoppers--})),this.gameScene.events.on(GameEvents.CUSTOMER_ENTERS,(function(){var sound=Object(dist.randomFrom)(_this.doors);_this.gameScene.nShoppers++,sound.play()})),this.gameScene.events.on(GameEvents.FRANK_BUILT,(function(){_this.numFrankens++,Object(dist.randomFrom)(_this.zaps).play(),_this.updateBodyParts(),_this.updateMoney(),_this.updateStock(),_this.checkLose(),_this.updateWorkers()})),this.gameScene.events.on(GameEvents.LOSS,(function(){_this.gameScene.pause(),_this.showLoss()}))},HUDScene}(Phaser.Scene),main_config={type:phaser.AUTO,width:800,height:600,backgroundColor:4143416,physics:{default:"arcade",arcade:{}},render:{pixelArt:!0,roundPixels:!0},scene:[scenes_GameScene,scenes_HUDScene],scale:{mode:phaser.Scale.FIT,autoCenter:phaser.Scale.CENTER_BOTH,parent:"game"}};new phaser.Game(main_config)}]);
//# sourceMappingURL=bundle.15fe07f68de62750cd60.js.map